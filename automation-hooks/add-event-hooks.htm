<?xml version="1.0" encoding="utf-8"?>
<html MadCap:fileTags="Tags/okta-authors.Mark Cowan" MadCap:conditions="MultiProdPublish.Classic+OIE" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>[%=Heading.Level1%] | Okta</title>
    </head>
    <body>
        <h1>Create an event hook </h1>
        <p>
            <MadCap:annotation MadCap:createDate="2023-03-24T13:38:31.6106017-06:00" MadCap:creator="Mark Cowan" MadCap:initials="MEC" MadCap:comment="For filters GA, move this and the next paragraph under the next section heading. Delete that H2 heading and EA banner and paragarph after. Promote subsequent headings Then delete this section." MadCap:editor="Mark Cowan" MadCap:editDate="2023-05-09T17:47:31.4146051-06:00">After </MadCap:annotation>creating your external  service (your code), you need to connect the external service with <MadCap:variable name="okta-variables.ProductName" /> and enable it for a particular process flow.</p>
        <p>Only super admins can view and configure event hooks. A maximum of 10 event hooks are allowed for each org.
</p>
        <p class="earlyaccess">If you've enabled the Early Access feature <span class="uicontrol">Event Hooks Filters</span>, the event-creation procedure is different. Skip the following steps and go to the next section,<MadCap:xref href="#Create"> Create an event hook with filters</MadCap:xref>.</p>
        <ol>
            <li>
                <MadCap:snippetBlock src="../../Resources/Snippets/task steps/Workflow_EventHook.flsnp" />
            </li>
            <li>Click <span class="uicontrol">Create Event Hook</span>.</li>
            <li>
                <p>Define the following attributes:</p>
                <ul>
                    <li><span class="uicontrol">Name</span>: Enter a descriptive name for the event hook.</li>
                    <li><span class="uicontrol">URL</span>:&#160;Enter the external service's endpoint URL where the event hook sends the request.</li>
                    <li>
                        <p>Optional. For enhanced security and to secure the communication channel between Okta and your external service, add authentication in the following fields:</p>
                        <ul style="list-style-type: circle;">
                            <li><span class="uicontrol">Authentication field</span>: Enter the name of the authorization header.</li>
                            <li><span class="uicontrol">Authentication secret</span>:&#160;Enter the value that corresponds to the field name. </li>
                        </ul>
                    </li>
                    <li>
                        <p>Optional. To create custom proprietary headers for extra authorization security, click <span class="uicontrol">Add Field</span> in the Custom headers area and then complete these fields:</p>
                        <ul style="list-style-type: circle;">
                            <li><span class="uicontrol">Field Name</span>:&#160;optional field name / value pairs to send with the request </li>
                            <li>
                                <p><span class="uicontrol">Value</span>: Enter a value for the field name.</p>
                            </li>
                        </ul>
                    </li>
                    <li><span class="uicontrol">Subscribe to events</span>:&#160;Click inside the text box to show the list of events, and then select the events that you want to add.</li>
                </ul>
            </li>
            <li>Click <span class="uicontrol">Save &amp;&#160;Continue</span>. </li>
            <li>
                <p>In the <span class="wintitle">Verify Endpoint Ownership</span> window, click <span class="uicontrol">Verify</span>. You can verify your hook later, if required.</p>
            </li>
            <p>If Okta successfully verifies the endpoint, it's listed as Active on the event hooks page.</p>
        </ol>
        <h2><a name="Create"></a> Create an event hook with filters</h2>
        <MadCap:snippetBlock src="../../Resources/Snippets/ea-featmgr.flsnp" />
        <MadCap:snippetBlock src="../../Resources/Snippets/event-hook-filter-lead.flsnp" />
        <h3>Add hook details</h3>
        <ol>
            <li>
                <MadCap:snippetBlock src="../../Resources/Snippets/task steps/Workflow_EventHook.flsnp" />
            </li>
            <li>Click <span class="uicontrol">Create Event Hook</span>.</li>
            <li>
                <p>Complete these fields:</p>
                <ul>
                    <li><span class="uicontrol">Endpoint URL</span>:&#160;Enter the external service's endpoint URL where the event hook sends the request.</li>
                    <li><span class="uicontrol">Event Hook name</span>: Enter a unique name for the event hook.</li>
                    <li>
                        <p><span class="uicontrol">Description</span>: Optional. Enter the purpose and a description of the event hook.</p>
                    </li>
                </ul>
            </li>
            <li>
                <p>Optional. For enhanced security and to secure the communication channel between Okta and your external service, add authentication under <span class="wintitle">Enhance security</span>:</p>
                <ul>
                    <li>
                        <p><span class="uicontrol">Authentication field</span>: Enter the name of the authorization header.</p>
                    </li>
                    <li><span class="uicontrol">Authentication secret</span>:&#160;Enter the value that corresponds to the field name. </li>
                </ul>
            </li>
            <li>
                <p>Optional. To create custom proprietary headers for extra authorization security, click <span class="uicontrol">Add Field</span> under Custom headers, and then complete these fields:</p>
                <ul>
                    <li>
                        <p><span class="uicontrol">Field Name</span>: Enter a name for the custom header.</p>
                    </li>
                    <li>
                        <p><span class="uicontrol">Value</span>: Enter a value for the field name.</p>
                    </li>
                </ul>
            </li>
            <li>
                <p>Click inside of text box under <span class="uicontrol">Select Events</span>, and then select the events that you want to add.</p>
            </li>
            <li>
                <p>Click <span class="uicontrol">Create hook &amp; Continue</span> to save the unverified event hook.</p>
            </li>
        </ol>
        <h3>Apply filters to events (optional)</h3>
        <ol>
            <li>
                <p>For each set of events, to filter the number of events that you receive, select <span class="uicontrol">Apply filter</span>.</p>
            </li>
            <li>
                <p>Use the field dropdown menus to create a filter, or click <span class="uicontrol">Use Okta Expression</span> to enter a custom filter. See <MadCap:xref href="event-hooks-el.htm">Okta Expression Language
 and event hooks</MadCap:xref>.</p>
            </li>
            <li>
                <p>Click <span class="uicontrol">Save &amp; Continue</span>.</p>
            </li>
        </ol>
        <h3>Preview (optional)</h3>
        <div class="noteOkta">
            <p class="noteContent">The event hook preview function bypasses any event hook filters. </p>
        </div>
        <ol>
            <li>
                <p>In the <span class="wintitle">Configure Event Hook</span> request section, confirm the name and URL of your event hook are correct.</p>
            </li>
            <li>
                <p>Select an Event Type from the dropdown menu.</p>
            </li>
            <li>
                <p>Select a System Log Event for the Event Type. If no events are available, the preview uses sample JSON.</p>
            </li>
            <li>
                <p>Optional. In the <span class="wintitle">JSON</span> section click <span class="uicontrol">Edit</span> to make changes in the code, and then click <span class="uicontrol">Save</span>.</p>
                <p>When no events are generated for an event type, the Event Hook Preview displays an example event with sample data. Undetermined fields are set to <span class="code">null</span>, which you can replace with custom values for testing.</p>
            </li>
            <li>
                <p>Click <span class="uicontrol">Deliver Request</span> to test the JSON payload for the event hook request. A message displays the status of the event hook request. </p>
            </li>
            <li>
                <p>Click <span MadCap:createDate="2023-03-27T12:56:35.7858268-05:00" MadCap:creator="Graham Smith" MadCap:initials="GS" MadCap:comment="uicontrol" MadCap:editor="Graham Smith" MadCap:editDate="2023-03-27T12:56:37.3791665-05:00" class="uicontrol">Next</span>.</p>
            </li>
        </ol>
        <h3>Activate hook</h3>
        <p>Before you can send an event request to your endpoint, <MadCap:variable name="okta-variables.ProductName" /> must make a one-time GET verification request to your endpoint. <MadCap:variable name="okta-variables.ProductName" /> passes a verification value to your service that it needs to send back, which confirms that you control the endpoint. To understand how endpoint verification works, refer to <a href="https://developer.okta.com/use_cases/event_hooks/#one-time-verification-request">One-Time Verification Request</a> and <a href="https://developer.okta.com/docs/concepts/event-hooks/#verify-your-endpoint">Verifying your endpoint</a>.</p>
        <div class="noteOkta">
            <p class="noteContent">Workflows API URLs don't need to be verified.</p>
        </div>
        <p>If your external service code is ready to verify the event hook, click <span class="uicontrol">Verify</span>. Or click <span class="uicontrol">Do it later</span>.</p>
        <p>When Okta successfully verifies the endpoint, it's listed as Active on the <span MadCap:createDate="2023-03-27T12:57:40.2020182-05:00" MadCap:creator="Graham Smith" MadCap:initials="GS" MadCap:comment="should this be capitalized and formatted?" MadCap:editor="Graham Smith" MadCap:editDate="2023-03-27T12:57:47.9261338-05:00" class="wintitle">Event Hooks</span> page.</p>
        <div class="noteOkta">
            <p class="noteContent">It may take several minutes before events are sent to the event hook after it’s created or updated. </p>
        </div>
        <h2> Related topics</h2>
        <p>
            <MadCap:xref href="verify-event-hooks.htm">Verify your endpoint</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="event-hooks-preview.htm">Event hook preview</MadCap:xref>
        </p>
        <p>&#160;</p>
    </body>
</html>