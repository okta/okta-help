<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:fileTags="Tags/okta-authors.Mark Cowan"
      MadCap:conditions="MultiProdPublish.Classic+OIE">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
   </head>
   <body>
      <div>
         <h1>Add a new automation</h1>
         <p>Add a new automation by configuring its parameters. </p>
         <h2>Before you begin</h2>
         <p>Review the following information:</p>
         <ul>
            <li>
               <p>You must be a super, org, or mobile admin to add an automation. Only super admins can manually change the lifecycle state of another super admin.</p>
            </li>
         </ul>
         <ul>
            <li>
               <p>Depending on the size of your org, there may be a 24-hour delay between when your automation begins evaluating conditions and when the actions are run.</p>
            </li>
            <li>
               <p>User sign-in activity is not updated when users sign-in through a service-provider. Sign in activity is only updated when signing-in using the <span class="wintitle">Okta End-User Dashboard</span>. The <span class="uicontrol">Last Login</span> field of the <span class="uicontrol">Application Usage</span> report is not updated with service-provider sign ins and can cause users to be incorrectly deactivated.</p>
            </li>
         </ul>
         <ul>
            <li>
               <p>Automations for active users. See <MadCap:xref href="automations-main.htm">Automations.</MadCap:xref>
               </p>
            </li>
            <li>
               <p>Automations for inactive users. See <MadCap:xref href="automations-main.htm">Automations</MadCap:xref>.</p>
            </li>
         </ul>
         <ol>
            <li>In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Workflow</span>
                  <span class="uicontrol">Automations</span>
               </span>.</li>
            <li>Click <span class="uicontrol">Add Automation</span> and enter a name for the automation. Click <span class="uicontrol">Save</span>.</li>
            <li>
               <p>Configure the parameters of the default conditions:</p>
               <ul>
                  <li> Click <span class="uicontrol">Edit</span> next to <span class="uicontrol">Select a schedule </span> and select a time zone and then configure the time when the automation will run. The default selection is set to Run daily, with a creation time stamp of the local time zone. For time zones, country or city names mentioned in the official <a href="https://www.iana.org/time-zones"
                        title="Time Zone Database"
                        alt="Time Zone Database">Time Zone Database</a> published by the Internet Assigned Numbers Authority (IANA) are admissible. </li>
               </ul>
               <ul>
                  <li>Click <span class="uicontrol">Edit</span> next to <span class="uicontrol">Select group membership</span>,  and enter one or more groups to which the automation will apply. Click <span class="uicontrol">Save</span>. The automation will apply to all members of the group, regardless of whether they are <MadCap:variable name="okta-variables.ProductName"/>-sourced, Active Directory or HR-sourced.</li>
               </ul>
            </li>
            <li>Configure one or more new conditions. Click <span class="uicontrol">Add Condition</span> and select one or both of the following conditions. </li>
            <ul>
               <li>
                  <span class="uicontrol">User Inactivity in Okta</span>: This option looks for active users who haven’t logged into <MadCap:variable name="okta-variables.ProductName"/> for a set number of days. Because application session lengths can vary, this option does not check if the user is active in  apps that they log into through <MadCap:variable name="okta-variables.ProductName"/>.  For this reason, <MadCap:variable name="okta-variables.ProductName"/> recommends setting the duration to be the same as or higher than the application length configuration. For more information about active user accounts, see <MadCap:xref href="../Users-Groups-Profiles/usgp-end-user-states.htm">About user account states.</MadCap:xref>
               </li>
            </ul>
            <ul>
               <li>
                  <span class="uicontrol">User password expiration:</span> This option looks for users whose <MadCap:variable name="okta-variables.ProductName"/>-stored passwords will expire within a set number of days. Users who meet this condition are impacted by the  automation only once. To remind the user again as the expiration date approaches, you need to create an extra <span class="wintitle">User password expiration</span> automation. Although this option isn’t designed to work with your Active Directory integration, it can provide you with limited functionality. </li>
            </ul>
            <li MadCap:conditions="Primary.do-not-publish">Configure one or more actions to be triggered by the conditions that you set. Each action is run independently from the other actions and doesn’t run in any particular sequence. Actions are run one time after all conditions are met. </li>
            <li>Configure one or more actions to be triggered by the conditions you set. Each action is run independently from the other actions and doesn’t run in any particular sequence.  Actions are run one time after all conditions are met. The following actions are currently available:<ul>
                  <li>
                     <span class="wintitle">Send email to the user</span>: This option enables you to create an email template by using HTML and referencing Okta end-user profile attributes within the body of the message. The Subject is required before you can Preview and Save the action. If you don't use HTML, the email does not have any formatting and extra spaces and line returns aren’t preserved.<div class="noteOkta">
                        <p class="noteContent">The email automation is performed once on the same user for a period of 30 days.</p>
                     </div>
                  </li>
                  <li>
                     <span class="wintitle">Change  user lifecycle state</span>: This option enables you to change the user lifecycle to Suspended, Deactivated, or Deleted. Users who are manually reactivated or unsuspended must log in or they will be impacted by the next automation cycle. Setting the <span class="wintitle">Change user lifecycle state in <MadCap:variable name="okta-variables.ProductName" style="font-weight: bold;"/>
                     </span> to <span class="uicontrol">Deleted</span> is irreversible.</li>
               </ul>
               <img src="../../Resources/Images/lca-autmations-emails.png"
                    MadCap:targetName="lca-automations-email"
                    style="max-width: 75%;"/>
            </li>
            <li>Select <span class="uicontrol">Activate</span> from the <span class="uicontrol">Inactive/Active</span> drop-down.<p>The Activate option becomes available after you configure all the required conditions and at least one action. </p>
               <p>
                  <img src="../../Resources/Images/lca-automations-activate.png"
                       MadCap:targetName="lca-automations-activate"
                       style="max-width: 80%;"/>
               </p>
               <p>Active automations are run using the configured schedule settings for that automation, except for email automation, which is performed once on the same user for a period of 30 days. To edit an automation, deactivate it first.</p>
            </li>
         </ol>
      </div>
   </body>
</html>
