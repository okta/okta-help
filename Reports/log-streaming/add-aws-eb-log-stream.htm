<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Mark Cowan">
    <head><title>[%=Heading.Level1%]</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Add an AWS EventBridge log stream in Okta and configure it in AWS console to send System Log events to AWS EventBridge." />
    </head>
    <body>
        <h1>Add an <MadCap:variable name="3rd Party Integrations.AWS EventBridge" /> log stream</h1>
        <p>To send <MadCap:variable name="okta-variables.ProductName" /> System Log events to <MadCap:variable name="3rd Party Integrations.Amazon EventBridge" />, you must add an <MadCap:variable name="3rd Party Integrations.AWS EventBridge" /> log stream in <MadCap:variable name="okta-variables.ProductName" /> and configure it in the AWS console.</p>
        <h2>Prerequisites</h2>
        <ul>
            <li>
                <p>You’re signed in to <MadCap:variable name="okta-variables.ProductName" /> as a super admin.</p>
            </li>
            <li>
                <p>Optional (recommended). You know the AWS region of your <MadCap:variable name="okta-variables.ProductName" /> org’s deployment. You can contact <MadCap:variable name="okta-variables.ProductName" /> Support to find out your AWS region.</p>
            </li>
            <li>
                <p>You have the AWS account ID and region information for your <MadCap:variable name="3rd Party Integrations.AWS EventBridge (shortform)" /> target.</p>
            </li>
            <li>
                <p>You have appropriate permissions to configure <MadCap:variable name="3rd Party Integrations.AWS EventBridge (shortform)" /> to receive SaaS partner events as described in the <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html" target="_blank">AWS documentation</a>.</p>
            </li>
        </ul>
        <h2>Add an <MadCap:variable name="3rd Party Integrations.AWS EventBridge" /> log stream </h2>
        <ol>
            <li>
                <p>
                    <MadCap:snippetText src="../../../Resources/Snippets/task steps/Reports_LogStreaming.flsnp" /> This page shows all log stream targets available in your org.</p>
            </li>
            <li>
                <p>Click <span class="uicontrol">Add Log Stream</span> to start the log stream wizard.</p>
            </li>
            <li>
                <p>Select <span class="uicontrol"><MadCap:variable name="3rd Party Integrations.AWS EventBridge" style="font-weight: normal;"></MadCap:variable></span> from the catalog. Click <span class="uicontrol">Next</span>.</p>
            </li>
            <li>
                <p>Fill in the configuration details for your <MadCap:variable name="3rd Party Integrations.AWS EventBridge" /> log stream:</p>
                <ul>
                    <li>
                        <p><span class="uicontrol">Name</span>: Provide a unique name for this log stream in <MadCap:variable name="okta-variables.ProductName" />.</p>
                    </li>
                    <li>
                        <p><span class="uicontrol">AWS Event Source Name</span>: Provide a unique name without any special characters or spaces to identify this event source in <MadCap:variable name="3rd Party Integrations.Amazon EventBridge" />.</p>
                    </li>
                    <li>
                        <p><span class="uicontrol">AWS account ID</span>: The 12-digit account identifier provided by AWS.</p>
                    </li>
                    <li>
                        <p><span class="uicontrol">AWS region</span>: Select the AWS region closest to your <MadCap:variable name="3rd Party Integrations.AWS EventBridge (shortform)" /> target. Closer geographic regions mean faster stream connection. To send the same events to multiple regions, you must create multiple log stream targets.</p>
                    </li>
                </ul>
            </li>
            <li>
                <p>Click <span class="uicontrol">Save</span>. You receive a confirmation message.</p>
            </li>
        </ol>
        <p>The log stream that you just added appears on the Log Streaming page with its status as <span class="uicontrol">Active</span>.  </p>
        <h2>Configure the <MadCap:variable name="3rd Party Integrations.Amazon EventBridge" /> log stream in the AWS console</h2>
        <p>Configure your <MadCap:variable name="3rd Party Integrations.Amazon EventBridge" /> log stream to accept partner events from <MadCap:variable name="okta-variables.ProductName" />.<br /></p>
        <ol>
            <li>
                <p>In the AWS console, go to <MadCap:variable name="3rd Party Integrations.Amazon EventBridge" />.</p>
            </li>
            <li>
                <p>Select <span class="uicontrol">Partner event sources</span> from the Integration section of the navigation panel.</p>
            </li>
            <li>
                <p>If you successfully activated an <MadCap:variable name="3rd Party Integrations.AWS EventBridge" /> log stream in <MadCap:variable name="okta-variables.ProductName" />, you should see a partner event source in the Pending status with a name following the format:</p><span class="codeblock">aws.partner/okta.com/yourOktaSubdomain/yourAWSEventSourceName</span>
            </li>
            <li>
                <p>Select the log stream and click <span class="uicontrol">Associate with an event bus</span>.</p>
            </li>
            <li>
                <p>Select the required permissions for the log stream on the <span class="wintitle">Associate with event bus</span> page. Click <span class="uicontrol">Associate</span>. Your partner event source is active and events are available in the corresponding event bus.</p>
            </li>
            <li>
                <p>Select <span class="uicontrol">Rules</span> from the Events section of the navigation panel. </p>
            </li>
            <li>
                <p>Follow the <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html#eb-create-rule-partner-events">instructions in the AWS documentation</a> to create a rule to match Okta events, including the following settings: </p>
                <ul>
                    <li>
                        <p>For Event source, select <span class="uicontrol">AWS events or EventBridge partner events</span>.</p>
                    </li>
                    <li>
                        <p>For Creation method, select <span class="uicontrol">User pattern form</span>. </p>
                    </li>
                </ul>
                <p>You'll then be able to select Okta from the list of EventBridge partners. </p>
            </li>
            <li>
                <p>Perform an action in <MadCap:variable name="okta-variables.ProductName" /> to generate an event, such as signing in or out of the Admin Console. Refer to your AWS documentation to find the log containing the corresponding events within the event bus. </p>
            </li>
        </ol>
        <h2>Example event</h2>
        <div class="noteOkta">
            <p class="noteContent">The Okta System Log event is contained within the <span class="code">detail</span> object. Okta doesn't control the EventBridge event structure. For more information, see <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-events.html">Amazon EventBridge events</a>.</p>
        </div>
        <MadCap:codeSnippet>
            <MadCap:codeSnippetCopyButton />
            <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">{
    "version": "0",
    "id": "4ab6d852-09e9-1036-fc04-2e22004b3c3f",
    "detail-type": "SystemLog",
    "source": "aws.partner/okta.com/evership/evershipsecuritylake",
    "account": "999999999999",
    "time": "2023-05-30T14:17:58Z",
    "region": "us-east-1",
    "resources": [],
    "detail": {
        "actor": {
            "id": "00uttidj04jqI21bA1d6",
            "type": "User",
            "alternateId": "user@evership.biz",
            "displayName": "A User",
            "detailEntry": null
        },
        "client": {
            "userAgent": {
                "rawUserAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36",
                "os": "Mac OS X",
                "browser": "CHROME"
            },
            "zone": "null",
            "device": "Computer",
            "id": null,
            "ipAddress": "127.0.0.1",
            "geographicalContext": {
                "city": "Fictionville",
                "state": "Pennsylvania",
                "country": "United States",
                "postalCode": "19513",
                "geolocation": {
                    "lat": 41.1286,
                    "lon": -73.4835
                }
            }
        },
        "device": null,
        "authenticationContext": {
            "authenticationProvider": null,
            "credentialProvider": null,
            "credentialType": null,
            "issuer": null,
            "interface": null,
            "authenticationStep": 0,
            "externalSessionId": "102BoThue9qT2uRBdaO_Z9msg"
        },
        "displayMessage": "User accessing Okta admin app",
        "eventType": "user.session.access_admin_app",
        "outcome": {
            "result": "SUCCESS",
            "reason": null
        },
        "published": "2023-05-30T14:17:58.126Z",
        "securityContext": {
            "asNumber": 6167,
            "asOrg": "verizon",
            "isp": "verizon",
            "domain": "myvzw.com",
            "isProxy": false
        },
        "severity": "INFO",
        "debugContext": {
            "debugData": {
                "requestId": "ZHYFlX6QY0rHqq1oihP7CwAACSI",
                "dtHash": "e463841eed07369aeb7ace43a41fcef75ccefa573ced0420039c16b0e3d7cc99",
                "requestUri": "/admin/sso/callback",
                "url": "/admin/sso/callback?code=******&amp;state=vdC6CnQXeZqyxBJKBVmtej9wMnF4nM1r"
            }
        },
        "legacyEventType": "app.admin.sso.login.success",
        "transaction": {
            "type": "WEB",
            "id": "ZHYFlX6QY0rHqq1oihP7CwAACSI",
            "detail": {}
        },
        "uuid": "c6ed294a-fef4-11ed-a5b1-bbb7c1de1a4b",
        "version": "0",
        "request": {
            "ipChain": [
                {
                    "ip": "127.0.0.1",
                    "geographicalContext": {
                        "city": "Fictionville",
                        "state": "Pennsylvania",
                        "country": "United States",
                        "postalCode": "19513",
                        "geolocation": {
                            "lat": 41.1286,
                            "lon": -73.4835
                        }
                    },
                    "version": "V4",
                    "source": null
                }
            ]
        },
        "target": [
            {
                "id": "00uttidj04jqI21bA1d6",
                "type": "AppUser",
                "alternateId": "user@evership.biz",
                "displayName": "A User",
                "detailEntry": null
            }
        ]
    }
}</MadCap:codeSnippetBody>
        </MadCap:codeSnippet>
        <h2>Related topics</h2>
        <p>
            <MadCap:xref href="edit-target-status.htm">Edit the status of your log stream</MadCap:xref>
        </p>
    </body>
</html>