<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/architecture.htm" /> <title>[%=Heading.Level1%] | Okta</title><meta name="description" content="Okta provides an example Access Gateway architecture to learn how your organization can deploy a high availability Access Gateway instance." /></head>
    <body>
        <h1>Example architecture</h1>
        <p>The Access Gateway solution is implemented within a customer’s infrastructure, and can be deployed in the cloud, on-premises, or within a hybrid solution. It’s provided by Okta as an Open Virtual Appliance.</p>
        <h2>Example Architecture</h2>
        <p>
            <img src="../../Resources/Images/access-gateway/architecture.png" alt="Example Architectures" id="img_new" />
        </p>
        <h2>High Availability</h2>
        <p>You can achieve high availability by using a load balancer.  Okta recommends that the <MadCap:variable name="okta-feature-names.Access Gateway" /> replication configuration for the load balancer use DNAT and session persistence using a hash of source IP address and source port or cookies. See <MadCap:xref href="about-load-balancers.htm">Load balancers</MadCap:xref> for information on how <MadCap:variable name="okta-feature-names.Access Gateway" /> uses load balancers.</p>
        <p>Additionally, the load balancer should perform health checks using ICMP or HTTPS with HTTP keepalives enabled for a duration that exceeds the health check interval.</p>
        <p><MadCap:variable name="okta-feature-names.Access Gateway" />uses the term node to refer to instances of the gateway with the same configuration. These nodes typically serve as fallbacks for each other. </p>
        <p>A group of <MadCap:variable name="okta-feature-names.Access Gateway" /> instances within a given infrastructure is referred to as a cluster. In order for the <MadCap:variable name="okta-feature-names.Access Gateway" /> instances to properly replicate their configuration, all instances within the cluster must be able to communicate with each other. <MadCap:variable name="okta-feature-names.Access Gateway" /> cluster members communicate using SSH over port 22 and initially HTTPS over port 443.</p>
        <p>See Firewall and access requirements in <MadCap:xref href="about-oag-prereqs.htm">[%=okta-feature-names.Access Gateway%] deployment prerequisites</MadCap:xref>.</p>
        <p>Contact <a href="https://support.okta.com/help/s/">Okta Support</a> if you require any additional details or information on load balancing and high availability techniques.</p>
        <h2>Disaster Recovery</h2>
        <p>You can achieve disaster recovery (DR)  by leveraging Global Server Load Balancing (GSLB) or modifying public and private IP address assignments. </p>
        <div class="noteOkta">
            <p class="noteContent">Protected applications must be available as part of the disaster recovery solution and <MadCap:variable name="okta-feature-names.Access Gateway" /> must have access to the protected disaster recovery applications.</p>
        </div>
        <h2>External Access</h2>
        <p>All external (internet-based) end users must have access to both the primary production and disaster recovery solutions. Okta recommends that you leverage DNAT to increase <MadCap:variable name="okta-feature-names.Access Gateway" />'s ability to provide accurate audit logs on the correct origins of the user.</p>
        <h2>Admin Console Considerations</h2>
        <p>The <MadCap:variable name="okta-feature-names.Access&#160;Gateway UI" /> hostname should not be resolvable using public DNS. It should only be resolvable through internal DNS, such as split DNS.</p>
    </body>
</html>