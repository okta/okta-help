<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/monitoring-metrics-call.htm" />
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Test Metrics&#160;monitoring with REST</h1>
        <p>The <MadCap:variable name="okta-feature-names.Access Gateway" /> <span class="code">/metrics</span> REST&#160;API&#160;endpoint is used to return node-specific metrics. To perform a metrics request, specify the following parameters:</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Protocol</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">HTTPS</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Request</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">GET</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">IP</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">IP Address of admin or worker node</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2" MadCap:conditions="Primary.do-not-publish">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">With header</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2">Host: Your gateway's host. See <MadCap:xref href="initialize-access-gateway-admin-ui-console.htm">Initialize the [%=okta-feature-names.Access&#160;Gateway UI%]</MadCap:xref>.</td>
                </tr>
            </tbody>
        </table>
        <p>Available options:</p>
        <ul>
            <li><span class="code">-X&#160;GET</span>: Optional. Defaults to a get request.</li>
            <li><span class="code">-v</span>: Verbose. Optional</li>
            <li><span class="code">-k</span>: Insecure</li>
            <li MadCap:conditions="Primary.do-not-publish"><span class="code">-H 'Host:gw.{yourgateway.tld}'</span>: Replace with your gateway name</li>
        </ul>
        <p>The following curl example requests the status of the 10.0.0.10 node using the <span class="code">/metrics</span> endpoint using an IP&#160;address:</p>
        <MadCap:codeSnippet MadCap:conditions="Primary.do-not-publish">
            <MadCap:codeSnippetCopyButton />
            <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">curl -X GET -v -k -H 'Host:gw.atko.biz' https://10.0.0.225:8889/metrics</MadCap:codeSnippetBody>
        </MadCap:codeSnippet>
        <MadCap:codeSnippet>
            <MadCap:codeSnippetCopyButton />
            <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">curl -X GET -v http://10.0.0.10:8889/metrics</MadCap:codeSnippetBody>
        </MadCap:codeSnippet>
		The following curl example requests the status of the 10.0.0.10 node using the <span class="code">/metrics</span> endpoint using a domain name: 
        <MadCap:codeSnippet><MadCap:codeSnippetCopyButton /><MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">curl -X GET -v http://gw.atko.com:8889/metrics</MadCap:codeSnippetBody></MadCap:codeSnippet> <h3>On success</h3><p>The request returns 200 on success followed by the current set of metrics. See <MadCap:xref href="monitoring-metrics-results.htm">Supported metrics</MadCap:xref> for more information.</p><span class="codeblock">#HELP OAG_go_goroutines Number of goroutines that currently exist.
#TYPE OAG_go_goroutines gauge
OAG_go_goroutines 7
. . . 
# HELP OAG_syslog_ng_service_state The current state of syslog_ng service
# TYPE OAG_syslog_ng_service_state gauge
OAG_syslog_ng_service_state 1</span><h3>On error</h3><p>The request returns 404 if it times out or if there's an error. </p><span class="codeblock">404 page not found</span><div><h3>Next steps</h3><p><MadCap:xref href="monitoring-metrics-conf-prometheus.htm">Configure Prometheus</MadCap:xref></p></div></body>
</html>