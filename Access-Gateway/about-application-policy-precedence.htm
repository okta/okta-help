<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/about-application-policy-precedence.htm" />
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Use Application Policies to control access to company resources." />
    </head>
    <body>
        <h1>Application policy <span class="uicontrol">Resource Path</span> precedence</h1>
        <p><MadCap:variable name="okta-feature-names.Access Gateway" /> applications can have multiple policies. Each policy is associated with a Resource path containing a URI, a rule type and other information. When a request is received for application with multiple policies, policies are evaluated in precedence order. </p>
        <p>In general, policies are evaluated in the following order:</p>
        <ul>
            <li>Custom policy - Custom policies are evaluated first, in the order in which they were entered chronologically. &#160;First added to most recent.</li>
            <li>Longest to shortest - For example <span class="code">/a/b/c</span> is evaluated before <span class="code">/a/b</span>. </li>
            <li>Training or not trailing slash - Resource path ending with <span class="code">/</span>(slash) are treated as exact match. Resource paths not ending with <span class="code">/</span>(slash) are treated as a prefix. <br />For example: <span class="code">/rest</span> matches <span class="code">/restaurant</span>, <span class="code">/rest/</span> does not. </li>
            <li>For policies of the same length , case sensitive policies are evaluated before case insensitive policies. <br /></li>
            <li>Default policy, specified by <span class="code">'/'</span> is applied.</li>
        </ul>
        <p>The following are example policy URI and their behavior:</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <thead>
                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">URI rule and example</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Case sensitive</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Case insensitive</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Custom</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" colspan="2">Evaluated before all other URIs policies. <br />Evaluated in order originally entered.<br />May include regular expressions in <span class="uicontrol">Resource Path</span>. .</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">URI rule: <span class="code">/a/b/C</span><br />Example:<span class="code">/a/b/C</span></td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><span class="code">/a</span> - does not match.
<br /><span class="code">/a/b</span> - does not match.<br /><span class="code">/a/b/c</span> - does not match.</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><span class="code">/a</span> - does not match.<br /><span class="code">/a/b</span> - does not match.<br /><span class="code">/a/b/c</span> - matches if no case sensitive rule.<br /><span class="code">/a/b/C</span> - matches</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>URI rule: <span class="code">/a/b/C</span><br />Example:<span class="code">/a/b/c</span></p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p><span class="code">/a</span> - does not match.<br /><span class="code">/a/b</span> - does not match.<br /><span class="code">/a/b/c</span> - matches</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <p><span class="code">/a</span> - does not match.<br /><span class="code">/a/b</span> - does not match.<br /><span class="code">/a/b/c</span> - matches if no case sensitive rule.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">URI rule: <span class="code">/a/b</span><br />Example:<span class="code">/a/b</span></td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><span class="code">/a</span> - does not match.<br /><span class="code">/a/b</span> - matches.</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><span class="code">/a</span> - does not match.<br /><span class="code">/a/b</span> matches if no case sensitive rule.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>URI rule: <span class="code">/a</span><br />Example: <span class="code">/a</span></p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p><span class="code">/a</span>- matches.<br /><span class="code">/A</span> - does not match.<br /><span class="code">/a/b</span> - does not match.</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <p><span class="code">/a</span> - matches if no case sensitive match.<br />/A - matches.<br /><span class="code">/a/b</span> does not match.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">Default ("/") rule</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2" colspan="2">&#160; Matches anything not matched by a prior rules.</td>
                </tr>
            </tbody>
        </table>
        <p>By default <span class="code">/uri</span> is a considered a prefix and matches any path starting with /uri.<br />By default <span class="code">/uri/</span> (ending with a trailing slash) is an exact match and only matches the exact URI string. </p>
        <p>Additional examples, shown in order of precedence.</p>
        <table class="TableStyle-srb_header_alt_shade" style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <thead>
                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                        <p>URI</p>
                    </th>
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                        <p>Case sensitive</p>
                    </th>
                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">
                        <p>Comment</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p><span class="code">/a/b/c</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>Yes</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <p>Case sensitive has higher precedence then the same URI insentive.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p><span class="code">/a/b/c</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>No</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p><span class="code">/a/f</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>Yes</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" rowspan="2">
                        <p>Both marked case sensitive, same number of elements (two) sorted lexicographically.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p><span class="code">/a/b</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>Yes</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p><span class="code">/a/e</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>No</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" rowspan="2">
                        <p>Both marked case insensitive, same number of elements (two) sorted lexicographically, but after case sensitive two element rules.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p><span class="code">/a/b</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>No</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                        <p><span class="code">/a</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                        <p>No</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                    </td>
                </tr>
            </tbody>
        </table>
        <p>In general, sorting order is determined by:</p>
        <ol>
            <li>Custom policies: Custom policies are evaluated first and within custom policies evaluated in order entered.</li>
            <li>Total number of elements in URI: For example <span class="code">/a/b/c</span> has three elements split by  "<span class="code">/</span>" (forward slash) in resource path.</li>
            <li>Case sensitivity: Case sensitive policies sort above case insensitive policies with the same number of elements.</li>
            <li>Lexicographic order: Policies are then ordered alphabetically. </li>
        </ol>
        <h2>Policies and upgrade</h2>
        <p>Prior to <MadCap:variable name="okta-feature-names.Access Gateway" /> v<MadCap:variable name="oag-versions.2021-01" /> all policies were treated as case sensitive. During upgrade, all policies are marked as case sensitive to reflect past behavior. New policies, added post upgrade, will default to case insensitive and will need to be explicitly marked case sensitive, if required.</p>
    </body>
</html>