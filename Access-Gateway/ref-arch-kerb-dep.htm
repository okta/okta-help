<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Primary.deprecated" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/ref-arch-kerb.htm" />
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Kerberos application reference architecture</h1>
        <p>To make things easier for employees, many organizations have developed applications to use Kerberos. This may also be referred to as SPNEGO (Simple and Protected GSSAPI Negotiation Mechanism or Kerberos over HTTPS), Windows Integrated Authentication, or Windows Desktop Authentication or Windows SSO.</p>
        <p> This allows an employee logged into their Windows desktop easy access to an application without being prompted for their Active Directory (AD) credentials.   Many other third party applications from both Microsoft and other vendors have also adapted their solutions to use  Kerberos for authentication.  While this has worked well for many years, users are much more mobile in today’s works and use a variety of devices, and locations and are not always are logged into a Windows device connected to an AD domain.  <MadCap:variable name="okta-feature-names.Access Gateway" />can be used to bridge the gap between the modern mobile workforce and these applications built around Windows authentication.<br />In this scenario, Okta first logs the user in, possibly using the users AD credentials, or a MFA token, and then the user proxies through the <MadCap:variable name="okta-feature-names.Access Gateway" /> to the application that is designed for Windows Kerberos authentication. <MadCap:variable name="okta-feature-names.Access Gateway" /> reaches out to a Windows Kerberos cluster and through an established trust, can have the Windows Kerberos cluster create a token for the user, and then insert that token into the HTTP headers which is passed to the application.  The result is the application sees the token, and identifies who the user is, and the application does not need to be changed when adding it behind Okta.</p>
        <p>Additionally users can now access that application using non domain joined devices including mobile browsers. If the <MadCap:variable name="okta-feature-names.Access Gateway" /> is deployed in the DMZ, and is publicly accessible, these users do not need to VPN into the network in order to access the application.</p>
        <div>
            <h3>Topics</h3>
            <ul>
                <li>
                    <MadCap:xref href="#Approach">Approach</MadCap:xref>
                </li>
                <li>
                    <MadCap:xref href="#architectures">[%=okta-feature-names.Access Gateway%] architectures</MadCap:xref>
                </li>
            </ul>
        </div>
        <h2><a name="Approach"></a>Approach</h2>
        <div>
            <p>To deploy <MadCap:variable name="okta-feature-names.Access Gateway" /> to secure applications in an environment described above, it is best to begin deployment of a base architecture and then add specific features as needed.  This methodology will allow an organization to begin moving forward in an agile fashion and not become overly bogged down in requirements analysis.</p>
            <p>Key steps in determining an overall architecture include:</p>
            <ul>
                <li>Identify how applications are to be integrated with Okta and <MadCap:variable name="okta-feature-names.Access Gateway" />.  Typical  integrations include:   <ul style="list-style-type: circle;"><li>Single kerberos/Windows IIS&#160;application</li><li><a href="add-generic-header-app.htm">Header based</a></li><li><a href="add-app-saml-pass-thru.htm">SAML </a><br /></li><li><a href="integrate-apps.htm">Others</a></li></ul></li>
                <li>Identify how many users will access the applications and how often. This will help determine how many instances of <MadCap:variable name="okta-feature-names.Access Gateway" /> are required, what number of load balancers are necessary and generally how the architecture components will be distributed. </li>
                <li>Identify which applications should be accessible through <MadCap:variable name="okta-feature-names.Access Gateway" /> from the internet and which should require the user have access to the internal network. Typically this starts as a subset of applications, and expands over time.</li>
                <li>Identify and work with the AD team to get the proper system accounts and trusts / keytabs. </li>
                <li>Identify all AD infrastructure to determine the connections from <MadCap:variable name="okta-feature-names.Access Gateway" /> to AD and the Windows Kerberos ticketing infrastructure.  </li>
            </ul>
        </div>
        <h2><a name="architectures"></a> <MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos architectures</h2>
        <p><MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos installations can be deployed in any number of possible combinations. Common architecture are:</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Single <MadCap:variable name="okta-feature-names.Access Gateway" />instance</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">The simple kerberos instance  <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" />. This architecture represents a baseline for development and testing. </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Simple Kerberos cluster</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">The simple kerberos cluster  <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" />. <br />This architecture extends the single Kerberos instance by adding<MadCap:variable name="okta-feature-names.Access Gateway" /> cluster.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Kerberos cluster</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">The kerberos cluster   <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" /> and a redundant Kerberos cluster providing capacity and fault tolerance on the Kerberos side..</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">Multiple Kerberos domain</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2">The multiple kerberos domain    <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" /> and multiple Kerberos trusted domains.</td>
                </tr>
            </tbody>
        </table>
        <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-funct-areas.flsnp" />
        <ul class="tabs" data-tabs="data-tabs" data-deep-link="true" id="oag-ref-arch-ciam">
            <li class="tabs-title is-active"><a href="#tab1" aria-selected="true">Single instance</a>
            </li>
            <li class="tabs-title"><a href="#tab2">Single cluster</a>
            </li>
            <li class="tabs-title"><a href="#tab3">Single domain/cluster</a>
            </li>
            <li class="tabs-title"><a href="#tab4">Multi-domain/cluster</a>
            </li>
        </ul>
        <div class="tabs-content" data-tabs-content="oag-ref-arch-ciam">
            <div class="tabs-panel is-active" id="tab1">
                <div style="background-color: #f7f7f7;">
                    <p>The simple Kerberos instance <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" />. It represents a baseline or starting point for other architectures.</p>
                    <div>
                        <p> This architecture is designed to meet the following requirements:</p>
                        <ul>
                            <li>Protect a Kerberos (Windows IIS) based service.</li>
                            <li>Provide a baseline for testing and development.</li>
                        </ul>
                    </div>
                    <div>
                        <h2>Benefits and drawbacks</h2>
                        <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
                            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                            <thead>
                                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th>
                                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                                        <ul>
                                            <li>Simple installation</li>
                                            <li>Baseline for testing, proof of concept etc.</li>
                                            <li>Can be used to replace VPN </li>
                                        </ul>
                                    </td>
                                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                                        <ul>
                                            <li>Not fault tolerant.</li>
                                            <li>No load balancing or high availability.</li>
                                            <li>Not intended for production.</li>
                                            <li>Administration server access requires SSH port 22, and HTTPS ports 443, be open. See <MadCap:xref href="about-oag-prereqs.htm">Prerequisites for deploying [%=okta-feature-names.Access Gateway%]</MadCap:xref> for details.</li>
                                        </ul>&#160;</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <h3>Architecture</h3>
                    <p>
                        <img src="../../Resources/Images/access-gateway/ref-arch-kerb-0.png" id="img_new" class="thumbnail" />
                    </p>
                    <h3>Components</h3>
                    <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
                        <col class="TableStyle-srb_header_alt_shade-Column-Column1" style="width: 159px;" />
                        <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                        <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                        <thead>
                            <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                                <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                                    <p>Location</p>
                                </th>
                                <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th>
                                <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4">
                                    <p>External internet</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Web clients</td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                                    <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-client-description.flsnp" />
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                    <p><span class="url">consumer-app1.example.com</span>
                                    </p>
                                    <p>URLs not shown </p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                                    <p>URL representing the application an external web client would enter to access one of the applications secured by <MadCap:variable name="okta-feature-names.Access Gateway" />. Typically all URLs of this nature are served by, and resolve to, the <MadCap:variable name="okta-feature-names.Access Gateway" /> instance.</p>
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Okta org</td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                                    <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-okta-description.flsnp" />
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Okta org Universal Directory</td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                                    <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/reference-arch-desc-oktaud.flsnp" />
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                    <p>Firewall</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                    <p>External internet to DMZ</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                                    <p>Traditional firewall between the external internet and the DMZ hosting <MadCap:variable name="okta-feature-names.Access Gateway" />.</p>
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                    <p>DMZ</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" />
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                                    <p><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ is used to provide access to applications used by  external internet clients.</p>
                                    <p>Contains a Kerberos service and a&#160;keytab.</p>
                                    <p>See <MadCap:xref href="add-app-kerberos-create-keytab.htm">Create keytab</MadCap:xref> for details of creating a keytab.</p>
                                    <p>See <MadCap:xref href="add-app-kerberos-add-ker-service.htm">Add Kerberos service</MadCap:xref> for details of defining a <MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos service. </p>
                                    <p>Typically hosted in a virtual environment such as Amazon Web Services, MS&#160;Azure, Oracle OCI or something similar. See <MadCap:xref href="manage-deployment.htm">Manage [%=okta-feature-names.Access Gateway%] deployment</MadCap:xref>.</p>
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                    <p>Firewall</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                    <p>DMZ to internal firewall</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                                    <p>Traditional firewall between&#160;DMZ and the internal network.</p>
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="3">
                                    <p>Internal network</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Service/Protected application</td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                                    <p>The set of protected web resources, in this case Microsoft Services, accessed using the <span class="url">consumer-app1.internal-example.com</span> URLs. </p>
                                    <p>Supported versions:<br /></p>
                                    <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/supported-app-version-microsoft.flsnp" />
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                                    <p>Microsoft domain service instance with Key Distribution Center</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                                    <p>Domain service containing a Key Distribution Center (KDC). Typically a KDC uses an Active Directory database as its credential backing store.</p>
                                    <p>During runtime operation, the KDC instance services requests for Kerberos tickets which are then used with Kerberos enabled services such as Microsoft IIS.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div>
                        <h2>Other considerations</h2>
                        <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-simple-0-other-considerations.flsnp" />
                    </div>
                </div>
            </div> <!-- end tab 1 --><div class="tabs-panel" id="tab2"><div style="background-color: #f7f7f7;"><p>The simple Kerberos cluster<MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" />. It extends the single Kerberos instance by adding an <MadCap:variable name="okta-feature-names.Access Gateway" /> cluster.</p><div><p> This architecture is designed to meet the following requirements:</p><ul><li>Protect a Kerberos (Windows IIS) based service.</li><li>Meet basic fault tolerance and high availability needs for <MadCap:variable name="okta-feature-names.Access Gateway" />.</li></ul></div><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>Relatively simple installation.</li><li>Can be used to replace VPN.</li><li>Provides basic fault tolerance and capacity support.</li><li>Can be expanded with additional workers as required to add capacity.</li><li>Load balanced.</li><li>Admin instance is accessed behind the firewall.</li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li><p>Single virtual environment.</p></li><li><p>Pre <MadCap:variable name="okta-feature-names.Access Gateway" /> DMZ based load balancer must support session affinity (sticky sessions).</p></li></ul>&#160;</td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-kerb-1.png" id="img_new" class="thumbnail" /></p><h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" style="width: 159px;" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4"><p>External internet</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Web clients</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-client-description.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">consumer-app1.example.com<br />(URLs not shown) </td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>URL representing the application an external web client would enter to access one of the applications secured by <MadCap:variable name="okta-feature-names.Access Gateway" />. Typically all URLs of this nature are served by, and resolve to, the <MadCap:variable name="okta-feature-names.Access Gateway" /> instance.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Okta org</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-okta-description.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Okta org Universal Directory</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/reference-arch-desc-oktaud.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>External internet to DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Traditional firewall between the external internet and the DMZ hosting <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="2">&#160;DMZ</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Pre  load balancer	Balances load between clients and the  cluster. Positioned between clients and the  cluster.</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">Pre  load balancer	Balances load between clients and the  cluster. Positioned between clients and the  cluster.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ is used to provide access to applications used by  external internet clients. </p><p>Contains a Kerberos service and a&#160;keytab.</p><p>See <MadCap:xref href="add-app-kerberos-create-keytab.htm">Create keytab</MadCap:xref> for details of creating a keytab.</p><p>See <MadCap:xref href="add-app-kerberos-add-ker-service.htm">Add Kerberos service</MadCap:xref> for details of defining a <MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos service. </p><p>Typically hosted in a virtual environment such as Amazon Web Services, MS&#160;Azure, Oracle OCI, or similar. See <MadCap:xref href="manage-deployment.htm">Manage [%=okta-feature-names.Access Gateway%] deployment</MadCap:xref>.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>DMZ to internal firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Traditional firewall between&#160;DMZ and the internal network.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4"><p>Internal network</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Service/Protected application</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>The set of protected web resources, in this case Microsoft Services, accessed using the <span class="url">consumer-app1.internal-example.com</span> URLs. </p><p>Supported versions:<br /></p><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/supported-app-version-microsoft.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Pre internal Kerberos domain load balance</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Load balancer for the Kerberos domain service cluster.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><p>Microsoft domain service cluster with Key Distribution Center</p></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><p>Domain service cluster containing a Key Distribution Center (KDC). </p><p>In this architecture, the Domain service/KDC represents multiple instances acting as a cluster. </p></td></tr></tbody></table><div><h2>Other considerations</h2> <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-simple-0-other-considerations.flsnp" /></div></div></div> <!-- End tab 2--><div class="tabs-panel" id="tab3"><div style="background-color: #f7f7f7;"><p>The Kerberos cluster <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" /> and a redundant Kerberos cluster. It represents an environment providing fault tolerance for both <MadCap:variable name="okta-feature-names.Access Gateway" /> and Kerberos.</p><div><p> This architecture is designed to meet the following requirements:</p><ul><li>Protect a Kerberos (Windows IIS) based service.</li><li>Meets basic fault tolerance and high availability needs for <MadCap:variable name="okta-feature-names.Access Gateway" /></li><li>Meet basic fault tolerance and high availability for the Kerberos domain and Key Distribution Center (KDC).</li></ul></div><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>Can be used to replace VPN.</li><li>Provides basic fault tolerance and capacity support.</li><li>Can be expanded with additional workers as required to add capacity.</li><li>Load balanced.</li><li>Admin instance is accessed behind the firewall.</li><li>Kerberos domain and KDC are both fault tolerant and redundant. </li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li>Complex <MadCap:variable name="okta-feature-names.Access Gateway" /> domain.</li><li>More complex Kerberos domain.</li><li>Pre <MadCap:variable name="okta-feature-names.Access Gateway" /> DMZ based load balancer must support session affinity (sticky sessions).</li></ul>&#160;</td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-kerb-2.png" id="img_new" class="thumbnail" /></p><h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" style="width: 159px;" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4"><p>External internet</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Web clients</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-client-description.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><span id="code">consumer-app1.example.com</span><br />URLs not shown </td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>URL representing the application an external web client would enter to access one of the applications secured by <MadCap:variable name="okta-feature-names.Access Gateway" />. Typically all URLs of this nature are served by, and resolve to, the <MadCap:variable name="okta-feature-names.Access Gateway" /> instance.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Okta org</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-okta-description.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Okta org Universal Directory</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/reference-arch-desc-oktaud.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>External internet to DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Traditional firewall between the external internet and the DMZ hosting <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="2">&#160;DMZ</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Pre <MadCap:variable name="okta-feature-names.Access Gateway" /> load balancer. </td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">Pre  load balancer	Balances load between clients and the  cluster. Positioned between clients and the  cluster.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ is used to provide access to applications used by  external internet clients. </p><p>Contains a Kerberos service and a&#160;keytab.</p><p>See <MadCap:xref href="add-app-kerberos-create-keytab.htm">Create keytab</MadCap:xref> for details of creating a keytab.</p><p>See <MadCap:xref href="add-app-kerberos-add-ker-service.htm">Add Kerberos service</MadCap:xref> for details of defining a <MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos service. </p><p>Typically hosted in a virtual environment such as Amazon Web Services, MS&#160;Azure, Oracle OCI, or similar. See <MadCap:xref href="manage-deployment.htm">Manage [%=okta-feature-names.Access Gateway%] deployment</MadCap:xref>.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>DMZ to internal firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Traditional firewall between&#160;DMZ and the internal network.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4"><p>Internal network</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Service/Protected application</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>The set of protected web resources, in this case Microsoft Services, accessed using the <span class="url">consumer-app1.internal-example.com</span> URLs. </p><p>Supported versions:<br /></p><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/supported-app-version-microsoft.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Pre internal Kerberos domain load balance</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Load balancer for the Kerberos domain service cluster.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><p>Microsoft domain service cluster with Key Distribution Center</p></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><p>Domain service cluster containing a Key Distribution Center (KDC). </p><p>In this architecture, the Domain service/KDC represents multiple instances acting as a cluster. </p></td></tr></tbody></table><div><h2>Other considerations</h2><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-simple-0-other-considerations.flsnp" /></div></div></div> <!-- End tab 3--><div class="tabs-panel" id="tab4"><div style="background-color: #f7f7f7;"><p>The multiple Kerberos domain <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents a set of components required for Kerberos based authentication and authorization using <MadCap:variable name="okta-feature-names.Access Gateway" /> and multiple Kerberos trusted domains.<br /></p><div><p> This architecture is designed to meet the following requirements:</p><ul><li>Protect a Kerberos (Windows IIS) based service.</li><li>Meets basic fault tolerance and high availability needs for <MadCap:variable name="okta-feature-names.Access Gateway" /></li><li>Meet basic fault tolerance and high availability for the Kerberos domain and Key Distribution Center (KDC).</li><li>Supports multiple Kerberos domains, sharing credentials and other information using trust relationships between domains.</li></ul></div><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>Can be used to replace VPN.</li><li>Provides fault tolerance and capacity support.</li><li>Can be expanded with additional workers as required to add capacity.</li><li>Load balanced.</li><li>Admin instance is accessed behind the firewall.</li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li><p>Single virtual environment.</p></li><li><p>Pre <MadCap:variable name="okta-feature-names.Access Gateway" /> DMZ based load balancer must support session affinity (sticky sessions).</p></li></ul>&#160;</td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-kerb-3.png" id="img_new" class="thumbnail" /></p><h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" style="width: 159px;" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4"><p>External internet</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Web clients</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-client-description.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><span id="code">consumer-app1.example.com</span><br />URLs not shown </td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>URL representing the application an external web client would enter to access one of the applications secured by <MadCap:variable name="okta-feature-names.Access Gateway" />. Typically all URLs of this nature are served by, and resolve to, the <MadCap:variable name="okta-feature-names.Access Gateway" /> instance.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Okta org</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-okta-description.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Okta org Universal Directory</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/reference-arch-desc-oktaud.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>External internet to DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Traditional firewall between the external internet and the DMZ hosting <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="2">&#160;DMZ</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Pre <MadCap:variable name="okta-feature-names.Access Gateway" /> load balancer. </td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">Pre  load balancer	Balances load between clients and the  cluster. Positioned between clients and the  cluster.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ is used to provide access to applications used by  external internet clients. <br />Contains a Kerberos service and a&#160;keytab.<br />See <MadCap:xref href="add-app-kerberos-create-keytab.htm">Create keytab</MadCap:xref> for details of creating a keytab.<br />See <MadCap:xref href="add-app-kerberos-add-ker-service.htm">Add Kerberos service</MadCap:xref> for details of defining a <MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos service. <br />Typically hosted in a virtual environment such as Amazon Web Services, MS&#160;Azure, Oracle OCI or something similar. See <MadCap:xref href="manage-deployment.htm">Manage [%=okta-feature-names.Access Gateway%] deployment</MadCap:xref>.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>DMZ to internal firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Traditional firewall between&#160;DMZ and the internal network.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="5"><p>Internal network</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Service/Protected application</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>&#160;The set of protected web resources, in this case Microsoft Services, accessed using the <span id="code">consumer-app1.internal-example.com</span> URLs. </p><p>Supported versions:<br /></p><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/supported-app-version-microsoft.flsnp" /></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Pre internal Kerberos domain load balance</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Load balancer for the Kerberos domain service cluster. Load balancer typically only fronts Domain A. </p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Microsoft domain service cluster A with Key Distribution Center</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Domain service cluster containing a Key Distribution Center (KDC). </p><p>In this architecture, the Domain service/KDC represents multiple instances acting as a cluster. </p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2"><p>Microsoft domain service cluster B with Key Distribution Center</p></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2"><p>Second Kerberos domain, trusted by service cluster A. Unknown credential requests are routed to this domain for handing. </p></td></tr></tbody></table><div><h2>Other considerations</h2><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-simple-0-other-considerations.flsnp" /></div></div></div> <!-- End tab 4--></div>
        <!-- End tabs-content div-->
        <div>
            <h2>Related topics</h2>
            <p>
                <MadCap:xref href="ref-arch-flow-dep.htm">Common [%=okta-feature-names.Access Gateway%] flows</MadCap:xref>
            </p>
            <p>
                <MadCap:xref href="about-oag-dns.htm">About [%=okta-feature-names.Access Gateway%] DNS use</MadCap:xref>
            </p>
            <p>
                <MadCap:xref href="about-high-availability.htm">About [%=okta-feature-names.Access Gateway%] high availability</MadCap:xref>
            </p>
            <p><a href="about-oag-prereqs.htm">About [%=okta-feature-names.Access Gateway%] prerequisites</a>
            </p>
        </div>
    </body>
</html>