<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/deploy-post-install-workflow-aws-health.htm" />
        <link href="../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Improve AWS&#160;load balancer health monitoring</h1>
        <p>Define a no-auth helper application for use with AWS load balancing health monitoring.</p>
        <h3>Before you begin</h3>
        <p>Ensure that you have access to:</p>
        <ul>
            <li>The AWS&#160;EC2 console, used to determine the internal IP&#160;address of <MadCap:variable name="okta-feature-names.Access Gateway" /> high availability instances. </li>
            <li>The <MadCap:variable name="okta-feature-names.Access Gateway" /> admin console running in AWS.</li>
        </ul>
        <h2>Steps</h2>
        <ol>
            <li>Determine internal AWS IP&#160;addresses:<ol style="list-style-type: lower-alpha;"><li>Open a browser to the AWS EC2 console at <a href="https://console.aws.amazon.com/ec2/">https://console.aws.amazon.com/ec2/</a></li><li>Sign in to the AWS Console.</li><li>Scroll to and expand <span class="uicontrol">Instances</span>.</li><li>Click <span class="uicontrol">Instances</span>.</li><li>Examine the list of instances. Note the <span class="uicontrol">Private IP&#160;Address</span> of each cluster member.<div class="noteOkta"><p class="noteContent">If the private IP address is inactive, click <span class="uicontrol">Settings</span> and select<span class="uicontrol">Private IP&#160;Address</span> to activate it.</p></div></li></ol></li>
            <li>
                    Create no-auth applications:
                    <ol style="list-style-type: lower-alpha;"><MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/create-no-auth-lb-helper.flsnp" /></ol></li>
            <li>
                <div>
                Configure Load Balancer to use HTTP 200 return code:<ol style="list-style-type: lower-alpha;"><li>Return to the AWS Console.</li><li>

					In the navigation pane, under <span class="wintitle">Load Balancing</span>, click <span class="uicontrol">Load Balancers</span>. This displays a list of all defined load balancers. </li><li>Select the load balancer that you created.</li><li>Select the <span class="wintitle">Health Check</span> tab.</li><li>Click <span class="uicontrol">Edit Health Check</span>.</li><li>Change the return code to 200.</li><li>Click <span class="uicontrol">Save</span>. </li></ol></div>
            </li>
        </ol>
        <div>
            <h3>Related topics</h3>
            <p>
                <MadCap:xref href="about-load-balancers.htm">About load balancers</MadCap:xref>
            </p>
            <p>
                <MadCap:xref href="deploy-workflow-aws.htm">Amazon Web Services (AWS) deploy tasks</MadCap:xref>
            </p>
            <p>
                <MadCap:xref href="deploy-post-install-workflow-aws-clb.htm">Configure Amazon Web Services Load Balancer</MadCap:xref>
            </p>
        </div>
    </body>
</html>