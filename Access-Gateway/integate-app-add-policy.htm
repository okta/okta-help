<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link href="../../Resources/TableStyles/standard-no-borders-alt-row-color.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/integate-app-add-policy.htm" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Add Custom Policy</h1>
        <p>To add custom policy to an application:</p>
        <div>
            <ol>
                <li>
                    Open the <MadCap:variable name="okta-feature-names.Access&#160;Gateway UI" />.
                </li>
                <li>Select the <span class="wintitle">Application</span> tab. </li>
                <li>In the row containing the previously created application, click <span class="uicontrol">Edit</span> ( <img src="../../Resources/Images/access-gateway/icon.edit.png" />). </li>
                <li>Expand the <span class="wintitle">Essentials</span> tab.</li>
                <li>In the <span class="uicontrol">Protected Web Resource</span> field, enter <span class="userinput">http://policy.service.spgw</span> <div class="noteOkta"><p class="noteContent">Setting a Protected Web&#160;Resource as <span class="userinput">policy.service.spgw</span> instructs <MadCap:variable name="okta-feature-names.Access Gateway" /> that this is a policy test application. This results in a policy test suite being executed when you select <span class="uicontrol">Goto application</span> &gt;&#160;<span class="uicontrol">SP Initiated</span> or <span class="uicontrol">IDP Initiated</span> tests. This is only for testing purposes.</p></div></li>
                <li>Expand the <span class="uicontrol">Advanced</span> section.</li>
                <li>Enable <span class="uicontrol">Debug mode</span>.<div class="noteOkta"><p class="noteContent">Activating Debug mode allows <MadCap:variable name="okta-feature-names.Access Gateway" /> to display debug information when testing. This is only for testing and<MadCap:annotation MadCap:createDate="2020-09-08T12:13:34.0706631-04:00" MadCap:creator="naini.khajanchi" MadCap:initials="NA" MadCap:comment="Can we rephrase this to say: should deactivated when you're in the production mode. \r\n\r\nAlso, should we add a line about it should be set to deactivate when in production?" MadCap:editor="naini.khajanchi" MadCap:editDate="2020-09-08T12:14:45.5535077-04:00"> should not be activated in production. </MadCap:annotation></p></div></li>
                <li>Select the <span class="wintitle">Policies</span> tab.</li>
                <li>Click <span class="uicontrol">Add</span> (<img src="../../Resources/Images/access-gateway/icon.plus.png" />) and select <span class="uicontrol">Not Protected</span>.</li>
                <li>Enter a name and resource (for example, <span class="userinput">/public</span>).</li>
                <li>Optional. Enter a policy description.</li>
                <li>Click <span class="uicontrol">Okay</span> to save the rule. </li>
                <li>Click <span class="uicontrol">Add</span>(<img src="../../Resources/Images/access-gateway/icon.plus.png" />) and select <span class="uicontrol">Protected Rule</span>. </li>
                <li>Enter a name, resource, and resource matching rule. For this example, enter:
					<table style="mc-table-style: url('../../Resources/TableStyles/standard-no-borders-alt-row-color.css');" class="TableStyle-standard-no-borders-alt-row-color" cellspacing="20"><col style="width: 317px;" /><col style="width: 50%;" /><tbody><tr class="TableStyle-standard-no-borders-alt-row-color-Body-Body1"><td class="TableStyle-standard-no-borders-alt-row-color-BodyF--Body1"><span class="uicontrol">Name</span></td><td class="TableStyle-standard-no-borders-alt-row-color-BodyD--Body1"><span class="userinput">Deny</span></td></tr><tr class="TableStyle-standard-no-borders-alt-row-color-Body-Body2"><td class="TableStyle-standard-no-borders-alt-row-color-BodyF--Body2"><span class="uicontrol">Resource Path</span></td><td class="TableStyle-standard-no-borders-alt-row-color-BodyD--Body2"><span class="userinput">/deny</span></td></tr><tr class="TableStyle-standard-no-borders-alt-row-color-Body-Body1"><td class="TableStyle-standard-no-borders-alt-row-color-BodyC--Body1"><span class="uicontrol">Resource Matching Rule</span></td><td class="TableStyle-standard-no-borders-alt-row-color-BodyA--Body1"><span class="userinput">Groups=(?!.*Everyone:)</span></td></tr></tbody></table></li>
                <li>Click <span class="uicontrol">Okay</span> to save the rule.</li>
                <li>Click <span class="uicontrol">Done</span>.</li>
            </ol>
        </div>
        <h2><a name="Test"></a>Test the application</h2>
        <ol>
            <li>In the row containing the application, click the <span class="uicontrol">Goto</span> &gt;&#160;<span class="uicontrol">SP&#160;Initiated</span>.
			<p><img src="../../Resources/Images/access-gateway/application-test-spinitiated.png" id="img_new" class="thumbnail" /></p></li>
            <li>Sign in to your Okta tenant using a valid account.</li>
            <li>Examine the results of the test. The default path is <span class="userinput">/</span> and is covered by the root policy.
			<p><img src="../../Resources/Images/access-gateway/application-policy-test-default.png" id="img_new" class="thumbnail" /></p></li>
            <li>Append <span class="userinput">/deny/</span> to the URL.</li>
            <li>Refresh the browser. If the user was in the Everyone group, then an Access Denied dialog is displayed.</li>
        </ol>
    </body>
</html>