<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Primary.deprecated" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/ref-arch-prot-app.htm" />
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Protected application reference architectures</h1>
        <p>When integrating applications with <MadCap:variable name="okta-feature-names.Access Gateway" /> there are a number of ways to ensure that back end resources are not only protected but also inaccessible from the normal external internet. The following architectures describe different methods that can be used to ensured that protected web resources are not accessible from the internet. </p>
        <div>
            <h3>Topics</h3>
            <ul>
                <li>
                    <MadCap:xref href="#Approach">Approach</MadCap:xref>
                </li>
                <li>
                    <MadCap:xref href="#architectures">Protected application architectures</MadCap:xref>
                </li>
            </ul>
        </div>
        <h2><a name="Approach"></a>Approach</h2>
        <div>
            <p>When integrating applications into <MadCap:variable name="okta-feature-names.Access Gateway" /> the following should be considered:</p>
            <ul>
                <li>DNS - how will DNS be served to <MadCap:variable name="okta-feature-names.Access Gateway" />?</li>
                <li>How will firewalls be implemented.</li>
                <li>Are their specific IP address restrictions?</li>
                <li>Are there any other integration specific requirements.</li>
            </ul>
        </div>
        <h2><a name="architectures"></a> Protected application architectures</h2>
        <p><MadCap:variable name="okta-feature-names.Access Gateway" /> application integrations installations can be deployed in any number of possible combinations. In all architectures the URL used to access the application is the same. &#160;That is both internal network and external network accesses rely on the same application name (app.example.com). </p>
        <p>Common application integration protection architectures include:</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">None</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">Initial starting point for all protected web application architectures. By definition provides little or no protection for external access to protected web resource.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Masked DNS</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">An expansion of the <span class="uicontrol">None</span> architecture which adds a secondary internal DNS server, used by <MadCap:variable name="okta-feature-names.Access Gateway" />, which resolves the name of the protected web resource but is different than the external applications URL. </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Firewall</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">An expansion of the Split DNS architecture which places firewalls in strategic places denying routing of requests for IP addresses on the internal use internet.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Protected IP</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">An expansion of the Firewall architecture, Protected (or restricted)&#160;IP, adds IP&#160;address based restrictions allowing or denying access to resources based on requester IP&#160;address. </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1" MadCap:conditions="Primary.review-only">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">Certificate challenge</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">An expansion of either the Firewall or Protected IP address architectures, the certificate challenge architecture installs custom certificates used to allow or deny access to protected web resources based on whether the requester can successfully reply to a certificate challenge. </td>
                </tr>
            </tbody>
        </table>
        <MadCap:snippetBlock src="../../Resources/Snippets/access-gateway/ref-arch-funct-areas.flsnp" />
        <p>Note that in all architecture diagrams, dotted lines represent paths around <MadCap:variable name="okta-feature-names.Access Gateway" />, which are meant to be denied. Each architecture details the process used to deny these paths. </p>
        <ul class="tabs" data-tabs="data-tabs" data-deep-link="true" id="oag-ref-arch-prot-app">
            <li class="tabs-title is-active"><a href="#tab1" aria-selected="true">None</a>
            </li>
            <li class="tabs-title"><a href="#tab2">Masked DNS</a>
            </li>
            <li class="tabs-title"><a href="#tab3">Firewall</a>
            </li>
            <li class="tabs-title"><a href="#tab4">IP address restriction</a>
            </li>
            <li class="tabs-title" MadCap:conditions="Primary.review-only"><a href="#tab99">Certificate challenge</a>
            </li>
        </ul>
        <div class="tabs-content" data-tabs-content="oag-ref-arch-prot-app">
            <div class="tabs-panel is-active" id="tab1">
                <div style="background-color: #f7f7f7;">
                    <p>The none protected application  <MadCap:variable name="okta-feature-names.Access Gateway" /> really isn't a protected architecture at all, as it represents a baseline or a starting point after an application is integrated with <MadCap:variable name="okta-feature-names.Access Gateway" /> but before any steps are taking to significantly deny direct access to the backing protected web resource. In this architecture, a single application, referred to as a protected web resource, is served to requesting clients using <MadCap:variable name="okta-feature-names.Access Gateway" />. All URLs (<MadCap:variable name="okta-feature-names.Access Gateway" /> and the backing protected web resource) are typically resolvable using a single DNS server and accessible to all.</p>
                    <div>
                        <p> This architecture  meets the following requirements:</p>
                        <ul>
                            <li>No specialized configuration.</li>
                            <li>URLs (<MadCap:variable name="okta-feature-names.Access Gateway" /> and application) are entered into DNS but no further action is taken.</li>
                            <li>Can be used as a baseline for testing and development.</li>
                        </ul>
                    </div>
                    <div>
                        <h2>Benefits and drawbacks</h2>
                        <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
                            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                            <thead>
                                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th>
                                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                                        <ul>
                                            <li>Simple installation</li>
                                            <li>Baseline for testing, proof of concept etc</li>
                                        </ul>
                                    </td>
                                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                                        <ul>
                                            <li>Little or no protecting for direct access to protected web resource</li>
                                            <li>Protected web resource reachable from the external internet by name or IP</li>
                                            <li>Protected web resource reachable from the internal internet by name or IP</li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <h3>Architecture</h3>
                    <p>
                        <img src="../../Resources/Images/access-gateway/ref-arch-prot-app-0.png" id="img_new" />
                    </p>
                    <p>In this architecture, external clients can access the application directly if they know the internal URL/IP. Likewise internal network clients can also access the application directly. Represented by neither dotted access path being blocked. </p>
                    <h3>Components</h3>
                    <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
                        <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                        <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                        <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                        <thead>
                            <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                                <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                                    <p>Location</p>
                                </th>
                                <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th>
                                <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td rowspan="2" class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                    <p>External internet</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">External URL</td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">External URL used by clients to access <MadCap:variable name="okta-feature-names.Access Gateway" /> on behalf of the protected web resource.</td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                    <p>DNS</p>
                                </td>
                                <td colspan="2" class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                    <p>DNS server providing DNS resolution for both the external URL and the internal (protected web resource</p>
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                    <p>DMZ</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" />
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ is used to provide access to applications used by  external internet clients. <br />Typically hosted in a virtual environment such as Amazon Web Services, MS&#160;Azure, Oracle OCI or something similar. See <MadCap:xref href="manage-deployment.htm">Manage [%=okta-feature-names.Access Gateway%] deployment</MadCap:xref>.</td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                <td rowspan="2" class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                    <p>Internal network</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                    <p>Internal URL</p>
                                </td>
                                <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                                    <p>Internal URL, represented by protected web resource in <MadCap:variable name="okta-feature-names.Access Gateway" />.</p>
                                </td>
                            </tr>
                            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">Application</td>
                                <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">Protected web resource (application)</td>
                            </tr>
                        </tbody>
                    </table>
                    <div MadCap:conditions="Primary.do-not-publish">
                        <h2>Other considerations</h2>
                        <p>Are there any?</p>
                    </div>
                </div>
            </div> <!-- end tab 1 --><div class="tabs-panel" id="tab2"><div style="background-color: #f7f7f7;"><p>The <span class="uicontrol">Masked DNS</span>  protected application  <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture is the first step in isolating a protected web resource from the external internal. In this architecture the protected web resource internal URL and the external URL are served by different DNS, effectively hiding or masking the actually application URL. In addition, the internal DNS server is isolated from the external web. Application users, in both the internal and external cases, use the same URL, which is directed to <MadCap:variable name="okta-feature-names.Access Gateway" />. The protected web application is then 'masked' in that only <MadCap:variable name="okta-feature-names.Access Gateway" /> accesses the protected web application by its internal, or 'masked' DNS&#160;name. </p><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>Simple</li><li>Internal application URL&#160;not resolvable externally</li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li>Protected web resource reachable from the external internet and internal network by name or IP</li><li>Requires secondary (internal)&#160;DNS server</li></ul></td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-prot-app-1.png" id="img_new" /></p><p>Note that while hidden or masked, the protected web resource is still accessible by name or IP, from both the internal and external networks, if the masked DNS name or IP address is known.</p><h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="2"><p>External internet</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">External URL</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">External URL used by clients to access <MadCap:variable name="okta-feature-names.Access Gateway" /> on behalf of the protected web resource.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">DNS</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">DNS server providing DNS resolution for external URL. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ, uses multiple DNS servers to resolve internal and external URLs. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="3"><p>Internal network</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Internal DNS and URL</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Internal DNS server serving internal URL representing protected web resource in <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Load Balancer</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Internal load balancer. In some situations it may be possible to substitute <MadCap:variable name="okta-feature-names.Access Gateway" /> as a load balancer. </p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">Application</td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2">Protected web resource (application)</td></tr></tbody></table><div MadCap:conditions="Primary.do-not-publish"><h2>Other considerations</h2><p>Are there any?</p></div></div></div> <!-- End tab 2--><div class="tabs-panel" id="tab3"><div style="background-color: #f7f7f7;"><p>The <span class="uicontrol">Firewall</span> protected application  <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture extends the <span class="uicontrol">Masked DNS</span> architecture to add firewalls between the external internal/DMZ and DMS/internal network. In this architecture the application, the protected web resource internal URL and the external URL are served by different DNS with the internal DNS server isolated from the external.</p><div><p> This architecture  meets the following requirements:</p><ul><li>Protects the protected web resource by hiding the internal URL from external clients.</li><li>Firewalls protected unauthorized requests.</li></ul></div><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>External access denied</li><li>Internal application URL&#160;not resolvable externally</li><li>Completely isolates the protected web resource from unauthorized access</li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li>Requires multiple firewalls (External/DMZ and DMZ/internal)</li><li>Requires internal (app zone) specific firewall between internal network and network zone housing the protected web resource.</li><li>Requires secondary (internal)&#160;DNS server</li></ul></td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-prot-app-2.png" id="img_new" /></p><p>In the firewall architecture, external access to the protected web application is defined by the external network/DMZ firewall.  Additionally, internal access to the application is denied by the internal/app zone firewall. This architecture effectively shields all unauthorized access to the protected web resource.</p><h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="2">External internet</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">External URL</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">External URL used by clients to access <MadCap:variable name="okta-feature-names.Access Gateway" /> on behalf of the protected web resource.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">DNS</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">DNS server providing DNS resolution for external URL. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Between external internet and DMZ</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Firewall separating DMZ housing <MadCap:variable name="okta-feature-names.Access Gateway" /> and the external internet.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ, uses multiple DNS servers to resolve internal and external URLs. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Between internal internet and DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Firewall separating DMZ housing <MadCap:variable name="okta-feature-names.Access Gateway" /> and the internal internet.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="4">Internal network</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>App zone</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>A internal network zone where the protected web resource is housed.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>App zone firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>An internal firewall separating the app zone from the rest of the internal network. </p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Internal DNS and URL</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Internal DNS server serving internal URL representing protected web resource in <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">Application</td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">Protected web resource (application)</td></tr></tbody></table><div MadCap:conditions="Primary.do-not-publish"><h2>Other considerations</h2><p>Are there any?</p></div></div></div> <!-- End tab 3--><div class="tabs-panel" id="tab4"><div style="background-color: #f7f7f7;"><p>The <span class="uicontrol">Protected IP</span> protected application  <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture extends the <span class="uicontrol">Firewall</span> architecture to add IP&#160;specific address restrictions. In this architecture the application is only accessible by specific IP addresses or machine names. &#160;For example, members of the <MadCap:variable name="okta-feature-names.Access Gateway" /> cluster.</p><div><p> This architecture  meets the following requirements:</p><ul><li>Protects the protected web resource by hiding the internal URL from external clients.</li><li>Firewalls protected unauthorized requests.</li><li>Routing and IP address restrictions protect against unauthorized internal access.</li></ul></div><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>External access denied</li><li>Internal application URL&#160;not resolvable externally</li><li>Application can be accessed only from select hosts. For example <MadCap:variable name="okta-feature-names.Access Gateway" /></li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li>Requires multiple firewalls (External/DMZ and DMZ/internal)</li><li>Requires secondary (internal)&#160;DNS server</li><li>Requires routing and IP&#160;address rules to allow or deny access to protected web resource</li></ul></td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-prot-app-3.png" id="img_new" /></p><p>In this architecture unauthorized protected web application access is denied by a combination of firewall (external access) and IP address restrictions (internal access).</p> <h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="2">External internet</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">External URL</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">External URL used by clients to access <MadCap:variable name="okta-feature-names.Access Gateway" /> on behalf of the protected web resource.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">DNS</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">DNS server providing DNS resolution for external URL. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Between external internet and DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Firewall separating DMZ housing <MadCap:variable name="okta-feature-names.Access Gateway" /> and the external internet.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ, uses multiple DNS servers to resolve internal and external URLs. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Between internal internet and DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Firewall separating DMZ housing <MadCap:variable name="okta-feature-names.Access Gateway" /> and the internal internet.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="3">Internal network</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Router/bridge with rules</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Routing rules and IP&#160;access rules allowing, or disallowing access to a specific resource (protected web application)</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Internal DNS and URL</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Internal DNS server serving internal URL representing protected web resource in <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">Application</td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2">Protected web resource (application)</td></tr></tbody></table><div MadCap:conditions="Primary.do-not-publish"><h2>Other considerations</h2><p>Are there any?</p></div></div></div> <!-- End tab 4--><div class="tabs-panel" id="tab99" MadCap:conditions="Primary.review-only"><div style="background-color: #f7f7f7;"><p>The <span class="uicontrol">Certificate challenge</span> protected application  <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture extends either the <span class="uicontrol">Firewall</span> or <span class="uicontrol">Protected IP</span> architectures and uses certificate challenge to limit access to the protected web resource.<br />In this architecture the application is only accessible by clients validated using a very specific certificate, preloaded on all <MadCap:variable name="okta-feature-names.Access Gateway" /> instances.</p><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Important Note" alt="Important Note" /><p class="noteContent">Certificates must be loaded and refreshed onto <MadCap:variable name="okta-feature-names.Access Gateway" /> instances by Okta professional services.</p></div><div><p> This architecture  meets the following requirements:</p><ul><li>Protects the protected web resource by hiding the internal URL from external clients.</li><li>Firewalls protected unauthorized requests.</li><li>Pre-configured certificate based challenge/response grants or denies access to the protected web resource</li></ul></div><div><h2>Benefits and drawbacks</h2><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>External access denied</li><li>Internal application URL&#160;not resolvable externally</li><li>Application can be accessed only from select hosts. For example <MadCap:variable name="okta-feature-names.Access Gateway" /></li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li>Requires multiple firewalls (External/DMZ and DMZ/internal) </li><li>Requires secondary (internal)&#160;DNS server</li><li>Requires creation and distribution of specific certificates for challenge/response</li><li>Requires professional services support to load and maintain certificates on&#160;<MadCap:variable name="okta-feature-names.Access Gateway" /> instances</li></ul></td></tr></tbody></table></div><h3>Architecture</h3><p><img src="../../Resources/Images/access-gateway/ref-arch-prot-app-4.png" id="img_new" /></p><h3>Components</h3><table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1"><p>Location</p></th><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="2"><p>External internet</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">External URL</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">External URL used by clients to access <MadCap:variable name="okta-feature-names.Access Gateway" /> on behalf of the protected web resource.</td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">DNS</td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">DNS server providing DNS resolution for external URL. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Between external internet and DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Firewall separating DMZ housing <MadCap:variable name="okta-feature-names.Access Gateway" /> and the external internet.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="2">DMZ</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" /></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><MadCap:variable name="okta-feature-names.Access Gateway" /> cluster, located in the DMZ, uses multiple DNS servers to resolve internal and external URLs. </td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p><MadCap:variable name="okta-feature-names.Access Gateway" /> certificate and policy</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><ul><li>A custom certificate, loaded onto all <MadCap:variable name="okta-feature-names.Access Gateway" /> instances used for certificate challenges.</li><li><MadCap:variable name="okta-feature-names.Access Gateway" /> policy specifying the certificate and used for requests for a given URL/URI.</li></ul></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Between internal internet and DMZ</p></td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Firewall</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Firewall separating DMZ housing <MadCap:variable name="okta-feature-names.Access Gateway" /> and the internal internet.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="3">Internal network</td><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><p>Certificate</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><p>Custom certificate used when issuing challenges for the protected web resource.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body2"><td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><p>Internal DNS and URL</p></td><td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2"><p>Internal DNS server serving internal URL representing protected web resource in <MadCap:variable name="okta-feature-names.Access Gateway" />.</p></td></tr><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">Application</td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">Protected web resource (application)</td></tr></tbody></table><div MadCap:conditions="Primary.do-not-publish"><h2>Other considerations</h2><p>Are there any?</p></div></div></div> <!-- End tab99--></div>
        <!-- End tabs-content div-->
        <div>
            <h2>Related topics</h2>
            <p>
                <MadCap:xref href="ref-arch-flow-dep.htm">Common [%=okta-feature-names.Access Gateway%] flows</MadCap:xref>
            </p>
            <p>
                <MadCap:xref href="about-oag-dns.htm">About [%=okta-feature-names.Access Gateway%] DNS use</MadCap:xref>
            </p>
            <p>
                <MadCap:xref href="about-high-availability.htm">About [%=okta-feature-names.Access Gateway%] high availability</MadCap:xref>
            </p>
            <p><a href="about-oag-prereqs.htm">About [%=okta-feature-names.Access Gateway%] prerequisites</a>
            </p>
        </div>
    </body>
</html>