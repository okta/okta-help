<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" class="concept" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/oag-log-files-monitor.htm" />
        <link href="../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%]</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1><MadCap:variable name="okta-feature-names.Access Gateway" /> monitor log</h1>
        <div>
            <p><MadCap:variable name="okta-feature-names.Access Gateway" /> monitor logs include information on the following events:</p>
            <ul>
                <li>
                    <MadCap:xref href="#CONFIG_T">CONFIG_TEST</MadCap:xref> - NGINX engine including start, stop, reset, and configuration tests</li>
                <li>
                    <MadCap:xref href="#DISK_USA">DISK_USAGE</MadCap:xref> - Disk usage</li>
                <li>
                    <MadCap:xref href="#MONITOR">MONITOR KRB5</MadCap:xref> - Kerberos status</li>
                <li>
                    <MadCap:xref href="#SESSION_">SESSION_CACHE_USAGE</MadCap:xref> - Session cache</li>
                <li>
                    <MadCap:xref href="#SESSION_">SSL_CERT_VALIDITY_CHECK</MadCap:xref> - Certificate expiration</li>
                <li>
                    <MadCap:xref href="#START">START</MadCap:xref>, <MadCap:xref href="#STOP">STOP</MadCap:xref> - System start and stop</li>
                <li>
                    <MadCap:xref href="#VALIDATE">VALIDATE</MadCap:xref> - Data store validation</li>
            </ul>
            <div>
                <h3>Before you begin</h3>
                <ul>
                    <li>See <MadCap:xref href="admin-settings-log-download.htm">Download logs</MadCap:xref> for details on downloading logs.</li>
                    <li>See <MadCap:xref href="decompressing-logs.htm">Decompressing logs</MadCap:xref> for details on decompressing log files. </li>
                </ul>
            </div>
            <h3>Event Fields</h3>
            <p>
                <table style="mc-table-style: url('../../Resources/TableStyles/standard.css');" class="TableStyle-standard" cellspacing="0">
                    <col class="TableStyle-standard-Column-Column1" />
                    <col class="TableStyle-standard-Column-Column1" />
                    <tbody>
                        <tr class="TableStyle-standard-Body-Body1">
                            <td style="background-color: #dcdcdc;padding-left: 7px;padding-right: 7px;padding-top: 7px;padding-bottom: 7px;border-right-style: solid;border-right-width: 1px;border-right-color: #c0c0c0;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #c0c0c0;font-weight: normal;" class="TableStyle-standard-BodyF-Column1-Body1">
                                <p>Field</p>
                            </td>
                            <td style="background-color: #dcdcdc;font-weight: normal;" class="TableStyle-standard-BodyD-Column1-Body1">
                                <p>Description</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                            <td class="TableStyle-standard-BodyF-Column1-Body2">
                                <p>TIMESTAMP</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body2">
                                <p>Current system date and time</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1">
                            <td class="TableStyle-standard-BodyF-Column1-Body1">
                                <p>HOSTNAME</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body1">
                                <p>Hostname of the node generating event</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                            <td class="TableStyle-standard-BodyF-Column1-Body2">
                                <p>APPLICATION</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body2">
                                <p>OAG_MONITOR</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1">
                            <td class="TableStyle-standard-BodyF-Column1-Body1">
                                <p>SUB-PROCESS</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body1">
                                <p>MONITOR</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                            <td class="TableStyle-standard-BodyF-Column1-Body2">
                                <p>COMPONENT</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body2">
                                <p>One of :&#160;</p>
                                <ul>
                                    <li>CERT_CHECK</li>
                                    <li>DISK_USAGE</li>
                                    <li>KRB5</li>
                                    <li>NGINX</li>
                                    <li>SERVICE</li>
                                    <li>SESSION_CACHE</li>
                                    <li>STORE</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1">
                            <td class="TableStyle-standard-BodyF-Column1-Body1">
                                <p>LOG_LEVEL</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body1">
                                <p>Log level. One of: TRACE, DEBUG, INFO, WARN, ERROR, or FATAL</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                            <td class="TableStyle-standard-BodyF-Column1-Body2">
                                <p>EVENT</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body2">
                                <p>One of:</p>
                                <ul>
                                    <li>CONFIG_TEST</li>
                                    <li>DISK_USAGE</li>
                                    <li>MONITOR</li>
                                    <li>SESSION_CACHE_USAGE</li>
                                    <li>SSL_CERT_VALIDITY_CHECK</li>
                                    <li>START</li>
                                    <li>STOP</li>
                                    <li>VALIDATE</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1">
                            <td class="TableStyle-standard-BodyF-Column1-Body1">
                                <p>STRUCTURED_DATA</p>
                            </td>
                            <td class="TableStyle-standard-BodyD-Column1-Body1">
                                <p>Data related to the occurred event important for analysis/troubleshooting</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                            <td class="TableStyle-standard-BodyC-Column1-Body2">
                                <p>MESSAGE</p>
                            </td>
                            <td class="TableStyle-standard-BodyA-Column1-Body2">
                                <p>Readable message</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </p>
        </div>
        <div>
            <h2><a name="Connecti"></a>Monitor examples</h2>
            <div>
                <h3><a name="CONFIG_T"></a>CONFIG_TEST</h3>
                <p>Event issued after testing the NGINX configuration.</p>
                <p>Message:</p>
                <ul>
                    <li>NGINX configuration is valid.</li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-04-02T08:02:01.348-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR NGINX INFO CONFIG_TEST [STATUS="VALID"] NGINX configuration is valid.</span>
                        </p>
                    </li>
                </ul>
                <p>Structured data:</p>
                <ul>
                    <li><span class="code">STATUS</span> - VALID or INVALID</li>
                    <li MadCap:conditions="Primary.review-only">R<MadCap:annotation MadCap:createDate="2020-09-16T09:53:15.9886394-04:00" MadCap:creator="naini.khajanchi" MadCap:initials="NA" MadCap:comment="This is in Review only mode. please verify" MadCap:editor="naini.khajanchi" MadCap:editDate="2020-09-16T09:53:33.8409141-04:00">EASON- Reason if status is not valid - Reviewer note, I&#160;made this up, is there an associated error message when the nginx config is invalid?</MadCap:annotation></li>
                </ul>
            </div>
            <div>
                <h3><a name="DISK_USA"></a>DISK_USAGE</h3>
                <p>Event issued after examining current disk usage. Checked once per hour per mount.</p>
                <p>Message: </p>
                <ul>
                    <li>
                        <p>Mount [device] is [x]% full.</p>
                    </li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-06-25T07:00:02.119-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR DISK_USAGE INFO DISK_USAGE [FILESYSTEM="/dev/mapper/centos-root" MOUNT="/" USAGE="12%"] Mount / is 12% full</span>
                        </p>
                    </li>
                </ul>
                <p>Structured data:<ul><li><span class="code">FILESYSTEM</span> - Filesystem of mount point</li><li><span class="code">MOUNT</span> - Mount point</li><li><span class="code">USAGE</span>&#160;- Mount point usage</li></ul></p>
            </div>
            <div>
                <h3><a name="MONITOR"></a>MONITOR KRB5</h3>
                <p>Event issued after examining Kerberos configuration.  Checked once per hour.</p>
                <p>Messages: </p>
                <ul>
                    <li>Kerberos not configured.</li>
                    <li>Kerberos is configured.</li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-04-02T08:00:02.043-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR KRB5 INFO MONITOR [STATUS="VALID"] Kerberos not configured</span>
                        </p>
                    </li>
                </ul>
                <ul>
                    <li>Structured data<ul><li><span class="code">STATUS</span> - File system of the mount point.</li></ul></li>
                </ul>
            </div>
            <div>
                <h3><a name="SESSION_"></a>SESSION_CACHE_USAGE</h3>
                <p>Event issued after examining session cache usage.  Checked once per hour.</p>
                <p>Message: </p>
                <ul>
                    <li>
                        <p>Current session cache utilization is 0%.</p>
                    </li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li><span class="code">2020-06-25T07:00:02.130-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR SESSION_CACHE INFO SESSION_CACHE_USAGE [CACHE_SIZE="67108864" CURRENT_USAGE="17095" USAGE_PERCENT="0%"] Current session cache utilization is 0%.</span>
                    </li>
                </ul>
                <p>Structured data:</p>
                <ul>
                    <li><span class="code">CACHE_SIZE</span> - Total session cache size in MB.</li>
                    <li><span class="code">CURRENT_USAGE</span>- Session cache in use in MB. </li>
                    <li><span class="code">USAGE_PERCENT</span> - Percent of cache currently in use.
                        </li>
                </ul>
            </div>
            <div>
                <h3><a name="SESSION_"></a>SSL_CERT_VALIDITY_CHECK</h3>
                <p>Event issued after examining certificates. Checked once per day.</p>
                <p>Message: </p>
                <ul>
                    <li>
                        <p>SSL Certificate is valid for more than 30 days.</p>
                    </li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-06-05T00:00:01.819-05:00 example.mysaccessgateway.com OAG_MONITOR MONITOR CERT_CHECK INFO SSL_CERT_VALIDITY_CHECK [USER="root" EXPIRY="20220603"] SSL Certificate is valid for more than 30 days.</span>
                        </p>
                    </li>
                </ul>
                <p>Structured data</p>
                <ul>
                    <li><span class="code">USER</span>- Certificate owner </li>
                    <li><span class="code">EXPIRY</span> - The date when the certificate expires. </li>
                </ul>
            </div>
            <div>
                <h3><a name="START"></a>START </h3>
                <p>
                    <MadCap:annotation MadCap:createDate="2020-09-16T10:18:14.7408567-04:00" MadCap:creator="naini.khajanchi" MadCap:initials="NA" MadCap:comment="not sure what we're trying to say here. please clarify." MadCap:editor="naini.khajanchi" MadCap:editDate="2020-09-16T10:18:29.4763527-04:00">Event issued with an <MadCap:variable name="okta-feature-names.Access Gateway" /> node is starting by service. </MadCap:annotation>
                </p>
                <p>Message:</p>
                <ul>
                    <li>
                        <p> Starting service. (Services include: okta-nginx, ebs-ssoagent, oag-admin, php-fpm, and others.) </p>
                    </li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-03-27T21:19:24.158-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR SERVICE INFO START [SERVICE="oag-admin"] Starting oag-admin.</span>
                        </p>
                    </li>
                </ul>
                <p>Structured data:</p>
                <ul>
                    <li><span class="code">SERVICE</span> - The service being started.</li>
                </ul>
            </div>
            <div>
                <h3><a name="STOP"></a>STOP</h3>
                <p>Event issued with an <MadCap:variable name="okta-feature-names.Access Gateway" /> node is stopping by service. </p>
                <p>Message: </p>
                <ul>
                    <li>
                        <p>Stopping service. (Services include: okta-nginx, ebs-ssoagent, oag-admin, php-fpm, and others.)</p>
                    </li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-03-27T21:20:11.797-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR SERVICE INFO STOP [SERVICE="oag-admin"] Stopping oag-admin.</span>
                        </p>
                    </li>
                </ul>
                <p>Structured data:</p>
                <ul>
                    <li><span class="code">SERVICE</span> - The service being stopped.</li>
                </ul>
            </div>
            <div>
                <h3><a name="VALIDATE"></a>VALIDATE</h3>
                <p>Event issued once per hour per data store, or auth context. </p>
                <p>Message: </p>
                <ul>
                    <li>
                        <p>None</p>
                    </li>
                </ul>
                <p>Example:</p>
                <ul>
                    <li>
                        <p><span class="code">2020-06-23T02:10:01.762-05:00 example.myaccessgateway.com OAG_MONITOR MONITOR STORE INFO VALIDATE [NAME="LDAP Datastore" STATUS="passed"].</span>
                        </p>
                    </li>
                </ul>
                <p>Structured data:</p>
                <ul>
                    <li><span class="code">NAME</span> - Name of service being validated. </li>
                    <li><span class="code">STATUS</span> - Passed or failed.</li>
                </ul>
            </div>
        </div>
    </body>
</html>