<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link rel="canonical" href="https://help.okta.com/oag/en-us/Content/Topics/Access-Gateway/add-app-sharepoint-confspn.htm" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Configure a SharePoint SPN and enable Kerberos </h1>
        <div>
            <p>Configure a SharePoint Service Principle Name (SPN) and configure SharePoint as an <MadCap:variable name="okta-feature-names.Access Gateway" /> Kerberos application.</p>
            <div class="noteOkta">
                <p class="noteContent">SharePoint must use a defined service account, not the Active Directory administrator account, which shouldn't be used for configuration.</p>
            </div>
            <p>The following example uses <span class="code">sharepoint.atko.biz</span> as the SharePoint FQDN and <span class="code">MYDOMAIN\spadmin</span> as the service account.</p>
            <ol>
                <li>
                    <p>Set the SPN on a machine. The following command must be run by a user with <MadCap:variable name="3rd Party Integrations.AD" /> Domain Admin rights. It can be run on any computer in the domain and it doesn't require being logged in to a Domain Controller.</p>
                    <MadCap:codeSnippet>
                        <MadCap:codeSnippetCopyButton />
                        <MadCap:codeSnippetCaption>General setspn command to set the SPN&#160;for a machine</MadCap:codeSnippetCaption>
                        <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">setspn -U -S HTTP/&lt;SPN&gt; &lt;DOMAIN&gt;\spadmin</MadCap:codeSnippetBody>
                    </MadCap:codeSnippet>
                    <ul>
                        <li><span class="code">-U</span> specifies that <span class="code">&lt;SPN&gt;</span> is a user account.</li>
                        <li><span class="code">-S &lt;SPN&gt;</span> adds the specified SPN for the computer, after verifying that no duplicates exist.</li>
                    </ul>
                    <MadCap:codeSnippet>
                        <MadCap:codeSnippetCopyButton />
                        <MadCap:codeSnippetCaption>Example setspn command</MadCap:codeSnippetCaption>
                        <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">setspn -U -S HTTP/sharepoint.atko.biz MYDOMAIN\spadmin</MadCap:codeSnippetBody>
                    </MadCap:codeSnippet>
                </li>
                <li>Connect to the SharePoint Central Administration service and sign in as SharePoint Admin.</li>
                <li>Go to <span class="uicontrol">Central&#160;Administration</span> &gt;&#160;<span class="uicontrol">Manage web applications</span>.</li>
                <li>Select the SharePoint web application instance, typically  <span class="code">SharePoint - 80</span>. </li>
                <li>Click <span class="uicontrol">Authentication</span>.</li>
                <li>Select the <span class="uicontrol">Zone</span>, typically <span class="uicontrol">Default</span>.</li>
                <li>Scroll to the <span class="uicontrol">Claims Authentication and Types</span> section. </li>
                <li>Select <span class="uicontrol">Negotiate (Kerberos</span>). </li>
                <li>Click <span class="uicontrol">Save</span>. </li>
            </ol>
            <div class="noteOkta">
                <p class="noteContent">The SharePoint application is reprovisioned on all SharePoint servers hosting the application. This causes a brief disruption in service. </p>
                <p class="noteContent">Verify that users can still access the SharePoint instance after service resumes.</p>
            </div>
        </div>
        <div>
            <h2>Next steps</h2>
            <p>
                <MadCap:xref href="add-app-sharepoint-configure-kerb.htm">Configure SharePoint as Kerberos</MadCap:xref>
            </p>
        </div>
    </body>
</html>