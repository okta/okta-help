<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head>
        <link href="../../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Multiple data center architecture</h1>
        <p>The multiple data center <MadCap:variable name="okta-feature-names.Access Gateway" /> architecture represents the set of components required to deploy <MadCap:variable name="okta-feature-names.Access Gateway" /> in a high performing, fault tolerant multi-data center environment.</p>
        <p>Typically this architecture is where active-active or active-warm standby data centers are required, although fail over can be provided at multiple levels in this architecture.  As shown this architecture depicts an active-active configuration where each datacenter has fault tolerance built in.  This architecture is for highly available applications where the application is configured to run in both datacenters at the same time.<br />This architecture is designed to meet the following requirements:<br /><ul><li>Providing secure access to a set of applications, accessed from the external internet, although a similar approach can be done for internal only accessible applications.</li><li>Support user access by data centers, selected by location, or other criteria to improve access rates</li><li>Provide a high level of performance, including fault tolerant load balancers both within each data center and across data centers (the app will remain accessible if any single component is lost inside the DC, or if an entire DC is not available)</li><li>Provide a high level of fault tolerance inside of each data center:<ul><li>Load balancer level - one load balancer per data center at the <MadCap:variable name="okta-feature-names.Access Gateway" /> and protected application levels</li><li><MadCap:variable name="okta-feature-names.Access Gateway" /> workers segmented by data center, with a single admin node</li><li>Protected web resources replicated at the data center level</li></ul></li></ul><br /><table style="mc-table-style: url('../../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0"><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><col class="TableStyle-srb_header_alt_shade-Column-Column1" /><thead><tr class="TableStyle-srb_header_alt_shade-Head-Header1"><th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Benefits</th><th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Drawbacks</th></tr></thead><tbody><tr class="TableStyle-srb_header_alt_shade-Body-Body1"><td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1"><ul><li>Extremely fault tolerant</li><li>Extremely high performing</li><li>Provides failover at multiple levels or locations within the architecture</li></ul></td><td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1"><ul><li>Complex</li><li><p>Additional hardware / virtual servers needed for redundancy</p></li></ul></td></tr></tbody></table></p>
        <h2>Architecture</h2>
        <img src="../../../Resources/Images/access-gateway/ref-arch-gen-2dc.png" id="img_new" class="thumbnail" />
        <h2>Components</h2>
        <table style="mc-table-style: url('../../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <thead>
                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Location</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Component</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="4">External internet</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Web clients</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <MadCap:snippetBlock src="../../../Resources/Snippets/access-gateway/ref-arch-client-description.flsnp" />
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2"><span id="code">appN.example.com</span>
                        <br />URLs not shown </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">URL representing one of the applications an external web client would enter to access one of the applications secured by <MadCap:variable name="okta-feature-names.Access Gateway" />. Typically all URLs of this nature are served by, and resolve to, the <MadCap:variable name="okta-feature-names.Access Gateway" /> instance.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Okta org</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <MadCap:snippetBlock src="../../../Resources/Snippets/access-gateway/ref-arch-okta-description.flsnp" />
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Okta org Universal Directory</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                        <MadCap:snippetBlock src="../../../Resources/Snippets/access-gateway/reference-arch-desc-oktaud.flsnp" />
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>Firewall</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>External internet to DMZ</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <p>Traditional firewall between the external internet and the DMZ hosting <MadCap:variable name="okta-feature-names.Access Gateway" />.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" rowspan="2">DMZ</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>Pre <MadCap:variable name="okta-feature-names.Access Gateway" /> load balancers</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                        <p>Load balancers for the DMZ based <MadCap:variable name="okta-feature-names.Access Gateway" /> cluster. <br />Potentially providing failover between data centers.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> workers</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> instances, distributed in both data centers but sharing an administration instance.<br />Workers use DNS to select the appropriate protected web resources.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>Firewall</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>DMZ to internal firewall</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                        <p>Traditional firewall between&#160;DMZ and the internal network.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" rowspan="3">Internal network&#160;</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> admin</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1"><MadCap:variable name="okta-feature-names.Access Gateway" /> admin node, in any of the data centers handling configuration, configuration backups, log forwarding and similar activities.<br />Access by administrators within the internal network.</td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>Pre internal <MadCap:variable name="okta-feature-names.Access Gateway" /> load balancers</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                        <p>Load balancers between <MadCap:variable name="okta-feature-names.Access Gateway" /> and the protected web resources. &#160;<br />Potentially providing failover between data centers.<br />See <MadCap:xref href="../about-oag-load-balancers.htm">About [%=okta-feature-names.Access Gateway%] load balancing</MadCap:xref>.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                        <p>Protected applications<br />URLs not shown</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                        <p>The set of protected web resources, accessed using the <span id="code">protd-N.internal-example.com</span> URLs. <br />Replicated set of highly available back end protected web resources. </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Other considerations</h2>
        <p>Geographic or other load balancing techniques such as DNS round robin have been deployed to route session traffic to the different data centers.  This data center routing should be “sticky” (session affinity) and route the user to the same data center for the life of the session or until a data center is no longer accessible.<br />SSL may be terminated on either the Load balancers or the <MadCap:variable name="okta-feature-names.Access Gateway" /> servers themselves.  if SSL is terminated on the Load balancers the communications from the LB to OAG must be over SSL, but a self signed certificate on <MadCap:variable name="okta-feature-names.Access Gateway" /> may be used.<br /><MadCap:snippetBlock src="../../../Resources/Snippets/access-gateway/ref-arch-other-considerations-syslog.flsnp" /></p>
        <h2>Related topics</h2>
        <p>
            <MadCap:xref href="ref-arch-flow.htm">Common [%=okta-feature-names.Access Gateway%] flows</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="../about-oag-dns.htm">About [%=okta-feature-names.Access Gateway%] DNS use</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="../about-high-availability.htm">About [%=okta-feature-names.Access Gateway%] high availability</MadCap:xref>
        </p>
        <p><a href="../about-oag-prereqs.htm">About [%=okta-feature-names.Access Gateway%] prerequisites</a>
        </p>
    </body>
</html>