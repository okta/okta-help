<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
      <meta name="description"
            content="Create an Internet Information Services (IIS) rewrite rule to disable Okta IWA Web agent authentication for specific clients."/>
   </head>
   <body>
      <h1>
         <a name="DetectIneligibleClients"/>Disable <MadCap:variable name="okta-variables.ProductName"/>
         <MadCap:variable name="okta-feature-names.IWA Web agent"/> authentication for specific clients</h1>
      <p>By default, the IWA Web agent attempts IWA SSO for all clients that try to access <MadCap:variable name="okta-variables.ProductName"/>-protected apps. You can change the default by creating an IIS rewrite rule that automatically redirects specified clients to the <MadCap:variable name="okta-variables.ProductName"/> Sign-In page without attempting IWA SSO. Your rule uses pattern matching to detect non-IWA SSO-capable clients and then performs the configured action.</p>
      <p>For more about this functionality, as well as other ways to improve security and usability for your end-users, see <a href="https://support.okta.com/help/blogdetail?id=a672A000000XZyEQAW">Tips and Tricks with Okta's Desktop SSO (DSSO) Agent</a>. You may be prompted to sign in to the Okta Support site to view content.</p>
      <p>This procedure requires <MadCap:variable name="okta-variables.ProductName"/>
         <MadCap:variable name="okta-feature-names.IWA Web agent"/> version <span class="uicontrol">1.9.1</span> or higher.</p>
      <ol>
         <li>Download the <span class="uicontrol">Microsoft URL Rewrite 2.0 module</span> from <a href="http://www.iis.net/downloads/microsoft/url-rewrite"
               target="_blank">http://www.iis.net/downloads/microsoft/url-rewrite</a>.</li>
         <li>Install the rewrite module on the same server that hosts your IWA Web agent.</li>
         <li>Open <span class="uicontrol">Internet Information Services (IIS) Manager</span> on the same server that hosts your  IWA Web agent.</li>
         <li>In the <span class="uicontrol">Connections</span> pane, expand <span class="menucascade">
               <span class="uicontrol">Sites</span>
               <span class="uicontrol">Default Web Site</span>
            </span> and select <span class="uicontrol">IWA</span>.
							<p>
               <img alt="User-added image"
                    src="../../Resources/Images/Desktop_SSO_14.png"
                    id="img_new"/>
            </p>
         </li>
         <li>Double-click the <span class="uicontrol">URL Rewrite</span> icon in the center pane.</li>
         <li>See <a href="http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module"
               target="_blank">Microsoft documentation</a> for detailed instructions on creating rules for the URL Rewrite Module. You can also refer to the example URL rewrite rules that are provided in the <span class="filepath">web.config</span> file (<span class="filepath">C:\inetpub\wwwroot\IWA\web.config</span>).
							<p>You can configure these rules:</p>
         </li>
      </ol>
      <ul style="margin-left: 45px;">
         <li>To attempt IWA authentication for specified clients, configure this action:</li>
      </ul>
      <p style="margin-left: 100px">
         <span class="uicontrol">
            <font face="courier">action type="Rewrite" url="iwa.aspx?action=<font color="blue">iwa</font>"</font>
         </span>
      </p>
      <ul style="margin-left: 45px;">
         <li>To skip IWA authentication for specified clients and redirect users to the <MadCap:variable name="okta-variables.ProductName"/> Sign-In page, configure this action:</li>
      </ul>
      <p style="margin-left: 100px;">
         <span class="uicontrol">
            <font face="courier">action type="Rewrite" url="iwa.aspx?action=<font color="red">okta</font>"</font>
         </span>
      </p>
      <ol class="bullets" start="7">
         <li>Under <span class="uicontrol">Actions</span>, click <span class="uicontrol">Apply</span>.</li>
         <li>Restart <span class="uicontrol">Internet Information Services (IIS) Manager</span>.</li>
      </ol>
   </body>
</html>
