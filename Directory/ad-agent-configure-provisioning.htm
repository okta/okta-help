<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Define how user data is managed and updated when you install the Okta AD Agent or the needs of your business change."/>
   </head>
   <body>
      <h1>
         <a name="Provisioning"/>Configure Active Directory provisioning settings</h1>
      <div>
         <p>When you install the <MadCap:variable name="okta-feature-names.AD agent short"/> or the needs of your business change, you define how  user data is managed and updated.</p>
         <ol>
            <li>
                    In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Directory Integrations</span>
               </span>.</li>
            <li>Click <span class="uicontrol">Active Directory</span>  and then click the <span class="uicontrol">Provisioning</span> tab.</li>
            <li>Click <span class="uicontrol">To App</span> in the <span class="uicontrol">Settings</span> list and click <span class="uicontrol">Edit</span> in the <span class="uicontrol">Provisioning to App</span> section.</li>
            <li> Click the <span class="uicontrol">Enable</span> check box for <span class="uicontrol">Create Users</span>.</li>
         </ol>
         <p style="text-align: left;margin-left: 40px;">Enabling <span class="uicontrol">Create Users</span> lets <MadCap:variable name="okta-variables.ProductName"/> create users in Active Directory (AD). This allows you, for example, to import users from an HR system, create the users in <MadCap:variable name="okta-variables.ProductName"/>, and then have <MadCap:variable name="okta-variables.ProductName"/> create the users in AD. The HR system is the source, with <MadCap:variable name="okta-variables.ProductName"/> and AD being updated based on changes in the HR source. Or, another use case may include <MadCap:variable name="okta-variables.ProductName"/> being the source of truth for all user information and pushing those updates into AD.</p>
         <p style="text-align: left; margin-left: 40px;">To implement this functionality, you first need to create a group in <MadCap:variable name="okta-variables.ProductName"/> and then assign that group to your AD instance. When users are added to the group, they are also created in AD. A common scenario is to use group rules in this kind of flow to add users to the AD provisioning group automatically.</p>
         <ol MadCap:continue="true">
            <li>In the <span class="uicontrol">Activation email recipient</span> field, enter the email address of the <MadCap:variable name="okta-variables.ProductName"/> admin who receives activation emails with the <MadCap:variable name="okta-variables.ProductName"/> user's password. The admin is responsible for giving the end user their <MadCap:variable name="okta-variables.ProductName"/> password.</li>
            <li>In the <span class="uicontrol">AD username format</span> list, select the format for the AD username: <ul>
                  <li>
                     <span class="uicontrol">Custom</span> — Select this option to use a custom AD user name. Enter the <MadCap:variable name="okta-variables.ProductName"/> expression language to map the define the user name format. To validate your mapping expression, enter a user name and click the view icon. See <MadCap:xref href="../users-groups-profiles/usgp-attribute-mappings-expressions.htm">Modify attributes with expressions</MadCap:xref>.</li>
                  <li>
                     <span class="uicontrol">Email</span>  — Select this option to use an email address for the AD user name.</li>
                  <li>
                     <span class="uicontrol">Email prefix</span> — Select this option to use an email prefix for the AD user name.</li>
                  <li>
                     <span class="uicontrol">LDAP UID + custom suffix</span> — Select this option to use the LDAP user ID and a custom suffix as the AD user name.</li>
                  <li>
                     <span class="uicontrol">
                        <MadCap:variable name="okta-variables.ProductName"/> username</span> — Select this option to use the <MadCap:variable name="okta-variables.ProductName"/> user name as the AD user name.</li>
                  <li>
                     <span class="uicontrol">
                        <MadCap:variable name="okta-variables.ProductName"/> username prefix</span> — Select this option to use the <MadCap:variable name="okta-variables.ProductName"/> user name prefix as the AD user name.</li>
                  <li>
                     <span class="uicontrol">From </span>
                     <MadCap:variable name="okta-variables.ProductName" style="font-weight: bold;"/>
                     <span class="uicontrol"> username</span> — Select this option to use the <MadCap:variable name="okta-variables.ProductName"/> to generate the AD user name from the <MadCap:variable name="okta-variables.ProductName"/> user name. The generated username includes the Okta username as a prefix and the AD domain as a suffix.</li>
               </ul>
            </li>
         </ol>
         <ol start="6" MadCap:continue="true">
            <li>
               <a name="UpdateUserattributes"/>Click <span class="uicontrol">Enable</span> for <span class="uicontrol">Update User Attributes</span> to update a user's attributes in AD when an app is assigned. Future attribute changes made to the <MadCap:variable name="okta-variables.ProductName"/> user profile  automatically overwrite the corresponding attribute value in AD. See <MadCap:xref href="ad-agent-ou-updates.htm">Enable [%=okta-variables.ProductName%]-sourced user Organizational Unit updates</MadCap:xref>.</li>
            <li>
               <p>Select the <span class="uicontrol">Update OU when the group that provisions a user to AD changes</span> check box to update an <MadCap:variable name="okta-variables.ProductName"/>-sourced user's organizational unit (OU) when the group that provisions a user to AD changes.</p>
               <p>If an <MadCap:variable name="okta-variables.ProductName"/>-sourced user's OU changes in AD, that change will not be reflected in <MadCap:variable name="okta-variables.ProductName"/> because <MadCap:variable name="okta-variables.ProductName"/> is the source for that user. The next time the user is update in <MadCap:variable name="okta-variables.ProductName"/>, they will be provisioned back to the OU as set in <MadCap:variable name="okta-variables.ProductName"/>.</p>
               <p>
                  <MadCap:annotation MadCap:createDate="2022-12-15T11:43:56.5674482-05:00"
                                     MadCap:creator="Patrick Calnan"
                                     MadCap:initials="PA"
                                     MadCap:comment="OKTA-238856"
                                     MadCap:editor="Patrick Calnan"
                                     MadCap:editDate="2022-12-15T11:44:01.8812724-05:00">
                     <span class="uicontrol">Warning</span>
                  </MadCap:annotation>: When Profile Push is enabled, <MadCap:variable name="okta-variables.ProductName"/> will update the CN attribute in AD. If there is a mapping defined for the cn property in the Profile Editor that mapping is applied. If there is no mapping or if the behavior for the CN mapping is set to <span class="uicontrol">Do not map</span> then the CN is set to <span class="code">First Name + " " + Last Name</span>.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">Enable</span> next to <span class="uicontrol">Deactivate Users</span> to deactivate a user's AD account when it is unassigned in <MadCap:variable name="okta-variables.ProductName"/> or their <MadCap:variable name="okta-variables.ProductName"/> account is deactivated.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">Enable</span> next to <span class="uicontrol">Sync Password</span> to make a user's AD password the same as their <MadCap:variable name="okta-variables.ProductName"/> password.</p>
            </li>
            <li>
                    Click <span class="uicontrol">Save</span>.
                </li>
            <li>Optional. Map Active Directory attributes to <MadCap:variable name="okta-variables.ProductName"/> attributes in the <span class="uicontrol">Attribute Mappings</span> section.  The attributes listed in the table are your Active Directory attributes. To edit these mappings, click  the edit icon. See <MadCap:xref href="../users-groups-profiles/usgp-map-attributes-provisioning.htm">Map application attributes on the Provisioning page</MadCap:xref>
            </li>
         </ol>
      </div>
   </body>
</html>
