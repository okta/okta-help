<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Patrick Calnan" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="MultiProdPublish.Classic+OIE" description="Learn more about Okta service account permissions and what is required to complete day-to-day tasks.">
    <head><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Learn more about " />
    </head>
    <body>
        <h1><a name="MinServiceReqts"></a>About <MadCap:variable name="okta-variables.ProductName" /> service account permissions</h1>
        <p>Before adjusting the permissions on your directory, make sure you understand how Active Directory permissions are set and  plan how to manage permissions within your environment. For information about the account requirements needed to perform this task, see <MadCap:xref href="ad-agent-prerequisites.htm">Active Directory integration prerequisites</MadCap:xref>.</p>
        <p>By default, the <MadCap:variable name="okta-feature-names.AD agent short" /> installer creates a <MadCap:variable name="okta-variables.ProductName" /> service account if you don't choose an existing account. The newly created OktaService account inherits the permissions of the Domain Users group. OktaService is also considered to be a member of the Authenticated Users and Everyone special identity groups when the agent is running. By default, the Authenticated Users group is a member of the Pre-Windows 2000 Compatible Access group. Removing the Authenticated Users group from the Pre-Windows 2000 Compatible Access group can cause issues with incremental imports. To resolve issues with incremental imports, <MadCap:variable name="okta-variables.ProductName" /> recommends making one of the following changes:</p>
        <ul>
            <li>
                <p>Add the OktaService account to the Pre-Windows 2000 Compatible Access group.</p>
            </li>
            <li>
                <p>Make sure the OktaService account has <span class="uicontrol">Read all</span> permissions for all synchronized AD objects.</p>
            </li>
        </ul>
        <p>The <MadCap:variable name="okta-feature-names.AD agent short" /> Management Utility also includes the option of adding the OktaService account to the Domain Admins group. If you require the functionality listed below but don't want to make your service account a full admin, make sure the following permissions are set.</p>
        <h2>Provision user</h2>
        <ul>
            <li>Requires create child permission for user objects on the target Organizational Unit (OU).</li>
            <li>Requires reset password control access right permission for user objects within your target OU.</li>
            <li>Requires write property permissions on user objects within your target OU for the following attributes:<ul><li>mail</li><li>userPrincipalName</li><li>SAMaccountName</li><li>givenName</li><li>sn</li><li>userAccountControl</li><li>pwdLastSet</li><li>lockoutTime</li><li>cn</li><li>name</li></ul></li>
            <li>Requires write property permission on user objects within your target OU for all other attributes mapped on the AD user profile within Okta <span class="code">https://&lt;org&gt;/admin/universaldirectory</span>.</li>
        </ul>
        <h2>Update user attributes</h2>
        <ul>
            <li>Requires write property permissions on user objects within your target OU for the following attributes:<ul><li>mail</li><li>userPrincipalName</li><li>SAMaccountName</li><li>givenName</li><li>sn</li><li>userAccountControl</li><li>pwdLastSet</li><li>lockoutTime</li><li>cn</li><li>name</li></ul></li>
            <li>Requires write property permission on user objects within your target OU for all other attributes mapped on the AD user profile within Okta <span class="code">https://&lt;org&gt;/admin/universaldirectory</span>.</li>
        </ul>
        <h2>Group push</h2>
        <ul>
            <li>Requires create child permissions for group objects on the target OU.</li>
            <li>Requires delete child permissions for group objects on the target OU.</li>
            <li>Requires write property permissions on group objects within your target OU for the following attributes:<ul><li>sAMAccountName</li><li>description</li><li>groupType</li><li>member</li><li>cn</li><li>name</li></ul></li>
        </ul>
        <h2>Reset password, forgot password, and sync password</h2>
        <ul>
            <li>Requires write property permissions on user objects within your target OU for the following attributes:<ul><li>lockoutTime</li><li>pwdLastSet</li></ul></li>
            <li>Requires Reset Password Control Access Right permission for user objects within your target OU.</li>
        </ul>
        <h3>Activate and deactivate user</h3>
        <ul>
            <li>Requires write property permissions on user objects within your target OU for the following attributes:<ul><li>userAccountControl</li></ul></li>
        </ul>
        <h2>Use reference commands to add permissions</h2>
        <p>Use the listed commands to add  permissions. Save them to a batch file and change the target OU and service account info to be correct for your environment. Remember to remove permissions you don't need and add any attributes you have mapped for provisioning within Okta. You can get the complete list of user attributes from your Directory user profile on <span class="code">https://&lt;org&gt;/admin/universaldirectory</span>.</p>
        <blockquote><span class="code"># Create User</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /G domain\agentserviceaccount:CC;user</span><span class="code"># Create or Update user</span>
        </blockquote>
        <blockquote><span class="code"># include additional attributes that are mapped in your org within Okta</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;mail;user</span> </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;userPrincipalName;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;sAMAccountName;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;givenName;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;sn;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;userAccountControl;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;pwdLastSet;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;lockoutTime;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;cn;user</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;name;user</span>
        </blockquote>
        <blockquote><span class="code"># Create user/Password Reset</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G "domain\agentserviceaccount:CA;Reset Password;user"</span>
        </blockquote>
        <blockquote><span class="code"># Group Push</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /G domain\agentserviceaccount:CCDC;group</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;sAMAccountName;group</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;description;group</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;groupType;group</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;member;group</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;cn;group</span>
        </blockquote>
        <blockquote><span class="code">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;name;group</span>
        </blockquote>
    </body>
</html>