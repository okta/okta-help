<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
      <meta name="description"
            content="Install multiple Okta Active Directory (AD) agents to increase the resiliency and availability of your AD integration. Okta recommends installing two or more Okta AD agents."/>
   </head>
   <body>
      <a name="Configur"/>
      <h1>
         <a name="top"/>Install multiple <MadCap:variable name="okta-variables.ProductName"/> Active Directory agents </h1>
      <div>
         <p>To provide high availability and failover protection, <MadCap:variable name="okta-variables.ProductName"/> recommends that you install two or more Okta Active Directory (AD) Agents on separate servers in each domain.</p>
         <p>If an <MadCap:variable name="okta-feature-names.AD agent short"/> stops running or loses network connectivity, authentication requests automatically route to  other Okta AD Agents. </p>
         <p>To add multiple <MadCap:variable name="okta-feature-names.AD agent short"/> to a domain, the installation process is identical to your first agent installation. If you created an <MadCap:variable name="okta-variables.ProductName"/> service account during the first <MadCap:variable name="okta-feature-names.AD agent short"/> installation, you must provide your password during the second <MadCap:variable name="okta-feature-names.AD agent short"/> installation.</p>
         <p>Installing multiple agents in close geographical proximity to your users doesn't enhance performance. When you have multiple agents installed, the process randomly selects which agent it uses so user location isn't a factor. In addition, setting up large numbers of agents in this manner can cause problems when the system attempts to perform status checks on their performance.</p>
         <p>Each agent connects to <MadCap:variable name="okta-variables.ProductName"/>  independently. To communicate with an AD instance (for example, to authenticate a user), <MadCap:variable name="okta-variables.ProductName"/> selects an available agent and sends it a task to complete. If one of the agents becomes unavailable, it's automatically removed from the queue and not given additional tasks.</p>
         <p>An <MadCap:variable name="okta-feature-names.AD agent short"/> sends periodic messages to <MadCap:variable name="okta-variables.ProductName"/>. If <MadCap:variable name="okta-variables.ProductName"/> doesn't receive a message for 120 seconds, the <MadCap:variable name="okta-feature-names.AD agent short"/> is marked as unavailable. After 30 days of inactivity, the API token  assigned during the agent installation expires and you'll need to reinstall the agent.</p>
         <p>The <MadCap:variable name="okta-feature-names.AD agent short"/> relies on the underlying operating system for domain controller selection.</p>
         <ol>
            <li>On the host server, sign in to <MadCap:variable name="okta-variables.ProductName"/> with  Super Admin permissions and click <span class="uicontrol">Admin</span> to access the <MadCap:variable name="okta-variables.ProductName"/> Admin Console.
                </li>
            <li>
                    In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Directory Integrations</span>
               </span>.</li>
            <li>Click <span class="uicontrol">Active Directory</span>.</li>
            <li>Click the <span class="uicontrol">Agents</span> tab and click <span class="uicontrol">Add Agent</span>.</li>
            <li>Review the installation requirements, click <span class="uicontrol">Set Up Active Directory</span>, and then click <span class="uicontrol">Download Agent</span>.</li>
            <li>Run the installer. See <MadCap:xref href="ad-agent-new-integration.htm">Install  the [%=okta-variables.ProductName%] Active Directory agent</MadCap:xref>. </li>
         </ol>
         <p class="bodyindent" style="text-align: left;margin-left: 40px;">To check the status of the second agent, click <span class="uicontrol">Dashboard</span> on the <MadCap:variable name="okta-variables.ProductName"/> Admin Console. A green circle next to the agent name indicates that the agent is connected and healthy.</p>
      </div>
   </body>
</html>
