<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Download and install the latest version of the Okta AD agent on your host server(s)."/>
   </head>
   <body>
      <h1>
         <a name="Installi"/>Install  the <MadCap:variable name="okta-variables.ProductName"/> Active Directory agent</h1>
      <p>Download and install the latest version of the <MadCap:variable name="okta-feature-names.AD agent"/> on your host servers to make sure that you have the most current features and functionality and get optimum performance. If you are running multiple <MadCap:variable name="okta-feature-names.AD agent short"/>s, make sure they are all the same version. Running different versions within a domain can cause all agents in that domain to function at the level of the oldest agent. This doesn't affect other domains. </p>
      <p>To download the agent from another computer, copy the <MadCap:variable name="okta-feature-names.AD agent short"/> installer to the host server.</p>
      <p>If you're installing the <MadCap:variable name="okta-feature-names.AD agent short"/> on a DMZ server, you must open specific ports. See <MadCap:xref href="ad-agent-install-dmzports.htm">Configure DMZ server ports for Active Directory integrations</MadCap:xref>.</p>
      <div>
         <ol>
            <li>On the host server, open a web browser and sign in to the <MadCap:variable name="okta-variables.ProductName"/>
               <MadCap:variable name="okta-feature-names.Administrator dashboard"/> with <span class="uicontrol">Super Admin</span> permissions.</li>
            <li>
                    In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Directory Integrations</span>
               </span>.<ol style="list-style-type: lower-alpha;">
                  <li>Click <span class="uicontrol">Add Directory</span> and then select <span class="uicontrol">Add Active Directory</span>.</li>
                  <li>Review the installation requirements and click <span class="uicontrol">Set Up Active Directory</span>. </li>
                  <li>Click <span class="uicontrol">Download Agent</span>.<br/>
                  </li>
               </ol>
            </li>
            <li>On the host server, locate and double-click the installer .exe file and complete the installation:<ol style="list-style-type: lower-alpha;">
                  <li>Click <span class="uicontrol">Run</span> when the message <span class="uicontrol">Do you want to run this file?</span> appears.</li>
                  <li>Click <span class="uicontrol">Next</span>.</li>
                  <li>Accept the default installation folder, or click <span class="uicontrol">Browse</span> and select an alternate location. Click <span class="uicontrol">Install</span>.</li>
                  <li>Accept the default AD domain you want to manage with this agent, or enter a domain name in the <span class="uicontrol">Domain</span> field. Click <span class="uicontrol">Next</span>.</li>
                  <li>Select a domain user for the <MadCap:variable name="okta-feature-names.AD agent short"/> to run as:<ul>
                        <li>Select <span class="uicontrol">Create or use the <MadCap:variable name="okta-variables.ProductName"/>Service account (recommended)</span> and complete the prompt to set a password.
Okta recommends using a complex password for security. </li>
                        <li>Select <span class="uicontrol">Use an alternate account that I specify</span> if you want to assign the <MadCap:variable name="okta-feature-names.AD agent short"/> to run as an existing domain user. </li>
                     </ul>
                  </li>
                  <p>If you're using a group Managed Service Account (gMSA) for the <MadCap:variable name="okta-feature-names.AD agent short"/> service account, enter the account name and leave the <span class="uicontrol">Password</span> field empty. You must include a dollar sign ($) at the end of the account name. For example, gMSA01$@example.com.</p>
                  <li>Click <span class="uicontrol">Next</span>.</li>
                  <li> Optional. Specify a proxy server through which your AD agent will connect. <br/>If you are installing an AD agent version 3.4.11 or later, in environments where internet traffic is required to go through a proxy, the sign-in flow for the AD agent installer uses the proxy settings specified within the installer. If no proxy settings are specified, the default settings are used.<br/>
                  </li>
                  <li> Click <span class="uicontrol">Next</span>.</li>
                  <li>Select a domain to register the <MadCap:variable name="okta-feature-names.AD agent short"/> with <MadCap:variable name="okta-variables.ProductName"/>. To register the <MadCap:variable name="okta-feature-names.AD agent short"/> with the <MadCap:variable name="okta-variables.ProductName"/> service, enter your <MadCap:variable name="okta-variables.ProductName"/> subdomain name. This is the &lt;<span class="term">mycompany</span>&gt; part of the example: &lt;<span class="term">mycompany</span>&gt;.okta.com. </li>
                  <li>Click <span class="uicontrol">Next</span>. </li>
                  <li>On the <span class="uicontrol">
                        <MadCap:variable name="okta-variables.ProductName"/> Sign In</span> page, enter your admin username and password, and then click <span class="uicontrol">Sign in</span>.</li>
                  <li>The <MadCap:variable name="okta-feature-names.AD agent short"/> requires several permissions. Click <span class="uicontrol">Allow Access</span>.
The agent installation completes.				<p>If the error message "The underlying connection was closed. Could not establish trust relationship for the SSL/TLS service channel" appears you are likely installing a version of the <MadCap:variable name="okta-feature-names.AD agent short"/> with SSL pinning enabled by default and this prevents communication with <MadCap:variable name="okta-variables.ProductName"/>. This is most likely to occur in environments that rely on SSL proxies. To complete the installation, <MadCap:variable name="okta-variables.ProductName"/> recommends adding the domain okta.com to an allowlist to bypass SSL proxy processing. You can also disable SSL certificate pinning.</p>
                  </li>
                  <li>Click <span class="uicontrol">Finish</span>.</li>
               </ol>
            </li>
            <li>When the <MadCap:variable name="okta-feature-names.AD agent short"/> starts, return to the browser and click <span class="uicontrol">Next</span>. </li>
            <li>Select the configuration options:<ol MadCap:continue="true" style="list-style-type: lower-alpha;">
                  <li>
                     <span class="uicontrol">(First time installations for this domain only)</span> On the <span class="uicontrol">Connect an Organizational Unit to <MadCap:variable name="okta-variables.ProductName"/>
                     </span> screen, select the OUs from which you want to import users and groups. </li>
                  <li>In the <span class="uicontrol">
                        <MadCap:variable name="okta-variables.ProductName"/> Username format</span> list, select one of these formats that you want AD-imported end users to use when logging in to <MadCap:variable name="okta-variables.ProductName"/>:<ul MadCap:continue="true">
                        <li>Email address</li>
                        <li>SAM Account Name</li>
                        <li>User Principal Name (UPN)</li>
                        <li>Custom</li>
                     </ul>
                     <p>It is critical that the username format selected here be the correct format when you first import users. Changing the value can cause errors for existing users. </p>
                  </li>
                  <li>Click <span class="uicontrol">Next</span>.</li>
                  <li>In the <span class="uicontrol">Import AD Users and Group</span> dialog, click <span class="uicontrol">Next</span>.</li>
               </ol>
               <p>
                  <span class="uicontrol">Note</span>: To reconfigure OU and import settings, as well as other settings, return to the <span class="uicontrol">Settings</span> tab (<span class="menucascade">
                     <span class="uicontrol">Directory</span>
                     <span class="uicontrol">Directory Integrations </span>
                     <span class="uicontrol">Active Directory</span>
                     <span class="uicontrol">Settings</span>
                  </span>). See <MadCap:xref href="ad-agent-configure-import.htm">Configure Active Directory  import and account settings</MadCap:xref>.</p>
            </li>
            <li>
               <p>On the <span class="uicontrol">Select the attributes to build your Okta User profile</span> screen, accept the default attributes or select the specific attributes for your <MadCap:variable name="okta-variables.ProductName"/> user profiles. Attributes can be modified as the needs of your business change. <p>To learn more about <MadCap:variable name="okta-variables.ProductName"/> user profiles and attributes, see <MadCap:xref href="ad-agent-configure-user-profiles-attributes.htm">Work with Active Directory attributes</MadCap:xref>.</p>
               </p>
            </li>
            <li> Click <span class="uicontrol">Next</span>.</li>
            <li>Click <span class="uicontrol">Done</span>. </li>
            <li>Define the  import, account, and provisioning settings.</li>
         </ol>
      </div>
      <h2>Next steps</h2>
      <p>
         <MadCap:xref href="ad-agent-configure-import.htm">Configure Active Directory  import and account settings</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="ad-agent-configure-provisioning.htm">Configure Active Directory provisioning settings</MadCap:xref>
      </p>
   </body>
</html>
