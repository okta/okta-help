<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Provides reference information specific to Oracle Directory Server Enterprise Edition (ODSEE) LDAP integrations."/>
   </head>
   <body>
      <h1>Oracle Directory Server Enterprise Edition LDAP integration reference</h1>
      <p>This topic provides reference information specific to Oracle Directory Server Enterprise Edition (ODSEE) LDAP integrations. When you're installing the <MadCap:variable name="okta-feature-names.LDAP agent short"/>, you'll need this information to integrate your ODSEE directory with <MadCap:variable name="okta-variables.ProductName"/>. See <MadCap:xref href="ldap-agent-install-configure.htm">Install the [%=okta-feature-names.LDAP agent short%]</MadCap:xref>.</p>
      <h2>Recommended version</h2>
      <p>ODSEE 11.1.1.7.0</p>
      <h2>Known issues</h2>
      <ul>
         <li>Users requesting a self password reset and who are required to change their password after it is reset by an admin, must provide their new password twice to access the Okta End-User Dashboard.
            </li>
         <li>
                Users using a temporary password are not prompted to create a new password and can continue to use the temporary password for authentication.
                        </li>
         <li>A
                locked user account cannot be unlocked when the account is locked on the LDAP server.
</li>
         <li>When the provisioning settings indicate <span class="uicontrol">Do nothing</span> when users are deactivated, users remain active in <MadCap:variable name="okta-variables.ProductName"/>. When a single source provides user profile attributes, deactivated users are disconnected from the source and <MadCap:variable name="okta-variables.ProductName"/> becomes the source for user profile attributes.            </li>
      </ul>
      <h2>Integration configuration</h2>
      <p>During the initial agent install and configuration  documented in <MadCap:xref href="ldap-agent-install-configure.htm">Install the [%=okta-feature-names.LDAP agent short%]</MadCap:xref>, these are the  attributes for ODSEE:</p>
      <ul>
         <li>LDAP version: ODSEE. If you select Sun DSEE or another option, the virtual list view (VLV) request control is not activated. An LDAP import can fail when the data set is too large. The ODSEE option is not available unless it is activated by <MadCap:variable name="okta-variables.ProductName"/> support.</li>
         <li>Unique Identifier Attribute:  nsuniqueid</li>
         <li>DN Attribute:  entrydn
            </li>
         <li>User Object Class:  inetorgperson
            </li>
         <li>User Object Filter: (objectclass=inetorgperson)
            </li>
         <li>*Account Disabled Attribute: nsAccountLock</li>
         <li>*Account Disabled Value: TRUE
            </li>
         <li>*Account Enabled Value: FALSE
            </li>
         <li>Password Attribute: userpassword
            </li>
         <li>Group Object Class: groupofuniquenames</li>
         <li>Group Object Filter: (objectclass=groupofnames)
            </li>
         <li>Member Attribute: uniquemember</li>
      </ul>
      <h2>Schema read</h2>
      <p>There are no special considerations for ODSEE LDAP integrations.</p>
      <p>To add attributes from AUX classes,  add the auxiliary class as an Auxiliary Object Class to the directory provisioning configuration. For example, the <code>dc</code> attribute is added to the <MadCap:variable name="okta-variables.ProductName"/> schema attributes  when the Auxiliary Object Class is <code>dcObject</code>.</p>
      <h2>Password change </h2>
      <p>Users can change their password  by selecting <span class="uicontrol">Settings</span> on the <MadCap:variable name="okta-variables.ProductName"/> end user dashboard. </p>
      <p>Password update operations that fail are parsed by Okta and the error message appears in the Delegated Authentication page. For example, when a new password already exists, the error message <span class="msgblock">Password change failed due to following reason : password in history</span> appears.</p>
      <h2>Password  reset</h2>
      <p>Password reset is triggered by an administrator or the User Forgot Password flow.</p>
      <p>Password reset can fail if the new password does not meet the password policy criteria.</p>
      <p>Users cannot update expired passwords. Expired passwords must be reset by an administrator.</p>
      <h2>Password validation</h2>
      <p>Use the pwdPolicy object class to implement ODSEE specific password policies.</p>
      <p>You can configure settings such as password length and expiration on your LDAP instance.</p>
      <p>If a user incorrectly enters an <MadCap:variable name="okta-variables.ProductName"/> password four times and an LDAP password five times, their LDAP user account status is <span class="uicontrol">Locked</span>, but the status for the user account displays as <span class="uicontrol">Active</span> on the <MadCap:variable name="okta-variables.ProductName"/>
         <MadCap:variable name="okta-feature-names.Administrator dashboard"/>. When an account is in this state, an administrator must unlock the user account. See <MadCap:xref href="../users-groups-profiles/usgp-unlock-individual.htm">Unlock an individual user account</MadCap:xref>.</p>
      <h2>Import </h2>
      <p>ODSEE LDAP integrations include support for the LDAP virtual list view (VLV) control. By default, the sorting key for groups is <code>cn</code>  and <code>uid</code> for users. A similar methodology to server simple pagination control is used for imports. When VLV is enabled, the agent log displays this message: <code>VLVContext for reading from LDAP with sortingKey=cn</code>.</p>
      <p>If you are using the LDAP VLV control, you need to create VLV indices to match user and group base Distinguished Names (DNs).  For example, when creating a VLV index for the user base DN <span class="code">ou=people,dc=example,dc=com</span>, you  use these default values:</p>
      <span class="codeblock">dn: cn=people_browsing_index, cn=database-name,
cn=ldbm database,cn=plugins,cn=config
objectClass: top
objectClass: vlvSearch
cn: Browsing ou=People
vlvBase: ou=People,dc=example,dc=com
vlvScope: 2
vlvFilter: (objectclass=inetOrgPerson)
dn: cn=Sort rev uid, cn=people_browsing_index,
cn=database-name,cn=ldbm database,cn=plugins,cn=config
objectClass: top
objectClass: vlvIndex
cn: Sort rev uid
vlvSort: uid</span>
      <p>After you create your VLV indices, you might need to reindex the LDAP server to implement the new settings. </p>
      <p>To create a VLV index, see <a href="https://docs.oracle.com/cd/E20295_01/html/821-1220/bcaug.html#add-browsing-index">To Add or Modify Browsing Index Entries</a> in the Oracle Directory Server Enterprise Edition Administration Guide.</p>
      <h2>JIT provisioning</h2>
      <p>There are no special considerations for ODSEE Just In Time (JIT) provisioning. For user identification (UID), use an email format   to match the default setting for an Okta username. Do not use an external identity provider (IDP)  to trigger sign in.</p>
      <p>To make sure that JIT provisioning is successful the first time:</p>
      <ul>
         <li>the value of the configured naming attribute (such as UID) must not  exist in <MadCap:variable name="okta-variables.ProductName"/>.</li>
         <li>the value of the configured naming attribute (such as UID) must be unique in all JIT-enabled directories.</li>
         <li>the required attributes must present. The <MadCap:variable name="okta-variables.ProductName"/> defaults are email, givenName, sn, and uid.</li>
         <li>the password must be correct.</li>
         <li>the Account Disabled Attribute must be set to false on the LDAP server.</li>
      </ul>
      <p>When JIT provisioning completes successfully, all of the user attributes specified on the LDAP settings page and in the Profile Editor are imported.  To select additional mandatory attributes, use the Profile Editor.</p>
      <h2>Membership import </h2>
      <p>During import, if the default ODSEE settings are used,  user groups with the objectClass group are imported and added to the user specified in the member group attribute.</p>
      <p>During import, if the membership attribute is set to seeAlso, users are assigned to the groups added to the seeAlso user attribute.</p>
      <h2>Provisioning</h2>
      <p>To allow passwords to be set when users are created or assigned, disable DelAuth, enable LDAP_PUSH_PASSWORD_UPDATES, and enable password sync on your LDAP instance. With these settings, the LDAP agent sends the PASSWORD_UPDATE action when the user logs in for the first time or when they are assigned. If you do not set these settings, the password is not transferred to your LDAP instance.</p>
      <p>To create and assign passwords when creating user profiles:</p>
      <ol>
         <li>Contact <MadCap:variable name="okta-variables.ProductName"/> customer support to enable LDAP push password updates.</li>
         <li>Disable delegated authentication:</li>
         <ol style="list-style-type: lower-alpha;">
            <li>
                    In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                     <span class="uicontrol">Security</span>
                     <span class="uicontrol">Delegated Authentication</span>
                     <span class="uicontrol">LDAP</span>
                 </span>.</li>
            <li>Click <span class="uicontrol">Edit</span> in the <span class="uicontrol">Delegated Authentication</span> pane.</li>
            <li>Clear the <span class="uicontrol">Enable delegated authentication to LDAP</span> check box.</li>
            <li>Click <span class="uicontrol">Save</span>.</li>
            <li>Accept the default setting to reset all LDAP user passwords and click <span class="uicontrol">Disable LDAP Authentication</span>.</li>
         </ol>
         <li>
                In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Directory Integrations</span>
                  <span class="uicontrol">LDAP</span>
                  <span class="uicontrol">Provisioning</span>
                  <span class="uicontrol">To App</span>
               </span>.</li>
         <li>Click <span class="uicontrol">Edit</span>, select <span class="uicontrol">Enable</span> next to <span class="uicontrol">Sync Password</span>, and click <span class="uicontrol">Save</span>. </li>
         <p>When <span class="uicontrol">Sync Password</span> is enabled, the LDAP agent sends the action PASSWORD_UPDATE when the user signs in for the first time.</p>
      </ol>
      <p>To assign existing <MadCap:variable name="okta-variables.ProductName"/> users to LDAP:</p>
      <ol>
         <li>
                In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Directory Integrations</span>
                  <span class="uicontrol">LDAP</span>
                  <span class="uicontrol">Provisioning</span>
                  <span class="uicontrol">To App</span>
               </span>.</li>
         <li>Click <span class="uicontrol">Edit</span>, select <span class="uicontrol">Enable</span> next to <span class="uicontrol">Create Users</span>, and click <span class="uicontrol">Save</span>.</li>
         <li>Click <span class="menucascade">
               <span class="uicontrol">Directory</span>
               <span class="uicontrol">Groups</span>
            </span>.</li>
         <li>Select the <MadCap:variable name="okta-variables.ProductName"/> group to which you want to assign users.</li>
         <li>Click <span class="uicontrol">Manage Directories</span>.</li>
         <li>Select an LDAP instance in the left pane and click <span class="uicontrol">Next</span>.</li>
         <li>Enter the full distinguished name (DN) for the new user LDAP container in the <span class="uicontrol">Provisioning Destination DN</span> field.</li>
         <li>Click <span class="uicontrol">Confirm Changes</span>.</li>
      </ol>
      <h2> Troubleshooting</h2>
      <p>If LDAP directory authentication fails, the agent logs display messages similar to the following to assist with diagnosis and resolution:</p>
      <h4>Agent: Success</h4>
      <p>POST initiated with result status=SUCCESS, actionType=USER_AUTH_AND_UPDATE, actionId=ADStwgvcY62FO3G5j0g3, diagnostic message=, error code=, matched dn=, message=SUCCESS, result code=, vendor=OID</p>
      <h4>Agent: Delauth failure</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADStwmk6wiL2JhaEq0g3, diagnostic message=, error code=49, matched dn=cn=MultyGroupsODSEE MultyGroupsODSEE,ou=QA users,dc=okta,dc=com, message=LDAPException(resultCode=49 (invalid credentials), errorMessage='invalid credentials'), result code=invalid credentials, vendor=OID</p>
      <h4>Agent: No user </h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADStwotN9I9aWlO0w0g3, diagnostic message=, error code=, matched dn=, message=User not found while executing query: (&amp;(objectclass=inetorgperson)(uid=ODSEE@odsee.com)), result code=, vendor=OID</p>
      <h4>Agent: Password expired</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADSu1co2UeSUZXlxd0g3, diagnostic message=password expired!, error code=49, matched dn=cn=MultyGroupsODSEE MultyGroupsODSEE,ou=QA users,dc=okta,dc=com, message=LDAPException(resultCode=49 (invalid credentials), errorMessage='password expired!', diagnosticMessage='password expired!', responseControls={PasswordExpiredControl(isCritical=false)}), result code=PASSWORD_EXPIRED, vendor=OID</p>
      <h4>Agent: User deactivated (nsAccountLock = TRUE)</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADSu1eOJMNAcTT3hQ0g3, diagnostic message=Account inactivated. Contact system administrator., error code=53, matched dn=cn=MultyGroupsODSEE MultyGroupsODSEE,ou=QA users,dc=okta,dc=com, message=LDAPException(resultCode=53 (unwilling to perform), errorMessage='Account inactivated. Contact system administrator.', diagnosticMessage='Account inactivated. Contact system administrator.'), result code=unwilling to perform, vendor=OID</p>
      <h4>Agent: User locked </h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADStwqjhzOuGiPm6M0g3, diagnostic message=Exceed password retry limit. Account locked., error code=19, matched dn=cn=MultyGroupsODSEE MultyGroupsODSEE,ou=QA users,dc=okta,dc=com, message=LDAPException(resultCode=19 (constraint violation), errorMessage='Exceed password retry limit. Account locked.', diagnosticMessage='Exceed password retry limit. Account locked.'), result code=constraint violation, vendor=OID</p>
   </body>
</html>
