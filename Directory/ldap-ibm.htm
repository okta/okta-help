<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
      <meta name="description"
            content="Reference information specific to IBM Lightweight Directory Access Protocol (LDAP) integrations."/>
   </head>
   <body>
      <h1>IBM LDAP integration reference</h1>
      <p>This topic provides reference information specific to IBM Lightweight Directory Access Protocol (LDAP) integrations. When you're installing the <MadCap:variable name="okta-feature-names.LDAP agent short"/>, you'll need this information to integrate your IBM directory with <MadCap:variable name="okta-variables.ProductName"/>. See <MadCap:xref href="ldap-agent-install-configure.htm">Install and configure the [%=okta-feature-names.LDAP agent short%]</MadCap:xref>.</p>
      <h2 MadCap:conditions="MultiProdPublish.Classic">Recommended version</h2>
      <p MadCap:conditions="MultiProdPublish.Classic">IBM Security Directory Server 6.3.1</p>
      <h2>Known issues</h2>
      <ul>
         <li>
                Users with expired passwords cannot update their passwords. They must be reset by an admin.
</li>
         <li>When the provisioning settings indicate <span class="uicontrol">Do nothing</span> when users are deactivated, users remain active in <MadCap:variable name="okta-variables.ProductName"/>. When a single source provides user profile attributes, deactivated users are disconnected from the source and <MadCap:variable name="okta-variables.ProductName"/> becomes the source for user profile attributes.</li>
         <li>The LDAP server does not allow users to update expired passwords. Updates must be completed by an admin.</li>
      </ul>
      <h2>Integration configuration</h2>
      <p>During the initial agent install and configuration  documented in <MadCap:xref href="ldap-agent-install-configure.htm">Install the [%=okta-feature-names.LDAP agent short%]</MadCap:xref>, these are the attributes for IBM integrations:</p>
      <ul>
         <li>Unique Identifier Attribute - ibm-entryuuid</li>
         <li>DN Attribute - distinguishedname</li>
         <li>User Object Class - inetorgperson</li>
         <li>User Object Filter - (objectclass=inetorgperson)
            </li>
         <li>*Account Disabled Attribute - ibm-pwdAccountLocked</li>
         <li>*Account Disabled Value - TRUE</li>
         <li>*Account Enabled Value - FALSE</li>
         <li>Password Attribute - userpassword</li>
         <li>Group Object Class - groupofuniquenames</li>
         <li>Group Object Filter - (objectclass=groupofuniquenames)
            </li>
         <li>Member Attribute - uniquemember</li>
      </ul>
      <p> To lock an account,   delete the user password, or set the pwdLockout attribute to TRUE. Use the <MadCap:variable name="okta-feature-names.Profile Editor"/> to select additional user profile attributes. </p>
      <h2>Schema read</h2>
      <p>There are no special considerations for IBM LDAP integrations.</p>
      <h2>Password change </h2>
      <p>Users can change their password  by selecting <span class="uicontrol">Settings</span> on the <MadCap:variable name="okta-variables.ProductName"/> end user dashboard.</p>
      <p>To allow  users to change or reset their password, click <span class="menucascade">
            <span class="uicontrol">Security</span>
            <span class="uicontrol">Delegated Authentication</span>
         </span>, select the <span class="uicontrol">LDAP</span> tab, and then select <span class="menucascade">
         <span class="uicontrol">Users can change their LDAP passwords</span>
         <span class="uicontrol">in</span>
         <span class="uicontrol">
           <MadCap:variable name="okta-variables.ProductName"/>
         </span>
      </span>.
      </p>
      <p>Validation error messages are  displayed on the Delegated Authentication page. </p>
      <p>Passwords are plain text by default. To encrypt passwords before they are saved, see password encryption in the <a href="https://www.ibm.com/support/knowledgecenter/en/SSVJJU_6.4.0/com.ibm.IBMDS.doc_6.4/ds_ag_srv_adm_pwd_encryption.html">IBM Security Directory Server</a> documentation.</p>
      <h2>Password  reset</h2>
      <p>Password reset is triggered by an administrator or the User Forgot Password flow.</p>
      <p>IBM password policies are not replicated in <MadCap:variable name="okta-variables.ProductName"/>. Passwords that do not meet the LDAP password policy criteria can be generated and cause authentication failure. To prevent this, review your IBM Directory Server password policies to identify and correct conflicts before allowing password resets through <MadCap:variable name="okta-variables.ProductName"/>.</p>
      <p>Users cannot update expired passwords. Expired passwords must be reset by an administrator.</p>
      <p>IBM LDAP integrations do not support the password expiration warning and setting a <span class="uicontrol">Password age</span> value in the LDAP Group Password Policy has no effect.</p>
      <h2>Import </h2>
      <p>There are no special considerations for IBM LDAP integrations.</p>
      <h2>JIT provisioning</h2>
      <p>There are no special considerations for IBM Just In Time (JIT) provisioning. For user identification (UID), use an email format   to match the default setting for an <MadCap:variable name="okta-variables.ProductName"/> username. Do not use an external identity provider (IDP)  to trigger sign in.</p>
      <p>To make sure that JIT provisioning is successful the first time:</p>
      <ul>
         <li>the value of the configured naming attribute (such as UID) must not exist in Okta.</li>
         <li>the value of the configured naming attribute (such as UID) must be unique in all JIT-enabled directories.</li>
         <li>the required attributes must present. The <MadCap:variable name="okta-variables.ProductName"/> defaults are email, givenName, sn, and uid.</li>
         <li>the password must be correct.</li>
         <li>the Account Disabled Attribute must be set to false on the LDAP server.</li>
      </ul>
      <p>When JIT provisioning completes successfully, all of the user attributes specified on the LDAP settings page and in the Profile Editor are imported.  To select additional mandatory attributes, use the Profile Editor.</p>
      <h2>Provisioning</h2>
      <p>IBM password policies are not replicated in <MadCap:variable name="okta-variables.ProductName"/>. Passwords that do not meet the LDAP password policy criteria can be generated and cause authentication failure. To prevent this, review your IBM Directory Server password policies to identify and correct conflicts before allowing password resets through <MadCap:variable name="okta-variables.ProductName"/>.</p>
      <p>To create and assign passwords when creating user profiles:</p>
      <ol>
         <li>Contact <MadCap:variable name="okta-variables.ProductName"/> customer support to enable LDAP push password updates.</li>
         <li>Disable delegated authentication:</li>
         <ol style="list-style-type: lower-alpha;">
            <li>
                    In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                     <span class="uicontrol">Security</span>
                     <span class="uicontrol">Delegated Authentication</span>
                     <span class="uicontrol">LDAP</span>
                  </span>.</li>
            <li>Click <span class="uicontrol">Edit</span> in the <span class="uicontrol">Delegated Authentication</span> pane.</li>
            <li>Clear the <span class="uicontrol">Enable delegated authentication to LDAP</span> check box.</li>
            <li>Click <span class="uicontrol">Save</span>.</li>
            <li>Accept the default setting to reset all LDAP user passwords and click <span class="uicontrol">Disable LDAP Authentication</span>.</li>
         </ol>
         <li>Accept the default setting to reset all LDAP user passwords and click <span class="uicontrol">Disable LDAP Authentication</span>.</li>
         <li>Open your <MadCap:variable name="okta-variables.ProductName"/> Admin Console, click <span class="menucascade">
               <span class="uicontrol">Directory</span>
               <span class="uicontrol">Directory Integrations</span>
               <span class="uicontrol">LDAP</span>
               <span class="uicontrol">Provisioning</span>
               <span class="uicontrol">To App</span>
            </span>.</li>
         <li>Click <span class="uicontrol">Edit</span>, select <span class="uicontrol">Enable</span> next to <span class="uicontrol">Sync Password</span>, and click <span class="uicontrol">Save</span>. </li>
         <p>When <span class="uicontrol">Sync Password</span> is enabled, the LDAP agent sends the action PASSWORD_UPDATE when the user signs in for the first time.</p>
      </ol>
      <p>To assign existing <MadCap:variable name="okta-variables.ProductName"/> users to LDAP:</p>
      <ol>
         <li>
                In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Directory Integrations</span>
                  <span class="uicontrol">LDAP</span>
                  <span class="uicontrol">Provisioning</span>
                  <span class="uicontrol">To App</span>
              </span>.</li>
         <li>Click <span class="uicontrol">Edit</span>, select <span class="uicontrol">Enable</span> next to <span class="uicontrol">Create Users</span>, and click <span class="uicontrol">Save</span>.</li>
         <li>Click <span class="menucascade">
               <span class="uicontrol">Directory</span>
               <span class="uicontrol">Groups</span>
            </span>.</li>
         <li>Select the <MadCap:variable name="okta-variables.ProductName"/> group to which you want to assign users.</li>
         <li>Click <span class="uicontrol">Manage Directories</span>.</li>
         <li>Select an LDAP instance in the left pane and click <span class="uicontrol">Next</span>.</li>
         <li>Enter the full distinguished name (DN) for the new user LDAP container in the <span class="uicontrol">Provisioning Destination DN</span> field.</li>
         <li>Click <span class="uicontrol">Confirm Changes</span>.</li>
      </ol>
      <h2>Troubleshooting</h2>
      <p>If LDAP directory authentication fails, the agent logs display messages similar to the following to assist with diagnosis and resolution:</p>
      <h4>Agent: Success</h4>
      <p>scanResults are sent with user and group info</p>
      <p>POST initiated with result status=SUCCESS, actionType=USER_AUTH_AND_UPDATE, actionId=ADSx27FqYtCqky2Wv0g3, diagnostic message=, error code=, matched dn=, message=SUCCESS, result code=, vendor=IBM</p>
      <h4>Agent: Delauth failure</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADSx1f9Wa5VsAmx8g0g3, diagnostic message=, error code=49, matched dn=cn=DelAuth,ou=Automation,O=FOX, message=LDAPException(resultCode=49 (invalid credentials), errorMessage='invalid credentials'), result code=invalid credentials, vendor=IBM</p>
      <h4>Agent: No user</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADSx1zLU1yUw7hcKM0g3, diagnostic message=, error code=, matched dn=, message=User not found while executing query: (&amp;(objectclass=inetorgperson)(uid=asdfasdf)), result code=, vendor=IBM</p>
      <h4>Agent: Password Expired</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADSydvdqGivWZ2eBN0g3, diagnostic message=, error code=508, matched dn=cn=PasswordExpired,ou=Automation,o=FOX, message=LDAPException(resultCode=508, errorMessage='508'), result code=508, vendor=IBM</p>
      <h4>Agent: Locked Out</h4>
      <p>POST initiated with result status=FAILURE, actionType=USER_AUTH_AND_UPDATE, actionId=ADSyhmxo2EEQAPJTu0g3, diagnostic message=Error, Account is locked, error code=53, matched dn=cn=smith117 newman,ou=automation,o=fox, message=LDAPException(resultCode=53 (unwilling to perform), errorMessage='Error, Account is locked', diagnosticMessage='Error, Account is locked'), result code=unwilling to perform, vendor=IBM</p>
   </body>
</html>
