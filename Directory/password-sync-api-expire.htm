<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      description="Use the Okta API to expire Okta-sourced user passwords and prompt them to set a new password when they next sign in."
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Use the Okta API to expire Okta-sourced user passwords and prompt them to set a new password when they next sign in."/>
   </head>
   <body>
      <h1>Use the Okta  API to expire user passwords</h1>
      <p>Use the <MadCap:variable name="okta-variables.ProductName"/> API to expire <MadCap:variable name="okta-variables.ProductName"/>-sourced user passwords and prompt them to set a new password when they next sign in.</p>
      <ol>
         <li>
                In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
               <span class="uicontrol">Directory</span>
               <span class="uicontrol">Directory Integrations</span>
               <span class="uicontrol">Active Directory</span>
               <span class="uicontrol">Provisioning</span>
            </span>.</li>
         <li>
Click <span class="uicontrol">Integration</span> in the <span class="uicontrol">Settings</span> list.</li>
         <li>Scroll down and clear the <span class="uicontrol">Enable delegated authentication to Active Directory</span> check box.
</li>
         <li>Click <span class="uicontrol">Save</span>.</li>
         <li>Select <span class="uicontrol">Create <MadCap:variable name="okta-variables.ProductName"/> password (recommended)</span>.</li>
         <li>Click <span class="uicontrol">Disable AD Authentication</span>.
</li>
         <li>
In the <span class="uicontrol">Settings</span> list, click <span class="uicontrol">To App</span>, click <span class="uicontrol">Edit</span>, scroll to the <span class="uicontrol">Sync Password</span> section, and select <span class="uicontrol">Enable</span>.
</li>
         <li>Click <span class="uicontrol">Save</span>.
</li>
         <li>Optional. To exclude specific users from password expiration:<ol style="list-style-type: lower-alpha;">
               <li MadCap:conditions="MultiProdPublish.Classic">Click <span class="menucascade">
                     <span class="uicontrol">Security</span>
                     <span class="uicontrol">Authentication</span>
                  </span> and select <span class="uicontrol">Active Directory Policy</span>.</li>
               <li MadCap:conditions="MultiProdPublish.OIE">Click <span class="menucascade">
                     <span class="uicontrol">Security</span>
                     <span class="uicontrol">Authenticators</span>
                  </span>.</li>
               <li MadCap:conditions="MultiProdPublish.OIE">For <span class="uicontrol">Password</span>, click <span class="uicontrol">Actions</span> and select <span class="uicontrol">Edit</span>.</li>
               <li>Scroll down and click <span class="uicontrol">Add Rule</span>.</li>
               <li>Complete these fields:<ul>
                     <li>
                        <span class="uicontrol">Rule Name</span> — Enter a name for the rule.</li>
                     <li>
                        <span class="uicontrol">Exclude Users</span> — Optional. Identify the users you want excluded from this rule.</li>
                     <li>
                        <span class="uicontrol">IF User's IP Address is</span> — Optional. Indicate if the rule should apply to an IP address that is inside or outside a specific zone.</li>
                     <li>
                        <span class="uicontrol">THEN User can</span> — Select <span class="uicontrol">change password</span>.</li>
                  </ul>
               </li>
               <li>Click <span class="uicontrol">Create Rule</span>.</li>
            </ol>
         </li>
      </ol>
      <ol MadCap:continue="true">
         <li>Access the expire_password endpoint in the <MadCap:variable name="okta-variables.ProductName"/> User API and change the tempPassword parameter value to TRUE. See <a href="https://developer.okta.com/docs/reference/api/users/#expire-password">Expire Password</a> in the <MadCap:variable name="okta-variables.ProductName"/> Developer Documentation.</li>
      </ol>
   </body>
</html>
