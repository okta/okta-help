<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
   </head>
   <body>
      <h1>Configure LDAP to <MadCap:variable name="okta-variables.ProductName"/> provisioning settings</h1>
      <p>After installing and configuring the <MadCap:variable name="okta-feature-names.LDAP agent short"/>, you can use this procedure to update your LDAP to <MadCap:variable name="okta-variables.ProductName"/> provisioning settings as the needs of your org change. The LDAP to <MadCap:variable name="okta-variables.ProductName"/> provisioning settings define how LDAP user data is shared and manged with <MadCap:variable name="okta-variables.ProductName"/>.</p>
      <ol>
         <li>
                In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
               <span class="uicontrol">Directory</span>
               <span class="uicontrol">Directory Integrations</span>
            </span>.</li>
         <li>Select the LDAP agent from the list of directories.</li>
         <li>Click the <span class="uicontrol">Provisioning</span> tab and select <span class="uicontrol">To <MadCap:variable name="okta-variables.ProductName"/>
            </span> in the <span class="uicontrol">Settings</span> list.</li>
         <li>Click <span class="uicontrol">Edit</span> and complete the following settings:<ul>
               <li>
                  <span class="uicontrol">Schedule import</span> – Select the frequency for  importing users from LDAP to <MadCap:variable name="okta-variables.ProductName"/>.</li>
               <li>
                  <span class="uicontrol">
                     <MadCap:variable name="okta-variables.ProductName"/> username format</span>: Specify a username format. When you import users from LDAP, <MadCap:variable name="okta-variables.ProductName"/> uses this attribute to generate the <MadCap:variable name="okta-variables.ProductName"/> username. When you access <span class="uicontrol">Import Settings</span> during LDAP setup, the username format matches the option you selected when you tested the configuration and you should not need to change it. You can also access this page later and select another option, if necessary. User names must be in email format, so ensure the selected option is appropriate for your environment.</li>
            </ul>
            <p style="text-align: left;margin-left: 40px;">You can use custom expressions to create usernames for imported users, but the custom expression is not considered when the search query used to locate accounts in LDAP during Just-in-Time (JIT) provisioning is determined. If you set the <MadCap:variable name="okta-variables.ProductName"/> username format field to <span class="uicontrol">Custom</span>, enable JIT provisioning, and a LDAP user account does not exist, the LDAP directory is searched for the unique identifier (uid) or the email (mail) attribute that matches the username used to sign in to <MadCap:variable name="okta-variables.ProductName"/>.</p>
            <ul>
               <li>
                  <span class="uicontrol">Update application user name on</span>: This setting cannot be changed.</li>
               <li MadCap:conditions="MultiProdPublish.OIE">
                  <p>
                     <span class="uicontrol">JIT Provisioning</span>:  Select if you want to enable Just-in-Time (JIT) update and JIT creation when a user signs in. Select <span class="uicontrol">Create and update users on login</span> to automatically create <MadCap:variable name="okta-variables.ProductName"/> user accounts the first time a user authenticates with LDAP Delegated Authentication. When an LDAP sourced user profile already exists in <MadCap:variable name="okta-variables.ProductName"/>, the existing user profile is updated when the user signs in, or when an admin views the profile.</p>
               </li>
               <p MadCap:conditions="MultiProdPublish.OIE">If you enable JIT, you must enable delegated authentication. JIT provisioning can be used with or without scheduled imports.</p>
               <li>
                  <span class="uicontrol">Activation emails</span>: Select if you don't want to send new user activation emails.</li>
               <li>
                  <span class="uicontrol">Incremental import</span>: Select to only import users that were created or updated since your last import. Matching rules are only evaluated on these users. This is the type of import performed by scheduled imports.</li>
               <li>
                  <span class="uicontrol">Maximum clock skew</span>: Incremental import relies on the <span class="code">modifyTimestamp</span> attribute to determine whether an LDAP entry has been imported. However, the system clock on some on-premises LDAP servers could go backward, causing some updates to be missed. To prevent missed updates, set the clock skew to a value that is the maximum potential clock drift of the server.
										To improve the performance of incremental import, the <span class="code">modifyTimestamp</span> attribute should be indexed on your LDAP server.</li>
               <li MadCap:conditions="Primary.review-only">
                  <span class="uicontrol">Decimal Precision</span>: If you are using eDirectory, this value defaults to 1. Other directories may use another value. Ensure this value is set correctly to ensure that incremental imports works.</li>
            </ul>
         </li>
         <li>
                Click <span class="uicontrol">Save</span>.
            </li>
         <li>
            <a name="Matchingrules"/>To define your <span class="uicontrol">User Creation &amp; Matching</span> settings, click <span class="uicontrol">Edit</span> and complete the following settings:<ul>
               <li>
                  <p>
                     <span class="uicontrol">Imported user is an exact match to <MadCap:variable name="okta-variables.ProductName"/> user if</span>: Matching rules are used in the import of users from all apps and directories that allow importing.  Establishing matching criteria allows you to specify how an imported user should be defined as a new user or mapped to an existing <MadCap:variable name="okta-variables.ProductName"/> user.</p>
                  <p>Select the match criteria that establishes whether an imported user exactly matches an existing <MadCap:variable name="okta-variables.ProductName"/> user. Choose any combination from the list of options to establish your criteria. For the new imported user to be considered an exact match, each option that you select must be true. Note that if you choose the third option, the first and second choices are disabled.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Allow partial matches</span>: Partial matching occurs when the first and last name of an imported user matches that of an existing <MadCap:variable name="okta-variables.ProductName"/> user, but the user’s username or/and email address do not.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Confirm matched users</span>: Select to automate the confirmation or activation of existing users. Unchecked, matches must be confirmed manually.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Confirm new users</span>: Select to automate the confirmation or activation of a newly imported user. If this option is selected, you can uncheck it during import confirmation. Note that this feature does not apply for users who already exist in <MadCap:variable name="okta-variables.ProductName"/>.</p>
               </li>
               <p>For information on deprovisioning, see <MadCap:xref href="../Apps/Provisioning_Deprovisioning_Overview.htm">Provisioning</MadCap:xref>.</p>
            </ul>
         </li>
         <li>
                Click <span class="uicontrol">Save</span>.
            </li>
         <li>To define your <span class="uicontrol">Profile &amp; Lifecycle Sourcing</span> settings, click <span class="uicontrol">Edit</span> and complete the following settings:</li>
         <ul>
            <li>
               <span class="uicontrol">Allow LDAP to source <MadCap:variable name="okta-variables.ProductName"/> users</span> — This option is enabled by default. Profile sourcing makes LDAP the identity authority for connected users. When enabled, user profiles are not editable in <MadCap:variable name="okta-variables.ProductName"/> and changes are synced to <MadCap:variable name="okta-variables.ProductName"/> during provisioning events. You can disable this option to have LDAP treated as a normal application. If you disable this feature, user updates you perform in LDAP are not pushed back to the user in <MadCap:variable name="okta-variables.ProductName"/>. For example, if you change a user's name in LDAP , the change does not affect the <MadCap:variable name="okta-variables.ProductName"/> user. If you disable LDAP as the profile source, you cannot reset a user's LDAP password in <MadCap:variable name="okta-variables.ProductName"/> because their credentials are still being managed by LDAP.
						You can, however, disable Delegated Authentication (see <MadCap:xref href="../Security/Security_Authentication.htm">Delegated authentication</MadCap:xref>) and enable the <span class="uicontrol">Sync Password</span> option to push passwords to LDAP. This means that your users have their delegated <MadCap:variable name="okta-variables.ProductName"/> password, but any subsequent password updates are pushed to LDAP.</li>
            <li>
               <span class="uicontrol">When a user is deactivated in the app</span>  — Specify what action <MadCap:variable name="okta-variables.ProductName"/> should take if the user's account is deactivated in <MadCap:variable name="okta-variables.ProductName"/>.<ul>
                  <li>
                     <span class="uicontrol">Do nothing</span>   — No action is taken.</li>
                  <li>
                     <span class="uicontrol">Deactivate</span>   — Deactivates users' LDAP  account when they are unassigned in <MadCap:variable name="okta-variables.ProductName"/> or their <MadCap:variable name="okta-variables.ProductName"/> account is deactivated. Accounts can be reactivated if the app is reassigned to a user in <MadCap:variable name="okta-variables.ProductName"/>.</li>
                  <li>
                     <span class="uicontrol">Suspend</span>   — Suspends users' LDAP  account when they are unassigned in <MadCap:variable name="okta-variables.ProductName"/> or their <MadCap:variable name="okta-variables.ProductName"/> account is deactivated. Accounts can be reactivated if the app is reassigned to a user in <MadCap:variable name="okta-variables.ProductName"/>.</li>
               </ul>
            </li>
         </ul>
         <p>
            <ul>
               <li>
                  <span class="uicontrol">When a user is reactivated in the app</span>: Specify what action <MadCap:variable name="okta-variables.ProductName"/> should take if the user's account is reactivated in <MadCap:variable name="okta-variables.ProductName"/>.<ul>
                     <li>
                        <span class="uicontrol">Reactivate suspended <MadCap:variable name="okta-variables.ProductName"/> users</span>  — Reactivate suspended <MadCap:variable name="okta-variables.ProductName"/> users if they are reactivated in LDAP.</li>
                     <li>
                        <span class="uicontrol">Reactivate deactivated <MadCap:variable name="okta-variables.ProductName"/> users</span>  — Reactivate deactivated <MadCap:variable name="okta-variables.ProductName"/> users if they  are reactivated in LDAP.</li>
                  </ul>
               </li>
            </ul>
         </p>
         <li>
                Click <span class="uicontrol">Save</span>.
            </li>
         <li>Optional. To define the <span class="uicontrol">Import Safeguard</span> settings, click <span class="uicontrol">Edit</span> and complete the following:<ul>
               <li>
                  <span class="uicontrol">App unassignment safeguard</span> — Select <span class="uicontrol">Enabled</span> to enable import safeguards, or select <span class="uicontrol">Disabled</span> to disable import safeguards.</li>
               <li>
                  <span class="uicontrol">is the threshold for unassignments from any app</span> — Enter the percentage of allowable app or org unassignments, or select <span class="uicontrol">Set to default</span> to set the percentage to the default value.</li>
               <li>
                  <p>
                     <span class="uicontrol">Org-wide unassignment safeguard</span> — Select <span class="uicontrol">Enabled</span> to enable import safeguards for the entire org, or select <span class="uicontrol">Disabled</span> to disable import safeguards for the entire org.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">is the threshold for unassignments across the org</span>  — Enter the percentage of allowable app or org unassignments for the org, or select <span class="uicontrol">Set to default</span> to set the percentage for the org to the default value.</p>
               </li>
            </ul>
         </li>
         <li>
            <p>
                    Click <span class="uicontrol">Save</span>.
                </p>
         </li>
      </ol>
      <h2>Related topics</h2>
      <p>
         <MadCap:xref href="../users-groups-profiles/usgp-import-safeguard.htm">About import safeguards</MadCap:xref>
      </p>
   </body>
</html>
