<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Arshabhi Rai">
    <head>
        <link rel="canonical" href="https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/service-users-ci-cd.htm" /><title>[%=Heading.Level1%] | Okta</title>
        <meta name="description" content="Learn about using service users in Advanced Server Access, for example, as part of a continuous integration/continuous (CI/CD) process." />
    </head>
    <body>
        <h1>Use service users for continuous deployment</h1>
        <p>An infrastructure that uses continuous deployment automation  often requires SSH&#160;to deploy software or to perform tasks. Generally, this kind of automation runs SSH using a local user account on a continuous integration/continuous deployment (CI/CD) server that's dedicated to this purpose. For example, automated Jenkins jobs might be run as the 'jenkins' user on a Linux server. With <MadCap:variable name="okta-feature-names.ScaleFT" />, you can create service users to automate deployment to your target servers.</p>
        <ul>
            <li>
                <MadCap:xref href="#Before">Before you begin</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Create">Create a service user for continuous deployment</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Create2">Create a service for a project</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Add">Add the service user to a group</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Install">Enable service user authentication</MadCap:xref>
            </li>
        </ul>
        <h2><a name="Before"></a>Before you begin</h2>
        <p>You must install the <MadCap:variable name="okta-feature-names.ScaleFT" /> client on the host whose unmanaged user the service user is tied to. </p>
        <p>Note:&#160;The server can be any Linux host. The server can't be a Windows or FreeBSD host. See <MadCap:xref href="sft.htm">Install the [%=okta-feature-names.ScaleFT%] client</MadCap:xref>. </p>
        <p>Grant a group access to the host that contains the service user account.</p>
        <h2><a name="Create"></a>Create a service user for continuous deployment</h2>
        <MadCap:snippetBlock src="../snippets/create-service-user.flsnp" />
        <h2><a name="Create2"></a>Create a service for a project</h2>
        <ol>
            <li>Click <span class="uicontrol">Projects</span> on your team's <MadCap:variable name="okta-feature-names.ScaleFT" /> dashboard. The <span class="uicontrol">Projects</span> page appears.</li>
            <li>
                Click the project that contains the server that runs the service to assign to the service user.</li>
            <li>
                Select the <span class="uicontrol">Servers</span> tab.
            </li>
            <li>
                Choose the server on which to use the service user.
            </li>
            <li>
                Select the <span class="uicontrol">Services</span> tab. Click <span class="uicontrol">Add Service</span>.
            </li>
            <li>
                Select the service user that you created from the <span class="uicontrol">Service User</span> dropdown. Enter the UID of an unmanaged user in the <span class="uicontrol">UID</span> field.            <p>Note: To find the UID of a user, use the <code>ls /home</code> command to list the users on the server, then use the <code>id &lt;user&gt;</code> command to find the UID of a specific user.</p></li>
        </ol>
        <h2><a name="Add"></a>Add the service user to a group</h2>
        <ol>
            <li>
                Click <span class="uicontrol">Groups</span> on the <MadCap:variable name="okta-feature-names.ScaleFT" /> dashboard. </li>
            <li>Select a group that belongs to the project that contains the server that the service user will be deployed to.</li>
            <li>
                Select the <span class="uicontrol">Users</span> tab.
            </li>
            <li>
                Enter the username of the service user that you created. Click <span class="uicontrol">Add User</span>.    </li>
        </ol>
        <h2><a name="Install"></a>Enable service user authentication</h2>
        <p>Ensure that you've installed the <MadCap:variable name="okta-feature-names.ScaleFT" /> client on the server that's tied to the service user that you created. By installing the client and enabling authentication for service users, the service user's credentials can be used to perform tasks.</p>
        <p>Note:&#160;The <MadCap:variable name="okta-feature-names.ScaleFT" /> server agent must be installed and running on the server.</p>
        <ol>
            <li>
                Connect to the  server for the service user:<p><code>ssh &lt;target-server&gt;</code></p></li>
            <li>
                Switch to the unmanaged user that's tied to the <MadCap:variable name="okta-feature-names.ScaleFT" /> service user:
            </li>
            <p><code>su - &lt;unmanaged-user&gt;</code>
            </p>
            <li>
                Enable service user authentication:
                <p><code>sft config service_auth.enable true</code></p></li>
            <li>
                Update your SSH&#160;configuration:
                <p><code>sft ssh-config &gt;&gt; ~/.ssh/config</code></p><p>Note: Don't forget to change the command if your SSH&#160;configuration file is in a different directory.</p></li>
        </ol>
        <h2>Related topics</h2>
        <ul>
            <li>
                <MadCap:xref href="setup/groups.htm">Groups</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="service-users.htm">Service users</MadCap:xref>
            </li>
            <li><a href="https://developer.okta.com/docs/reference/api/asa/introduction/" target="_blank">Introduction to the Advanced Server Access API</a>
            </li>
        </ul>
    </body>
</html>