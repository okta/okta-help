<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:fileTags="Tags/okta-authors.Arshabhi Rai">
    <head>
        <link rel="canonical" href="https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/gcp-ubuntu-userdata-token.htm" />
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Deploy Advanced Server Access to Ubuntu/Debian GCP instances using user data and an enrollment token." />
    </head>
    <body>
        <h1>Deploy a GCP server with an enrollment token</h1>
        <p>This topic explains how to deploy an&#160;Ubuntu or Debian Google Cloud Platform (GCP) server with systemd using user data and an <MadCap:variable name="okta-feature-names.ScaleFT" /> enrollment token.  You may need to modify this process to fit your specific needs</p>
        <p>Creating a cloud server with user data means that the  <span class="disableGlossary"><MadCap:variable name="okta-feature-names.ScaleFT" /> agent</span> is simultaneously installed when you create a server with a cloud provider.&#160;Using user data to install software on a new cloud server can be done through any cloud provider, although user data helps dictate the specific software that you want on your servers. Installing the <MadCap:variable name="okta-feature-names.ScaleFT" /> agent on a cloud server doesn't have to be done when the cloud server is created, but running the installation as a startup script alongside a server's creation ensures that your cloud deployment is as safe and secure as possible. </p>
        <ul>
            <li>
                <MadCap:xref href="#Prerequi">Prerequisites</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Token">Create an [%=okta-feature-names.ScaleFT%] enrollment token</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Platform">Create a GCP project</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Create">Create and enroll a virtual machine using user data</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Next">Next steps</MadCap:xref>
            </li>
        </ul>
        <h2><a name="Prerequi"></a>Prerequisites</h2>
        <MadCap:snippetBlock src="../snippets/cloud-req-gcp.flsnp" />
        <MadCap:snippetBlock src="../snippets/cloud-req-asa.flsnp" />
        <h2><a name="Token"></a>Create an <MadCap:variable name="okta-feature-names.ScaleFT" /> enrollment token</h2>
        <MadCap:snippetBlock src="../snippets/cloud-create-token.flsnp">
        </MadCap:snippetBlock>
        <h2><a name="Platform"></a>Create a GCP project</h2>
        <MadCap:snippetBlock src="../snippets/cloud-create-gcp.flsnp" />
        <h2><a name="Create"></a>Create and enroll a virtual machine using user data</h2>
        <ol>
            <li>From the GCP Console, select&#160;<span class="uicontrol">Compute Engine</span> and then <span class="uicontrol">VM instances</span>.</li>
            <li>If prompted, select your new project from the <span class="uicontrol">Select a project</span> dropdown.</li>
            <li>Click <span class="uicontrol">Create</span>.<br /></li>
            <li>Create a name for your new server and set its region and zone. These options determine where your server is located.</li>
            <li>Click <span class="uicontrol">Management, security, disks, networking, sole tenancy</span> to expand it.</li>
            <li>
                <p>Enter the following into the <span class="uicontrol">User data</span> field:
                    </p>
                <MadCap:snippetBlock src="../snippets/cloud-userdata-script.flsnp" />
            </li>
            <li>Replace <span class="code">&lt;enrollment_token&gt;</span> in the user data field with the enrollment token that you created earlier.</li>
            <li>Click <span class="uicontrol">Create</span>.</li>
        </ol>
        <p>After your server is finished being created on the <span class="uicontrol">VM&#160;instances</span> page, confirm that the server is listed in the <span class="uicontrol">Server</span> tab of your <MadCap:variable name="okta-feature-names.ScaleFT" /> project before you attempt to connect to it.</p>
        <h2><a name="Next"></a>Next steps</h2>
        <p>
            <MadCap:xref href="verify-server-enrolled.htm">Verify server enrollment</MadCap:xref>
        </p>
    </body>
</html>