<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:fileTags="Tags/okta-authors.Arshabhi Rai">
    <head>
        <link rel="canonical" href="https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/aws-ubuntu-userdata-token.htm" />
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Deploy Advanced Server Access to Ubuntu/Debian AWS instances using user data and an enrollment token." />
    </head>
    <body>
        <h1>Deploy an&#160;AWS server with an enrollment token</h1>
        <p>This topic explains how to  deploy an&#160;Ubuntu or Debian Amazon Web Services (AWS) cloud server with systemd to your <MadCap:variable name="okta-feature-names.ScaleFT" /> team.   You may need to modify this process to fit your specific needs.</p>
        <p>Creating a cloud server with user data means installing the <MadCap:variable name="okta-feature-names.ScaleFT" /> <span class="disableGlossary">server agent</span> simultaneously while you create a server with a cloud provider.&#160;You can use user data to determine the specific software to install software on a new cloud server.  Installing the <MadCap:variable name="okta-feature-names.ScaleFT" /> server agent on a cloud server doesn't need to be done when the cloud server is created, but running the installation as a startup script alongside a server's creation ensures that your cloud deployment is as safe and secure as possible. </p>
        <ul>
            <li>
                <MadCap:xref href="#Prerequi">Prerequisites</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Create">Create an enrollment token in the [%=okta-feature-names.ScaleFT%] console</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Enroll">Create and enroll your AWS server with user data</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Next">Next steps</MadCap:xref>
            </li>
        </ul>
        <h2><a name="Prerequi"></a>Prerequisites</h2>
        <MadCap:snippetBlock src="../snippets/cloud-req-aws.flsnp" />
        <MadCap:snippetBlock src="../snippets/cloud-req-asa.flsnp" />
        <h2><a name="Create"></a>Create an enrollment token</h2>
        <MadCap:snippetBlock src="../snippets/cloud-create-token.flsnp">
        </MadCap:snippetBlock>
        <h2><a name="Enroll"></a>Create and enroll your AWS server with user data</h2>
        <ol>
            <li>Access the <a href="https://aws.amazon.com/console/">AWS Management Console</a>.</li>
            <li>Click the <span class="uicontrol">Services</span> tab at the top of the console and select the <span class="uicontrol">EC2</span> option in the <span class="uicontrol">Compute</span> category to create a new EC2 server.</li>
            <li>Click <span class="uicontrol">Launch Instance</span>.
                <p>The <span class="uicontrol">Choose an Amazon Machine Image (AMI)</span> page opens.</p></li>
            <li>Identify a supported Ubuntu/Debian version and click <span class="uicontrol">Select</span>.              <br />For details, see <MadCap:xref href="supported-os.htm">Supported operating systems</MadCap:xref>.<p>The <span class="uicontrol">Choose an Instance Type</span> page opens.</p></li>
            <li>Click <span class="uicontrol">Next:&#160;Configure Instance Details</span>.
                <p>The <span class="uicontrol">Configure Instance Details</span> page opens.</p></li>
            <li>Expand <span class="uicontrol">Advanced Details</span>.</li>
            <li>Enter the following into the <span class="uicontrol">User data</span> field:
                    <MadCap:snippetBlock src="../snippets/cloud-userdata-script.flsnp" /></li>
            <li>Replace <span class="code">&lt;enrollment_token&gt;</span> in the user data field with the enrollment token that you created earlier.</li>
            <li>Click <span class="uicontrol">Review and Launch</span>, then click <span class="uicontrol">Launch</span>.
                <p>The <span class="uicontrol">Select an existing key pair or create a new key pair</span> dialog opens.</p></li>
            <li>Select the  <span class="uicontrol">Proceed without a key pair</span> option from the dropdown menu.</li>
            <li>Confirm and acknowledge your choice by selecting the relevant checkbox, then click <span class="uicontrol">Launch Instances</span>.</li>
        </ol>
        <h2><a name="Next"></a>Next steps</h2>
        <p>
            <MadCap:xref href="verify-server-enrolled.htm">Verify server enrollment</MadCap:xref>
        </p>
    </body>
</html>