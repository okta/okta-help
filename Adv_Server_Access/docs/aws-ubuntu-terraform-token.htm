<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:fileTags="Tags/okta-authors.Arshabhi Rai">
    <head>
        <link rel="canonical" href="https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/aws-ubuntu-terraform-token.htm" />
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Deploy Advanced Server Access to Ubuntu/Debian AWS instances using Terraform and an enrollment token." />
    </head>
    <body>
        <h1>
            <MadCap:annotation MadCap:createDate="2022-08-11T13:04:39.7272202-04:00" MadCap:creator="Isaac" MadCap:initials="ID" MadCap:comment="Aug 11, 2022: Hidden from ToC\r\nSafe to remove if no updates by March 2023" MadCap:editor="Isaac" MadCap:editDate="2022-08-11T13:05:29.7091565-04:00">Deploy </MadCap:annotation>an&#160;AWS server with Terraform</h1>
        <p>This topic explains how to  deploy an&#160;Ubuntu or Debian Amazon Web Services (AWS) cloud server with systemd and a bastion to your <MadCap:variable name="okta-feature-names.ScaleFT" /> team with Terraform.     You may need to modify this process to fit your specific needs.</p>
        <p>Creating a cloud server with Terraform means installing the Terraform tool on your personal machine and using an access ID,&#160;enrollment token, and secret ID&#160;to create servers on the AWS console.&#160;After being created, your new servers should appear automatically within the <MadCap:variable name="okta-feature-names.ScaleFT" /> dashboard. </p>
        <div class="noteOkta">
            <p class="noteContent">This topic uses the ScaleFT Starter Kit as the Terraform module. <a href="https://github.com/ScaleFT/StarterKit/tree/master/AWS/ubuntu-behind-bastion">View the kit on GitHub</a>. For your setup, use your company's Terraform repository for your production environment. The configuration values in your <span class="code">terraform.tfvars</span> file should be similar to those in this guide.</p>
        </div>
        <ul>
            <li>
                <MadCap:xref href="#Prerequi">Prerequisites</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Create">Download and install Terraform</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Enroll">Locate and save your AWS security credentials</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Configure">Configure Terraform for Advanced Server Access and AWS</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Next">Next steps</MadCap:xref>
            </li>
        </ul>
        <h2><a name="Prerequi"></a>Prerequisites</h2>
        <MadCap:snippetBlock src="../snippets/cloud-req-aws.flsnp" />
        <MadCap:snippetBlock src="../snippets/cloud-req-asa.flsnp" />
        <h2><a name="Create"></a>Download and install Terraform</h2>
        <ol>
            <li>Download the Terraform installer. See the <a href="https://www.terraform.io/downloads" target="_blank">Terraform website</a>.                </li>
            <li>Unzip the downloaded file and run the unix executable.</li>
        </ol>
        <h2><a name="Enroll"></a>Locate and save your AWS security credentials</h2>
        <ol>
            <li>Navigate to the AWS console and sign in to your account.</li>
            <li>Click the dropdown next to your username in the top-right corner of the console and select <span class="uicontrol">My Security Credentials</span>.                    <p>If prompted with another window concerning AWS Identity and Access Management users, click <span class="uicontrol">Continue to Security Credentials</span>.</p></li>
            <li>Expand <span class="uicontrol">Access Keys (Access Key ID&#160;and Secret Access Key)</span>.</li>
            <li>Click <span class="uicontrol">Create New Access Key</span>, then expand <span class="uicontrol">Hide Access Key</span> to see your new access key ID and secret access key.</li>
            <li>Copy the access key ID and then secret access key and save them both in a secure location.</li>
        </ol>
        <h2><a name="Configure"></a>Configure Terraform for Advanced Server Access and AWS</h2>
        <ol>
            <li>Create a file named <span class="code">terraform.tfvars</span> and add the following lines:
                    <span class="codeblock">access_key:"&lt;access-key&gt;"
secret_key:"&lt;secret-key&gt;"
enrollment_token:"&lt;enrollment-token&gt;"</span></li>
            <li>Replace <span class="code">&lt;access-key&gt;</span> and <span class="code">&lt;secret-key&gt;</span> in <span class="code">terraform.tfvars</span> with the access key ID and secret access key values that you copied earlier.</li>
            <li>Replace <span class="code">&lt;enrollment-token&gt;</span> in <span class="code">terraform.tfvars</span> with your <MadCap:variable name="okta-feature-names.ScaleFT" /> enrollment token.</li>
            <li>Save the file and place it in your Terraform module.
                </li>
            <li>In your machine's console, run <span class="code">which terraform</span> to confirm that your Terraform path exists.
                <p>Depending on your platform, the output should look something like: <code style="font-weight: normal;">/users/user/bin/terraform</code></p></li>
            <li>Confirm that you are in your Terraform module, then run <span class="code">terraform init</span></li>
            <li>Confirm that the information in <span class="code">terraform.tfvars</span> is correct by running <span class="code">terraform plan</span>.
                <p>If you receive any errors, troubleshoot as needed before proceeding.</p></li>
            <li>Run <span class="code">terraform apply</span> to begin creating your servers. Enter <span class="code">yes</span> if prompted for approval.</li>
        </ol>
        <p>Confirm that your new servers are listed in <MadCap:variable name="okta-feature-names.ScaleFT" /> before you attempt to connect to them. </p>
        <h2><a name="Next"></a>Next steps</h2>
        <p>
            <MadCap:xref href="verify-server-enrolled.htm">Verify server enrollment</MadCap:xref>
        </p>
    </body>
</html>