<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Jeanette Smith">
   <head>
      <title>Configure the AWS app in Okta | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>Configure the Amazon Web Services Account Federation app in <MadCap:variable name="okta-variables.ProductName"/>
      </h1>
      <p>The Amazon Web Services (AWS) app integration does not support provisioning. This setup under the <span class="wintitle">Provisioning</span> tab is required to provide API access to <MadCap:variable name="okta-variables.ProductName"/> in order to download a list of AWS roles to assign during user assignment. The AWS app integration enables you to assign multiple roles to users and pass those roles in the SAML assertion.</p>
      <ol>
         <li>
            <MadCap:snippetBlock src="../../../Resources/Snippets/task steps/Applications_Applications.flsnp"/>
         </li>
         <li>Enter AWS in the <span class="uicontrol">Search</span> field.</li>
         <li>Click AWS Account Federation, then select the <span class="uicontrol">Sign On</span> tab.</li>
         <li>Click <span class="uicontrol">Edit</span> in the <span class="wintitle">Settings</span> section.</li>
         <li>Under <span class="uicontrol">Advanced Sign-On Settings</span> area, complete these fields:<ul style="text-align: left;">
               <li>
                  <span class="uicontrol">AWS Environment (Required for SAML SSO)</span>: Select your Environment Type. If your Environment Type is not listed, you can set your desired ACS URL in the ACS URL field. The ACS URL field is optional; if your Environment Type is listed, you do not need to enter your ACS URL.</li>
               <li>
                  <p>
                     <span class="uicontrol">ACS URL (optional &amp; only relevant to SAML SSO)</span>: If your Environment Type was not listed in the AWS Environment list, enter the ACS URL.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Identity Provider ARN (Required only for SAML SSO)</span>: Paste the identity provider ARN you copied.</p>
               </li>
               <li>
                  <p>Session Duration (Required only for SAML SSO): Accept the default value, or enter a value.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Join all roles</span>: Select this check box to make AWS SAML use all roles. If a user is directly assigned Role1 and Role2 (user-to-app assignment), and the user belongs to group GroupAWS with RoleA and RoleB assigned (group-to-app assignment), then <span class="uicontrol">Join all roles OFF</span>: Role1 and Role2 are available upon login to AWS <span class="uicontrol">Join all roles ON</span>: Role1, Role2, RoleA, and RoleB are available upon login to AWS.</p>
                  <p>
                     <li>
                        <span class="uicontrol">Use Group Mapping</span>: Select this check box to connect Okta to multiple AWS instances using user groups  functionality.</li>
                  </p>
               </li>
            </ul>
         </li>
      </ol>
      <p>
         <ol start="6">
            <li>Click Save.</li>
            <li>Select the <span class="uicontrol">Provisioning</span>  tab, then click <span class="uicontrol">Enable API Integration</span>.</li>
            <li>Select the <span class="uicontrol">Enable API Integration</span> check box and complete these fields:</li>
         </ol>
         <ul>
            <ul>
               <li>
                  <span class="uicontrol">API URL (optional)</span>: Optional. Enter the API URL. If your Environment Type was listed, you do not need to fill out this field. If your Environment Type was not listed in the drop-down, enter your API URL here. You may have to contact AWS to find out the API URL for your environment.</li>
               <li>
                  <p>
                     <span class="uicontrol">Access Key</span>: Paste the access key you copied.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Secret Key</span>: Paste the access key you copied.</p>
               </li>
               <li>
                  <p>Connected Accounts IDs (optional): Optional. Provide a comma-separated list of all of the IDs of your connected accounts. You can find this in each AWS account from the My Accounts page in the top-left hand corner of the AWS Console. </p>
                  <p>Note: If you have an AWS instance that was configured to use the Amazon AWS IAM role as the Sign On mode, and remove an optional child account from that instance, their role provisioning will be removed and an event will be generated in the System Log.</p>
               </li>
            </ul>
         </ul>
         <ol start="9">
            <li>Optional. Click <span class="uicontrol">Test API Credentials</span> to verify API credentials are working.</li>
            <li>Click <span class="uicontrol">Save</span>.</li>
            <li>In the <span class="wintitle">Provisioning to App</span> section, click <span class="uicontrol">Edit</span> and check <span class="uicontrol">Enable</span> for <span class="uicontrol">Create Users</span> and <span class="uicontrol">Update User Attributes</span>.</li>
            <li>Click <span class="uicontrol">Save</span>.</li>
            <li>Select the <span class="uicontrol">Assignments</span> tab, then click <span class="menucascade">
                  <span class="uicontrol">Assign</span>
                  <span class="uicontrol">Assign to People</span>
               </span>.</li>
            <li>Select a user, click <span class="uicontrol">Assign</span>, accept the default user name, or enter a user name, select roles, then click <span class="uicontrol">Save and Go Back</span>.</li>
         </ol>
         <p style="margin-left: 40px;">If you see the attribute IdP and Role Pairs (internal attribute), ignore it. It is an internal attribute and it doesn't affect user assignment.</p>
         <ol start="9" MadCap:continue="true">
            <li>Optional. Repeat step 14 to add additional users.</li>
            <li>Click <span class="uicontrol">Done</span>.</li>
            <li>Sign in to your Okta org as the test user, then click the AWS app.</li>
            <li>Select a role and click <span class="uicontrol">Sign In</span>.</li>
            <li>Make sure there are no errors and sign in is successful.</li>
         </ol>
      </p>
   </body>
</html>
