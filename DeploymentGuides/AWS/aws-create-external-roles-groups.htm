<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Jeanette Smith">
    <head><title>Create AWS role groups in an external directory | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1><a name="Step3"></a>Create AWS role groups in an external directory</h1>
        <p>To access each <MadCap:variable name="3rd Party Integrations.Amazon Web Services" /> (AWS) account, you need to create groups in an external directory for each AWS role for each of these accounts. These group names are utilized by a filter to associate them with the corresponding AWS roles.</p>
        <ol>
            <li>
                <p>Create AWS role-specific groups in your directory using one of the following methods:</p>
                <ul>
                    <li>
                        <p>Run a script to create external-directory groups for each role in each account.</p>
                        <p>This option offers the greatest possibility of automation, but requires coordination between your AWS management teams and  external-directory management teams for the script to be configured. </p>
                    </li>
                    <li>
                        <p>CSV file export from AWS</p>
                        <p>If a scripting approach between AWS and  the external directory is not possible, a lighter weight approach may be to export a list of role names for each of your AWS accounts in a CSV file that you provide to your  external-directory administration teams. From there, they can manage the creation of AWS role groups however they see fit without any sort of dependencies or direct integration with your AWS accounts themselves.</p>
                    </li>
                    <li>
                        <p>Manual creation of AWS role groups in the external directory</p>
                        <p>This is the simplest method; however, it requires upkeep as well as ample set up time to create groups in the external directory for each of the roles in each of your accounts.</p>
                    </li>
                </ul>
            </li>
        </ol>
        <ol MadCap:continue="true">
            <li>
                <p>Create an organizational unit (OU) in your directory to contain all AWS role-specific groups to be associated with AWS roles. For example,  <i>AWS Role Groups</i> and <i>AWS Entitlements</i>.</p>
            </li>
            <li>
                <p> Using a standard syntax, create external directory-security groups for each role.</p>
                <p>Recommended syntax:</p><span class="codeblock">aws#[account alias]#[role name]#[account #]</span>
                <p>Example:</p><span class="codeblock">aws#northamerica-production#Tier1_Support#828416469395</span>
                <p>Also available is a regex expression to filter AWS related groups and extract accountid and role. </p>
                <p>Example:</p><span class="codeblock">aws_(?{{accountid}}\d+)_(?{{role}}[a-zA-Z0-9+=,.@\-_]+)</span>
            </li>
        </ol>
        <p style="text-align: left;margin-left: 40px;">If you  use your own group syntax, make sure to include an account alias, role name, and account # with recognizable delimiters between each. You will also need to create a <a href="https://developer.okta.com/docs/reference/okta-expression-language/">custom regex expression</a>. </p>
        <h2>Next steps</h2>
        <p>
            <MadCap:xref href="aws-create-management-groups.htm">Create management groups to map users to AWS accounts and roles</MadCap:xref>
        </p>
    </body>
</html>