<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Jeanette Smith">
   <head>
      <title>Generate the AWS API access key | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>
         <a name="Step2"/>Generate the AWS API access key</h1>
      <p>In the AWS source account, you need to create an AWS user with specific permissions so <MadCap:variable name="okta-variables.ProductName"/> can dynamically fetch a list of available roles from your accounts. This makes assigning users and groups to specific AWS roles easy and secure for administrators.</p>
      <ol>
         <li>
            <p>On the AWS Management Console, click <span class="menucascade">
                  <span class="uicontrol">Users</span>
                  <span class="uicontrol">Add user</span>
               </span>.</p>
         </li>
         <li>
            <p>Enter a user name in the User name field. For example,  <i>OktaSSOuser</i>.</p>
         </li>
         <li>
            <p>
               <span class="uicontrol">Access type</span>: Select <span class="uicontrol">Programmatic access</span>, then click <span class="uicontrol">Next: Permissions</span>.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Attach existing policies directly</span>, then <span class="uicontrol">Create policy</span>. </p>
            <p>The <span class="wintitle">Create policy</span> page  opens in a new browser tab.</p>
         </li>
         <li>
            <p>Select the <span class="uicontrol">JSON</span> tab.</p>
         </li>
         <li>
            <p>Delete the existing code under the <span class="uicontrol">JSON</span> tab and replace it with the following code:</p>
            <MadCap:codeSnippet>
               <MadCap:codeSnippetCopyButton/>
               <MadCap:codeSnippetBody MadCap:useLineNumbers="True" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Action": [
"iam:ListRoles",
"iam:ListAccountAliases"
],
"Resource": "*"
}
]
}</MadCap:codeSnippetBody>
            </MadCap:codeSnippet>
         </li>
         <li>
            <p>Click <span class="uicontrol">Review policy</span> (refer to AWS documentation for details, if needed).</p>
         </li>
         <li>
            <p>Enter a name and optional description for the policy. For example, <samp>OktaSourceAccountPolicy</samp>.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Create Policy</span>.</p>
            <p>The app returns you to the first browser tab where you can continue assigning policies to your IAM user.</p>
         </li>
         <li>
            <p>Select the first <span class="wintitle">IAM Management Console</span> browser tab.</p>
            <p>
               <img src="../../../Resources/Images/aws/aws_browser_tabs.png">
                    </img>
            </p>
         </li>
         <li>
            <p>Make sure that <span class="uicontrol">Attach existing policies directly</span> is selected.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Refresh</span>, enter the name of the policy you created in the search field, then select the policy.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Next: Tags</span>. </p>
         </li>
         <li>
            <p> Optional. Add descriptive tags for the user and click <span class="uicontrol">Next: Review</span>.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Create user</span>.</p>
         </li>
         <li>
            <p>Copy the keys in the Access key ID and Secret access key columns, then click <span class="uicontrol">Close</span>. You'll need these keys to complete the configuration.</p>
            <p>This is the only time that you can view and copy the keys.</p>
         </li>
      </ol>
   </body>
</html>
