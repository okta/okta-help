<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="[%=System.LinkedHeader%]|[%=System.LinkedHeader%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="robots" content="noindex, nofollow" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Tutorial 2: Create resources for your environment | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
        function openSurvey() {
            window.open('https://surveys.okta.com/jfe/form/SV_e4L0iW8a3tz8Yol?source=' + encodeURIComponent(document.location.href), '_blank');
        }
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxf1de37f5-c8aa-42db-a8ef-0cbf06dfa5e3</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPublish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar" data-mc-conditions="Primary.live-site-only">
                                            <div class="dropdown" data-test="menuBarCategory" id="documentationMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Documentation <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=oie-index" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=index-admin" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_main" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=csh-asa-overview" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-Okta-workflows" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="relnotesMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Release notes <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=csh-oie-release-notes" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=ext_okta_relnotes" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_releasenotes" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=ext-asa-releasenotes" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-workflows-releasenotes" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="oktaDevDocsMenu"><a href="https://developer.okta.com/" target="_blank" data-test="menuBarLink">Okta Developer</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="auth0Menu"><a href="https://auth0.com/docs" target="_blank" data-test="menuBarLink">Auth0</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="trainingMenu"><a href="https://www.okta.com/services/training/" target="_blank" data-test="menuBarLink">Training</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="supportMenu"><a href="https://support.okta.com/help/s/?language=en_US" target="_blank" data-test="menuBarLink">Support</a>
                                            </div>
                                        </div>
                                        <div class="logo_container" id="OktaBanner" data-mc-conditions="Primary.live-site-only"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" data-test="OktaBanner"><img src="../../../resources/images/okta-assets/logo.png" alt="Okta product documentation" title="Okta product documentation" data-test="OktaBannerImg" /></a>
                                        </div>
                                        <div class="toolbar-main" data-test="toolBar" data-mc-conditions="Primary.live-site-only">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1 id="tutorial-2-create-resources-for-your-environment">Tutorial 2:
Create resources for your environment</h1>
                                                    <p>In this tutorial, you use Terraform to create the resources required
to make your org functional in the <span class="uicontrol">preview</span> branch in
GitHub. The tutorial takes you through creating the resources, applying
the plan, and demonstrating the functions of the newly created org. You
can apply this when adding new environments like a staging environment
or provisioning a new tenant.</p>
                                                    <p>For each of the following cases, you:</p>
                                                    <ol type="1">
                                                        <li value="1">Select the <code>preview</code> branch in GitHub, if necessary.</li>
                                                        <li value="2">Edit one or more existing <code>.tf</code> files in your GitHub
repo.</li>
                                                        <li value="3">Add new resources to the files.</li>
                                                        <li value="4">Commit your changes in GitHub.</li>
                                                        <li value="5">Verify that the plan runs automatically on your workspace
<span class="uicontrol">Overview</span> page.</li>
                                                    </ol>
                                                    <p>In this tutorial, you:</p>
                                                    <ul>
                                                        <li><a href="#add-a-new-user-schema-property-resource">Add a new User
Schema property resource</a>
                                                        </li>
                                                        <li><a href="#add-new-group-and-group-rules-resources">Add new group and
group rules resources</a>
                                                        </li>
                                                        <li><a href="#add-a-new-customer-application-portal-resource">Add a new
customer application portal resource</a>
                                                        </li>
                                                        <li><a href="#add-a-new-authentication-policy-resource">Add a new
authentication policy resource</a>
                                                        </li>
                                                        <li><a href="#add-a-new-authorization-server-custom-scopes-and-claims-resources">Add
a new Authorization Server, custom scopes and claims resources</a>
                                                        </li>
                                                    </ul>
                                                    <div class="noteOkta">
                                                        <p class="noteContent"> For more information about Okta's Terraform
providers, resources, and data, see <a href="https://registry.terraform.io/providers/okta/okta/latest/docs">Okta
Provider</a>.</p>
                                                    </div>
                                                    <p>The workspace configuration you set up in the previous tutorial
causes your plan to run automatically and apply changes when you check
in your changes.</p>
                                                    <h2 id="add-a-new-user-schema-property-resource">Add a new User Schema
property resource</h2>
                                                    <p>Administrators can define custom User profiles in <a href="https://www.okta.com/products/universal-directory/">Universal
Directory</a> using a custom JSON schema. The <a href="/docs/reference/api/schemas/">Okta Schemas API</a> provides
operations to manage custom User profiles.</p>
                                                    <p>Use a <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/user_schema_property">User
Schema property resource</a> to create and configure a custom user
schema property. User Schema property resources are defined in
<code>userschema.tf</code>.</p>
                                                    <p>In this exercise, you add a new User Schema property to the
workspace, commit your changes, and verify the results in your Terraform
workspace <span class="uicontrol">Overview</span> page.</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>Append the following to <code>userschema.tf</code> in GitHub,
then commit your changes:</p>
                                                            <p><span class="codeblock">resource "okta_user_schema_property"
"crn_extension" { index = "customer_reference_number" title = "Customer
Reference Number" required = false type = "string" master =
"PROFILE_MASTER" }</span>
                                                            </p>
                                                        </li>
                                                        <li value="2">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                            <div class="full border">
                                                                <p>
                                                                    <img src="../../../resources/images/ref-arch/multiple-environments/lab-2-latest-run-applied.png" alt="An updated run showing a modified userschema.tf" />
                                                                </p>
                                                            </div>
                                                        </li>
                                                    </ol>
                                                    <h2 id="add-new-group-and-group-rules-resources">Add new Group and Group
Rules resources</h2>
                                                    <p>Groups are commonly used for <a href="/docs/guides/build-sso-integration/openidconnect/main/">Okta
Single Sign-On (SSO)</a> access and to provision users to apps with
specific entitlements. Group rules simplify group administration and
help you manage application access, application roles, and security
policies. Use rules to populate groups based on attributes to achieve
attributed-based access control. Create rules using single or multiple
attributes, single or multiple groups, or combinations of attributes and
groups. See <a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=ext_Group_Rules">About
group rules</a>.</p>
                                                    <p>Use an <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/group">Okta
Group resource</a> to create and configure an Okta Group. Group
resources are defined in <code>groups.tf</code>.</p>
                                                    <p>In this exercise, you add an Okta Group, confirm your changes, and
verify the results on your workspace <span class="uicontrol">Overview</span> page.
Then, you repeat the process for the associated Group Rule resources.
This ensures that the new Group is available when you add the Group
Rule.</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>Append the following to <code>groups.tf</code> in GitHub, then
commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_group" "test_group" { name =
"Test Group" description = "For testing and demonstration"
}</span>
                                                            </p>
                                                        </li>
                                                        <li value="2">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                        <li value="3">
                                                            <p>Append the following to <code>grouprules.tf</code> in GitHub,
then commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_group_rule" "test_rule" { name
= "Test Rule" status = "ACTIVE" group_assignments =
["${okta_group.test_group.id}"] expression_type =
"urn:okta:expression:1.0" expression_value =
"String.startsWith(user.firstName,"somename")" }</span>
                                                            </p>
                                                        </li>
                                                        <li value="4">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                    </ol>
                                                    <h2 id="add-a-new-customer-application-portal-resource">Add a new
customer application portal resource</h2>
                                                    <p>Okta is a customizable, secure, drop-in solution to add
authentication and authorization services to your applications. You can
connect any application on any device and define how you want your users
to sign in. A customer portal is an interface through which your
customers access your application.</p>
                                                    <p>Use customer portal resources to create and configure different
portals. They're defined in
<code>modules/applications/customer-portal.tf</code>.</p>
                                                    <p>In this exercise, you add a new <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/app_oauth">OpenID
Connect (OIDC) application portal</a> and verify the results on your
workspace <span class="uicontrol">Overview</span> page.</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>Append the following to
<code>modules/applications/customer-portal.tf</code> in GitHub, then
commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_app_oauth" "example" { status
= "ACTIVE" label = "Example Portal" type = "web" redirect_uris =
["https://localhost:44378/signin-oidc",
"https://localhost:44378/Customer", "https://oauth.pstmn.io/v1/callback"]
post_logout_redirect_uris =
["https://localhost:44378/signout-callback-oidc"] login_uri =
"https://localhost:4437811/signin-oidc" grant_types =
["client_credentials", "authorization_code", "refresh_token"]
response_types = ["code"] consent_method = "TRUSTED"
refresh_token_rotation = "ROTATE" skip_users = true skip_groups = true
}</span>
                                                            </p>
                                                        </li>
                                                        <li value="2">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                    </ol>
                                                    <h2 id="add-a-new-authentication-policy-resource">Add a new
authentication policy resource</h2>
                                                    <p><a href="/docs/guides/configure-signon-policy/main/">Authentication
policies</a> control access to applications. Use them to configure more
granular access to the app than are permitted by default. Also, use
authentication policies to selectively apply conditions like limiting
access to certain users and/or groups, and the network or network zone
that they connect from.</p>
                                                    <p>An <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/app_signon_policy">authentication
policy resource</a> allows you to create and configure a sign-on policy
for the application. Sign-on policies are defined in
<code>modules/applications/app_signon_policies.tf</code>.</p>
                                                    <p>In this exercise, you add a new authentication policy resource, and
verify the results on your workspace <span class="uicontrol">Overview</span> page.</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>Append the following to
<code>modules/applications/app_signon_policies.tf</code> in GitHub, then
commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_app_oauth" "my_app" { label =
"My App" type = "web" grant_types = ["authorization_code"] redirect_uris
= ["http://localhost:3000"] post_logout_redirect_uris =
["http://localhost:3000"] response_types = ["code"] // this is needed to
associate the application with the policy authentication_policy =
okta_app_signon_policy.my_app_policy.id }

resource "okta_app_signon_policy" "my_app_policy" { name = "My App
Sign-On Policy" description = "Authentication Policy to be used on my
app." }</span>
                                                            </p>
                                                        </li>
                                                        <li value="2">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs and changes are applied automatically. Also,
<span class="uicontrol">Resources changed</span> shows <code>+2 ~0 -0</code> to show
that two resources were added. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                    </ol>
                                                    <h2 id="add-a-new-authorization-server-custom-scopes-and-claims-resources">Add
a new authorization server, custom scopes, and claims resources</h2>
                                                    <p>An <a href="/docs/concepts/auth-servers/">authorization server</a> is
an engine for minting OpenID Connect or OAuth 2.0 tokens, and is also
used to apply access policies. Scopes specify which access privileges
are requested as part of an authorization. For example, the email scope
requests access to a user's email address. Claims are pieces of
information that describe some aspect of a given identity. They're held
in authentication tokens. That is, you can think of tokens as envelopes
that contain claims about users. Custom Okta authorization servers allow
you to add custom scopes and claims to tokens.</p>
                                                    <p>Use an <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/auth_server">Authorization
Server resource</a> to create and configure an authorization server. Use
an <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/auth_server_scope">Authorization
Server Scope resource</a> to create and configure an authorization
server scope. Use an <a href="https://registry.terraform.io/providers/okta/okta/latest/docs/resources/auth_server_claim">Authorization
Server Claim resource</a> to create and configure an authorization
server claim.</p>
                                                    <p>Authorization Server, Authorization Server Scope, and Authorization
Server Claim resources are defined in
<code>modules/auth-servers/customer-portal.tf</code>.</p>
                                                    <p>In this example, you add an Authorization Server resource and
associated Authorization Server Scope and Authorization Server Claim
resources, and verify the results on your workspace
<span class="uicontrol">Overview</span> page. Add the resources separately, in that
order, so the new resources are available when you need them.</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>Append the following to
<code>modules/auth-servers/customer-portal.tf</code> in GitHub, then
commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_auth_server" "test_server" {
audiences = ["api://iatcore.com"] description = "Auth Server that
handles test apps" name = "Test Server" issuer_mode = "ORG_URL" status =
"ACTIVE" }</span>
                                                            </p>
                                                        </li>
                                                        <li value="2">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                        <li value="3">
                                                            <p>Append the following to
<code>modules/auth-servers/customer-portal.tf</code> in GitHub, then
commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_auth_server_scope"
"test_scope" { auth_server_id = okta_auth_server.test_server.id
description = "This allows the test server to view your IATCore account
information." name = "iat.account.read" }</span>
                                                            </p>
                                                        </li>
                                                        <li value="4">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                        <li value="5">
                                                            <p>Append the following to
<code>modules/auth-servers/customer-portal.tf</code> in GitHub, then
commit your changes.</p>
                                                            <p><span class="codeblock">resource "okta_auth_server_claim"
"test_claim" { auth_server_id = okta_auth_server.test_server.id name =
"Type" value = "user.userType" scopes = [
okta_auth_server_scope.test_scope.name ] claim_type = "IDENTITY"
}</span>
                                                            </p>
                                                        </li>
                                                        <li value="6">
                                                            <p>On your workspace <span class="uicontrol">Overview</span> page, observe that a
new plan runs, changes are applied automatically, and <span class="uicontrol">Resources
changed</span> shows <code>+1 ~0 -0</code> to reflect the added
resource. The <span class="uicontrol">Latest Run</span> status is
<span class="uicontrol">Applied</span>.</p>
                                                        </li>
                                                    </ol>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-test="copyrightNotice">©  <span class="mc-variable okta-variables.Year variable">2023</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <script src="../../../resources/scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/app.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.requirejs.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                    <!-- Feedback tab for Qualtrics survey -->
                                    <div id="feedback-tab" data-mc-conditions="Primary.live-site-only"><a id="feedback-link" href="#" onclick="openSurvey();  return false" target="_blank" title="Submit feedback"><div id="feedback-container"><p id="feedback-text" translate="no">Feedback</p></div></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
