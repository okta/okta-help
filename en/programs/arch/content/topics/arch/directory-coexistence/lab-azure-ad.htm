<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="[%=System.LinkedHeader%]|[%=System.LinkedHeader%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="robots" content="noindex, nofollow" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Migrate users from Azure Active Directory | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
        function openSurvey() {
            window.open('https://surveys.okta.com/jfe/form/SV_e4L0iW8a3tz8Yol?source=' + encodeURIComponent(document.location.href), '_blank');
        }
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxf1de37f5-c8aa-42db-a8ef-0cbf06dfa5e3</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPublish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar" data-mc-conditions="Primary.live-site-only">
                                            <div class="dropdown" data-test="menuBarCategory" id="documentationMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Documentation <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=oie-index" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=index-admin" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_main" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=csh-asa-overview" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-Okta-workflows" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="relnotesMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Release notes <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=csh-oie-release-notes" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=ext_okta_relnotes" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_releasenotes" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=ext-asa-releasenotes" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-workflows-releasenotes" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="oktaDevDocsMenu"><a href="https://developer.okta.com/" target="_blank" data-test="menuBarLink">Okta Developer</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="auth0Menu"><a href="https://auth0.com/docs" target="_blank" data-test="menuBarLink">Auth0</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="trainingMenu"><a href="https://www.okta.com/services/training/" target="_blank" data-test="menuBarLink">Training</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="supportMenu"><a href="https://support.okta.com/help/s/?language=en_US" target="_blank" data-test="menuBarLink">Support</a>
                                            </div>
                                        </div>
                                        <div class="logo_container" id="OktaBanner" data-mc-conditions="Primary.live-site-only"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" data-test="OktaBanner"><img src="../../../resources/images/okta-assets/logo.png" alt="Okta product documentation" title="Okta product documentation" data-test="OktaBannerImg" /></a>
                                        </div>
                                        <div class="toolbar-main" data-test="toolBar" data-mc-conditions="Primary.live-site-only">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1 id="migrate-users-from-azure-active-directory">Migrate users from
Azure Active Directory</h1>
                                                    <p>Suppose you already handle authentication through cloud-based
Identity Provider (IdP) such as Azure Active Directory (AD) but want to
replace it with Okta. You can install an on-premises Okta AD Agent to
mirror those users to Universal Directory and then redirect your
applications to Okta for authentication. In this scenario, Universal
Directory serves as a single source of truth for user data and lets
administrators centrally manage policies and profiles. You can assign
them to any application registered with your Okta org.</p>
                                                    <p>However, the user passwords are still managed in your original IdP.
This directory coexistence can stay in place until you migrate all your
user information to Universal Directory and no longer require the other
IdP.</p>
                                                    <div class="noteOkta">
                                                        <p class="noteContent"> You need an instance of <a href="https://azure.microsoft.com/en-ca/products/active-directory/" target="_blank">Azure
Active Directory</a> to follow this tutorial.</p>
                                                    </div>
                                                    <p>In this tutorial, you migrate all the users in a simple Azure Active
Directory instance to Universal Directory with the Okta AD Agent, and
then create an application to authenticate its users with Universal
Directory. Specifically:</p>
                                                    <ul>
                                                        <li><a href="#Configur" class="MCXref xref">Configure Azure AD as an
IdP in Okta</a>.</li>
                                                        <li><a href="#Create%0Aa" class="MCXref xref">Create
an OIDC-based application that redirects to Okta for authentication</a>.</li>
                                                    </ul>
                                                    <p>At the end of the tutorial, when a user attempts to sign in to the
application, their authorization request is redirected to Okta and then
delegated to Azure AD to match the user and authenticate them.</p>
                                                    <div class="three-quarter">
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../resources/images/ref-arch/directory-coexistence/ad-to-okta-flow-diagram.png" data-mc-popup-alt="An architecture diagram showing the authorization flow from user to Okta to Azure Active Directory and back again."><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1298" data-mc-height="886" src="../../../resources/images/ref-arch/directory-coexistence/ad-to-okta-flow-diagram_thumb_220_220.png" alt="An architecture diagram showing the authorization flow from user to Okta to Azure Active Directory and back again." tabindex="" /></a>
                                                        </p>
                                                        <!--
    Source image: https://www.figma.com/file/YH5Zhzp66kGCglrXQUag2E/%F0%9F%93%8A-Updated-Diagrams-for-Dev-Docs?type=design&node-id=3658%3A38395&t=U52HeyImgt4pt3M2-1 ad-to-okta-flow-diagram
  -->
                                                    </div>
                                                    <h2 id="configure-azure-ad-as-an-idp-in-okta"><a name="Configur"></a>Configure Azure AD as an
IdP in Okta</h2>
                                                    <p>To migrate user profiles from Active Directory to Okta, first
delegate authentication to Active Directory by configuring it as an IdP
in Okta. This process involves creating the Okta enterprise application
in Active Directory and adding it as an Identity Provider in Okta. For
full instructions, <a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=ext-azure-idp-setup" target="_blank">Make
Azure Active Directory an Identity Provider</a>.</p>
                                                    <div class="noteOkta">
                                                        <p class="noteContent"> Set up Just-In-Time (JIT) provisioning at this
point if you want to use a <a href="directory-coexistence.htm#Just-In-" class="MCXref xref">Just-In-Time migration</a> strategy. Remember that this allows Active Directory and
Universal Directory profiles to co-exist. It also provides a seamless
experience because users don't have to create a new username or password
in Universal Directory.</p>
                                                    </div>
                                                    <p>After users are in Okta, you can provide access to applications that
you've registered with Okta. You can also set <a href="https://developer.okta.com/docs/concepts/policies/#what-are-policies" target="_blank">policies</a>
for the users in Okta, such as requiring a user to sign in again after a
given time. Also, you can implement <a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=ext-about-authenticators" target="_blank">multifactor
authentication</a> for your Okta users.</p>
                                                    <h2 id="create-an-oidc-based-application-that-redirects-to-okta-for-authentication"><a name="Create&#xA;a"></a>Create
an OIDC-based application that redirects to Okta for authentication</h2>
                                                    <p>This tutorial uses a <a href="https://www.docker.com/" target="_blank">Docker</a>
container that you can run on any platform. It contains a <a href="https://spring.io/projects/spring-boot" target="_blank">Spring Boot</a> web
application that uses <a href="https://developer.okta.com/docs/concepts/oauth-openid/#openid-connect" target="_blank">OpenID Connect
(OIDC)</a> for authentication directly with Okta. The sample application
shows the types of changes that you can make in your application to
authenticate directly with Okta.</p>
                                                    <p>To run the sample application and connect directly to the Okta
sign-in dialog:</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>Change to your project directory and clone the
<code>okta-reference-coexistence-oidc-example</code> repository:</p>
                                                            <p><span class="codeblock">cd ${your project directory} git clone https://github.com/oktadev/okta-reference-coexistence-oidc-example.git</span>
                                                            </p>
                                                        </li>
                                                        <li value="2">
                                                            <p>Change to the
<code>okta-reference-coexistence-oidc-example</code> directory:</p>
                                                            <p><span class="codeblock">cd
okta-reference-coexistence-oidc-example</span>
                                                            </p>
                                                        </li>
                                                        <li value="3">
                                                            <p>Sign in to your Okta account:</p>
                                                            <p><span class="codeblock">okta login</span>
                                                            </p>
                                                            <p>If you're already signed in to Okta, a prompt similar to the
following is returned. The current sign-in configuration is based on the
Okta org URL and API token that you provided at the previous
<code>okta login</code> command. If you want to use the existing
configuration, answer <span class="uicontrol">N</span> and skip steps a and b.
Otherwise, answer <span class="uicontrol">Y</span> and continue to steps a and b.</p>
                                                            <p><span class="codeblock">An existing Okta Organization (https://dev-133337.okta.com) was
found in C:\mydirectory.okta\okta.yaml Overwrite configuration file?
[Y/n]</span>
                                                            </p>
                                                            <p>If Okta CLI returns an error "Your Okta Org is missing a feature
required to use the Okta CLI: API Access Management," you aren't using
an Okta developer account. To resolve this error, see <a href="lab.htm#Okta" class="MCXref xref">Okta developer account</a>.</p>
                                                            <ol type="1">
                                                                <li value="1">Enter your <code>${OKTA_DOMAIN}</code>. If you don't know your
<code>${OKTA_DOMAIN}</code>, see <a href="lab.htm#Values" class="MCXref xref">Values and variables</a>.</li>
                                                                <li value="2">Follow the instructions in <a href="https://developer.okta.com/docs/guides/create-an-api-token" target="_blank">Create an API token</a> to
create a token. After you have the token, enter it at the Okta API token
prompt.</li>
                                                            </ol>
                                                        </li>
                                                        <li value="4">
                                                            <p>Register the sample application with Okta:</p>
                                                            <p><span class="codeblock">okta start</span>
                                                            </p>
                                                            <p>Okta CLI shows the following message:</p>
                                                            <p><span class="codeblock">Configuring a new OIDC application, almost
done: Created OIDC application, client-id: 0oa1jnble6 Okta configuration
written to .env</span>
                                                            </p>
                                                            <p>If Okta CLI returns an error "Your Okta Org is missing a feature
required to use the Okta CLI: API Access Management," you aren't using
an Okta developer account. To resolve this error, see <a href="lab.htm#Okta" class="MCXref xref">Okta developer account</a>.</p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent"> If you're asked to select the authorization
server to use, select the default server.</p>
                                                            </div>
                                                            <p>The <code>okta start</code> CLI command creates and registers an OIDC
client with Okta. Okta considers this client an OIDC application. When
you register the OIDC application, the
<code>okta-reference-coexistence-oidc-example/.env</code> file is
updated with the issuer URI, client ID, and client secret used for
authentication with Okta. The sample web application in this example
uses the client ID and client secret to communicate with the Okta OIDC
application.</p>
                                                            <p>The <code>okta-reference-coexistence-oidc-example/.env</code> file
tells Docker which environment variables to set when
<code>docker compose</code> is run.</p>
                                                            <p>The <code>okta-reference-coexistence-oidc-example/.env</code> file
before running <code>okta start</code> is as follows:</p>
                                                            <p><span class="codeblock">ISSUER=${CLI_OKTA_ISSUER}
CLIENT_ID=${CLI_OKTA_CLIENT_ID}
CLIENT_SECRET=${CLI_OKTA_CLIENT_SECRET}</span>
                                                            </p>
                                                            <p>After you run the <code>okta start</code> command, the
<code>okta-reference-coexistence-oidc-example/.env</code> file is
similar to the following where the <code>ISSUER</code> references your
Okta domain, and the <code>CLIENT_ID</code> and
<code>CLIENT_SECRET</code> are set to authenticate with your Okta
domain.</p>
                                                            <p><span class="codeblock">ISSUER=https://${OKTA_DOMAIN}/oauth2/default
CLIENT_ID=someIdValue
CLIENT_SECRET=someSecretValue</span>
                                                            </p>
                                                        </li>
                                                        <li value="5">
                                                            <p>Start the application:</p>
                                                            <p><span class="codeblock">docker compose up</span>
                                                            </p>
                                                            <p>When you run <code>docker compose up</code>, Docker looks at the
<code>okta-reference-coexistence-oidc-example/docker-compose.yml</code>
configuration file. This file defines the services in the containers. In
the example below, a web service is defined using port 8080, and the
<code>${ISSUER}</code>, <code>${CLIENT_ID}</code>, and
<code>${CLIENT_SECRET}</code> variables set in the previous step.</p>
                                                            <p><span class="codeblock">version: "3.7" services: webapp: build: .
ports: - 8080:8080 environment:
SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_OKTA_ISSUER_URI: ${ISSUER}
SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_OKTA_CLIENT_ID: ${CLIENT_ID}
SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_OKTA_CLIENT_SECRET:
${CLIENT_SECRET}</span>
                                                            </p>
                                                            <p>After the application starts, something similar to the following
appears in your terminal:</p>
                                                            <p><span class="codeblock">okta-server-side-example-webapp-1 |
2022-07-19 02:44:41.909 INFO 1 --- [ main]
o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s):
8080 (http) with context path '' okta-server-side-example-webapp-1 |
2022-07-19 02:44:41.926 INFO 1 --- [ main]
com.okta.example.ra.Application : Started Application in 3.807 seconds
(JVM running for 4.674)</span>
                                                            </p>
                                                        </li>
                                                        <li value="6">
                                                            <p>Open a private/incognito browser window and navigate to
<code>http://localhost:8080</code>. You're redirected to Okta to sign in
to your application.</p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">The username of your Okta account is the email
address that you provided when you created the account.</p>
                                                            </div>
                                                            <div class="half border">
                                                                <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../resources/images/ref-arch/directory-coexistence/ad-to-okta-sign-in.png" data-mc-popup-alt="Okta sign-in window with username text field."><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="513" data-mc-height="668" src="../../../resources/images/ref-arch/directory-coexistence/ad-to-okta-sign-in_thumb_220_220.png" alt="Okta sign-in window with username text field." tabindex="" /></a>
                                                                </p>
                                                            </div>
                                                        </li>
                                                        <li value="7">
                                                            <p>Sign in with your Okta org account credentials. You should see
the following:</p>
                                                            <div class="border">
                                                                <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../resources/images/ref-arch/directory-coexistence/ad-to-okta-signin-response.png" data-mc-popup-alt="Sign-in response with welcome home successful authentication response."><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="714" data-mc-height="147" src="../../../resources/images/ref-arch/directory-coexistence/ad-to-okta-signin-response_thumb_220_220.png" alt="Sign-in response with welcome home successful authentication response." tabindex="" /></a>
                                                                </p>
                                                            </div>
                                                        </li>
                                                    </ol>
                                                    <h2 id="stop-the-application">Stop the application</h2>
                                                    <p>After you complete this tutorial, stop the application and remove the
Docker containers.</p>
                                                    <ol type="1">
                                                        <li value="1">
                                                            <p>In the <code>okta-server-side-example</code> directory, stop the
current running containers with <kbd>Ctrl</kbd> + <kbd>C</kbd>.</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>Remove the containers:</p>
                                                            <p><span class="codeblock">docker compose down</span>
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-test="copyrightNotice">Â©  <span class="mc-variable okta-variables.Year variable">2024</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <script src="../../../resources/scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/app.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.requirejs.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                    <!-- Feedback tab for Qualtrics survey -->
                                    <div id="feedback-tab" data-mc-conditions="Primary.live-site-only"><a id="feedback-link" href="#" onclick="openSurvey();  return false" target="_blank" title="Submit feedback"><div id="feedback-container"><p id="feedback-text" translate="no">Feedback</p></div></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
