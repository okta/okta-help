<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin workflows" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Learn how to use Okta PolicySync, which enables you to configure attribute-based access controls (ABAC) for granular server access." />
        <meta name="viewport" content="width=device-width, height=device-height" /><title>PolicySync: Attribute-Based Access Control | Okta</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link rel="shortcut icon" href="../../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link rel="canonical" href="https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/policysync.htm" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
        function openSurvey() {
            window.open('https://surveys.okta.com/jfe/form/SV_e4L0iW8a3tz8Yol?source=' + encodeURIComponent(document.location.href), '_blank');
        }
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxf1de37f5-c8aa-42db-a8ef-0cbf06dfa5e3</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPublish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar" data-mc-conditions="Primary.live-site-only">
                                            <div class="dropdown" data-test="menuBarCategory" id="documentationMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Documentation <em class="fa fa-caret-down"></em></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=oie-index" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=index-admin" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_main" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=csh-asa-overview" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-Okta-workflows" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="relnotesMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Release notes <em class="fa fa-caret-down"></em></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=csh-oie-release-notes" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=ext_okta_relnotes" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_releasenotes" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=ext-asa-releasenotes" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-workflows-releasenotes" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="oktaDevDocsMenu"><a href="https://developer.okta.com/" target="_blank" data-test="menuBarLink">Okta Developer</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="auth0Menu"><a href="https://auth0.com/docs" target="_blank" data-test="menuBarLink">Auth0</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="trainingMenu"><a href="https://www.okta.com/services/training/" target="_blank" data-test="menuBarLink">Training</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="supportMenu"><a href="https://support.okta.com/help/s/?language=en_US" target="_blank" data-test="menuBarLink">Support</a>
                                            </div>
                                        </div>
                                        <div class="logo_container" id="OktaBanner" data-mc-conditions="Primary.live-site-only"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" data-test="OktaBanner"><img src="../../../resources/images/okta-assets/logo.png" alt="Okta Docs" title="Okta Docs" data-test="OktaBannerImg" /></a>
                                        </div>
                                        <div class="toolbar-main" data-test="toolBar" data-mc-conditions="Primary.live-site-only">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1><span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span>: Attribute-Based Access Control</h1>
                                                    <p class="earlyaccess">This feature is being rolled out to all <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> customers through Q1 2023. No action is required on your part to enable this feature for your <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> team.</p>
                                                    <p><span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> teams often assign resources to projects  grouped by product or team. For example, you might have separate projects for your accounting, marketing, and engineering teams. The standard method to grant users access to a server in <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> is to enroll the server in a project, assign the users to a group, and add that group to the project. This grants the members of the group access to all the servers that are enrolled in the project. </p>
                                                    <p>However, there's often a need to grant users access to a subset of servers in a project. You might have a team of database administrators  that need access to all the database servers, regardless of which project a server is enrolled in. In this case, creating a separate project that only contains database servers would break the model of grouping resources by teams. <span class="mc-variable okta-variables.ProductName variable">Okta</span> <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> enables <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> administrators to apply Attribute-Based Access Controls  to user groups, which can be used to provide role-based access to resources.  This is accomplished by applying labels to servers and selectors to groups, similar to how clients use label selectors to identify objects in Kubernetes. </p>
                                                    <div class="noteOkta">
                                                        <img src="../../../resources/images/assets/icons/notes/help.png" class="noteImgFloat" title="Note" alt="Note" />
                                                        <p class="noteContent">The <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> feature grants access to servers based on label selectors. The <span class="wintitle">Project Group</span> settings (admin or user access options and any sudo entitlements bound to the project group) control the actions that the user can perform. In particular, sudo entitlements assigned to a user are based on all sudo assignments assigned to project groups that the user is a member of. It's best practice to limit the actions a user can perform with sudo assignments. This ensures that sudo entitlements are only configured on the project group to which the user is assigned.</p>
                                                    </div>
                                                    <div class="noteOkta">
                                                        <img src="../../../resources/images/assets/icons/notes/help.png" class="noteImgFloat" title="Note" alt="Note" />
                                                        <p class="noteContent"> When <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> is enabled in a project, a <span class="filepath">.asa_authorized_principals</span> file is created for each user, containing the unique <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> server ID. If the project has bastions behind a load balancer with <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> enabled, user connections may fail if the server ID from the connection request doesn't match the one in the <span class="filepath">.asa_authorized_principals</span> file. Okta recommends that you don't enable <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> on the bastions behind a load balancer.</p>
                                                    </div>
                                                    <ul>
                                                        <li><a href="#Main" class="MCXref xref">PolicySync concepts</a>
                                                        </li>
                                                        <li><a href="#Use" class="MCXref xref">Use labels and selectors for granular server access</a>
                                                        </li>
                                                        <li><a href="#Related" class="MCXref xref">Related topics</a>
                                                        </li>
                                                    </ul>
                                                    <h2><a name="Main"></a><span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> concepts</h2>
                                                    <p>There are three main concepts used with <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span>: Authorized principals files, labels, and selectors. The following sections detail each of these concepts. </p>
                                                    <h3><a name="Authoriz"></a>Authorized principals file</h3>
                                                    <p><span class="mc-variable okta-variables.ProductName variable">Okta</span> <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> uses the OpenSSH daemon (sshd) <span class="code">AuthorizedPrincipalsFile</span> configuration option. See <a href="https://www.freebsd.org/cgi/man.cgi?query=sshd_config&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+11.0-RELEASE+and+Ports&amp;arch=default&amp;format=html" target="_blank">sshd_config</a> for more information on <span class="code">AuthorizedPrincipalsFile</span>.</p>
                                                    <p>When <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> is enabled, the <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> server agent creates the file <span class="code">.asa_authorized_principals</span> in the home directory of each user, on each server that they have access to. You can change where this file is created by setting the <span class="code">AuthorizedPrincipalsFile</span> option in your <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> server agent's <span class="code">sftd.yaml</span> configuration file. To configure the location, you must use one of the supported per-user tokens: </p>
                                                    <ul>
                                                        <li><span class="code">%h</span>: This expands to the user's home directory path.</li>
                                                        <li><span class="code">%u</span>: This expands to the user's username.</li>
                                                        <li><span class="code">%U</span>: This expands to the user's UID.</li>
                                                    </ul>
                                                    <p>For example, to configure <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> to create the authorized principals file in the user's home directory, add the following to a server's <span class="code">sftd.yaml</span> configuration file:</p>
                                                    <p> <span class="code">AuthorizedPrincipalsFile: "%h/.asa_authorized_principals"</span></p>
                                                    <p>The <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> server agent also updates the server's <span class="code">sshd_config</span> file with the AuthorizedPrincipalsFile directive as defined in <span class="code">sftd.yaml</span>.</p>
                                                    <div class="noteOkta">
                                                        <img src="../../../resources/images/assets/icons/notes/help.png" class="noteImgFloat" title="Note" alt="Note" />
                                                        <p class="noteContent">While the <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> server agent, <span class="code">sftd</span>, modifies <span class="code">sshd_config</span>, it's highly recommended that you do not modify it, either manually or through automation. Modifying the contents of <span class="code">sshd_config</span> can lead to unsupported or broken configurations.</p>
                                                    </div>
                                                    <h3><a name="Labels"></a>Labels</h3>
                                                    <p>Labels are applied to individual servers and allow <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> teams to categorize and sort server access. You can apply a maximum of 50 labels to a server. </p>
                                                    <p>Labels are stored in a <span class="code">key:value</span> format to allow more flexibility for teams. For example, a server might have two labels, <span class="code">env:prod</span> and <span class="code">region:US</span>. As labels can originate from multiple sources, <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> automatically adds a prefix to identify the source of the label. If the <span class="code">env:prod</span> label originated from the <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> API, the <span class="code">api</span> prefix appears as <span class="code">api.env:prod</span>. This avoids conflicts if the same label was added from multiple sources, which can happen if a label was specified by both the API and an <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> server agent configuration file.</p>
                                                    <h3><a name="Server"></a>Server selectors</h3>
                                                    <p>Server selectors are applied to groups and control which servers are available to members of the group. A maximum of 10 server selectors are available per group linked to a project. Server selectors have the following characteristics:</p>
                                                    <ul>
                                                        <li>Users in a group with selectors only have access to servers that meet all the requirements of that selector.</li>
                                                        <li>Users who belong to multiple groups have access to servers that belong to the union of the selectors of those groups.</li>
                                                        <li>Selector keys can optionally specify the label's source.<ul><li>If the source is included, then only servers that include the label from that source matches. For example, if you use the selector <span class="code">sftd.role=db</span>, only servers whose sftd.yaml configuration file contains the label <span class="code">role: db</span> will match.</li></ul><ul><li>If the source is omitted, then any server that contains the specified label matches. For example, if you use the selector <span class="code">role=db</span>, any servers with the label <span class="code">aws.role: db</span> or <span class="code">sftd.role: db</span> will match.</li></ul></li>
                                                    </ul>
                                                    <div class="note_cautionOkta">
                                                        <img src="../../../resources/images/assets/icons/notes/help.png" class="noteImgFloat" title="Note" alt="Note" />
                                                        <p class="noteContent">Carefully consider the configuration of your labels and selectors. Ensure that your users have network connectivity to servers in their projects using <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> gateways, if required, based on your network topology.</p>
                                                    </div>
                                                    <h2><a name="Use"></a>Use labels and selectors for granular server access</h2>
                                                    <h3>Prerequisites</h3>
                                                    <p>To use labels and selectors in your <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> project, the following must be true:</p>
                                                    <ul>
                                                        <li>
                                                            <p>The <span class="mc-variable okta-feature-names.PolicySync variable">PolicySync</span> feature flag must be enabled for your <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> team.</p>
                                                        </li>
                                                        <li>
                                                            <p>The servers in the project must be running <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> server agent version 1.52.1 or later.</p>
                                                        </li>
                                                    </ul>
                                                    <h3><a name="addLabel"></a>Add a label to a server</h3>
                                                    <p>Teams can add labels from the <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> dashboard. Also, teams can add labels directly to the server agent configuration file (sftd.yaml). See <a href="sftd-configure.htm#Policy" class="MCXref xref">PolicySync Labels</a>.</p>
                                                    <ol>
                                                        <li value="1">Open the <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> dashboard.</li>
                                                        <li value="2">Click <span class="uicontrol">Projects</span> and open a project.</li>
                                                        <li value="3">Go to the <span class="uicontrol">Servers</span> tab.</li>
                                                        <li value="4"> Click the gear <img src="../../../resources/images/asa/icon-gear.png" alt="gear icon." /> icon beside the server and select <span class="uicontrol">Edit Labels</span>.</li>
                                                        <li value="5">Enter one or more labels in the <span class="uicontrol">Add or Remove Labels</span> field, pressing <span class="userinput" style="font-weight: normal;">Enter</span> on your keyboard after entering each label.<br />Note: Labels must follow the <span class="code">key:value</span> format.</li>
                                                        <li value="6">Click <span class="uicontrol">Submit</span> to save the labels.</li>
                                                    </ol>
                                                    <h3><a name="addSelect"></a>Add a server selector to a project group</h3>
                                                    <p>Teams can assign selectors at the project group level. To assign a selector:</p>
                                                    <ol>
                                                        <li value="1">Open the <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> dashboard.</li>
                                                        <li value="2">Click <span class="uicontrol">Projects</span> and open a project.</li>
                                                        <li value="3">Go to the <span class="uicontrol">Groups</span> tab.</li>
                                                        <li value="4"> Click the gear <img src="../../../resources/images/asa/icon-gear.png" alt="gear icon." /> icon and select <span class="uicontrol">Edit</span>.</li>
                                                        <li value="5">Under <span class="wintitle">Server Access</span>, select <span class="uicontrol">Specific Servers</span>.</li>
                                                        <li value="6">Enter one or more labels in the <span class="uicontrol">Server Selector Tags</span> field, pressing <span class="userinput" style="font-weight: normal;">Enter</span> on your keyboard after entering each label.<br />Note: Labels must follow the <span class="code">key:value</span> format.</li>
                                                        <li value="7">Click <span class="uicontrol">Update Group</span> to save the selectors.</li>
                                                    </ol>
                                                    <h2><a name="Related"></a>Related topics</h2>
                                                    <p><a href="sftd-configure.htm" class="MCXref xref">Configure the Advanced Server Access server agent</a>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-test="copyrightNotice">©  <span class="mc-variable okta-variables.Year variable">2024</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <script src="../../../resources/scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/app.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.requirejs.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                    <!-- Feedback tab for Qualtrics survey -->
                                    <div id="feedback-tab" data-mc-conditions="Primary.live-site-only"><a id="feedback-link" href="#" onclick="openSurvey();  return false" target="_blank" title="Submit feedback"><div id="feedback-container"><p id="feedback-text" translate="no">Feedback</p></div></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
