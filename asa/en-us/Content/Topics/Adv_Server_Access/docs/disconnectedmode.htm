<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="Clients" data-mc-conditions="Primary.review-only" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="robots" content="noindex, nofollow" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin workflows" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Learn about Advanced Server Access Disconnected Mode." /><title>Disconnected Mode | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <link href="../../../resources/stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link rel="canonical" href="https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/disconnectedmode.htm" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxb48840fe-d60d-4e40-b1d3-522d5a35c384</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div class="replace_top_nav">
                                        <div class="logo_container" data-mc-conditions="Primary.review-only">
                                            <img class="logo" src="../../../resources/images/okta-assets/logo_190x26.png" alt="Okta Support" title="Okta Support" data-test="OktaBannerImg" style="width: 190;height: 26;" />
                                        </div>
                                        <div class="rev-only_banner" data-mc-conditions="Primary.review-only">
                                            <p>Okta Internal Only</p>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1><span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>
                                                    </h1>
                                                    <p class="beta">This is a Beta feature. If you're interested in participating in the Beta or have any questions, contact your Okta sales channel or Customer Service Manager.</p>
                                                    <p><span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> allows users to connect to open Secure Shell (SSH) sessions to servers when <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> or <span class="mc-variable okta-variables.ProductName variable">Okta</span> are unavailable. While disconnected from <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span>, some features may be unavailable (for example, on-demand users). Other features like session logs are still stored at the configured location. For details, see <a href="gateway-configure.htm" class="MCXref xref">Configure the Advanced Server Access gateway</a>.</p>
                                                    <ul>
                                                        <li><a href="#Prerequi" class="MCXref xref">Prerequisites</a>
                                                        </li>
                                                        <li><a href="#Enable2" class="MCXref xref">Enable Disconnected Mode on a gateway</a>
                                                        </li>
                                                        <li><a href="#Enable" class="MCXref xref">Enable Disconnected Mode for a group</a>
                                                        </li>
                                                        <li><a href="#Project" class="MCXref xref">Project username attribute overrides and Disconnected Mode</a>
                                                        </li>
                                                        <li><a href="#Use2" class="MCXref xref">Use Disconnected Mode with the Advanced Server Access client</a>
                                                        </li>
                                                        <li><a href="#Rotate" class="MCXref xref">Rotate a Disconnected Mode activation key</a>
                                                        </li>
                                                        <li><a href="#Use" class="MCXref xref">Gateways and High Availability in Disconnected Mode</a>
                                                        </li>
                                                        <li><a href="#Best" class="MCXref xref">Best practices</a>
                                                        </li>
                                                        <li><a href="#Related" class="MCXref xref">Related topics</a>
                                                        </li>
                                                    </ul>
                                                    <h3><a name="Prerequi"></a>Prerequisites</h3>
                                                    <p>You need the following to use <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> in your <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> team:</p>
                                                    <ul>
                                                        <li>An <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> client updated to version 1.54.0 or later.</li>
                                                        <li>An <span class="mc-variable workflows_connectors.Advanced_Server_Access variable">Advanced Server Access</span> gateway updated to version 1.54.0 or later.</li>
                                                        <li>An <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> gateway that has a label that can be used as a selector by projects to choose the gateway for <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>. This gateway must have it own unique access address. See <a href="install-gateway.htm" class="MCXref xref">Install the Advanced Server Access gateway</a> and <a href="#Enable2" class="MCXref xref">Enable Disconnected Mode on a gateway</a>.
				<div class="noteOkta"><p class="noteContent">For Disconnected Mode, we recommend configuring and using gateways that aren't behind a load balancer in a high availability (HA) group. This is because if your only connection to a gateway is through the load balancer, it's difficult to ensure that <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> is activated for each gateway in the HA group. See <a href="#Use" class="MCXref xref">Gateways and High Availability in Disconnected Mode</a>.</p></div></li>
                                                        <li>One or more <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> groups with at least one user. Each group must configure <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>. See <a href="#Enable" class="MCXref xref">Enable Disconnected Mode for a group</a> and <a href="policysync.htm#addSelect" class="MCXref xref">Add a server selector to a project group</a>.
				<div class="noteOkta"><p class="noteContent">Groups that have <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> enabled can't be added to a project if the groups use a server selector.</p></div></li>
                                                        <li>A project that includes both gateways and groups configured for use in <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>.</li>
                                                        <li>A record of the IP addresses used to access the gateway and any servers within the <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> project.<div class="noteOkta"><p class="noteContent">You must use an IP address instead of a hostname when connecting to servers in <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>.</p></div></li>
                                                    </ul>
                                                    <div class="note_cautionOkta">
                                                        <p class="noteContent"><span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> uses the rsa-sha2-256 algorithm, while standard <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> uses ssh-rsa. To use <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> in both modes, you must configure your servers and bastions  to allow certificate authorities (CAs) to use both algorithms.</p>
                                                        <p class="noteContent">OpenSSH 8.2 or later includes rsa-sha2-256 by default, but doesn't include ssh-rsa. To enable ssh-rsa for a server or bastion that's running OpenSSH 8.2 or later (for example, servers running Ubuntu 20.04 or later), add the following line to the OpenSSH daemon file (which is either <span class="code">/etc/ssh/sshd_config</span> or a drop-in file under <span class="code">/etc/ssh/sshd_config.d/</span>):<span class="code">CASignatureAlgorithms +ssh-rsa</span>.</p>
                                                    </div>
                                                    <h2><a name="Enable2"></a>Enable <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> on a gateway</h2>
                                                    <div class="note_cautionOkta">
                                                        <p class="noteContent">The following procedure can only be performed while <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> is operating normally.</p>
                                                    </div>
                                                    <ol>
                                                        <li value="1">
                                                            <p>Edit your gateway configuration file (<span class="code">/etc/sft/sft-gatewayd.yaml</span>).</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>Add the following option:</p><span class="codeblock">Beta:
  DisconnectedMode: true</span>
                                                        </li>
                                                        <li value="3">Save the configuration file.</li>
                                                        <li value="4">
                                                            <p>Restart the gateway. See <a href="gateway-manage.htm" class="MCXref xref">Manage the Advanced Server Access gateway</a>.</p>
                                                        </li>
                                                    </ol>
                                                    <p>To verify if <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> was successfully enabled, check the sft-gatewayd log for an <span class="code">Starting Disconnected Mode service</span> entry.</p>
                                                    <h2><a name="Enable"></a>Enable <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for a group</h2>
                                                    <div class="note_cautionOkta">
                                                        <p class="noteContent">The following procedure can only be performed while <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> is operating normally.</p>
                                                    </div>
                                                    <ol>
                                                        <li value="1">
                                                            <p>On the <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> dashboard, click <span class="uicontrol">Groups</span>.</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>Click the gear <img src="../../../resources/images/asa/icon-gear.png" /> beside the group and select <span class="uicontrol">Configure <span style="font-weight: normal;" class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span></span>.</p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent"><span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> can't be enabled for groups that contain project attribute overrides. See <a href="#Project" class="MCXref xref">Project username attribute overrides and Disconnected Mode</a></p>
                                                            </div>
                                                        </li>
                                                        <li value="3">
                                                            <p>Click <span class="uicontrol">Generate Key</span>.</p>
                                                        </li>
                                                        <li value="4">
                                                            <p>Click <span class="uicontrol">Download</span> to download and save the activation key.  </p>
                                                        </li>
                                                    </ol>
                                                    <div class="note_cautionOkta">
                                                        <p class="noteContent">This key is secret and extremely sensitive, ensure that it is stored in a secure location accessible only to team members authorized to activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>.</p>
                                                    </div>
                                                    <h2><a name="Project"></a>Project username attribute overrides and <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span></h2>
                                                    <p>Project username attribute overrides can't be used on projects that have groups with <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> enabled.</p>
                                                    <p>Enabling <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for a group will fail if there are any project username attribute overrides configured for any user in the project. After a group that has <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> enabled has been assigned to a project, you won't be able to add project attribute overrides. </p>
                                                    <p>To use project username attribute overrides, you must either remove any groups from the project that have <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> enabled, or disable <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for all groups that are assigned to the project. See <a href="set-project-level-attributes-in-adv-server-access.htm" class="MCXref xref">Set project-level attribute overrides</a>.</p>
                                                    <h2><a name="Use2"></a>Use <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> with the <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> client</h2>
                                                    <div class="note_cautionOkta">
                                                        <p class="noteContent">This section details the steps to activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> if <span class="mc-variable okta-variables.ProductName variable">Okta</span> or <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> are unavailable and you need to access your servers.</p>
                                                    </div>
                                                    <p>The following are the basic commands to execute in the client to use <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>. See <a href="client.htm" class="MCXref xref">Use the Advanced Server Access client</a> for a complete list of available commands.</p>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">You're granted a set of credentials each time you log in to <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span>. The offline credentials are valid for seven days from the time of login. To use a client with a team in <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>,  you must have either logged in to that team (using <span class="code">sft login</span>) or performed a command on that team using the client within the seven day time period.</p>
                                                    </div>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">If your client isn't enrolled with the team, you must enroll the client before you can log in. See <a href="enroll-clients.htm" class="MCXref xref">Enroll the Advanced Server Access client</a>.</p>
                                                    </div>
                                                    <h3>Activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for a group and connect to a server</h3>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">Anyone with the activation key is able to activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>.</p>
                                                    </div>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">When <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> is active for a group on a gateway, only members of the group can use <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> to access that group's resources through the gateway.</p>
                                                    </div>
                                                    <ol>
                                                        <li value="1">
                                                            <p>Configure your client to enable <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> by setting the environment variable <span class="code">SFT_DISCONNECTED_MODE_BETA</span> as follows:</p>
                                                            <p> <span class="code">SFT_DISCONNECTED_MODE_BETA=1</span></p>
                                                            <p>Alternatively, you can set the environment variable in your shell configuration. For example, if you use the Bash shell, then you could add the following to your <span class="code">.bash_profile</span> file:</p>
                                                            <p> <span class="code">export SFT_DISCONNECTED_MODE_BETA=1</span></p>
                                                            <p>To set environment variables using other shells or environments, refer to their documentation.</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>Activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for a group that has <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> enabled (for example, dm_group), passing the activation key that you downloaded as the <span class="code">secret-file</span> argument:</p>
                                                            <p> <span class="code">sft dm activate --group dm_group --gateway 192.168.128.5:7234 --secret-file dm_group_2021-06-28.pem</span></p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">When you activate Disconnected Mode for a group, it only affects the specific gateway for that group, regardless of how many gateways belong to the team or project.</p>
                                                            </div>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">It may take up to ten hours to gain access to the Disconnected Mode group. To force immediate access, sign out and sign back in to the <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> client.</p>
                                                            </div>
                                                        </li>
                                                        <li value="3">
                                                            <p>Members of the group can now use the client in <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> to connect to servers in that group using ssh, passing the IP addresses of the server and that of the gateway, as in the following example:</p>
                                                            <p> <span class="code">sft dm ssh --group dm_group --gateway 192.168.128.5:7234 191.168.0.1</span></p>
                                                        </li>
                                                    </ol>
                                                    <h3>Deactivate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for a group</h3>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">When <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> is active for a group, only members of that group can deactivate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for that group.</p>
                                                    </div>
                                                    <p><span class="code">sft dm deactivate --group dm_group --gateway 192.168.128.5:7234</span>
                                                    </p>
                                                    <h3>Set a default group to use with <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span></h3>
                                                    <p>You can set a default group to use with <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> commands. For example, to set <span class="code">dm_group</span> as the default group use the command:</p>
                                                    <p> <span class="code">sft dm set-default --group dm_group --gateway 192.168.128.5:7234</span></p>
                                                    <p>When a <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> command is entered without specifying a group, <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> will attempt to use the default group set using <span class="code">sft dm set-default</span>, if one exists.</p>
                                                    <h2><a name="Rotate"></a>Rotate a <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> activation key</h2>
                                                    <p>If a <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> activation key for a group has been lost or compromised, an <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> administrator can rotate the key from the dashboard by performing the following steps:</p>
                                                    <ol>
                                                        <li value="1">
                                                            <p>On the Advanced Server Access dashboard, click <span class="uicontrol">Groups</span>.</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>Click the group.</p>
                                                        </li>
                                                        <li value="3">
                                                            <p>Click <span class="uicontrol">Rotate Key</span>. The <span class="uicontrol">Rotate Key</span> dialog appears.</p>
                                                        </li>
                                                        <li value="4">
                                                            <p>Click <span class="uicontrol">Rotate Key</span>.</p>
                                                        </li>
                                                        <li value="5">
                                                            <p>Click <span class="uicontrol">Download</span> to download and save the activation key.  </p>
                                                        </li>
                                                    </ol>
                                                    <h2><a name="Use"></a>Gateways and High Availability in <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span></h2>
                                                    <p>To access gateways that are in a high availability (HA) group behind a load balancer when <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> is in <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> requires that you activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> on each gateway in the group.</p>
                                                    <p>For example, suppose you have a high availability group, HA, that contains three gateways (GatewayA, GatewayB, and GatewayC) located behind a load balancer. The  configuration file for each gateway configures the AccessAddress to use the load balancer's public IP address.</p>
                                                    <p>If you assigned a public IP address to each gateway, then you can activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> on each gateway by using sft dm activate as follows: </p>
                                                    <p><span class="code">sft dm activate --group dm_group --gateway &lt;GatewayA public IP address&gt;:7234 --secret-file dm_group_2021-06-28.pem</span>
                                                    </p>
                                                    <p> <span class="code">sft dm activate --group dm_group --gateway &lt;GatewayB public IP address&gt;:7234 --secret-file dm_group_2021-06-28.pem</span></p>
                                                    <p> <span class="code">sft dm activate --group dm_group --gateway &lt;GatewayC public IP address&gt;:7234 --secret-file dm_group_2021-06-28.pem</span></p>
                                                    <p>Alternatively, you can run <span class="code">sft dm activate</span> using the public IP address of the load balancer until <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> has been activated for every gateway in the group as follows:</p>
                                                    <p> <span class="code">sft dm activate --group dm_group --gateway &lt;AccessAddress&gt;:7234 --secret-file dm_group_2021-06-28.pem</span></p>
                                                    <div class="note_cautionOkta">
                                                        <p class="noteContent">If you choose to use <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> with gateways in a high availability group, you must ensure that you deactivate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for every gateway once normal service is restored.</p>
                                                    </div>
                                                    <p>As an alternative to only using gateways in a high availability group, you might also have an additional gateway, GatewayD, that's not part of HA, but has the same label that's used as a project selector for the gateways in the group.</p>
                                                    <p>While GatewayD doesn't have the benefits of shared address load balancing that's used by the HA gateways, it does regularly communicate with <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span>. If <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> fails to hear from GatewayD within five minutes, then the standard behavior of switching to a healthy gateway is followed. </p>
                                                    <p>This approach simplifies activating <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> since only GatewayD needs to be activated, and there's no need to expose additional IP addresses. All of the gateways will be used for normal traffic, but GatewayD is solely responsible for <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> traffic. If you want further redundancy when using <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>, you can add additional gateways that aren't behind a load balancer, similar to GatewayD, and activate them when necessary.</p>
                                                    <h2><a name="Best"></a>Best practices</h2>
                                                    <p>The following are the best practices to follow when using <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>:</p>
                                                    <ul>
                                                        <li>
                                                            <p>Make sure all activate keys are stored securely.</p>
                                                        </li>
                                                        <li>
                                                            <p>If an activation key is lost or compromised, rotate the key.</p>
                                                        </li>
                                                        <li>
                                                            <p>Maintain internal documentation detailing how to activate <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for your team. Generally, try to include information like:</p>
                                                            <ul>
                                                                <li>
                                                                    <p>A list of users authorized to access the activation key.</p>
                                                                </li>
                                                                <li>
                                                                    <p>The process of requesting activation of <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for a project.</p>
                                                                </li>
                                                                <li>
                                                                    <p>Any specific notes unique to your organizational configuration.</p>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                        <li>
                                                            <p>The list of <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> groups available to a client updates when the client access token refreshes. Clients can force a refresh, by logging out and logging back in to <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span>.</p>
                                                        </li>
                                                        <li>
                                                            <p>Periodically test that <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> works as expected for your team. Do this by activating <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span> for one or more groups, have users who belong to those groups connect to servers in those groups using the client's <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>, and deactivating <span class="mc-variable okta-feature-names.Disconnected_Mode variable">Disconnected Mode</span>. Perform this testing while <span class="mc-variable okta-feature-names.ScaleFT variable">Advanced Server Access</span> and <span class="mc-variable okta-variables.ProductName variable">Okta</span> are both available.</p>
                                                        </li>
                                                    </ul>
                                                    <h3><a name="Logical"></a>
                                                    </h3>
                                                    <h2><a name="Related"></a>Related topics</h2>
                                                    <p><a href="manage-groups-and-projects.htm" class="MCXref xref">Team management</a>
                                                    </p>
                                                    <p><a href="user-attributes.htm" class="MCXref xref">Advanced Server Access user and group attributes</a>
                                                    </p>
                                                    <p><a href="client.htm" class="MCXref xref">Use the Advanced Server Access client</a>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-test="copyrightNotice">©  <span class="mc-variable okta-variables.Year variable">2023</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <script src="../../../resources/scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/app.js">
                                    </script>
                                    <script src="../../../resources/scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.requirejs.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../../resources/scripts/coveo-resources/js/coveo.madcapflare.okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                    <!-- Feedback tab for Qualtrics survey -->
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
