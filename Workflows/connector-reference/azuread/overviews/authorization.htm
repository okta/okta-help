<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:fileTags="Tags/okta-authors.Ian Hakes">
   <head>
      <link rel="canonical"
            href="https://help.okta.com/wf/en-us/Content/Topics/Workflows/connector-reference/azuread/overviews/authorization.htm"/>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="coveo:connector" content="azuread"/>
      <meta name="coveo:method-description"
            content="The Azure Active Directory connector is authenticated and authorized using OAuth2."/>
      <meta name="coveo:method-name" content="authorization"/>
      <meta name="coveo:method-type" content="authorization"/>
   </head>
   <body>
      <div data-content-id="hoc-main-content">
         <h1>Authorization</h1>
         <p>When you add an <MadCap:variable name="workflows_connectors.AzureAD"/> card to a flow for the first time, <MadCap:variable name="okta-variables.ProductName"/> prompts you to configure a connection. This not only connects you to your <MadCap:variable name="workflows_connectors.AzureAD"/> account, but saves your account information so you can reuse the connection for future <MadCap:variable name="workflows_connectors.AzureAD"/> flows.</p>
         <p> When you create a connection for the first time, <MadCap:variable name="okta-variables.ProductName"/> recommends that you use an <MadCap:variable name="workflows_connectors.AzureAD"/> administrator account.  </p>
         <h2>OAuth app integrations</h2>
         <p>For your convenience, <MadCap:variable name="okta-variables.ProductName"/> has created  OAuth app integrations to access <MadCap:variable name="workflows_connectors.AzureAD"/> on both preview and production cells:</p>
         <ul>
            <li>
               <p>
                  <MadCap:variable name="workflows_connectors.AzureAD"/> for <MadCap:variable name="okta-variables.ProductName"/> Preview Workflows</p>
            </li>
            <li>
               <p>
                  <MadCap:variable name="workflows_connectors.AzureAD"/> for <MadCap:variable name="okta-feature-names.Okta Workflows"/>
               </p>
            </li>
         </ul>
         <h2>Prerequisites</h2>
         <h3>Scopes</h3>
         <p>Make sure that you have enabled the supported OAuth scopes. See <MadCap:xref href="../../azuread/overviews/guidanceforazureadconnector.htm">Guidance for <MadCap:variable name="workflows_connectors.AzureAD"/> connector</MadCap:xref>.</p>
         <h3>Connections</h3>
         <ul>
            <li>
               <p>
                  <MadCap:xref href="#admin">Create a connection with an <MadCap:variable name="workflows_connectors.AzureAD"/> admin account</MadCap:xref>
               </p>
            </li>
            <li>
               <p>
                  <MadCap:xref href="#user">Create a connection with an <MadCap:variable name="workflows_connectors.AzureAD"/> user account</MadCap:xref>
               </p>
            </li>
            <li>
               <p>
                  <MadCap:xref href="#Prohibit">Prohibit users from creating connections</MadCap:xref>
               </p>
            </li>
            <li>
               <p>
                  <MadCap:xref href="#Reauthorize">Reauthorize a connection</MadCap:xref>
               </p>
            </li>
         </ul>
         <h3>
            <a name="admin"/>Create a connection with an <MadCap:variable name="workflows_connectors.AzureAD"/> administrator account</h3>
         <ol>
            <li>
               <p>In your Workflows console, open the <span class="wintitle">Connections</span> page.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">New Connection</span>.</p>
            </li>
            <li>
               <p>In the <span class="wintitle">New Connection</span> dialog, select the <MadCap:variable name="workflows_connectors.AzureAD"/> connection from the list.</p>
            </li>
            <li>
               <p>Enter a unique <span class="uicontrol">Connection Nickname</span>. This is useful if you plan to create multiple <MadCap:variable name="workflows_connectors.AzureAD"/> connections to share with your team.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">Create</span>.</p>
            </li>
            <li>
               <p>Sign in to your <MadCap:variable name="workflows_connectors.AzureAD"/> account to authorize the connection.</p>
            </li>
            <li>
               <p>Select one of the following options:</p>
            </li>
            <ul>
               <li>
                  <span class="uicontrol">As an admin you don't want regular users to create connections</span>. Click <span class="uicontrol">Accept</span> and make sure that the <span class="uicontrol">Consent on behalf of your organization</span> option isn't selected.</li>
               <li>
                  <span class="uicontrol">As an admin you want regular users also able to create connections</span>. Click <span class="uicontrol">Accept</span> and select the <span class="uicontrol">Consent on behalf of your organization</span> option. All  user accounts in your organization can create connections.</li>
            </ul>
         </ol>
         <h3>
            <a name="user"/>Create a connection with an <MadCap:variable name="workflows_connectors.AzureAD"/> user account</h3>
         <ol>
            <li>
               <p>In your Workflows console, open the <span class="wintitle">Connections</span> page.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">New Connection</span>.</p>
            </li>
            <li>
               <p>In the <span class="wintitle">New Connection</span> dialog, select the <MadCap:variable name="workflows_connectors.AzureAD"/> connection from the list.</p>
            </li>
            <li>
               <p>Enter a unique <span class="uicontrol">Connection Nickname</span>. This is useful if you plan to create multiple <MadCap:variable name="workflows_connectors.AzureAD"/> connections to share with your team.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">Create</span>.</p>
            </li>
            <li>
               <p>Sign in to your <MadCap:variable name="workflows_connectors.AzureAD"/> account to authorize the connection.</p>
            </li>
            <li>
               <p>Select one of the following options:</p>
               <ol style="list-style-type: lower-alpha;">
                  <li>
                     <span class="uicontrol">Can accept the permissions requested directly</span>. By selecting this option, the admin allows regular user consent for this <MadCap:variable name="okta-variables.ProductName"/> app. </li>
                  <li>
                     <span class="uicontrol">Need admin approval</span>. Users must contact an admin to grant  access to the application. See <MadCap:xref href="#Consent">Consent for all apps</MadCap:xref> or <MadCap:xref href="#Grant">Grant tenant-wide admin consent.</MadCap:xref>
                  </li>
                  <li>
                     <span class="uicontrol">Need to submit an approval request</span>. Users must enter a justification request for this app in the space provided. See <MadCap:xref href="#Enableadminconset">Enable the admin consent workflow</MadCap:xref>.</li>
               </ol>
            </li>
            <li>
               <p>Click <span class="uicontrol">Accept</span>.</p>
            </li>
         </ol>
         <h3>Admin app approval</h3>
         <p>Admins can grant <MadCap:variable name="okta-variables.ProductName"/> app access to regular user accounts. When configuring a connection, if an admin forgets to select the <span class="wintitle">Consent on behalf of your organization</span> option and  clicks <span class="uicontrol">Accept</span>, the authorization page might not use the same admin account. This is because the <MadCap:variable name="okta-variables.ProductName"/> app authorized the connection  and is remembered by the system.</p>
         <p>The following tasks provide other ways for an admin to grant regular user accounts access to the <MadCap:variable name="okta-variables.ProductName"/> app.</p>
         <h4>
            <a name="Consent"/>Consent for all apps</h4>
         <p>This task allows for user consent for all apps or for apps from verified publishers, provided for selected permissions. Configure permissions as Global Admin only. See <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/configure-user-consent?tabs=azure-portal&amp;pivots=portal#configure-user-consent-settings"
               target="_blank">Configure how users consent to applications</a>.</p>
         <ol>
            <li>
               <p>In the Azure Portal, select <span class="menucascade">
                     <span class="uicontrol">Azure Active Directory</span>
                     <span class="uicontrol">Enterprise applications</span>
                     <span class="uicontrol">Consent and permissions</span>
                     <span class="uicontrol">User consent settings</span>
                  </span>.</p>
            </li>
            <li>
               <p>Select one of the following permissions options:</p>
               <ul>
                  <li>
                     <span class="uicontrol">Allow user consent for apps</span>. This option is less secure.</li>
                  <li>
                     <span class="uicontrol">Allow user consent for apps from verified publishers</span>. This option is more secure. Configure    the permissions  as low impact. See <MadCap:xref href="guidanceforazureadconnector.htm">Guidance for <MadCap:variable name="workflows_connectors.AzureAD"/> connector</MadCap:xref>.</li>
               </ul>
            </li>
            <li>
               <p>From  <span class="wintitle">Enterprise applications</span> go to the <span class="wintitle">Admin consent requests</span> page and review and grant access.</p>
            </li>
         </ol>
         <h4>
            <a name="Grant"/>Grant tenant-wide admin consent</h4>
         <p>You can grant tenant-wide admin consent for an <MadCap:variable name="okta-variables.ProductName"/> app only if it's authorized by your admin account or any other admin accounts. See <a href="https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/grant-admin-consent"
               target="_blank">Grant tenant-wide admin consent to an application</a>.</p>
         <ol>
            <li>
               <p>In your Azure Portal, go to <span class="menucascade">
                     <span class="uicontrol">Azure Active Directory</span>
                     <span class="uicontrol">Enterprise applications</span>
                  </span>.</p>
            </li>
            <li>
               <p>Select one of the following Okta apps:</p>
               <ul>
                  <li>
                     <MadCap:variable name="workflows_connectors.AzureAD"/> for Okta Preview Workflows</li>
                  <li>
                     <MadCap:variable name="workflows_connectors.AzureAD"/> for Okta Workflows.</li>
               </ul>
            </li>
            <li>
               <p> Select <span class="menucascade">
                     <span class="uicontrol">Permissions</span>
                     <span class="uicontrol">Grant admin consent</span>
                  </span>.</p>
               <p>All regular user accounts  in your organization have been granted consent to the Okta app.</p>
            </li>
         </ol>
         <h4>
            <a name="Enableadminconset"/>Enable the admin consent workflow</h4>
         <p>Enable regular users to request access to applications that require admin consent. Users can't directly create connections until the admin approves the request. Configure permissions as Global Admin only. See <a href="https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/configure-admin-consent-workflow"
               target="_blank">Configure the admin consent workflow</a>.</p>
         <ol>
            <li>In your Azure Portal, select <span class="menucascade">
                  <span class="uicontrol">Azure Active Directory</span>
                  <span class="uicontrol">Enterprise applications</span>
               </span>.</li>
            <li> Under <span class="uicontrol">Manage</span>, select <span class="uicontrol">User settings</span>.</li>
            <li> Under <span class="menucascade">
                  <span class="uicontrol">Admin consent requests</span>
                  <span class="uicontrol">Users can request admin consent to apps they are unable to consent to</span>
               </span>, select <span class="uicontrol">Yes</span>. See <a href="https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/configure-admin-consent-workflow"
                  target="_blank">Configure the admin consent workflow</a>.</li>
            <li>From  <span class="wintitle">Enterprise applications</span> go to the <span class="wintitle">Admin consent requests</span> page and review and grant access.</li>
         </ol>
         <h3>
            <a name="Prohibit"/>Prohibit users from creating connections</h3>
         <p>Remove  admin consent that was granted previously by deleting  the Okta app in Enterprise applications and then reauthorize it. Deleting the app revokes the admin consent tenant-wide. Revoking individual user consent isn't allowed.</p>
         <p> All existing connections stop working after one hour. For previously configured admin connections that you want to keep active, manually reauthorize them and use the consent process  to avoid connection failure.</p>
         <ol>
            <li>
               <p>In your Azure Portal, select <span class="menucascade">
                     <span class="uicontrol">Azure Active Directory</span>
                     <span class="uicontrol">Enterprise applications</span>
                  </span>.</p>
            </li>
            <li>
               <p>Select one of the following Okta apps:</p>
               <ul>
                  <li>
                     <MadCap:variable name="workflows_connectors.AzureAD"/> for Okta Preview Workflows</li>
                  <li>
                     <MadCap:variable name="workflows_connectors.AzureAD"/> for Okta Workflows</li>
               </ul>
            </li>
            <li>
               <p> Select <span class="uicontrol">Delete</span>.</p>
            </li>
         </ol>
         <p>Admin consents previously granted are revoked and regular users can't create connections until  admin consent is granted.</p>
         <h3>
            <a name="Reauthorize"/>Reauthorize a connection</h3>
         <p>If you've used your account to create a connection successfully, you can use this account to create multiple connections. If you've already created connections you can reauthorize these connections as long as there are no configuration changes made by the admin.</p>
         <MadCap:snippetBlock src="../azureadseealso.flsnp"/>
      </div>
   </body>
</html>
