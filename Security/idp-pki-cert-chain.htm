<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:conditions="MultiProdPublish.Classic+OIE" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
    <head><title>[%=Heading.Level1%]</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Format a PKI&#160;Certificate Chain</h1>
        <p> To add a Smart Card identity provider, you must provide a name, the certificate chain, and specify the amount of time for Okta to consider the CRL valid after a successful download.</p>
        <p>
            <img src="../../Resources/Images/add_smart_card.png" class="thumbnail" />
        </p>
        <h2>Steps<br /></h2>
        <p>If you are using more than one certificate, follow this procedure to combine them into a single file.</p>
        <ol>
            <li>Convert DER encoded root and intermediate certificates (with .cer, .crt extension) into PEM format using the following openssl command: <span class="codeblock">openssl x509 -inform der -in $input-cert-file-name -out $out-cert-file-name-with-pem-extension</span></li>
            <li>
                        Concatenate all the PEM certificates into a single file with root certificate being the last one using the following command: <span class="codeblock">cat $intermediate-cert-file-1 ... $intermediate-cert-file-N $root-cert-file-with-pem-extension &gt; trust-chain.pem</span><p>Important: Be sure the root certificate is last.</p></li>
            <li>Upload <span class="code">trust-chain.pem</span> when creating the the Smart Card Identity Provider and make sure that no other Smart Cards IDPs exist.</li>
        </ol>
        <h2><span>Next task</span>
        </h2>
        <p>
            <MadCap:xref href="idp-enable-smart-card.htm">Enable Smart Card &#160;</MadCap:xref>
        </p>
    </body>
</html>