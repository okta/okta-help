<?xml version="1.0" encoding="utf-8"?>
<html MadCap:fileTags="Tags/okta-topic-status.Ready for Review" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:conditions="MultiProdPublish.Classic+OIE">
    <head><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="API Access Management allows custom authorization servers in Okta, including OAuth claims. " />
    </head>
    <body><a name="API_Access"></a>
        <h1>Create API access claims</h1>
        <p><a name="create_claims"></a>Tokens contain <a href="http://developer.okta.com/docs/api/resources/oauth2.html">claims</a> that are statements about the subject or another subject, for example name, role, or email address.</p>
        <p>ID token claims are dynamic. By default, the authorization server doesn’t include them in the ID token when requested with an access token or authorization code. To keep this default, select <span class="uicontrol">Userinfo/id_token request</span> for <span class="uicontrol">Include in token type</span>.</p>
        <p>To force the Authorization server to always put a claim into the ID token, select <span class="uicontrol">Always</span> for <span class="uicontrol">Include in token type</span>.</p>
        <div class="noteOkta">
            <p class="noteContent">If the claim isn’t included, the client must use an access token to get the claims from the <span class="code">UserInfo</span> endpoint.</p>
        </div>
        <blockquote>
            <p>
                <img src="../../Resources/Images/scope_claims.png" />
            </p>
        </blockquote>
        <ol>
            <li>Choose the name of the authorization server to display it, and choose <span class="uicontrol">Claims</span>.
							Okta provides a default subject claim. You can edit the mapping, or create your own claims.</li>
            <li>
                <p>Choose <span class="uicontrol">Add Claim</span> and provide the requested information.
								</p>
                <ul>
                    <li>
                        <p><span class="uicontrol">Name</span>
                        </p>
                    </li>
                    <li>
                        <p><span class="uicontrol">Include in token type:</span> Select <span class="uicontrol">Access Token</span> (OAuth 2.0) or <span class="uicontrol">ID Token</span> (OpenID Connect). For ID tokens, in the second dropdown choose <span class="uicontrol">Always</span>  or <span class="uicontrol">Userinfo/id_token request</span>.</p>
                    </li>
                    <li>
                        <p><span class="uicontrol">Value type</span>: Choose whether the values defined in the claim use a <span class="uicontrol">Group</span> filter or an <span class="uicontrol">Expression</span> written using the <a href="https://developer.okta.com/reference/okta_expression_language/">Okta Expression Language</a>.
										</p>
                        <ul>
                            <li>
                                <p><span class="uicontrol">Mapping</span>: Appears if you choose <span class="uicontrol">Expression</span>. Add the mapping here using the Okta Expression Language, for example <code class="highlighter-rouge">appuser.username</code>.
									Be sure to check that your expression returns the results expected. The expression isn’t validated here.</p>
                            </li>
                            <li>
                                <p><span class="uicontrol">Filter</span>: Appears if you choose <span class="uicontrol">Groups</span>. Use it to add a group filter. If you leave it blank, then this claim includes all users.</p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p><span class="uicontrol">Disable claim</span>: Check this option  to temporarily disable the claim for testing or debugging.</p>
                    </li>
                    <li>
                        <p><span class="uicontrol">Include in</span>: Specify whether the claim is valid for any scope, or select the scopes for which it’s valid.</p>
                    </li>
                </ul>
            </li>
        </ol>
        <p>While in the <span class="uicontrol">Claims</span> list, you can:</p>
        <ul>
            <li>Sort claims by type.</li>
            <li>
                <p>Delete claims that you’ve created, or disable claims for testing or debugging purposes.</p>
                <p>
                    <img src="../../Resources/Images/claims_updated2.png" id="img_new" />
                </p>
            </li>
        </ul>
    </body>
</html>