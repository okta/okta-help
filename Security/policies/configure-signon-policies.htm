<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:fileTags="Tags/okta-authors.Robert Milkovich"
      MadCap:searchable="True">
   <head>
      <link href="../../../Resources/TableStyles/standard-no-header.css"
            rel="stylesheet"
            MadCap:stylesheetType="table"/>
      <title>[%=Heading.Level1%]| Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
      <meta name="description"
            content="Security Policies allow admins to determine how users interact with Okta. Policies control password requirements, authentication challenges, and app access."/>
   </head>
   <body>
      <h1>
         <a name="Security_Policies1"/>Configure an <MadCap:variable name="okta-variables.ProductName"/> sign-on policy</h1>
      <a name="Creating2"/>
      <p>The <MadCap:variable name="okta-variables.ProductName"/> sign-on policy determines who can access <MadCap:variable name="okta-variables.ProductName"/>, where they can access <MadCap:variable name="okta-variables.ProductName"/> from, and how they must prove their identity. To create an <MadCap:variable name="okta-variables.ProductName"/> sign-on policy, you create a policy and then add rules to it.  </p>
      <p>By default, <MadCap:variable name="okta-variables.ProductName"/> provides one default <MadCap:variable name="okta-variables.ProductName"/> sign-on policy in the list. You can customize the settings of this policy and apply it to all users in your organization as a catch-all policy. Then you can add additional <MadCap:variable name="okta-variables.ProductName"/> sign-on policies and apply them to specific groups of users. For example, you can specify that a certain group of users may only sign in to <MadCap:variable name="okta-variables.ProductName"/> from specific network zones, how they must authenticate, the length of their session, and more.</p>
      <p>
         <MadCap:variable name="okta-variables.ProductName"/> evaluates policies in the order in which they appear in the list, starting at the top of the list. <MadCap:variable name="okta-variables.ProductName"/> tests the sign-in attempt against each policy until it finds a policy that the sign-in attempt can satisfy.  If the sign-in attempt doesn't satisfy the requirements of any of your custom policies, <MadCap:variable name="okta-variables.ProductName"/> tests the attempt against the default <MadCap:variable name="okta-variables.ProductName"/> sign-on policy. If the sign-in attempt satisfies the requirements of any policy, no other policies are tested and the user may access <MadCap:variable name="okta-variables.ProductName"/>. <MadCap:variable name="okta-variables.ProductName"/> recommends that you order your policies with the most restrictive one at the top of the list, the least restrictive one second from last in the list, and the default <MadCap:variable name="okta-variables.ProductName"/> sign-on policy at the bottom of the list. </p>
      <div class="noteOkta">
         <ul>
            <li>After you've created a <MadCap:variable name="okta-variables.ProductName"/> sign-on policy, you must close all active sessions for the new policy to take effect. </li>
            <li>
               <MadCap:variable name="okta-variables.ProductName"/> sign-on policies don't affect API token validity or lifetime. See <MadCap:xref href="../API.htm">API token management</MadCap:xref>
            </li>
         </ul>
      </div>
      <h2>Create an <MadCap:variable name="okta-variables.ProductName"/> sign-on policy</h2>
      <ol>
         <li>
            <p>In the Admin Console, go to <span class="menucascade">
                  <span class="uicontrol">Security</span>
                  <span class="uicontrol">Authentication</span>
               </span>.</p>
         </li>
         <li MadCap:conditions="MultiProdPublish.Classic">
            <p>Click the <span class="wintitle">Sign On</span> tab.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Add New <MadCap:variable name="okta-variables.ProductName"/> Sign-on Policy</span>.</p>
         </li>
         <li>
            <p>Complete these fields:</p>
            <ul>
               <li>
                  <p>
                     <span class="uicontrol">Policy Name</span>: Enter a name for the sign-on policy.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Policy Description</span>: Optional. Enter a description for the <MadCap:variable name="okta-variables.ProductName"/> sign-on policy.</p>
               </li>
               <li>
                  <p>
                     <span class="uicontrol">Assign to Groups</span>: Enter the name of a group to which the policy should be applied. The policy can be applied to multiple groups.</p>
               </li>
            </ul>
         </li>
         <li>
            <p>Click <span class="uicontrol">Create Policy and Add Rule</span>.</p>
         </li>
      </ol>
      <h2>Add an <MadCap:variable name="okta-variables.ProductName"/> sign-on policy rule</h2>
      <ol>
         <li>
            <p>Click <span class="uicontrol">Add Rule</span> to add a rule to a policy. Complete the following fields as needed.</p>
         </li>
      </ol>
      <table style="mc-table-style: url('../../../Resources/TableStyles/standard-no-header.css');"
             class="TableStyle-srb_no_header"
             cellspacing="0">
         <col class="TableStyle-srb_no_header-Column-Column1"
              width="37%"
              MadCap:conditions=""/>
         <col class="TableStyle-srb_no_header-Column-Column1" MadCap:conditions=""/>
         <tbody>
            <tr class="TableStyle-srb_no_header-Body-Body1">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <span class="uicontrol">Rule name</span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Add a descriptive name for the rule that you want to create.</td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <span class="uicontrol">Exclude users</span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">If needed, you can exclude individual users of a group from the rule.</td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <span class="menucascade">
                     <span class="uicontrol">IF</span>
                     <span class="uicontrol">User's IP is</span>
                  </span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Use the dropdown menu to assign location parameters. You can specify what kind of location prompts authentication. See <MadCap:xref href="../network/network-zones.htm">Network zones</MadCap:xref> and <MadCap:xref href="../network/about-dynamic-zones.htm">About dynamic zones</MadCap:xref>.</td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <span class="menucascade">
                     <span class="uicontrol">AND</span>
                     <span class="uicontrol">Identity provider is</span>
                  </span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">
                  <p>Select the Identity Provider that you want to use. See <MadCap:xref href="../Identity_Providers.htm">Identity Providers</MadCap:xref> for information.</p>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <span class="menucascade">
                     <span class="uicontrol">AND</span>
                     <span class="uicontrol">Authenticates via</span>
                  </span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Select the required means of authentication.</td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <span class="menucascade">
                     <span class="uicontrol">AND</span>
                     <span class="uicontrol">Behavior is</span>
                  </span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">
                  <p>Type the name of an existing behavior that was previously created. To add a behavior, start typing a behavior name; a dropdown list of all matching defined behaviors appears from which you can select the behavior. Repeat for each additional behavior you want to add. When you add multiple behaviors, they're treated as OR conditions. See <a href="../behavior-detection/add-rule-behavior-detection.htm">Add a behavior to a sign-on policy rule</a>.</p>
                  <p>For high-risk behaviors, be sure to set your secondary factor requirement to <span class="uicontrol">Every time</span>. Don't combine a behavior condition with a <span class="uicontrol">per device</span> or <span class="uicontrol">per session</span> secondary factor requirement.</p>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <span class="menucascade">
                     <span class="uicontrol">AND</span>
                     <span class="uicontrol">Risk is</span>
                  </span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">
                  <p>Risk scoring uses a data-driven risk engine to determine whether each sign-in event is likely to represent unusual activity. Select a risk level of Low, Medium, or High. </p>
                  <p>If you select <span class="uicontrol">High</span>, be sure to set your secondary factor requirement to <span class="uicontrol">Every time</span>. Don't combine a high-risk level with a <span class="uicontrol">per device</span> or <span class="uicontrol">per session</span> secondary factor requirement. </p>
                  <p>See <MadCap:xref href="../Security_Risk_Scoring.htm">Risk scoring</MadCap:xref>.</p>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <span class="menucascade">
                     <span class="uicontrol">THEN</span>
                     <span class="uicontrol">Access is</span>
                  </span>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">Based on the authentication form of the previous dropdown list, use this one to establish whether the condition allows or denies access.</td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <p>
                     <span class="uicontrol">Authentication</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">
                  <p>Indicate whether multifactor authentication is required.</p>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <p>
                     <span class="uicontrol">Users will authenticate with</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">
                  <p>Select how users authenticate:</p>
                  <ul>
                     <li>
                        <p>
                           <span class="uicontrol">Password / Any IdP</span>: Use a password and any Identity Provider configured for your org.</p>
                     </li>
                     <li>
                        <p>
                           <span class="uicontrol">Password / Any IdP + Any authenticator</span>: Use a password and any Identity Provider configured for your org, and any factor configured for your org.</p>
                     </li>
                     <li>
                        <p>
                           <span class="uicontrol">Factor Sequence</span>: Specify the sequence of MFA factors that users see when they sign in to <MadCap:variable name="okta-variables.ProductName"/>. See <MadCap:xref href="../mfa-factor-sequencing.htm">MFA Factor Sequencing</MadCap:xref> for instructions.</p>
                     </li>
                  </ul>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <p>
                     <span class="uicontrol">Users will be prompted for MFA</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">
                  <p> If users are required to use multifactor authentication, indicate when they're prompted to use it:</p>
                  <ul>
                     <li>
                        <span class="uicontrol">At every sign in</span>: Users are challenged for multifactor authentication every time they sign in to <MadCap:variable name="okta-variables.ProductName"/>.</li>
                     <li>
                        <span class="uicontrol">When signing in with a new device cookie</span>: Users are challenged for MFA when they attempt to sign in with a new device, or if the cookie has been removed from their existing device. If users select <span class="uicontrol">Do not challenge me on this device again</span> on the Sign-In Widget and authentication is successful, MFA is remembered for the device cookie. As long as the device cookie is valid, users aren't prompted for MFA when they sign in.</li>
                     <li>
                        <span class="uicontrol">After MFA lifetime expires for the device cookie</span>: Users are challenged for multifactor authentication when they attempt to sign in after the MFA lifetime period has expired. If users select
                        <span class="uicontrol">Do not challenge me on this device again for the next
                           <span class="varname">time</span>
                        </span> on the <MadCap:variable name="okta-feature-names.Sign-In Widget"/> and authentication is successful, MFA is remembered for the device cookie. As long as the device cookie is valid, users aren't prompted for MFA when they sign in.</li>
                     <ul>
                        <li>
                           <span class="uicontrol">MFA lifetime</span>: This option appears when you select <span class="uicontrol">After MFA lifetime expires for the device cookie</span>. Type a numerical value in the field on the right, then select a value from the dropdown list (<span class="uicontrol">Days</span>, <span class="uicontrol">Hours</span>, <span class="uicontrol">Minutes</span>).</li>
                     </ul>
                     <li>
                        <span class="uicontrol">Select "Don't prompt me again for MFA" by default</span>: Select this option to not prompt users for multifactor authentication by default.</li>
                  </ul>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <p>
                     <span class="wintitle">Session Lifetime</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">
                  <p>Configure the duration of <MadCap:variable name="okta-variables.ProductName"/> sessions.</p>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                  <p>
                     <span class="uicontrol">Maximum <MadCap:variable name="okta-variables.ProductName"/> session lifetime</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">
                  <p>Configure an <MadCap:variable name="okta-variables.ProductName"/> session lifetime, or none:</p>
                  <ul>
                     <li>
                        <p>
                           <span class="uicontrol">No time limit</span>: If you select this option, there's no time limit applied to <MadCap:variable name="okta-variables.ProductName"/> sessions, but user sessions still expire when the idle time is reached.</p>
                     </li>
                     <li>
                        <p>
                           <span class="uicontrol">Set time limit</span>: Set a time limit to <MadCap:variable name="okta-variables.ProductName"/> session lifetimes. Type a numerical value in the field on the right, then select a value from the dropdown list (<span class="uicontrol">Days</span>, <span class="uicontrol">Hours</span>, <span class="uicontrol">Minutes</span>).</p>
                     </li>
                  </ul>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body2" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                  <p>
                     <span class="uicontrol">Expire session after user has been idle on <MadCap:variable name="okta-variables.ProductName"/> for</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">
                  <p>Configure the amount of idle time that passes before <MadCap:variable name="okta-variables.ProductName"/> sessions are automatically expired, regardless of the maximum <MadCap:variable name="okta-variables.ProductName"/> session lifetime:</p>
                  <ul>
                     <li>
                        <p>Type a numerical value in the field on the right, then select a value from the dropdown list (<span class="uicontrol">Days</span>, <span class="uicontrol">Hours</span>, <span class="uicontrol">Minutes</span>). </p>
                     </li>
                  </ul>
               </td>
            </tr>
            <tr class="TableStyle-srb_no_header-Body-Body1" MadCap:conditions="">
               <td class="TableStyle-srb_no_header-BodyC-Column1-Body1">
                  <p>
                     <span class="uicontrol">Persist session cookies across browser sessions</span>
                  </p>
               </td>
               <td class="TableStyle-srb_no_header-BodyA-Column1-Body1">
                  <p>Enable or disable the persistence of session cookies across browser sessions. Select an option from the dropdown list:</p>
                  <ul>
                     <li>
                        <p>
                           <span class="uicontrol">Enable</span>: Allow session cookies to persist across browser sessions if users want to do so. Users must select <span class="uicontrol">Keep me signed in</span> on the <span class="wintitle">Sign-In Widget</span> to enable this functionality.</p>
                     </li>
                     <li>
                        <p>
                           <span class="uicontrol">Disable</span>: Don't allow session cookies to persist across browser sessions.</p>
                     </li>
                  </ul>
               </td>
            </tr>
         </tbody>
      </table>
      <div class="noteOkta">
         <p class="noteContent">You can set the maximum session lifetime number through the <MadCap:variable name="okta-variables.ProductName"/> API. If you previously set this number with the API, you can't exceed that maximum here in the <MadCap:variable name="okta-variables.ProductName"/> app.  Setting a number over the API maximum results in an error.</p>
      </div>
      <div class="noteOkta">
         <p class="noteContent">If you add multiple <MadCap:variable name="okta-variables.ProductName"/> sign-on policies, only the first one that matches your criteria are applied.</p>
      </div>
      <h2>Universal <MadCap:variable name="okta-variables.ProductName"/> sign-on policy actions</h2>
      <ul>
         <li>Change the order of all policies except the default policy by grabbing the dotted bar next to the policy name, as shown to the left of policy 1, and moving the policy to the desired position in the list.<p>
               <img src="../../../Resources/Images/Security_RearrangePolicy.png"/>
            </p>
         </li>
         <li>Change the order of rules within a policy by grabbing the bar to the left of a rule name.</li>
         <li>Add a new policy by selecting <span class="uicontrol">Add New <MadCap:variable name="okta-variables.ProductName"/> Sign-On Policy</span>. </li>
      </ul>
      <h2>Individual <MadCap:variable name="okta-variables.ProductName"/> sign-on policy actions</h2>
      <p>You can perform the following actions on a single policy. Select the policy in the list to begin.</p>
      <ul>
         <li>Activate or deactivate the selected policy. If you deactivate a policy, it isn't applied to any user, but you can reactivate it later.</li>
         <li>Click <span class="uicontrol">Edit</span> to edit the policy.</li>
         <li>Click <span class="uicontrol">Delete</span> to delete a policy. You can't delete the default policy. A deleted policy can't be recovered.</li>
         <li>Click <span class="uicontrol">Add Rule</span> to add a rule to the selected policy. Within a policy, you can activate, deactivate, edit, or delete a rule.</li>
         <li>To view details about a rule, click the rule name under <span class="wintitle">Add Rule</span>. </li>
      </ul>
      <h2>
         <a name="PreAuthSignOn"/>Pre-auth sign on evaluation policy</h2>
      <p>End users that sign in using the AuthN API will have their sign-on policies evaluated first before their password or other factor is verified. This evaluation helps to reduce the number of account lockouts that occur across an org.</p>
      <p> If the sign-on policy is set to <span class="code">deny</span>, the user's sign-on attempt is rejected and prompted with the following generic error: <span class="code">Authentication failed</span>. In this scenario, the counter for failed logins isn't incremented but instead, an event indicating that a pre-auth sign-on policy evaluation has been triggered.</p>
      <div class="noteOkta">
         <ul>
            <li>There are no visible UI changes or required setup in the <MadCap:variable name="okta-feature-names.Administrator dashboard"/> to enable this back-end feature.</li>
            <li>This policy doesn't work on initial authentication for newly created accounts that are configured to use JIT provisioning. The end user account must exist in <MadCap:variable name="okta-variables.ProductName"/> for it to be affected by this policy. </li>
            <li>This policy doesn't prevent users from resetting their credentials from a denied location.</li>
         </ul>
      </div>
      <h2>Related topics</h2>
      <p>
         <MadCap:xref href="about-signon-policies.htm">About [%=okta-variables.ProductName%] sign-on policies</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="about-mfa-policies.htm">About MFA enrollment policies</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="about-password-policies.htm">About password policies</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="about-app-signon-policies.htm">About app sign-on policies</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="configure-mfa-policies.htm">Configure an MFA enrollment policy</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="configure-app-signon-policies.htm">Configure an app sign-on policy</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="configure-password-policies.htm">Configure a password policy</MadCap:xref>
      </p>
   </body>
</html>
