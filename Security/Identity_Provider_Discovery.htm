<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:fileTags="Tags/okta-authors.Graham Smith" MadCap:conditions="MultiProdPublish.Classic+OIE">
    <head><title>[%=Heading.Level1%]</title>
        <meta name="description" content="Configure identity provider routing rules to send end users to different IdPs based on the context of the user." />
    </head>
    <body>
        <h1>Identity Provider routing rules</h1>
        <p><MadCap:variable name="okta-feature-names.Identity Provider full name" /> (<MadCap:variable name="okta-feature-names.Identity Provider" />) routing rules enable you to direct end users to identity providers based on the user's location, device, email domain, attributes, or the app they are attempting to access. </p>
        <p MadCap:conditions="MultiProdPublish.Classic">This feature is also known as <MadCap:variable name="okta-feature-names.Identity Provider" /> Discovery, because these routing rules allow <MadCap:variable name="okta-variables.ProductName" /> to discover which identity provider to use based on this context.</p>
        <p>You can <a href="configure-routing-rules.htm">create a rule</a> for each of your providers or for different combinations of user criteria. When an end user attempts to sign in, the active rules are evaluated, and the first one that the user matches is applied.</p>
        <p><MadCap:variable name="okta-feature-names.Identity Provider" /> routing rules are useful in the following scenarios.</p>
        <ul>
            <li><span class="term">On-network vs. off-network</span>: You can maintain alternate or legacy authentication for off-network users and use Okta for on-network users.</li>
            <li><span class="term">Mobile users</span>: Mobile users, identified by device, can route authentication to a third-party identity provider with specific functionality.</li>
            <li><span class="term">Hub-and-spoke organizations</span>: These organizations may manage users, Active Directories, policies, apps, and workflows  in one of the "spoke" organizations, but require access to the central organization for certain apps, such as Workday, for other reasons. Users can authenticate from an app using a service provider-initiated flow to the "hub" organization which uses routing rules to authenticate into the "spoke" organization seamlessly. (If you have more than one Okta org, you can use separate identity providers for each org to keep groups of users separate.)</li>
            <li><span class="term">Desktop SSO</span>: You can route desktop users to Integrated Windows Authentication (IWA) and mobile users to Okta for authentication.</li>
            <li><span class="term">Multiple customer organizations</span>: You can send users from multiple orgs to a different org for authentication, based on the email subdomain.</li>
            <li><span class="term">Required discovery by user attribute</span>: In some B2B scenarios where the email domain does not necessarily correlate to the identity provider, you can direct authentication based on user attributes.</li>
        </ul>
        <h2>End-user experience</h2>
        <p MadCap:conditions="MultiProdPublish.Classic">When <MadCap:variable name="okta-feature-names.Identity Provider" /> routing rules are configured to select a single provider based on the end user's domain or attributes, the end user sees a modified sign-in screen that  accepts the email and short names. The sign-in is evaluated against the set criteria and the user is redirected to the appropriate sign-in screen for the desired identity provider. </p>
        <p MadCap:conditions="Primary.do-not-publish">
            <img src="../../Resources/Images/idp_discovery_4.png" />
        </p>
        <div MadCap:conditions="MultiProdPublish.OIE">
            <p>When <MadCap:variable name="okta-feature-names.Identity Provider" /> routing rules are configured to select a  provider based on the end user's domain or attributes, the end user sees a modified sign-in screen that  accepts the email and short names. If you configured multiple providers for a rule, the end user  sees a list of available IdPs. The sign-in is evaluated against the set criteria and the user is redirected to the appropriate sign-in screen for the desired identity provider. </p>
            <p>If you configured multiple providers for a rule and the primary factor in your <a href="../identity-engine/policies/add-okta-sign-on-policy-rule.htm">Global Session Policy</a> is <span class="uicontrol">Password / IDP</span>, the end user sees fields for their username and password and a list of available IdPs.</p>
            <p>
                <img src="../../Resources/Images/idp-list-with-credentials.png" class="thumbnail" />
            </p>
        </div>
        <div class="noteOkta">
            <p class="noteContent">Routing rules improve the end-user sign-in experience, but they don't provide security enhancements. You need to configure user authentication policies for your IdPs independently of your routing rules.</p>
        </div>
        <h2>Related topics</h2>
        <p>
            <MadCap:xref href="configure-routing-rules.htm">Configure routing rules</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="modify-routing-rules.htm">Modify routing rules</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="Identity_Providers.htm">Identity Providers</MadCap:xref>
        </p>
    </body>
</html>