<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Enable MFA for Windows server RDP authentication attempts using Okta's Credential Provider for Windows."/>
   </head>
   <body>
      <h1>Assign users/groups to the Microsoft RDP (MFA) app </h1>
      <p>You must assign the Microsoft RDP (MFA) app to all users who log in to machines that have the Credential Provider installed. By default, the App Sign-On policy for this app prompts for MFA every login. </p>
      <ol MadCap:conditions="MultiProdPublish.OIE">
         <li>
            <MadCap:snippetText src="../../Resources/Snippets/task steps/Applications_Applications.flsnp"/>
         </li>
         <li>Locate the Microsoft RDP (MFA) app.</li>
         <li>Click the app name.</li>
         <li>Select the <span class="wintitle">Sign On</span> tab. </li>
         <li>In the <span class="wintitle">Settings</span> section, select <span class="uicontrol">Edit</span>.</li>
         <li>Select the <span class="uicontrol">Application username format</span> to assign to users of this app. The default is <span class="uicontrol">Okta username</span>.<div class="noteOkta">
               <p class="noteContent">The username that you enter must match the format that you selected in the preceding step. Suppose a user's full UPN is in the format name@yourorg.com. If you're using the AD SAM account name as the <span class="uicontrol">Application username format</span>, enter only the name portion of the UPN for the username. The AD SAM account name includes the @yourorg.com portion of the UPN.</p>
            </div>
         </li>
         <li>Click <span class="uicontrol">Save</span>.</li>
         <li>Select the <span class="wintitle">Assignments</span> tab.</li>
         <li>Assign people or groups to the app. To assign the app to users:<div>
               <ol MadCap:conditions="MultiProdPublish.OIE"
                   style="list-style-type: lower-alpha;">
                  <li>Select <span class="menucascade">
                        <span class="uicontrol">Assign</span>
                        <span class="uicontrol">Assign to People</span>
                     </span>.</li>
                  <li>Click <span class="uicontrol">Assign</span> beside a user to assign to the app.</li>
                  <li>Click <span class="uicontrol">Save and Go back</span>.</li>
                  <li>Repeat the previous two steps to add other users to the app.</li>
                  <li>Click <span class="uicontrol">Done</span>.</li>
               </ol>Okta recommends assigning applications to groups rather than individual users for ease of management. To assign the app to groups:</div>
            <div>
               <ol style="list-style-type: lower-alpha;">
                  <li>Click <span class="uicontrol">Assign</span> and select <span class="uicontrol">Assign to Groups</span>.</li>
                  <li>Click <span class="uicontrol">Assign</span> beside each group to which to assign the app.</li>
                  <li MadCap:conditions="Primary.do-not-publish">
                     <p>
                        <MadCap:annotation MadCap:createDate="2022-12-08T13:42:12.7503121-05:00"
                                           MadCap:creator="Tim Howie"
                                           MadCap:initials="TI"
                                           MadCap:comment="Testing in December 2022, it seems that there's no such dialog that appears in Classic or in OIE"
                                           MadCap:editor="Tim Howie"
                                           MadCap:editDate="2022-12-08T13:43:52.1273173-05:00">Complete</MadCap:annotation> the fields in the <span class="wintitle">Assign
                                             <span class="varname">application name</span>
                                             to Groups</span> dialog box if it appears.</p>
                  </li>
                  <li MadCap:conditions="Primary.do-not-publish">
                     <p>Click <span class="uicontrol">Save and go back</span>.</p>
                  </li>
                  <li MadCap:conditions="Primary.do-not-publish">
                     <p>Repeat to add more groups.</p>
                  </li>
                  <li>
                     <p>Click <span class="uicontrol">Done</span>.</p>
                  </li>
               </ol>
            </div>
         </li>
         <li>Select the <span class="wintitle">Sign On</span> tab to configure sign on rules for this app.</li>
         <li>
						Scroll to the <span class="wintitle">Sign On Policy</span> section.
						</li>
         <li>The default setting for <span class="uicontrol">User assigned this policy for this app</span> is <span class="uicontrol">Require Multifactor every sign on</span>. Create another sign on rule if you don't want to prompt some or all of your users for MFA. Assign users to the new rule and clear the <span class="uicontrol">Prompt for factor</span> checkbox. Click <span class="uicontrol">Save</span> when finished. Your system configuration is complete.<div class="noteOkta">
               <p class="noteContent">Okta sign on policy doesn't apply to Microsoft RDP (MFA). <MadCap:variable name="okta-variables.ProductName"/> only evaluates the app sign on policy defined in this step.</p>
            </div>
         </li>
      </ol>
      <ol MadCap:conditions="MultiProdPublish.Classic">
         <li>Sign in to your Okta tenant as an administrator.</li>
         <li>Click the app name.</li>
         <li>
            <p>In the Microsoft RDP (MFA) app in Okta, select the <span class="wintitle">Sign On</span> tab. In the <span class="wintitle">Settings</span> section, select <span class="uicontrol">Edit</span> and choose the <span class="uicontrol">Application username format</span> to assign to users of this app. The example uses <span class="uicontrol">Okta username</span>, but you select any available option.<MadCap:toggler targets="mfa-ms-rdp-7-dropdown">Image</MadCap:toggler>
            </p>
            <p>
               <img src="../../Resources/Images/mfa-ms-rdp-07.png"
                    alt="Image of the sign on methods page."
                    MadCap:targetName="mfa-ms-rdp-7-dropdown"/>
            </p>
            <div class="noteOkta">
               <p class="noteContent">When the end user signs in, the application user format must match exactly.</p>
            </div>
            <p>Best practice: Okta recommends using a username prefix, similar to how Windows uses the SAMAccountName for login.</p>
         </li>
         <li>
            <p>Select the <span class="wintitle">Assignments</span> tab and assign the app to users or groups. After selecting <span class="uicontrol">Assign</span>, enter the username. For more information on assigning apps, see <MadCap:xref href="../Apps/apps-assign-applications.htm">Assign app integrations</MadCap:xref>.</p>
            <div class="noteOkta">
               <p class="noteContent">The username that you enter must match the format you selected in the preceding step. Suppose a user's full UPN is in the format name@yourorg.com. If you're using the AD SAM account name as the <span class="uicontrol">Application username format</span>, enter only the name portion of the UPN for the username. The AD SAM account name includes the @yourorg.com portion of the UPN.</p>
            </div>
         </li>
         <li>
            <p>Navigate to the <span class="wintitle">Sign on</span> tab to configure sign on rules specific to this app.</p>
         </li>
         <li>
						On the <span class="wintitle">Sign On</span> tab, scroll to the <span class="wintitle">Sign On Policy</span> section.
						<p>
               <img src="../../Resources/Images/mfa-ms-rdp-11.png"
                    id="img_new"
                    alt="Image of a sign on policy."
                    class="thumbnail"/>
            </p>
         </li>
         <li>The App Sign-On policy for this app prompts for MFA for every login. Create another on rule if you don't want to prompt some or all of your users for MFA. Assign users to the new rule and clear the <span class="uicontrol">Prompt for factor</span> checkbox.<br/>
            <img src="../../Resources/Images/mfa-ms-rdp-12.png"
                 id="img_new"
                 alt="App sign on rule with 'prompt for factor' not enabled."
                 class="thumbnail"/>
            <br/>
            <div class="noteOkta">
               <p class="noteContent">Okta sign on policy doesn't apply to Microsoft RDP (MFA). <MadCap:variable name="okta-variables.ProductName"/> only evaluates the app sign on policy defined in this step.</p>
            </div>
         </li>
         <li>Click <span class="uicontrol">Done</span> when finished. Your system configuration is complete.</li>
      </ol>
      <div>
         <h2>Next steps</h2>
         <p>
            <MadCap:xref href="proc-mfa-win-creds-rdp-install.htm">Install the Okta Credential Provider for Windows</MadCap:xref>
         </p>
      </div>
   </body>
</html>
