<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="MultiProdPublish.OIE" MadCap:fileTags="Tags/okta-authors.Barbara Vo">
    <head>
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <meta name="description" content="Behavior conditions for app sign-on policy rules enables you to build custom heuristics." />
    </head>
    <body>
        <h1>Add behavior condition in an <MadCap:variable name="okta-feature-names.app sign-on policy" /> rule</h1>
        <p><MadCap:variable name="okta-feature-names.App sign-on policies" /> enforce end user authentication in the context of the requested application. Configure behavior conditions in <MadCap:variable name="okta-feature-names.app sign-on policies" /> using  Expression Language. </p>
        <h2>Before you begin</h2>
        <ul>
            <li>Create a new or use an existing <MadCap:variable name="okta-feature-names.app sign-on policy" />.</li>
            <li>Adaptive MFA must be enabled.</li>
            <li>Ensure that no more than 10 conditions are included in a heuristic.</li>
            <li MadCap:conditions="Primary.do-not-publish">The maximum number of conditions in a heuristic is 30. </li>
            <li>The Expression Language for Security Context supports a subset of operators such as:<ul><li><span class="code">||, OR</span></li><li><span class="code">&amp;&amp;, AND</span></li><li><span class="code">!, NOT</span></li><li><span class="code">==</span></li><li><span class="code">!=</span></li></ul></li>
        </ul>
        <p> For more information, see <a href="https://developer.okta.com/docs/reference/okta-expression-language" target="blank" title="Okta Expression Language Overview" alt="Okta Expression Language Overview">Okta Expression Language Overview</a>.</p>
        <h2>Start this task</h2>
        <ol>
            <MadCap:snippetBlock src="../../identity-engine/snippets/asop-rule-steps.flsnp" />
        </ol>
        <MadCap:snippetBlock src="../../identity-engine/snippets/asop-rule-if-table.flsnp" />
        <ol MadCap:continue="true">
            <li>Configure the <span class="code">THEN</span>&#160;conditions. These conditions specify how authentication is enforced.				
					<table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/standard.css');" class="TableStyle-standard" cellspacing="0"><col style="width: 37%;" class="TableStyle-standard-Column-Column1" /><col class="TableStyle-standard-Column-Column1" /><col class="TableStyle-standard-Column-Column1" /><thead><tr class="TableStyle-standard-Head-Header1"><th class="TableStyle-standard-HeadF-Column1-Header1"><span class="uicontrol">THEN</span></th><th class="TableStyle-standard-HeadF-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-standard-Body-Body1"><td class="TableStyle-standard-BodyF-Column1-Body1"><span class="uicontrol"><span class="code">THEN</span>&#160;Access is</span></td><td class="TableStyle-standard-BodyF-Column1-Body1">Deny the user’s access or allow it after successful authentication. If you deny access, skip to the last step to save your rule.</td></tr><tr class="TableStyle-standard-Body-Body2"><td class="TableStyle-standard-BodyF-Column1-Body2"><span class="uicontrol"><span class="code">AND</span>&#160;User must authenticate with</span></td><td class="TableStyle-standard-BodyF-Column1-Body2"><p>Choose the authentication requirements that you want to enforce for app access. For a description of factor types, see <MadCap:xref href="../../identity-engine/authenticators/configure-authenticators.htm">About MFA authenticators</MadCap:xref>.</p><p><span class="wintitle">1 factor type:</span> To enable one-factor authentication, choose from:</p><ul><li><span class="uicontrol">Password</span> requires users to enter their password every time the rule requires re-authentication.</li><li><span class="uicontrol">Possession factor</span> requires users to provide a possession factor such as <MadCap:variable name="okta-feature-names.Okta Verify" /> or email to access the app.</li><li><span class="uicontrol">Any 1 factor type</span> allows users to provide any single factor to access the app.</li><li>For one-factor passwordless authentication options, see <MadCap:xref href="../../identity-engine/password-optional/password-optional-disabled.htm">Set up passwordless sign-in experience</MadCap:xref>.</li></ul><span class="wintitle">2 factor types:</span> Select to require users to provide two distinct factor types. Choose from: <ul><li><span class="uicontrol">Password +&#160;Another factor</span></li><li><span class="uicontrol">Any 2 factor types</span></li><li>For two-factor passwordless authentication options, see <MadCap:xref href="../../identity-engine/devices/fp/fp-configure.htm">Configure Okta FastPass</MadCap:xref>.</li></ul></td></tr><tr class="TableStyle-standard-Body-Body1"><td class="TableStyle-standard-BodyF-Column1-Body1"><span class="uicontrol"><span class="code">AND</span>&#160;Possession factor restraints are</span></td><td class="TableStyle-standard-BodyF-Column1-Body1">These options aren't available if only <span class="uicontrol">Password</span> is selected in <span class="uicontrol">User must authenticate with</span>. Use these settings to specify possession factor characteristics.<ul><li><span class="uicontrol">Phishing-resistant:</span> Requires users to provide possession factors  that cryptographically verify the login server (the origin). Currently, only <MadCap:variable name="3rd Party Integrations.FIDO2 (WebAuthn)" /> satisfies this requirement. Because phishing resistance implies <span class="wintitle">Device bound</span>, that constraint is selected automatically when <span class="uicontrol">Phishing-resistant</span> is selected.</li><li><span class="uicontrol">Hardware protection:</span> Requires that keys being used to authenticate are stored in secure hardware (TPM, Secure Enclave) on the device. Currently, only <MadCap:variable name="okta-feature-names.Okta Verify" /> meets this constraint. Because hardware protection implies <span class="wintitle">Device bound</span>, that constraint is selected automatically when <span class="uicontrol">Hardware protection</span> is selected.
			<div class="noteOkta"><p class="noteContent">By default, <MadCap:variable name="okta-feature-names.Okta Verify" /> attempts to store the <MadCap:variable name="okta-feature-names.Okta Verify" /> keys on the secure hardware of the device: trusted platform module (TPM) for Windows and Android devices, or Secure Enclave for macOS and iOS devices. If secure hardware isn't available, software storage is used. When software storage is used, <MadCap:variable name="okta-feature-names.Okta Verify" /> doesn't satisfy the app sign-on policy if <span class="uicontrol">Hardware protection</span> is selected as an <span class="wintitle">AND Possession factor restraints are</span> THEN condition. To identify how <MadCap:variable name="okta-feature-names.Okta Verify" /> keys are stored for a device, view the <code>secureHardwarePresent</code> device attribute in the Admin Console, or use an <MadCap:variable name="okta-variables.ProductName" /> Expression Language (EL) expression to determine the value of <code>device.profile.secureHardwarePresentview</code>. If this value is true, secure hardware is used. See <a href="https://developer.okta.com/docs/reference/okta-expression-language/" target="_blank">Okta Expression Language</a> and <MadCap:xref href="../../identity-engine/devices/devices-view-details.htm">View device details</MadCap:xref>.</p></div></li><li><span class="uicontrol">Device bound (excludes phone and email):</span> Requires the factor's keys to be stored securely on the device and aren't transferable to another device without re-enrolling the factor. Email and SMS are the only possession factors that aren't device-bound. This constraint is selected automatically if either of the other constraints are selected.</li></ul></td></tr><tr class="TableStyle-standard-Body-Body2"><td class="TableStyle-standard-BodyF-Column1-Body2"><span class="uicontrol"><span class="code">AND</span>&#160;Access with <MadCap:variable name="okta-feature-names.Okta FastPass" /> is granted</span></td><td class="TableStyle-standard-BodyF-Column1-Body2">These options allow you to choose whether to require end users to prove that they're physically present when using <MadCap:variable name="okta-feature-names.Okta FastPass" /> to authenticate.<ul><li><span class="uicontrol">If the user approves a prompt in <MadCap:variable name="okta-feature-names.Okta Verify" style="font-weight: bold;" /> or provides biometrics (meets NIST&#160;AAL2 requirements)</span>: This option requires users to prove that they're physically present.</li><li><span class="uicontrol">Without the user approving a prompt in <MadCap:variable name="okta-feature-names.Okta Verify" style="font-weight: bold;" /> or providing biometrics</span>: If you select this option and the app sign-on policy requires a possession factor, <MadCap:variable name="okta-feature-names.Okta Verify" /> may perform certificate-based authentication thatallowsallows users to access the resource without proving that they're physically present. This option doesn't meet NIST AAL2 requirements. Also, if you select this option, you won't be able to use Security Question as an additional factor.</li></ul></td></tr><tr class="TableStyle-standard-Body-Body1"><td class="TableStyle-standard-BodyF-Column1-Body1"><span class="uicontrol">Re-authentication frequency is</span></td><td class="TableStyle-standard-BodyF-Column1-Body1">This setting allows you to specify how often end users are required to re-authenticate.<ul><li><span class="uicontrol">Every sign-in attempt:</span> Users must re-authenticate every time they try to access the app.</li><li><span class="uicontrol">Never re-authenticate if the session is active:</span> Once users authenticate from their device, they aren’t prompted to authenticate again until either the maximum session lifetime is reached or they sign out of <MadCap:variable name="okta-variables.ProductName" />.</li><li><span class="uicontrol">Re-authenticate after</span>: Specify how often end users are required to re-authenticate. Users are prompted to re-authenticate only if they try to access the app and haven't re-authenticated within the time interval you specified and their session hasn't expired.</li></ul><div class="noteOkta"><p class="noteContent">A&#160;10-second grace period applies after a user authenticates with their password. During this grace period, users aren't prompted for their password again if <span class="uicontrol">Every sign-in attempt</span> is selected.</p></div></td></tr><tr class="TableStyle-standard-Body-Body2"><td class="TableStyle-standard-BodyF-Column1-Body2"><span class="uicontrol">Password re-authentication frequency is</span></td><td class="TableStyle-standard-BodyF-Column1-Body2" rowspan="2">These two options appear only when <span class="uicontrol">Password + Another Factor</span> is selected. They allow you to specify a different re-authentication interval for the password and the other factor. For example, you might want to require users to re-authenticate with their password if it has been more than eight hours since they last authenticated, and with a possession factor every time they access the app.&#160;</td></tr><tr class="TableStyle-standard-Body-Body1"><td class="TableStyle-standard-BodyC-Column1-Body1"><span class="uicontrol">Re-authentication frequency for all other factors is</span></td></tr></tbody></table></li>
            <li>Click <span class="uicontrol">Save</span>.
				</li>
        </ol>
        <h2>Related topics</h2>
        <p>
            <MadCap:xref href="about-behavior-policy-rule.htm">About behavior and sign-on policies</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="../../identity-engine/policies/about-okta-sign-on-policies.htm">Global session policies</MadCap:xref>
        </p>
    </body>
</html>