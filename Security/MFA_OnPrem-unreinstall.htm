<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Configure the Citrix Netscaler Gateway integration to enable MFA against your Okta RADIUS server agent to provide seamless end-user authentication."/>
   </head>
   <body>
      <h1>Uninstalling and reinstalling the agent</h1>
      <p>When you uninstall a RSA SecurID or On-Prem MFA agent, or reinstall a On-Prem MFA agent, you must decide whether or not you also want to remove the old Okta API token from your system. If you are performing an upgrade, you are not required to do so. To remove the API token, you must delete the Okta RSA SecurID Agent or On-Prem MFA Agent folder, and deactivate and remove your old RSA SecurID / On-Prem MFA app in Okta.</p>
      <div class="noteOkta">
         <p class="noteContent">To avoid downtime, you should have at least two agents running before you uninstall. See <a href="MFA_OnPrem-HA.htm">Configuring High Availability</a>.</p>
      </div>
      <ul>
         <li>
            <MadCap:xref href="#Uninstal">Uninstall the agent</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Reinstal">Reinstall the agent</MadCap:xref>
         </li>
      </ul>
      <div>
         <h2>
            <a name="Uninstal"/>Uninstall the agent</h2>
         <p>To uninstall your agent:</p>
         <ol>
            <li>On your Windows desktop, select <span class="menucascade">
                  <span class="uicontrol">Start</span>
                  <span class="uicontrol">Control Panel</span>
                  <span class="uicontrol">Programs</span>
                  <span class="uicontrol">Programs and Features</span>
               </span>.</li>
            <li>Select the appropriate agent, and then select <span class="uicontrol">Uninstall</span>.</li>
            <li>From your <span class="uicontrol">Administrator Dashboard</span>, select <span class="menucascade">
                  <span class="uicontrol">Security</span>
                  <span class="uicontrol">Multifactor</span>
                  <span class="uicontrol">RSA SecurID / On-Prem MFA</span>
               </span>.</li>
            <li>Click the <span class="uicontrol">Deactivate</span> button for the agent you want to deactivate and then click the <span class="uicontrol">Delete</span> button to remove it from your system.</li>
            <li>Uninstalling your On-Prem MFA agent leaves the agent configuration data on your hard drive. To remove the configuration data, navigate to <span class="code">&gt;\Program Files (x86)\Okta&gt;</span> and delete the Okta RSA SecurID Agent or On-Prem MFA folder. Deleting this folder removes the agent configuration data, API token, and all log files from your hard drive. The API token for the server is still valid in Okta so it is important to remove the configuration data. See <a href="API.htm#apiTokens">API Tokens</a> for more information.</li>
         </ol>
      </div>
      <div>
         <h2>
            <a name="Reinstal"/>Reinstall the agent</h2>
         <p>Installing the agent does not overwrite the configuration data in the On-Prem MFA Agent folders. If you want to reinstall and create a new API token, make sure you uninstall the On-Prem MFA Agent , (as described above) before you reinstall the agent. Then perform the following steps to reinstall your agent, then deactivate and remove the old one in Okta:</p>
         <ol>
            <li>Perform the procedure described in<span class="uicontrol"> Installing the On-Prem MFA Agent</span> as described in <MadCap:xref href="MFA_OnPrem-install-agent.htm">Install the Agent</MadCap:xref>.</li>
            <li MadCap:conditions="MultiProdPublish.Classic">From your <span class="uicontrol">Administrator Dashboard</span>, select <span class="menucascade">
                  <span class="uicontrol">Security </span>
                  <span class="uicontrol"> Multifactor</span>
               </span> and then select the <span class="menucascade">
                  <span class="uicontrol">RSA SecurID <span class="uicontrol">/</span>
                  </span>
                  <span class="uicontrol">On-Prem MFA</span>
               </span> tab. </li>
            <li MadCap:conditions="MultiProdPublish.OIE">From your <span class="uicontrol">Administrator Dashboard</span>, select <span class="menucascade">
                  <span class="uicontrol">Security </span>
                  <span class="uicontrol"> Authenticators</span>
               </span> and then click <span class="menucascade">
                  <span class="uicontrol">Actions</span>
                  <span class="uicontrol">Edit</span>
               </span> on either the <span class="uicontrol">RSA SecurID</span> or <span class="uicontrol">On-Prem MFA</span> authenticator. </li>
            <li>Under <span class="uicontrol">Agents</span>, there is a list of your agents. Confirm that your reinstalled agent is connected to Okta and appears in the list. You should always make sure to have at least one of the agents online.<p>If you are performing an upgrade or reinstallation and do not wish to revoke the Okta API token of the old agent, you are finished. Otherwise, proceed to the next step.</p>
            </li>
            <li>Under <span class="uicontrol">Agents</span>, click the <span class="uicontrol">Deactivate</span> button for the agent you want to deactivate, then test your system to ensure that it is working properly.</li>
            <li>Select <span class="menucascade">
                  <span class="uicontrol">Security</span>
                  <span class="uicontrol">API</span>
               </span>, and then click the trash can icon next to the appropriate agent token. See <a href="API.htm#apiTokens">API Tokens</a> for more information.</li>
            <li MadCap:conditions="MultiProdPublish.Classic">Select <span class="menucascade">
                  <span class="uicontrol">Security </span>
                  <span class="uicontrol"> Authentication</span>
               </span> and then select the <span class="uicontrol">RSA SecurID / On-Prem MFA</span> tab again.</li>
            <li MadCap:conditions="MultiProdPublish.Classic">Click the <span class="uicontrol">Delete</span> button to remove the agent from your system.</li>
            <li MadCap:conditions="MultiProdPublish.OIE">Select <span class="menucascade">
                  <span class="uicontrol">Security </span>
                  <span class="uicontrol"> Authenticators</span>
               </span>.</li>
            <li MadCap:conditions="MultiProdPublish.OIE"> For either the <span class="uicontrol">RSA SecurID / On-Prem MFA</span> authenticator select <span class="menucascade">
                  <span class="uicontrol">Actions</span>
                  <span class="uicontrol">Delete</span>
               </span>.</li>
         </ol>
      </div>
   </body>
</html>
