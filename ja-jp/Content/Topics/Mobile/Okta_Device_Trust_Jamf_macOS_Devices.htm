<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="ja-jp" xml:lang="ja-jp" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="NGram" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="デバイスの信頼" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta name="description" content="Jamf Proの管理対象のmacOSデバイスに対するOkta Device Trustで、管理対象外のコンピューターがアプリにアクセスするのを防ぐことができます。Device Registration Taskで個々のコンピューターを登録します。" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Jamf Proの管理対象macOSデバイスへのOkta Device Trustの適用 | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="戻る" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">メイン コンテンツにスキップ</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">アカウント</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">設定</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">ログアウト</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="ナビゲーション パネルの表示" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="ロゴ"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">アカウント</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">設定</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">ログアウト</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="検索フィールド" placeholder="検索" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">フィルタ:</span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="検索フィルタ" title="すべてのファイル" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">すべてのファイル</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="検索" role="button" tabindex="0"><span class="invisible-label">検索を送信</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://fulluat-okta.cs4.force.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://u7efr6th1i.execute-api.us-west-2.amazonaws.com/dev/token/?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPubish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar">
                                            <div class="dropdown" data-mc-conditions="MultiProdPubish.DocMenu">
                                                <button class="dropbtn">ドキュメント <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://help.okta.com/ja-jp/Content/Topics/ReleaseNotes/okta-relnotes.htm">リリース・ノート</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/ja-jp/Content/index.htm">製品ドキュメント</a>
                                                    </div>
                                                    <div><a href="https://developer.okta.com/documentation" target="_blank">開発者用ドキュメント<img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown"><a href="https://support.okta.com/help/s/knowledge">ナレッジ・ベース</a>
                                            </div>
                                            <div class="dropdown">
                                                <button class="dropbtn">コミュニティー <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://support.okta.com/help/s/questions?language=en_US">質問</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/group/CollaborationGroup/Recent?language=en_US">ディスカッション</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/events?language=en_US">ウェビナー</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown">
                                                <button class="dropbtn">製品 <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://support.okta.com/help/s/ideas" target="_blank">アイデア<img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/productroadmap?language=en_US">ロードマップ</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/product-hub?language=en_US">製品ハブ</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown"><a href="https://www.okta.com/services/education-services/" target="_blank">トレーニング<span><img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></span></a>
                                            </div>
                                        </div>
                                        <div class="logo_container"><a class="logo" href="https://support.okta.com/help/s/"><img src="../../Resources/Images/okta-assets/Logo.png" alt="Okta Support" title="Okta Support" /></a>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="パンくず" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie select-language-button" title="言語の変更">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="言語の変更">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie previous-topic-button" title="前へ移動" disabled="true">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="前へ移動">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie next-topic-button" title="次へ移動" disabled="true">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="次へ移動">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1>Jamf Proの管理対象macOSデバイスへのOkta Device Trustの適用</h1>
                                                    <div class="noteOkta">
                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="注" alt="注" />
                                                        <p class="noteHeading">注</p>
                                                        <p class="noteContent"> Okta Device Registration Task v1.3.1は、Python 3をサポートするためにリリースされたものです。Python 2.xのスクリプトが必要な場合は、<a href="https://okta.okta.com/static/devicetrust/MacOktaDeviceRegistrationTaskSetup.1.2.1.py">Device Registration Task v1.2.1</a>を参照してください。<br />この変更による展開への影響については、「<a href="#Prerequi" class="MCXref xref"> 前提条件 </a>」および「<a href="#PartE" class="MCXref xref">  ステップ3：Python 3とDevice Trustの依存関係をインストールする     </a>」を参照してください。</p>
                                                    </div>
                                                    <p>Jamf Proの管理対象macOSデバイスに対するOkta Device Trustでは、管理対象外のmacOSデバイスが企業のSAMLおよびWS-Fedクラウド・アプリにアクセスするのを防ぐことができます。Okta Device Trustにより、既知の保護されたデバイスしかOkta管理対象アプリケーションにアクセスできなくなります。</p>
                                                    <p>
                                                        <img src="../../Resources/Images/dt-macos-flow.png" />
                                                    </p>
                                                    <div style="line-height:150%;">
                                                        <br /> <hr width="100%" size="0" align="center" /></div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />前提条件</a> </span>
                                                        <div class="MCDropDownBody dropDownBody"> <a name="Prerequi"> </a><ul><li>このソリューションは以下で動作します。                 <ul><li>OktaでサポートされるバージョンのmacOSを実行しているAppleコンピューター。</li><li>Jamf Pro MDMソリューション</li><li>Oktaへのフェデレーション認証フローを実行する際に管理対象コンピューターのOktaキーチェーンにアクセスできる以下のブラウザーとネイティブ・アプリ： 						<ul><li>ブラウザー：ChromeおよびSafariブラウザー</li><li>モダン認証対応ネイティブ・アプリ： 					<ul><li>Box</li><li>Googleドライブ</li><li>Microsoft Office</li><li>Skype for Business</li><li>Slack</li></ul></li></ul></li><li> Okta Device Registration Taskは、さまざまなタスク（登録など）を実行するPythonスクリプトです。このスクリプトの適切なバージョンを使用するために、OSに応じて次のいずれかに従ってください。<ul><li> macOS 10.15.xx（Catalina）または11.xx（Big Sur）の場合は、Python 3ベースのバージョン1.3.1以降の登録スクリプトを使用してください。</li><li>macOS 10.14.xx（Mojave）で1.2.1以前の登録スクリプトを現在使用している場合は、そのまま使用するか、Python 3を使用する前にCatalinaまたはBig Surにアップグレードしてください。</li></ul></li><p>詳細については、「<a href="#PartE" class="MCXref xref">  ステップ3：Python 3とDevice Trustの依存関係をインストールする     </a>」を参照してください。</p></ul></li></ul></div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br /> <hr width="100%" size="0" align="center" /></div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />開始する前に</a> </span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <ul>
                                                                <li><b>Microsoft Officeアプリの保護にはモダン認証が必要</b>：このDevice TrustソリューションでMicrosoft Officeアプリを保護するには、モダン認証のサポートを有効にする必要があります。詳細については、Microsoftの<a href="https://docs.microsoft.com/en-us/office365/enterprise/modern-auth-for-office-2013-and-2016?redirectSourcePath=%252fen-us%252farticle%252fusing-office-365-modern-authentication-with-office-clients-776c0036-66fd-41cb-8928-5495c0f9168a" rel="noreferrer" target="_blank">こちら</a>の記事を参照してください。レガシー・プロトコルを使用するOffice 365クライアントの保護については、「<a href="../Security/O365_Client-Access-Policies.htm" rel="noreferrer" target="_blank">Office 365クライアント・アクセス・ポリシー</a>」を参照してください。</li>
                                                                <li>
                                                                    <p><b>Microsoft Officeシック・クライアントの一部のバージョンではDevice Trustがサポートされない</b>：このDevice Trustソリューションは、Microsoft Officeシック・クライアント・バージョン16.13.1および16.15で動作することがテストされています。ただし、Microsoft Officeシック・クライアント・バージョン16.14（ビルド180610）では動作しません。 </p>
                                                                </li>
                                                                <li><b>iCloudによる他のAppleデバイスへのOktaキーチェーンの転送を防止</b>：iCloudによってDevice Trustで保護されたmacOSデバイスから他のAppleデバイスにOktaキーチェーンが転送されないように、<b>[iCloudキーチェーンの同期を許可]</b>を無効にする構成プロファイルをJamf Proで作成することを強く推奨します（<b>注</b>：同期を無効にするとすべてのキーチェーンの転送がブロックされることに注意してください）。「<a href="#disable-keychain-syncing">変更したOkta Device Registration TaskをJamf Proに追加してmacOSデバイスに配布する</a>」を参照してください。</li>
                                                                <li>
                                                                    <p><b>Webビューはデバイス・キーチェーンへのアクセス権が必要</b>：管理対象macOSコンピューター用のDevice Trustは、Webビューによる認証をサポートするSAML/WS-Fed対応アプリで動作します。認証が実行されるWebビューは、Oktaキーチェーンにアクセスできる必要があります。認証フローで証明書を使用する際にエンド・ユーザーに同意を求めないように、Oktaでは次のアプリを許可しています。  「<a href="#PartG">デフォルトの許可リストの変更</a>」を参照してください。</p>
                                                                    <ul>
                                                                        <li>Box</li>
                                                                        <li>Chrome</li>
                                                                        <li>Safari</li>
                                                                        <li>Microsoft Office</li>
                                                                        <li>Skype for Business</li>
                                                                        <li>Googleドライブ</li>
                                                                        <li>Slack</li>
                                                                    </ul>
                                                                </li>
                                                                <li><b>デバイスごとのバインドされていない証明書の制限</b>： 証明書は、ユーザーがDevice Trustで保護されたmacOSデバイスからDevice Trustで保護されたアプリケーションに初めてアクセスしたときに、そのユーザーにバインドされます。証明書は使用するまではバインドされません。Oktaでは、登録手順を実行するたびに1つずつ、バインドされていない証明書を最大5つまでデバイスに発行できます。セキュリティー上の理由から、Oktaでは、バインドされていない証明書を各デバイスに5つまでしか発行しません。バインドされていない証明書の制限に達しないようにするには、登録を通じて追加の証明書の取得を試みる前に、ユーザーがデバイス上のバインドされていない証明書をすでに使用していることを確認してください。登録の上限に達すると、Syslogに登録エラーが表示され、JAMFログに「<b>デバイスの証明書が登録上限の5件に達しました</b>」というエラー・メッセージが表示されます。</li>
                                                                <li><b>組織ごとの登録の制限</b>：macOSデバイスは、それぞれ単一のOkta組織のDevice Trust構成でのみ保護できます。言い換えると、macOSデバイスを複数のOkta組織のDevice Trust構成で同時に保護することはできません。これは、デバイスに発行されたクライアント証明書が特定の組織のCAによって署名されているためです。この制限はOktaのプレビュー組織と本番組織に適用されます。</li>
                                                                <li><b>共有端末のシナリオはサポート対象外</b>：このDevice Trustソリューションは、Oktaの複数のエンド・ユーザーが同じmacOSワークステーションから同じアカウントにログインする共有端末のシナリオをサポートしていません。</li>
                                                                <li><b>Oktaが読み取り専用モードの場合、デバイストラストの登録はサポートされ</b>ません：Okta組織が存在するセルが存在する場合、デバイスをデバイストラストに登録することはできません。 <a href="#" class="MCTextPopup popup popupHead">読み取り専用モード<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>ほとんどの管理操作が無効になり、バナーが管理者（エンドユーザーではない）ダッシュボードに表示されるモード。読み取り専用モードの間はインポート、OMM登録、OMMプロビジョニング解除、JITプロビジョニングなどのすべてのバックグラウンド・ジョブがキューに入れられ、いずれも読み取り専用モードが無効になると再開されます。のときは、Device Trustにデバイスを登録できません。</span></a>.</li>
                                                                <li><b>エンド・ユーザーの環境でブラウザーのキャッシュの消去が必要な場合がある</b>：一部のブラウザー（Chromeなど）では、Device Trust証明書がキャッシュされます。それらのブラウザーでは、証明書が自動的に更新された後（1年に1回）、新しい証明書ではなく期限切れの証明書をOktaに提示し続ける場合があります。この場合、エンド・ユーザーに<b>セキュリティー要件</b>のメッセージが表示され、Device Trustで保護されたアプリへのアクセスが拒否されます。Oktaでは、ブラウザー・ウィンドウを閉じるだけでなく、いったんブラウザーを終了してから再起動することでブラウザーのキャッシュを消去するように該当するエンド・ユーザーに勧めることを推奨します。</li>
                                                                <li>
                                                                    <p><span style="font-weight: normal;">Device Trust</span>によって保護されたアプリは、<span style="font-weight: normal;">Okta End-User Dashboardに</span>ロック済みとして表示されます。以下の条件に該当する場合、Device Trustによって保護されたアプリの横にロック・アイコンが表示されます。</p>
                                                                    <ul>
                                                                        <li> エンド・ユーザーがデスクトップまたはモバイルのブラウザー（Okta Mobile以外）でダッシュボードにアクセスした。 </li>
                                                                        <li>組織でDevice Trustが有効になっている。</li>
                                                                        <li>デバイスが信頼されていない。</li>
                                                                        <li>エンド・ユーザーがダッシュボードからDevice Trustで保護されたアプリにアクセスしようとした。 </li>
                                                                    </ul>
                                                                </li>
                                                                <li>
                                                                    <p><b>アプリでモダン認証のサポートが必要</b>：このDevice TrustソリューションでMicrosoft Officeアプリを保護するには、モダン認証のサポートを有効にする必要があります。詳細については、Microsoftの記事「<a href="https://docs.microsoft.com/en-us/office365/enterprise/modern-auth-for-office-2013-and-2016" target="_blank">How modern authentication works for Office 2013 and Office 2016 client apps</a>」を参照してください。「<a href="../Security/O365_Client-Access-Policies.htm">Office 365クライアント・アクセス・ポリシー</a>」も参照してください。</p>
                                                                </li>
                                                                <li>
                                                                    <p>このDevice Trustソリューションの対象となるデバイスのキーチェーンに証明書がインストールされていることを確認してください。証明書がインストールされておらず、アプリのサインオン・ポリシーで[信頼済み]設定が有効な場合、ユーザーはアプリへのアクセスが拒否され、管理者に連絡するように促すセキュリティー・メッセージにリダイレクトされます（詳細情報への<b>[詳細]</b>リンクを含むようにメッセージを設定することができます。「<a href="#learn-more-link">ステップ1：組織のグローバルなDevice Trust設定を有効化</a>」を参照してください）。 </p>
                                                                </li>
                                                                <li>
                                                                    <p><b>macOS Device Trustの設定を無効にする場合の注意事項</b>：信頼されたmacOSデバイスを許可するアプリ・サインオン・ポリシーも構成している場合は、<b>[セキュリティー] &gt; [Device Trust]</b>ページでmacOS Device Trustの設定を無効にしないでください。無効にした場合、Device Trustの構成が一貫性のない状態になります。組織のDevice Trustを無効にするには、まずDevice Trustの設定を含むアプリ・サインオン・ポリシーを削除してから、<b>[セキュリティー] &gt; [Device Trust]</b>でmacOS Device Trustを無効にします。 </p>
                                                                </li>
                                                                <li> <b>Oktaサポートに</b><span style="font-weight: bold;">Device Trustの無効化を依頼する前に</span>：Oktaサポートに組織のDevice Trust機能の無効化を依頼する場合は、その前にアプリのサインオン・ポリシー・ルールでDevice Trustの設定を<b>[任意]</b>に変更してください（<b>[アプリケーション] &gt; アプリ &gt; [サインオン]</b>）。この変更を行わず、後でOktaサポートに組織のDevice Trust機能の再有効化を依頼した場合、アプリのサインオン・ポリシー・ルールのDevice Trust設定がすぐに有効になるという予期しない動作が発生します。 </li>
                                                                <li><b>クライアントがMTLSハンドシェイクを完了できることを確認</b>：このDevice Trustフローにおける相互TLS証明書交換（ハンドシェイク）は、Okta組織のURLとは別のOktaのURLで行われます（次の例ではワイルドカード文字（*）で示されています）。エンドポイント保護ソフトウェアを実装している場合、Oktaとの証明書の交換をブロックしないように構成してください。たとえば、組織で送信トラフィックの制限に許可リストを使用している場合、次のURLをワイルドカード文字（*）も含めて正確に許可リストに追加してください。  					<p id="code">*.okta.com</p><p id="code">*.okta-emea.com</p></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br /> <hr width="100%" size="0" align="center" /></div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a style="font-size: 14pt; font-weight: normal;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />手順</a> </span>
                                                        <div class="MCDropDownBody dropDownBody"> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><div style="line-height:150%;"><br /></div><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;">ステップ1：組織のグローバルなDevice Trust設定を有効にする</span> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="PartA"> </a><ol><li value="1">管理コンソールで、<b>[セキュリティー]</b> &gt; に移動します <span style="font-weight: bold;">[Device Trust]</span></li><li value="2">[macOS Device Trust]セクションで、<b>[編集]</b>をクリックします。</li><li value="3">ウィザードが起動したら、<b>[macOS Device Trustを有効化]</b>を選択します。</li><li value="4"><a name="learn-more-link"> </a>任意：<b>[詳細]</b>フィールドに、信頼できないデバイスを使用しているエンド・ユーザーが詳細情報を参照できる、外部からアクセス可能なリダイレクトURLを入力できます。これらのエンド・ユーザーに表示されるセキュリティー・メッセージには、指定したURLにリダイレクトされる[詳細]リンクが含まれます。 <p><img src="../../Resources/Images/DT_Security_URLspecified_2.png" /></p><p>このオプション・フィールドでURLを指定しないことを選択した場合、これらのエンド・ユーザーには同じメッセージが表示されますが、<b>[詳細]</b>リンクは表示されません。 </p><p><img src="../../Resources/Images/DT_Security_noURLspecified_2.png" /></p></li><li value="5"><b>[信頼の確立元]</b>で、<b>[Jamf Pro]</b>を選択します。</li><li value="6">Jamf ProのテナントのURL（例：<span class="code">https://example.jamfcloud.com</span>、APIのURLではない）、認証情報、キーなど、Jamf ProのAPIに関する情報を入力します。 <p>この情報により、Oktaでの証明書の登録時にエンド・ユーザーのデバイスがJamf Proで管理されていることを確認できます。Jamf Proの場合、デバイスが管理されていることをOktaで確認するために、JamfのAPIにアクセスするための次の読み取り権限が少なくとも必要になります。</p><ul><li><b>コンピューター</b>：読み取り </li><li><b>Jamf Proユーザー・アカウント &amp; グループ</b> ：読み取り </li><li><b>ユーザー</b>：読み取り </li></ul></li><p><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="重要な注意事項" alt="重要な注意事項" /><p class="noteHeading">重要</p><p class="noteContent">Oktaでは、Jamf Proの管理インターフェイスへのアクセスに組織で使用するユーザーとは別に、APIアクセス用に別個のユーザーを作成することを強くお勧めします。</p></div></p><li value="7"><b>[API認証情報をテスト]</b>をクリックします。 MDMプロバイダーのAPIとの接続が確立されると、成功メッセージが表示されます。     </li><li value="8"><b>[次へ]</b>をクリックします。</li><li value="9">[MDMプロバイダーを構成]画面で、<b>[ダウンロード]</b>をクリックしてPythonスクリプトを入手します。 このスクリプトを「<b><a href="#PartB">ステップ2：Okta Device Registration Taskを変更する</a></b>」で変更します。</li><li value="10"><b><span class="disableGlossary">[秘密鍵</span>の値]</b>と<b>[企業/組織のURL]</b>に表示された値をクリップボードにコピーするには、フィールドの横にあるコピー・アイコン<img src="../../Resources/Images/DT-copy-to-clipboard.png" />をクリックします。 </li><p><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="重要な注意事項" alt="重要な注意事項" /><p class="noteHeading">重要</p><p class="noteContent"><b><span class="disableGlossary">[秘密鍵</span>の値]</b>と<b>[企業/組織のURL]</b>の値がOktaに表示されるのは今回だけなので、メモしておいてください。また、後で構成を編集する場合、<b>[macOSの <span class="disableGlossary">秘密鍵をリセット]</span></b>ボタンを使用して新しい<span class="disableGlossary">秘密鍵</span>を生成するときは、この手順をもう一度実行する必要があります。</p></div></p><li value="11"><b>[完了]</b>をクリックします。</li><li value="12"><b><a href="#PartB">ステップ2</a></b>の説明に従って、ダウンロードしたOkta Device Registration Taskを変更します。 <p>Okta Device Registration Taskの最新バージョンは、Okta管理コンソールの<b>[設定] &gt; [ダウンロード]</b>ページから入手できます。</p></li></ol></div></div><div style="line-height:120%;"><br /></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;">ステップ2：Okta Device Registration Taskを変更する<br /></span> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="PartB"> </a><div style="line-height:115%;"><br /></div><div style="line-height:90%;"><br /></div><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="重要な注意事項" alt="重要な注意事項" /><p class="noteHeading">重要<a name="MTLS-handshake"></a></p><p class="noteContent">このDevice Trustフローにおける相互TLS証明書交換（ハンドシェイク）は、Okta組織のURLとは別のOktaのURLで行われます（次の例ではワイルドカード文字（*）で示されています）。エンドポイント保護ソフトウェアを実装している場合、Oktaとの証明書の交換をブロックしないように構成してください。たとえば、組織で送信トラフィックの制限に許可リストを使用している場合、次のURLをワイルドカード文字（*）も含めて正確に許可リストに追加してください。</p><p id="code">*.okta.com 							</p><p id="code">*.okta-emea.com 							</p></div><p style="line-height: 110%;"><br /></p><ol><li value="1">管理者のコンピューターで、<b>ダウンロード</b>・フォルダーに移動し、Oktaからダウンロードしたスクリプトを開きます。</li><li value="2">「<a href="#PartA">ステップ1：組織のグローバルなDevice Trust設定を有効にする</a>」で生成した<b><span class="disableGlossary">[秘密鍵</span>の値]</b>と<b>[企業/組織のURL]</b>の値を貼り付けてスクリプトを変更します。 </li><p>キーとURLを入力する際は、以下の例に示すように、単一引用符（'）は残し、括弧とプレースホルダー・テキストを<b><span class="disableGlossary">[秘密鍵</span>の値]</b>と<b>[企業/組織のURL]</b>の実際の値に置き換えます。</p><br /><h4>たとえば、変更前のスクリプトは次のとおりです。</h4><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-key-url-before.png"><img class="MCPopupThumbnail img" data-mc-width="523" data-mc-height="81" src="../../Resources/Images/dt-macos-key-url-before_thumb_0_88.png" style="mc-thumbnail-max-height: 88px;mc-thumbnail: popup;width: 522px;height: 80px;" tabindex="" /></a><p></p><h4>変更後のスクリプトは次のようになります。単一引用符は残しますが、括弧は残しません。</h4><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-key-url-after.png"><img class="MCPopupThumbnail img" data-mc-width="522" data-mc-height="79" src="../../Resources/Images/dt-macos-key-url-after_thumb_0_88.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 88px;" tabindex="" /></a><li value="3">任意：デフォルトのアプリ許可リストを変更します。</li><p>Okta Device Registration Taskでは、エンド・ユーザーがアクセスする際にキーチェーンのパスワードの入力を求められないように、<a href="#" class="MCTextPopup popup popupHead">よく利用される一部のアプリ<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>Microsoft Office 365、Box、Googleドライブ、Skype for Business、Slack</span></a>をデフォルトで許可しています。デフォルトの許可リストを変更する場合は、「<a href="#PartG">アプリの許可リストの変更</a>」を参照してください。</p><li value="4">スクリプトを保存します。 </li><li value="5">「<a href="#PartC">ステップ4：変更したOkta Device Registration TaskをJamf Proに追加してmacOSデバイスに配布する</a>」に進みます。</li></ol><hr width="100%" size="0" align="center" /> <br /> </div></div><div style="line-height:120%;"><br /></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;">ステップ3：Python 3とDevice Trustの依存関係をインストールする</span> </a> <MadCap:dropDownHotspot> <br /> </MadCap:dropDownHotspot> </span><div class="MCDropDownBody dropDownBody"> <a name="PartE"> </a><p>Python 3がすでにインストールされている場合は、手順2に進みます。</p><ol><li value="1"><p>Python 3をインストールする方法は複数あります。ここでは、macOSのXcodeコマンド・ライン・ツールを使用したインストール手順を示します。各自でやりやすい方法を使用してください。<br /></p><p>任意：macOSマシンで次のスクリプトを実行して、macOS環境をPython 3に更新します。 								</p><p id="code">#!/bin/sh</p><p id="code">echo "Checking for the existence of the Apple Command Line Developer Tools"</p><p id="code">/usr/bin/xcode-select -p &amp;&gt; /dev/null</p><p id="code">if [[ $? -ne 0 ]]; then</p><p id="code">echo "Apple Command Line Developer Tools not found."</p><p id="code">touch /tmp/.com.apple.dt.CommandLineTools.installondemand.in-progress;</p><p id="code">installationPKG=$(/usr/sbin/softwareupdate --list | /usr/bin/grep -B 1 -E 'Command Line Tools' | /usr/bin/tail -2 | /usr/bin/awk -F'*' '/^ *\\*/ {print $2}' | /usr/bin/sed -e 's/^ *Label: //' -e 's/^ *//' | /usr/bin/tr -d '\n')</p><p id="code">echo "Installing ${installationPKG}"</p><p id="code">/usr/sbin/softwareupdate --install "${installationPKG}" --verbose</p><p id="code">else</p><p id="code">echo "Apple Command Line Developer Tools are already installed."</p><p id="code">fi</p><p id="code">exit</p></li></ol><ol data-mc-continue="true"><li value="2"><p>Device Trustの依存関係をインストールします。更新されたmacOSのDevice Registration Taskでは、デバイスの「python3」と「pip3」のエイリアスでPython 3の正しいインストールをポイントする必要があります。</p><p>次のスクリプトを実行して、必要なDevice Trustの依存関係をインストールします。</p><p id="code">#!/bin/sh</p><p id="code">echo "Running pip3 install --upgrade pip"</p><p id="code">sudo pip3 install --upgrade pip</p><p id="code">echo "Running pip3 install pyobjc-framework-SystemConfiguration"</p><p id="code">sudo pip3 install pyobjc-framework-SystemConfiguration</p><p id="code">exit</p></li></ol></div></div><div style="line-height:120%;"><br /></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;">ステップ4：変更したOkta Device Registration TaskをJamf Proに追加してmacOSデバイスに配布する</span> <br /> </a> </span><div class="MCDropDownBody dropDownBody"><div style="line-height:150%;"><a name="PartC"> </a> <br /></div><p>Okta Device Registration Taskは、このDevice Trustソリューションの対象となるmacOSデバイスにJamf Proを通じて配布されるスクリプトです。デバイスに展開されると、Okta Device Registration Taskは以下を実行します。</p><ul><li><p>Oktaに登録してDevice Trust証明書を取得します。OktaはJamf Proを使用してデバイスが管理されていることを確認します。</p></li><li><p>ChromeおよびSafariブラウザを構成し、 <a href="#" class="MCTextPopup popup popupHead">テスト済みのネイティブアプリ<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>これらの最新のAuth対応ネイティブアプリ：Microsoft Office 365、Box、Googleドライブ、Skype for Business、Slack</span></a> 安全なアプリアクセス中に証明書を自動的に提示するためにデバイス上で。</p><li><p>1日1回、ユーザーがコンピューターにログインするたびに実行される簡単なタスクをスケジュールします。このタスクでDeviceTrust証明書の有効期限が切れていないかどうかを確認し、期限切れの30日前に証明書の更新を試みます。証明書の有効期限は1年間です。</p></li></li><li>更新時は、登録時と同様のチェックがOktaで実行されます。たとえば、新しい証明書を発行する前にデバイスが管理されているかどうかが確認されます。 </li><li>スクリプトは、デバイスで1回実行されると、Jamf Proによってデバイスから自動的に削除されます。</li><li>以下のクエリを使用して、デバイスにインストールされているレジストレーションタスクのバージョンを確認することができます。<p /><p id="code">python3 ~/Library/Okta/okta_device_trust.py version</p></li><p /><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-flow.png"><img class="MCPopupThumbnail img" data-mc-width="1256" data-mc-height="817" src="../../Resources/Images/dt-macos-flow_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" id="imgimg_new" /></a></p></ul><div></div><p>それぞれの組織に応じた適切なワークフローを作成してください。Okta証明書を登録するスクリプトが少なくとも1回は正常に実行されることを確認してください。</p><ol><li value="1">Jamf Proで、歯車アイコン<img src="../../Resources/Images/DT-macOS-gear-icon.png" />をクリックして<b>[すべての設定]</b>に移動します。</li><li value="2"><b>[コンピューターの管理] &gt;  [スクリプト]</b>に移動します。</li><li value="3">新しいスクリプトを作成し、「<a href="#PartA">ステップ1：組織のグローバルなDevice Trust設定を有効にする</a>」でOktaからダウンロードして「<a href="#PartA">ステップ2：Okta Device Registration Taskを変更する</a>」で変更したOkta Device Registration Taskを貼り付けます。</li><li value="4"><b>[保存]</b>をクリックします。</li><li value="5">1つ以上の対象コンピューター/対象ユーザーにスクリプトを展開するポリシーを作成します。</li><ol style="list-style-type: lower-alpha;"><li value="1"><b>[コンピューター] &gt; [ポリシー]</b>に移動します。</li><li value="2"><b>[+ 新規]</b>をクリックします。</li><li value="3">左側のペインの<b>[一般]</b>をクリックします。</li><li value="4">[表示名]フィールドにポリシーの名前を入力します。</li><li value="5"> ポリシーを開始する以下のトリガー・イベントを選択します。 								<ul><li><b>登録完了時</b>：デバイスが登録プロセスを完了した直後にスクリプトが実行されます。</li><li><b>チェックイン時</b>：<b>Jamf Pro</b>で構成された間隔でチェックインが実行されたときにスクリプトが実行されます。</li></ul></li><li value="6"><b>[実行頻度]</b>を<b>[ユーザーごとに各コンピューターで1回]</b>に設定します。 <p><b>注：</b> スクリプトの展開をトリガーするためにJamf Proで実装できるアプローチはほかにもあります（たとえば、拡張属性を使用すると、デバイスに有効な証明書があるかどうかを検証して証明書がない場合に展開できます）。</p></li><li value="7"><b>[保存]</b>をクリックします。</li><li value="8">左側のペインの<b>[スクリプト]</b>をクリックし、<b>[構成]</b>をクリックします。</li><li value="9">手順3でこのポリシー用に作成したスクリプトを探し、<b>[追加]</b>をクリックします。</li><li value="10"><b>[スコープ]</b>をクリックします。</li><li value="11"><b>[対象コンピューター]</b>/<b>[対象ユーザー]</b>で、ポリシーを適用するコンピューターおよびユーザーを指定します。</li><li value="12"><b>[保存]</b>をクリックします。</li></ol><li value="6"> <a name="disable-keychain-syncing"></a>推奨：iCloudによってDevice Trustで保護されたmacOSデバイスから他のAppleデバイスにOktaキーチェーンが転送されないように、<b>[iCloudキーチェーンの同期を許可]</b>を無効にする構成プロファイルをJamf Proで作成することをお勧めします。 <p><img src="../../Resources/Images/disable-iCloud-keychaing-sync.png" /></p></li><li value="7">Jamf Proのログを確認して、Okta Device Registration Taskが正常に実行されたことを確認します。 <ol style="list-style-type: lower-alpha;"><li value="1"><b>[ポリシー]</b>に移動し、ポリシーをクリックします。 </li><li value="2">画面下部の<b>[ログ]</b>をクリックします。</li></ol></li><li value="8">「<a href="#PartD">ステップ5：Oktaでアプリのサインオン・ポリシー・ルールを構成する</a>」に進みます。 </li></ol><hr width="100%" size="0" align="center" /> </div></div><div style="line-height:120%;"><br /></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;">ステップ5：</span><span style="font-size: 14pt;"> Oktaでアプリのサインオン・ポリシー・ルールを構成する</span> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="PartD"> </a> <h3>挙動とアプリのサインオン・ポリシー</h3><p>［App Sign On Rule（アプリサインオンルール）］ ダイアログボックス内のすべてのクライアントオプションはデフォルトで事前選択されています。アプリへのアクセスをより細かく構成するには、以下を反映したルールを作成します。</p><ul><li>ユーザーが誰であるか、または所属しているグループ</li><li>ネットワークに接続されているかいないか、または定義されたネットワークゾーン内か</li><li>デバイスで稼働しているクライアントのタイプ（Office 365アプリのみ）</li><li>対象者のモバイルまたはデスクトップ・デバイスのプラットフォーム</li><li>デバイスが信頼されているか</li></ul> <div><h4>サインオン・ポリシー・ルールへの許可リストによるアプローチ</h4><ul><ol><li value="1">アプリへのアクセスを許可するシナリオをサポートする1つ以上の許容ルールを作成し、それらのルールに最高の優先度を割り当てます。 </li><li value="2">ステップ1で作成した許容シナリオに一致しないユーザーに適用される、拒否キャッチオール・ルールを作成します。拒否キャッチオール・ルールには、Oktaのデフォルト・ルールの1つ上の最も低い優先度を割り当てます。 <b><a href="#" class="MCTextPopup popup popupHead">デフォルト・ルール<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>デフォルトのルールはすでに作成されており、編集できません。デフォルト・ルールは、あらゆるデバイス、プラットフォーム、ネットワークの場所からすべてのクライアント・タイプにアクセスできるように設計されています。これは、より優先度が高く、より制限の厳しいルールに一致しないユーザーに適用されます。 </span></a></b>. ここで説明する許可リストのアプローチでは、デフォルト・ルールは、拒否キャッチオール・ルールによって事実上無効化されるため、到達することはありません。</li></ol><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Note" alt="Note" /><p class="noteContent">アプリのサインオン・ポリシー・ルールの作成に関する重要なセキュリティー情報については、を参照してください。 <a href="../Security/policies/about-app-signon-policies.htm" class="MCXref xref">アプリ・サインオン・ポリシーについて</a>.</p></div></ul></div> <hr width="100%" size="0" align="center" /><h3><a name="Procedur"></a>手順</h3><ol><li value="1">管理コンソールで、<b>[アプリケーション]</b> &gt; に移動します。<![CDATA[  ]]><b>[アプリケーション]</b>、Device Trustで保護するSAMLまたはWS対応アプリをクリックします。</li><li value="2"><b>[サインオン]</b>タブをクリックし、<b>[サインオン・ポリシー]</b>まで下にスクロールして、<b>[ルールを追加]</b>をクリックします。</li><li value="3">次の例をガイドとして使用して、1つ以上のルールを構成します。 </li></ol><p> </p><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="情報" alt="情報" /><p class="noteHeading">注</p><p class="noteContent">この例は、Office 365へのアクセスを管理するためのDevice Trustルールを示しています。その他のアプリの場合、セクション<b>[ユーザーのクライアントが次のいずれかに該当する場合]</b>が存在しないことに注意してください。</p></div><p></p><h3>許可リストの例 </h3><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <MadCap:dropDownHotspot>ルール例1：Exchange ActiveSync、すべてのプラットフォーム、任意の信頼、アクセスを許可 </MadCap:dropDownHotspot> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="WL-Rule1"> </a><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-1.png"><img class="MCPopupThumbnail img" data-mc-width="608" data-mc-height="958" src="../../Resources/Images/dt-macOS-rules-2-1_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a></p><ol><li value="1">ルールにわかりやすい名前を入力します。</li></ol><p><b>条件</b></p><ol data-mc-continue="true"><li value="2"><b>[ユーザー]</b>の下で、ルールを個人のみに適用するか、個人とグループに適用するかを指定します。選択する[ユーザー]オプションは、この例で作成するすべてのルールで同じにする必要があります。</li><li value="3"><b>[場所]</b>の下で、ルールを適用するユーザーのロケーションを指定します。選択する[場所]オプションは、この例で作成するすべてのルールで同じにする必要があります。</li><li value="4">クライアント設定を構成します。</li><p>タイプ： 									</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[Webブラウザーまたはモダン認証クライアント]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Exchange ActiveSyncクライアント]</b>：選択しません。</p><p style="font-weight: normal;">モバイル： 									</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[iOS]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Android]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[その他のモバイル]</b>：選択します。</p><p>デスクトップ： </p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Windows]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[macOS]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[その他のデスクトップ]</b>：選択します。</p><li value="5"><b>[Device Trust]</b>を構成します。</li><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /><b><i>ヒント</i>：</b><span style="color: #0000ff;"><span style="color: #000000;">[信頼できる]</span>と<span style="color: #000000;">[信頼できない]</span>オプションを選択可能にするには：</span></a></span><div class="MCDropDownBody dropDownBody"><div><p><b>[Device Trust]</b>セクションの<b>[信頼できる]</b>および<b>[信頼できない]</b>オプションは、[クライアント]セクションで以下のすべてのオプションが選択されていない場合のみ選択できます。</p><ul><li>Exchange ActiveSyncまたはレガシー認証クライアント</li><li>その他のモバイル（BlackBerryなど）</li><li>その他のデスクトップ（Linuxなど）</li></ul></div></div></div><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[任意]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼済み]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼できない]</b>：選択しません。</p></ol><p><b>アクション</b></p><ol data-mc-continue="true"><li value="6"><b>[アクセス]</b>を構成します。</li><p><b>[許可]</b>を選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[要素を求める]</b>：選択しません。</p><li value="7"><b>[保存]</b>をクリックします。</li><li value="8"><b>ルール2</b>を作成します。</li></ol></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <MadCap:dropDownHotspot>ルール例2：Webブラウザーまたはモダン認証、macOS、信頼できる、アクセスを許可 </MadCap:dropDownHotspot> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="WL-Rule2"> </a><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-2.png"><img class="MCPopupThumbnail img" data-mc-width="603" data-mc-height="730" src="../../Resources/Images/dt-macOS-rules-2-2_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a></p><ol><li value="1">ルールにわかりやすい名前を入力します。</li></ol><p><b>条件</b></p><ol data-mc-continue="true"><li value="2"><b>[ユーザー]</b>の下で、<a href="#WL-Rule1">ルール1</a>で選択したものと同じ[ユーザー]オプションを選択します。この例のすべてのルールで[ユーザー]オプションは同じにする必要があります。</li><li value="3"><b>[場所]</b>の下で、<a href="#WL-Rule1">ルール1</a>で選択したものと同じ[場所]オプションを選択します。この例のすべてのルールで[場所]オプションは同じにする必要があります。</li><li value="4">クライアント設定を構成します。</li><p>タイプ： 									</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Webブラウザーまたはモダン認証クライアント]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[Exchange ActiveSyncクライアント]</b>：選択しません。</p><p style="font-weight: normal;">モバイル： 									</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[iOS]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[Android]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[その他のモバイル]</b>：選択しません。</p><p>デスクトップ： </p><p><span style="font-family: 'Wingdings'">¨</span> <b>[Windows]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[macOS]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[その他のデスクトップ]</b>：選択しません。</p><li value="5"><b>[Device Trust]</b>を構成します。</li><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /><b><i>ヒント</i>：</b><span style="color: #0000ff;"><span style="color: #000000;">[信頼できる]</span>と<span style="color: #000000;">[信頼できない]</span>オプションを選択可能にするには：</span></a></span><div class="MCDropDownBody dropDownBody"><div><p><b>[Device Trust]</b>セクションの<b>[信頼できる]</b>および<b>[信頼できない]</b>オプションは、[クライアント]セクションで以下のすべてのオプションが選択されていない場合のみ選択できます。</p><ul><li>Exchange ActiveSyncまたはレガシー認証クライアント</li><li>その他のモバイル（BlackBerryなど）</li><li>その他のデスクトップ（Linuxなど）</li></ul></div></div></div><p><span style="font-family: 'Wingdings'">¨</span> <b>[任意]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[信頼済み]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼できない]</b>：選択しません。</p></ol><p><b>アクション</b></p><ol data-mc-continue="true"><li value="6"><b>[アクセス]</b>を構成します。</li><p><b>[許可]</b>を選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[要素を求める]</b>：選択しません。</p><li value="7"><b>[保存]</b>をクリックします。</li><li value="8"><b>ルール3</b>を作成します。</li></ol></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <MadCap:dropDownHotspot>ルール例3：Webブラウザーまたはモダン認証、macOSを除くすべてのプラットフォーム、任意の信頼、アクセスを許可+MFA</MadCap:dropDownHotspot> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="WL-Rule3"> </a><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-3.png"><img class="MCPopupThumbnail img" data-mc-width="610" data-mc-height="1110" src="../../Resources/Images/dt-macOS-rules-2-3_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a></p><ol><li value="1">ルールにわかりやすい名前を入力します。</li></ol><p><b>条件</b></p><ol data-mc-continue="true"><li value="2"><b>[ユーザー]</b>の下で、<a href="#WL-Rule1">ルール1</a>で選択したものと同じ[ユーザー]オプションを選択します。選択する[ユーザー]オプションは、この例で作成するすべてのルールで同じにする必要があります。</li><li value="3"><b>[場所]</b>の下で、<a href="#WL-Rule1">ルール1</a>で選択したものと同じ[場所]オプションを選択します。選択する[場所]オプションは、この例で作成するすべてのルールで同じにする必要があります。</li><li value="4">クライアント設定を構成します。</li><p>タイプ： 									</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Webブラウザーまたはモダン認証クライアント]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[Exchange ActiveSyncクライアント]</b>：選択しません。</p><p style="font-weight: normal;">モバイル： 									</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[iOS]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Android]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[その他のモバイル]</b>：選択します。</p><p>デスクトップ： </p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Windows]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[macOS]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[その他のデスクトップ]</b>：選択します。</p><li value="5"><b>[Device Trust]</b>を構成します。</li><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /><b><i>ヒント</i>：</b><span style="color: #0000ff;"><span style="color: #000000;">[信頼できる]</span>と<span style="color: #000000;">[信頼できない]</span>オプションを選択可能にするには：</span></a></span><div class="MCDropDownBody dropDownBody"><div><p><b>[Device Trust]</b>セクションの<b>[信頼できる]</b>および<b>[信頼できない]</b>オプションは、[クライアント]セクションで以下のすべてのオプションが選択されていない場合のみ選択できます。</p><ul><li>Exchange ActiveSyncまたはレガシー認証クライアント</li><li>その他のモバイル（BlackBerryなど）</li><li>その他のデスクトップ（Linuxなど）</li></ul></div></div></div><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[任意]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼済み]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼できない]</b>：選択しません。</p></ol><p><b>アクション</b></p><ol data-mc-continue="true"><li value="6"><b>[アクセス]</b>を構成します。</li><p><b>[許可]</b>を選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[要素を求める]</b>：選択します。</p><li value="7"><b>[保存]</b>をクリックします。</li><li value="8"><b>ルール4</b>を作成します。</li></ol></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <MadCap:dropDownHotspot>ルール例4：任意のクライアント・タイプ、すべてのプラットフォーム、任意の信頼、アクセスを拒否</MadCap:dropDownHotspot> </a> </span><div class="MCDropDownBody dropDownBody"> <a name="WL-Rule4"> </a><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-4.png"><img class="MCPopupThumbnail img" data-mc-width="611" data-mc-height="842" src="../../Resources/Images/dt-macOS-rules-2-4_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a></p><ol><li value="1">ルールにわかりやすい名前を入力します。</li></ol><p><b>条件</b></p><ol data-mc-continue="true"><li value="2"><b>[ユーザー]</b>の下で、<a href="#WL-Rule1">ルール1</a>で選択したものと同じ[ユーザー]オプションを選択します。選択する[ユーザー]オプションは、この例で作成するすべてのルールで同じにする必要があります。</li><li value="3"><b>[場所]</b>の下で、<a href="#WL-Rule1">ルール1</a>で選択したものと同じ[場所]オプションを選択します。選択する[場所]オプションは、この例で作成するすべてのルールで同じにする必要があります。</li><li value="4">クライアント設定を構成します。</li><p>タイプ： 									</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Webブラウザーまたはモダン認証クライアント]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Exchange ActiveSyncクライアント]</b>：選択します。</p><p style="font-weight: normal;">モバイル： 									</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[iOS]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Android]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[その他のモバイル]</b>：選択します。</p><p>デスクトップ： </p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[Windows]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[macOS]</b>：選択します。</p><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[その他のデスクトップ]</b>：選択します。</p><li value="5"><b>[Device Trust]</b>を構成します。</li><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /><b><i>ヒント</i>：</b><span style="color: #0000ff;"><span style="color: #000000;">[信頼できる]</span>と<span style="color: #000000;">[信頼できない]</span>オプションを選択可能にするには：</span></a></span><div class="MCDropDownBody dropDownBody"><div><p><b>[Device Trust]</b>セクションの<b>[信頼できる]</b>および<b>[信頼できない]</b>オプションは、[クライアント]セクションで以下のすべてのオプションが選択されていない場合のみ選択できます。</p><ul><li>Exchange ActiveSyncまたはレガシー認証クライアント</li><li>その他のモバイル（BlackBerryなど）</li><li>その他のデスクトップ（Linuxなど）</li></ul></div></div></div><p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>[任意]</b>：選択します。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼済み]</b>：選択しません。</p><p><span style="font-family: 'Wingdings'">¨</span> <b>[信頼できない]</b>：選択しません。</p></ol><p><b>アクション</b></p><ol data-mc-continue="true"><li value="6"><b>[アクセス]</b>を構成します。</li><p><b>[拒否]</b>を選択します。</p><li value="7"><b>[保存]</b>をクリックします。</li></ol></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />ルール例5：デフォルトのサインオン・ルール：任意のクライアント、すべてのプラットフォーム、任意の信頼、アクセスを許可</a> </span><div class="MCDropDownBody dropDownBody"><p>デフォルトのサインオン・ルールはすでに作成されており、編集できません。この例では、デフォルトのルールはルール4によって事実上無効になっているため、到達することはありません。 </p><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-default.png"><img class="MCPopupThumbnail img" data-mc-width="609" data-mc-height="961" src="../../Resources/Images/dt-macOS-rules-default_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a></p></div></div> </div></div> </div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br /> <hr width="100%" size="0" align="center" /></div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;">Device Trust証明書の取り消しと削除</span> </a> </span>
                                                        <div class="MCDropDownBody dropDownBody"> <a name="PartE"> </a><p>Okta認証局からユーザーのDevice Trust証明書を取り消すことが必要になる場合があります。これは、コンピューターの紛失または盗難、あるいはエンド・ユーザーが非アクティブになった場合に推奨されます。Device Trust証明書を失効させた後にDevice Trustを使用してエンド・ユーザーのコンピューターを再び保護するには、新しい証明書を登録する前にコンピューターから失効した証明書を削除する必要があります。</p><div><ul><li>この手順の1～4では、エンド・ユーザーに対してOkta認証局から発行されたすべてのDevice Trust証明書を取り消します。証明書を取り消しても、既存の証明書がmacOSコンピューターから削除されることはありません。証明書を取り消した後にmacOSコンピューターをDevice Trustで再び保護するには、まず既存のDevice Trust証明書をコンピューターから削除してから、<b><a href="#remove-cert">手順5</a></b>に従って新しい証明書でコンピューターを再登録する必要があります。コンピューターに別の証明書が存在する場合（取り消されているかどうかにかかわらず）、Device Registration Taskで新しい証明書は登録されません。</li><li>エンド・ユーザーが非アクティブ化されると、そのユーザーのDevice Trust証明書もOkta認証局から自動的に取り消されます（ただし、コンピューターからは削除されません）。コンピューターから証明書を削除するには、手順5のいずれかの削除方法を使用します。</li></ul><ol><li value="1"><p>管理コンソールで、<b>[ディレクトリー]</b> &gt; に移動します <b>人員</b></p></li><li value="2"><p>Device Trust証明書を取り消すエンド・ユーザーをクリックします。</p></li><li value="3"><b>[その他のアクション]</b>メニューで、<b>[信頼証明書を取り消す]</b>をクリックします。 <p><img src="../../Resources/Images/DT_revokeTrustCert_80per.png" /></p></li><li value="4"><p>表示されるメッセージを確認し、<b>[信頼証明書を取り消す]</b>をクリックします。</p></li><li value="5"><a name="remove-cert"> </a>何らかの理由でDevice Trust証明書を削除する場合は（コンピューターをDevice Trustで再び保護する前など）、まず既存のDevice Trust証明書をコンピューターから削除します。コマンド・ラインを使用するか、Jamf Proでアンインストール・スクリプトを作成できます。どちらのアンインストール方法でも、macOSデバイスからDevice Trust関連のアーチファクトがすべて削除されます。</li><p /><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Note" alt="Note" /><p class="noteHeading">注</p><p class="noteContent">「<a href="#PartB">ステップ2：Okta Device Registration Taskを変更する</a>」でダウンロードして変更したスクリプトを再利用する場合は、使用する前に組織のトークンを削除してください。トークンはアンインストール操作には必要ありません。</p></div><p /><ul><li><b>コマンド・ラインで削除</b> — 対象のコンピューターのターミナルを開き、コマンド <span class="code">python &lt;fileName&gt;.py uninstall</span>を発行します。<span class="code">&lt;fileName&gt;</span>は、Okta Device Registration Taskの名前です。例えば、 Okta Registration Taskの名前が<span class="code">MacOktaDeviceRegistrationTaskSetup.1.0.2.py</span>の場合、以下のコマンドを発行します。                                     <p><span class="code">python MacOktaDeviceRegistrationTaskSetup.1.0.2.py uninstall</span></p></li><li><b>アンインストール・スクリプトで削除</b> — <span class="code">uninstall</span>パラメーターを渡すように構成したアンインストール・スクリプトをJamf Proで作成します。詳細については、Jamf Proのドキュメントの「<a href="http://docs.jamf.com/10.6.0/jamf-pro/administrator-guide/Managing_Scripts.html#src-18787582_id-.ManagingScriptsv10.6.0-AddingaScripttoJamfPro" target="_blank">Adding a Script to Jamf Pro</a>」の手順を参照してください。</li></ul></ol></div> </div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br /> <hr width="100%" size="0" align="center" /></div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a name="PartF"> </a> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;"> 証明書の登録に関するログの確認</span> </a> </span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <div style="line-height:75%;">
                                                                <br />
                                                            </div>
                                                            <h3><a name="View"> </a>Jamf Proでのログの確認</h3>
                                                            <p>Okta Device Registration Taskは、展開中に3つのログ・レベル（INFO、WARN、ERROR）でJamfにログを発行します。展開の問題を診断するために、Jamf管理者はポリシーまたは個々のコンピューターごとに展開のログを確認できます。より詳細なログを生成するには、Jamf Proでパラメーター値として<span class="code">verbose</span>オプションを使用します。  </p>
                                                            <p>
                                                                <img src="../../Resources/Images/dt-macos-jamf-policy-logs-verbose.png" />
                                                            </p>
                                                            <p>さらに、エンド・ユーザーは、コンピューターでのスクリプトの実行中にコンソール・アプリを開いておくことで、ローカルのmacOSコンピューターでログ・メッセージを確認できます。 </p>
                                                            <h3>macOSコンピューターでのログの確認 </h3>
                                                            <p>証明書の登録中にOkta関連のログ・メッセージを監視できます。この方法は、デバイスで実行されているオペレーティング・システムによって異なります。 </p>
                                                            <h4>バージョン<b>10.11.6</b>（OS X El Capitan）を実行している場合：</h4>
                                                            <ol>
                                                                <li value="1"><b>[ユーティリティ] &gt; [コンソール]</b>を開きます。</li>
                                                                <li value="2"><b>[すべてのメッセージ]</b>をクリックします。</li>
                                                                <li value="3">検索フィールドにOktaと入力して<b>Enter</b>を押すと、Okta関連のすべてのメッセージがフィルタリングされます。 </li>
                                                            </ol>
                                                            <div style="line-height:75%;">
                                                                <br />
                                                            </div>
                                                            <h4>次のオペレーティング・システムのいずれかを実行している場合：</h4>
                                                            <ul>
                                                                <li>macOS 10.12.6（Sierra）</li>
                                                                <li>macOS 10.13.4（High Sierra）</li>
                                                            </ul>
                                                            <ol>
                                                                <li value="1"><b>[ユーティリティ] &gt; [コンソール]</b>を開きます。</li>
                                                                <li value="2">左側のペインで、<b>[デバイス]</b>の下からデバイスをクリックします。</li>
                                                                <li value="3">検索フィールドにOktaと入力して<b>Enter</b>を押すと、Okta関連のすべてのメッセージがフィルタリングされます。</li>
                                                            </ol>
                                                            <div style="line-height:75%;">
                                                                <br />
                                                            </div>
                                                            <h4>過去のログを表示する場合（サポートされているすべてのオペレーティング・システムで共通）：</h4>
                                                            <ol>
                                                                <li value="1"><b>[ユーティリティ] &gt; [コンソール]</b>を開きます。</li>
                                                                <li value="2">左側のペインで、<b>[/var/log] &gt; [asl]</b>の順に選択します。</li>
                                                                <li value="3">検索する日付を選択します。</li>
                                                                <li value="4">検索フィールドにOktaと入力して<b>Enter</b>を押すと、Okta関連のすべてのメッセージがフィルタリングされます。</li>
                                                            </ol>
                                                            <div style="line-height:75%;">
                                                                <br />
                                                            </div>
                                                            <h4>デバイスで実行されたシステム・コールを確認するには、次のコマンドを実行してからDevice Registration Taskを実行します。</h4>
                                                            <p id="code">log stream --predicate 'eventMessage contains "okta"'</p>
                                                        </div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br /> <hr width="100%" size="0" align="center" /></div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> <span style="font-size: 14pt;"> アプリの許可リストの変更</span> </a> </span>
                                                        <div class="MCDropDownBody dropDownBody"> <a name="PartG"> </a><p>Okta Device Registration Taskでは、エンド・ユーザーがアクセスしようとしたときにキーチェーンのパスワードの入力を求められないように、よく利用される一部のアプリをデフォルトで許可しています。デフォルトの許可リストは、この手順に従ってカスタマイズできます。 </p><p> </p><p>次の点に注意してください。 </p><ul><li>よく使用する許可リストのコピーを残しておいてください。変更した許可リストは、新しいOkta Device Registration Taskを対象のmacOSコンピューターにプッシュすると上書きされるため、そのたびに再作成する必要があります。 </li><li>Oktaで定義された元の許可リストにアプリを追加する場合は、変更した許可リストをすべてのユーザーに展開する前に、ユーザーのサブセットでテストすることを検討してください。 </li><li>他の許可されているアプリのTeamIdentifierとは異なり、SafariのTeamIdentifierは単に「<span class="code">apple:</span>」（コロンに注意）で、「<span class="code">teamid:</span>」プレフィックスは付きません。 </li><li> Webビューによる認証をサポートするSAML/WS-Fed対応アプリを許可できます。認証が実行されるWebビューは、Oktaキーチェーンにアクセスできる必要があります。Oktaが提供する元の許可リストには、現在は次のアプリが含まれています。  										<ul><li>Box</li><li>Chrome</li><li>Safari</li><li>Microsoft Office</li><li>Skype for Business</li><li>Googleドライブ</li><li>Slack</li></ul></li></ul><div style="line-height:70%;"><br /></div><ol><li value="1">許可するアプリのTeamIdentifierを探します。</li><ol style="list-style-type: lower-alpha;"><li value="1">許可するアプリがあるmacOSデバイスでコマンド・ラインを開き、Applicationsフォルダーのアプリを一覧表示します。</li><p id="code">ls /Applications</p><li value="2">アプリのTeamIdentifierを探します。</li><p id="code">codesign -dv --verbose=4 /Applications/<b>exampleapp</b>.app</p><p><span class="code">exampleapp</span>は調査するアプリです。 </p><li value="3">出力でTeamIdentifierの値を見つけてメモします。 </li><p>たとえば、RingCentralのチームのTeamIdentifierを探す場合は次のようになります。</p><p id="code">codesign -dv --verbose=4/App /Applications/RingCentral\ Meetings.app </p><p>出力は次のとおりです。</p><p></p><img src="../../Resources/Images/dt-teamID-ring-central.png" /><div style="line-height:110%;"><br /></div></ol><li value="2">Okta Device Registration Taskで許可リストを変更します。</li><h4>変更前の例 </h4><p>Oktaで定義された元の許可リスト：</p><div style="line-height:80%;"><br /></div><img src="../../Resources/Images/dt-macos-whitelist-before-mod.png" /><div style="line-height:120%;"><br /></div><h4>変更後の例</h4><p> RingCentralを追加した許可リスト：</p><div style="line-height:80%;"><br /></div><img src="../../Resources/Images/dt-macos-whitelist-after-mod.png" /><div style="line-height:120%;"><br /></div><li value="3">変更を保存します。</li><li value="4"> 必要に応じて、「<a href="#PartC">ステップ4：変更したOkta Device Registration TaskをJamf Proに追加してmacOSデバイスに配布する</a>」の説明に従ってOkta Device Registration Taskをプッシュします。</li></ol><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/icon-lightbulb.png" class="noteImgFloat" title="ヒント" alt="ヒント" /><p class="noteHeading">ヒント</p><p class="noteContent">よく使用する許可リストのコピーを残しておいてください。変更した許可リストは、新しいOkta Device Registration Taskを対象のmacOSコンピューターにプッシュすると上書きされるため、そのたびに再作成する必要があります。</p></div></div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br />
                                                    </div>
                                                    <hr width="100%" size="0" align="center" />
                                                    <div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> </a><a name="Troubleshooting_dt-macOS"> </a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false"> <span style="font-size: 14pt;">トラブルシューティング</span> </a> </span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <p>Okta Device Registration Taskは、Oktaから取得して変更した後、このDevice Trustソリューションの対象となるmacOSデバイスに配布するためにJamf ProにアップロードするPythonスクリプトです。 </p>
                                                                <h4>Okta Device Registration Taskについて</h4>
                                                                <p>デバイスに展開されると、Okta Device Registration Taskは以下を実行します。</p>
                                                                <ul>
                                                                    <li>
                                                                        <p>Oktaに登録してDevice Trust証明書を取得します。OktaはJamf Proを使用してデバイスが管理されていることを確認します。</p>
                                                                    </li>
                                                                    <li>
                                                                        <p>ChromeおよびSafariブラウザを構成し、 <a href="#" class="MCTextPopup popup popupHead">テスト済みのネイティブアプリ<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>これらの最新のAuth対応ネイティブアプリ：Microsoft Office 365、Box、Googleドライブ、Skype for Business、Slack</span></a> 安全なアプリアクセス中に証明書を自動的に提示するためにデバイス上で。</p>
                                                                        <li>
                                                                            <p>1日1回、ユーザーがコンピューターにログインするたびに実行される簡単なタスクをスケジュールします。このタスクでDeviceTrust証明書の有効期限が切れていないかどうかを確認し、期限切れの30日前に証明書の更新を試みます。証明書の有効期限は1年間です。</p>
                                                                        </li>
                                                                    </li>
                                                                    <li>更新時は、登録時と同様のチェックがOktaで実行されます。たとえば、新しい証明書を発行する前にデバイスが管理されているかどうかが確認されます。 </li>
                                                                    <li>スクリプトは、デバイスで1回実行されると、Jamf Proによってデバイスから自動的に削除されます。</li>
                                                                    <li>以下のクエリを使用して、デバイスにインストールされているレジストレーションタスクのバージョンを確認することができます。<p /><p id="code">python3 ~/Library/Okta/okta_device_trust.py version</p></li>
                                                                    <p />
                                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-flow.png"><img class="MCPopupThumbnail img" data-mc-width="1256" data-mc-height="817" src="../../Resources/Images/dt-macos-flow_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" id="imgimg_new" /></a>
                                                                    </p>
                                                                </ul>
                                                                <h4>基本トラブルシューティングと高度なトラブルシューティング</h4>
                                                                <p> 発生する可能性が高い2つの問題を以下に示します。</p>
                                                                <ul>
                                                                    <li>信頼されたデバイスがDevice Trustで保護されたアプリにアクセスできない。</li>
                                                                    <li>信頼されていないデバイスがDevice Trustで保護されたアプリにアクセスできる。</li>
                                                                </ul>
                                                                <p>いずれかの問題が発生した場合、基本トラブルシューティングを実施することで解決を試みてください。問題が解決しない場合、高度なトラブルシューティングを実施します。</p>
                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> </a><a name="BasicTroubleshooting_dt-macOS"> </a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">基本トラブルシューティング</a> </span>
                                                                    <div class="MCDropDownBody dropDownBody">
                                                                        <p>基本トラブルシューティングを実施するには、以下のエリアを確認します。</p>
                                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />有効化</a> </span>
                                                                            <div class="MCDropDownBody dropDownBody">
                                                                                <p>以下を確認します。</p>
                                                                                <ul>
                                                                                    <li>このDevice Trust機能が組織のOktaのバージョン（SKU）に含まれている。 </li>
                                                                                    <li><b>[セキュリティー] &gt; [Device Trust] &gt; [macOS Device Trustを有効化]</b>で<a href="#PartA">グローバルなDevice Trust設定を有効化</a>している。</li>
                                                                                </ul>
                                                                            </div>
                                                                        </div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />Registration task</a> </span><div class="MCDropDownBody dropDownBody"><ul><p><li><p><a href="#PartC">パートC</a>の説明に従って、Device Registration Taskを対象のmacOSデバイスに配布するようにJamf Proが正しく構成されていることを確認します。</p></li></p><p>デバイスで実行されているRegistration Taskのバージョンは、次のクエリーを使用して確認できます。 				 				 									<p id="code">python ~/Library/Okta/okta_device_trust.py version</p><li><p>Python 3スクリプトを展開する前に、アプリのTeamIDをスクリプトに追加したことを確認します。 </p></li></p><p>アプリのTeamIDがスクリプトに含まれていない場合、以前に環境でDevice Trustと連携していたサード・パーティー製アプリからサインオンしようとしたときにアクセス・プロンプトが表示されます。<br /><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/devices_dt_troubleshoot_TeamID_1.png" data-mc-popup-alt="アクセス・プロンプトの例"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="426" data-mc-height="160" src="../../Resources/Images/devices_dt_troubleshoot_TeamID_1_thumb_220_220.png" alt="アクセス・プロンプトの例" title="サード・パーティー製アプリからのアクセス・プロンプトの例" tabindex="" /></a></p><p>アプリのTeamIDをPython 3スクリプトに追加して、ポリシーを再度展開します。<br />この画像は、ホワイトリストに登録するアプリを指定するために編集するスクリプトのセクションを示しています。<br /><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/devices_dt_troubleshoot_TeamID_2.png" data-mc-popup-alt="Python 3スクリプトのセクション"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1059" data-mc-height="229" src="../../Resources/Images/devices_dt_troubleshoot_TeamID_2_thumb_220_220.png" alt="Python 3スクリプトのセクション" title="ホワイトリストに登録するアプリを指定するために編集するPython 3スクリプトのセクション。" tabindex="" /></a></p></ul></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />Python 3の依存関係パッケージ</a> <MadCap:dropDownHotspot> <br /> </MadCap:dropDownHotspot> </span><div class="MCDropDownBody dropDownBody"><p>Python 3の依存関係パッケージが正しくインストールされているかどうかを確認します。</p><p>モジュールが見つからないというエラー（例：「ModuleNotFoundError: No module named 'Systemconfiguration'」）が発生する場合は、[「Device Trustの依存関係のインストール」へのリンク]の依存関係が正しく設定されていることを確認してください。 </p><p>コンピューターでJamfの次のスクリプトを実行します。</p><p id="code">#!/bin/sh</p><p id="code">echo "Python location"</p><p id="code">python3 -c "import sys; print(sys.executable)"</p><p id="code">echo "Python version"</p><p id="code">python3 --version</p><p id="code">echo "Python3 Dependency version"</p><p id="code">echo "********************"</p><p id="code">python3 -m pip show pyobjc-framework-SystemConfiguration</p><p id="code">echo "********************"</p></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />証明書</a> </span><div class="MCDropDownBody dropDownBody"><div><h3>証明書のインストールを確認</h3><p>このDevice Trustソリューションの対象となるデバイスのキーチェーンに証明書がインストールされていることを確認してください。証明書がインストールされておらず、アプリのサインオン・ポリシーで[信頼済み]設定が有効な場合、ユーザーはアプリへのアクセスが拒否され、管理者に連絡するように促すセキュリティー・メッセージにリダイレクトされます（詳細情報への<b>[詳細]</b>リンクを含むようにメッセージを設定することができます。「<a href="#learn-more-link">ステップ1：組織のグローバルなDevice Trust設定を有効化</a>」を参照してください）。 </p> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />端末からインストールを確認するには：</a> </span><div class="MCDropDownBody dropDownBody"><h4>キーチェーン情報を表示</h4><p id="code">security show-keychain-info okta.keychain</p><h4>証明書を表示</h4><p id="code">security find-certificate -a -c 'Okta MTLS' -Z -p okta.keychain</p><h4>パスワードを表示</h4><p id="code">security find-generic-password -l device_trust -w</p></div></div><div style="line-height:110%;"><br /></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />対象デバイスでGUIを使用してインストールを確認するには：</a> </span><div class="MCDropDownBody dropDownBody"><div><ol><li value="1">macOSデバイスで「キーチェーン・アクセス」を検索します。 </li><li value="2">ダブルクリックしてキーチェーン・アクセス・アプリを開きます。</li><li value="3">Oktaキーチェーンが存在し、<b>Okta MTLS証明書</b>が含まれていることを確認します。</li><p><img src="../../Resources/Images/dt-macos-keychain-troubleshooting.png" /></p><p>Oktaキーチェーン、証明書、または秘密鍵が見つからない場合、登録タスクが正常に完了していません。この場合は、<a href="#View">Jamf Proでログを確認</a>してください。 </p><li value="4"><b>ログイン</b>のキーチェーンに、<b>device_trust</b>パスワードと<b>識別プリファレンス</b>が表示されていることを確認します。 </li><p><img src="../../Resources/Images/dt-macos-keychain-pw-troubleshooting.png" /></p><p><b>device_trust</b>パスワードが存在しない場合、Device Trustで保護されたアプリからOktaキーチェーンにアクセスできません。これを解決するには、証明書をアンインストールし（「<a href="#PartE">Device Trust証明書の取り消しと削除</a>」を参照）、デバイスを再登録します（「<a href="#PartC">ステップ4：変更したOkta Device Registration TaskをJamf Proに追加してmacOSデバイスに配布する</a>」を参照）。</p></ol></div></div></div></div><div><p></p><h3>証明書の登録の上限</h3><p> 証明書は、ユーザーがDevice Trustで保護されたmacOSデバイスからDevice Trustで保護されたアプリケーションに初めてアクセスしたときに、そのユーザーにバインドされます。証明書は使用するまではバインドされません。Oktaでは、登録手順を実行するたびに1つずつ、バインドされていない証明書を最大5つまでデバイスに発行できます。セキュリティー上の理由から、Oktaでは、バインドされていない証明書を各デバイスに5つまでしか発行しません。バインドされていない証明書の制限に達しないようにするには、登録を通じて追加の証明書の取得を試みる前に、ユーザーがデバイス上のバインドされていない証明書をすでに使用していることを確認してください。登録の上限に達すると、Syslogに登録エラーが表示され、JAMFログに「<b>デバイスの証明書が登録上限の5件に達しました</b>」というエラー・メッセージが表示されます。</p></div><div><h3><a name="MTLS-handshake"> </a>相互TLS証明書交換のブロックが原因で認証に失敗する問題の防止 </h3><div><p data-mc-conditions="SnippetConditionsForDevices.macOS Only">このDevice Trustフローにおける相互TLS証明書交換（ハンドシェイク）は、Okta組織のURLとは別のOktaのURLで行われます（次の例ではワイルドカード文字（*）で示されています）。組織でエンドポイント保護ソフトウェアを実装している場合、このDevice Trustフロー中に発生する相互TLS証明書交換（ハンドシェイク）をブロックしないように構成してください。たとえば、組織で送信トラフィックの制限に許可リストを使用している場合、次のURLをワイルドカード文字（*）も含めて正確に許可リストに追加してください。</p><p id="code">*.okta.com</p><p id="code">*.okta-emea.com                 </p></div></div></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />サインオン・ポリシー</a> </span><div class="MCDropDownBody dropDownBody"><p>以下のサインオン・ポリシーを構成していることを確認します。</p><ul><li>Device Trustで保護するWS-FedまたはSAMLアプリに適用される</li><li>適切なユーザー/グループに適用される</li><li>信頼できないデバイスへのアクセスを拒否するアクティブなルールが最低でも含まれる</li></ul></div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> </a><a name="DT_macOS_SysLog"> </a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">システム・ログ</a> </span><div class="MCDropDownBody dropDownBody"><div><h3>Device Trustイベントの確認</h3><p><a href="../Reports/Reports_SysLog.htm" rel="noreferrer" target="_blank">システム・ログ</a>を確認して、以下のDevice Trustシステム・ログ ・イベントを確認します。 </p><h4>認証</h4><ul><li><b>DisplayMessage</b>：証明書によるデバイスの認証</li><li><b>EventType</b>：<span class="code">user.authentication.authenticate</span></li></ul><h4>登録</h4><ul><li><b>DisplayMessage</b>：Device Trust証明書の登録</li><li><b>EventType</b>：<span class="code">user.credential.enroll</span></li></ul><h4>発行	</h4><ul><li><b>DisplayMessage</b>：Device Trust証明書の発行</li><li><b>EventType</b>：<span class="code">pki.cert.issue</span></li></ul><h4>取り消し</h4><ul><li><b>DisplayMessage</b>：Device Trust証明書の取り消し</li><li><b>EventType</b>：<span class="code">pki.cert.revoke</span></li></ul><h4>更新</h4><ul><li><b>DisplayMessage</b>：Device Trust証明書の更新</li><li><b>EventType</b>：<span class="code">pki.cert.renew</span></li></ul></div><div><h3>DebugContextでの一意のデバイスIDの確認</h3><p>DebugDataにはDevice Trustイベントに関連付けられたデバイスの一意のIDが示され、デバッグの際に便利です。この情報からデバイス・インベントリ内のデバイスにDevice Trustが適用されているかどうかも確認できるため、機能を大規模なユーザーのグループに展開する場合などに役立ちます。</p><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Important Note" alt="Important Note" /><p class="noteHeading">重要</p><p class="noteContent">debugContext.debugDataに含まれる情報は、顧客のプラットフォームの問題についてトラブルシューティングする際の追加のコンテキストを提供することを目的としたものです。キーの名前と値は予告なく変更される可能性があるため、デバッグの際の補助情報として主に使用し、データ・コントラクトとしては使用しないでください。Okta開発者用ドキュメントの「<a href="https://developer.okta.com/docs/reference/api/system-log/#debugcontext-object" target="_blank">DebugContextオブジェクト</a>」を参照してください。</p></div><ol><li value="1">管理コンソールで、<b>[レポート]</b> &gt; に移動します <b>システム・ログ</b>。</li><li value="2">目的のDevice Trustイベント（日付）を検索し、次の順に進みます。                                         <p><b>イベント&gt; AuthenticationContext&gt;システム&gt; DebugContext&gt; DebugData</b></p></li></ol></div> </div></div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />Jamf Proの設定の確認</a> </span><div class="MCDropDownBody dropDownBody"><ul><li>Okta管理コンソールで、<b><span class="disableGlossary">[秘密鍵</span>の値]</b>と<b>[企業/組織のURL]</b>の値がOkta Device Registration Taskに正しく設定されていることを確認します（「<a href="#PartB">ステップ2：Okta Device Registration Taskを変更する</a>」を参照）。</li><li>変更してJamf Proに追加したOkta Device Registration Taskが最新バージョンであることを確認します（「<a href="../Settings/Settings_Downloads.htm#Device" rel="noreferrer" target="_blank">バージョン履歴</a>」を参照）。</li><li>Jamf Proポリシーのトリガー・イベントに<b>[登録完了時]</b>と<b>[チェックイン時]</b>が含まれていることを確認します（「<a href="#PartC">ステップ4：変更したOkta Device Registration TaskをJamf Proに追加してmacOSデバイスに配布する</a>」を参照）。</li><li>  											展開のログを確認します（「<a href="#PartF">証明書の登録に関するログの確認</a>」を参照）。 										</li><li>Jamf Proポリシーのログでスクリプト実行ステータスが<b>[完了]</b>になっていることを確認します。 </li><p><img src="../../Resources/Images/dt-macos-jamf-policy-logs-troubleshooting.png" /></p></ul></div></div> </div>
                                                                </div> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" /> </a><a name="AdvancedTroubleshooting_dt-macOS"> </a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">高度なトラブルシューティング</a> </span><div class="MCDropDownBody dropDownBody"><p>基本トラブルシューティングで問題が解決せず、証明書がmacOSデバイスにインストールされていない場合は、以下を確認してください。 </p><h3>Okta管理者用アプリで</h3><p>macOSデバイスのエンド・ユーザーが<b>[ディレクトリー] &gt; [ユーザー]</b>に存在し、アクティブ化されていることを確認します。</p><h3>macOSデバイス </h3><h4>Chromeで証明書の自動設定が構成されていることを確認します。</h4><ol><li value="1">Chromeで、アドレス・バーにchrome://policyと入力して<b>Enter</b>を押します。</li><li value="2"><b>[値を表示]</b>をクリックして、ポリシー<b>AutoSelectCertificateForUrls</b>に次のいずれかの値が表示されることを確認します。  								<p id="code">{"pattern":"https://[cell]-devicetrust.okta.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}</p><p id="code">{"pattern":"https://[cell]-devicetrust.okta-emea.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}                                         </p></li><p><span class="code">[cell]</span>は、Okta管理コンソールのフッターに表示される、Okta組織が存在するセルです。</p></ol><h4>キーチェーンでネイティブ・アプリが許可されていることを確認</h4><p>次のコマンドを発行して、<a href="#" class="MCTextPopup popup popupHead">許可されているアプリ<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>Microsoft Office 365、Box、Googleドライブ、Skype for Business、Slack</span></a>が証明書にアクセスできることを確認します（「<a href="#PartG">アプリの許可リストの変更</a>」を参照）。 </p><p id="code">security dump-keychain -a okta.keychain</p><div style="line-height:150%;"><br /></div><p><img src="../../Resources/Images/dt-macos-dump-keychain-troubleshooting.png" /></p><h4>修復を検証</h4><p>ブラウザーまたはシック・クライアントからDevice Trustで保護されたアプリにアクセスしてみます。アプリにアクセスする際にエラーが表示された場合は、<b>[終了]</b>や<b>[閉じる]</b>でブラウザー（ChromeまたはSafari）を終了してから再度起動し、アプリへのアクセスをもう一度試します。</p></div></div> </div>
                                                        </div>
                                                    </div>
                                                    <div style="line-height:150%;">
                                                        <br />
                                                    </div>
                                                    <hr width="100%" size="0" align="center" /> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />既知の問題</a> </span><div class="MCDropDownBody dropDownBody"><ul><li><b>O365ネイティブ・アプリにアクセスするときにセキュリティー要件のページが表示されない：</b>このDevice Trustソリューションで保護されているOffice O365ネイティブ・アプリに管理対象外のmacOSデバイスを使用しているエンド・ユーザーがアクセスしようとしたときに、<b>セキュリティー要件</b>のページが表示されません（この問題はOfficeネイティブ・アプリでのみ発生します。ChromeやSafariなどのデスクトップのブラウザーからO365アプリにアクセスしようとしたときは発生しません）。 <p><img src="../../Resources/Images/DT_Security_URLspecified_2.png" /></p></li><li><b>Google「バックアップと同期」アプリへのアクセスに関する問題：</b>「バックアップと同期」アプリ（Googleドライブの一部）にサインインする際、認証フローがGoogleアカウントのページで停止してアプリに進みません。これはGoogleの既知の問題です。サインインを完了するには、ページの下部にある<b>[代わりにブラウザでログイン]</b>リンクをクリックします。</li></ul></div></div><div style="line-height:120%;"><br /></div><hr width="100%" size="0" align="center" /> <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"> <a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="閉じた" data-mc-alt2="開く" />関連項目</a> </span><div class="MCDropDownBody dropDownBody"><h4>Oktaから</h4><p><a href="../device-trust/device-trust-landing.htm" rel="noreferrer" target="_blank">Device Trust</a></p><p>macOS向けDevice TrustのRegistration Taskのバージョン履歴</p><p><a href="../Security/O365_Client-Access-Policies.htm" rel="noreferrer" target="_blank">Office 365クライアント・アクセス・ポリシー</a></p><p><a href="../Apps/Apps_Apps.htm#EAS" rel="noreferrer" target="_blank">Microsoft Exchange ActiveSync（EAS）を構成する</a></p><div style="line-height:120%;"><br /></div><h4>外部リソース</h4><p><u style="font-style: normal; text-decoration: none;">Microsoft</u></p><p><a href="https://docs.microsoft.com/en-us/office365/enterprise/modern-auth-for-office-2013-and-2016?redirectSourcePath=%252fen-us%252farticle%252fusing-office-365-modern-authentication-with-office-clients-776c0036-66fd-41cb-8928-5495c0f9168a" rel="noreferrer" target="_blank">How modern authentication works for Office 2013 and Office 2016 client apps</a></p><p><a href="https://social.technet.microsoft.com/wiki/contents/articles/36101.office-365-enable-modern-authentication.aspx" rel="noreferrer" target="_blank">Office 365: Enable Modern Authentication</a></p><p><a href="https://www.microsoft.com/en-us/microsoft-365/blog/2015/11/19/updated-office-365-modern-authentication-public-preview/" rel="noreferrer" target="_blank">Updated Office 365 modern authentication</a></p><p><a href="https://social.technet.microsoft.com/wiki/contents/articles/30253.office-2013-and-office-365-proplus-modern-authentication-and-client-access-filtering-policies-things-to-know-before-onboarding.aspx" rel="noreferrer" target="_blank">Office 2013 and Office 365 ProPlus modern authentication and client access filtering policies</a></p><div style="line-height:120%;"><br /></div><p><a name="related-jamf"> </a>Jamf Pro                 </p><p><a href="http://docs.jamf.com/9.9/casper-suite/administrator-guide/Computer_Extension_Attributes.html" rel="noreferrer" target="_blank">Computer Extension Attributes</a></p><p><a href="https://www.jamf.com/resources/videos/introduction-to-extension-attributes/" rel="noreferrer" target="_blank">Introduction to Extension Attributes（ビデオ）</a></p><p><a href="http://docs.jamf.com/10.6.0/jamf-pro/administrator-guide/Managing_Scripts.html" rel="noreferrer" target="_blank">Managing Scripts</a> </p><p><a href="http://docs.jamf.com/10.4.0/jamf-pro/quickstart-computers/How_to_Use_This_Guide.html" rel="noreferrer" target="_blank">QuickStart Guide for Managing Computers 10.4.0</a></p><p><a href="http://docs.jamf.com/10.4.0/jamf-pro/quickstart-mobile-devices/How_to_Use_This_Guide.html" rel="noreferrer" target="_blank">QuickStart Guide for Managing Mobile Devices 10.4.0</a></p><p><a href="http://docs.jamf.com/10.4.0/jamf-pro/install-guide-mac/About_This_Guide.html" rel="noreferrer" target="_blank">Jamf Pro Installation and Configuration Guide for Mac 10.4.0</a></p><p><a href="http://docs.jamf.com/10.4.0/jamf-pro/administrator-guide/About_This_Guide.html" rel="noreferrer" target="_blank">Jamf Pro Administrator's Guide 10.4.0</a></p></div></div></div>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2">
                                        <div>
                                            <p class="copyright">© Copyright <span class="mc-variable okta-variables.Year variable">2022</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span> All Rights Reserved. それぞれの商標は、それぞれの商標所有者に帰属します。
	</p>
                                        </div>
                                    </div>
                                    <!-- Qualtrics setup to use with script below, replacing getfeedback -->
                                    <div id="ZN_6fGBJ8J3VcIBymN">
                                        <!--DO NOT REMOVE-CONTENTS PLACED HERE-->
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/js/vendor/qualtrics.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
