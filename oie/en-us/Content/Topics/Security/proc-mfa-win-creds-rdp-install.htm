<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="Authentication|[%=System.LinkedHeader%]|MFA integrations|[%=System.LinkedHeader%]" data-mc-conditions="MultiProdPublish.Classic+OIE" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="OIE Admins" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Enable MFA for Windows server RDP authentication attempts using Oktaâ€™s Credential Provider for Windows." /><title>Install the Okta Credential Provider for Windows | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxb48840fe-d60d-4e40-b1d3-522d5a35c384</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPublish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar" data-mc-conditions="Primary.live-site-only">
                                            <div class="dropdown" data-test="menuBarCategory" id="documentationMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Documentation <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/en-us/Content/index.htm" data-test="menuBarLink">Product documentation</a>
                                                    </div>
                                                    <div><a href="https://developer.okta.com" target="_blank" data-test="menuBarLink">Developer documentation</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="knowledgebaseMenu"><a href="https://support.okta.com/help/s/knowledge?language=en_US" data-test="menuBarLink">Knowledge base</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="communityMenu">
                                                <button class="dropbtn">Community <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://support.okta.com/help/s/community?language=en_US" data-test="menuBarLink">Home</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/group/CollaborationGroup/Recent?language=en_US" data-test="menuBarLink">Discussions</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/questions?language=en_US" data-test="menuBarLink">Questions</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/ideas?language=en_US" target="_blank" data-test="menuBarLink">Ideas</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/events?language=en_US" data-test="menuBarLink">Webinars</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/blogs?language=en_US" data-test="menuBarLink">Blogs</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="productMenu">
                                                <button class="dropbtn">Product <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://support.okta.com/help/s/productroadmap?language=en_US" data-test="menuBarLink">Roadmap</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/product-hub?language=en_US" data-test="menuBarLink">Product hub</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/mysuccesshub/get-started?language=en_US" data-test="menuBarLink">Customer success hub</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="trainingMenu"><a href="https://www.okta.com/services/education-services/" target="_blank" data-test="menuBarLink">Training</a>
                                            </div>
                                        </div>
                                        <div class="logo_container" id="OktaBanner" data-mc-conditions="Primary.live-site-only"><a class="logo" href="https://help.okta.com" data-test="OktaBanner"><img src="../../Resources/Images/okta-assets/ohc_logo.png" alt="Okta Support" title="Okta Support" data-test="OktaBannerImg" /></a>
                                        </div>
                                        <div class="toolbar-main" data-test="toolBar" data-mc-conditions="Primary.live-site-only">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="oie-label" data-mc-conditions="MultiProdPublish.OIE">
                                                <img class="oie-label" title="Label: Okta Identity Engine content" src="../../Resources/Images/okta-assets/Identity_Engine.svg" />
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1>Install the <span class="mc-variable okta-variables.ProductName variable">Okta</span> Credential Provider for Windows</h1>
                                                    <p>Install the provider by using any of the supported installation methods: standard, silent, and mass deployment. </p>
                                                    <ul>
                                                        <li><a href="#Standard" class="MCXref xref">Standard installation</a>
                                                        </li>
                                                        <li><a href="#Silent" class="MCXref xref">Silent installation</a>
                                                        </li>
                                                        <li><a href="#Mass" class="MCXref xref">Mass deployment</a>
                                                        </li>
                                                        <li><a href="#Verify" class="MCXref xref">Verify timeout settings</a>
                                                        </li>
                                                    </ul>
                                                    <h2><a name="Standard"></a>Standard installation</h2>
                                                    <ol>
                                                        <li value="1">Go to the location where you downloaded the installer.</li>
                                                        <li value="2">Extract the files from the .zip archive.</li>
                                                        <li value="3">Run <span class="codeph">setup.exe</span> as an administrator and follow the prompts. Install or repair the Microsoft Visual C++ Runtime libraries as required.</li>
                                                        <li value="4">
                                                            <p>On the <span class="wintitle">App Configuration</span> dialog, enter a client ID, client secret, and your <span class="mc-variable okta-variables.ProductName variable">Okta</span> URL. Click <span class="uicontrol">Next</span> after you've entered the information. </p>
                                                            <p>You can get these values from the Microsoft RDP (MFA) app in <span class="mc-variable okta-variables.ProductName variable">Okta</span>. Select the <span class="wintitle">General</span> tab, scroll to the <span class="wintitle">Client Credentials</span> section to find the client ID and the client secret. The <span class="mc-variable okta-variables.ProductName variable">Okta</span> URL is the URL that your org uses to reach <span class="mc-variable okta-variables.ProductName variable">Okta</span> (for example, <span class="url">https://&lt;yourorg&gt;.okta.com</span>).</p>
                                                        </li>
                                                        <li value="5">Click <span class="uicontrol">Next</span> and <span class="uicontrol">Close</span> to complete the installation.</li>
                                                        <li value="6">In the second App Configuration dialog, select from the following options:<ul><li><span class="uicontrol">Filter Credential Provider</span>: This option provides a workaround when a server has multiple credential providers installed. If selected, the <span class="mc-variable okta-variables.ProductName variable">Okta</span> MFA Credential Provider is the only method used to apply MFA to RDP connections. Unauthenticated users can't select which credential provider to use.</li><li><span class="uicontrol">RDP Only</span>: By default, the installed credential provider inserts <span class="mc-variable okta-variables.ProductName variable">Okta</span> MFA between both an RDP and a local authentication event. Selecting this option removes <span class="mc-variable okta-variables.ProductName variable">Okta</span> MFA from local (interactive) logons.</li><li>(EA version only) <span class="uicontrol">Display Okta password reset link (self service)</span>: Select this to add an option to the Windows sign-on screen that allows end users to reset their password through <span class="mc-variable okta-variables.ProductName variable">Okta</span>.</li></ul></li>
                                                        <li value="7">
                                                            <p>Verify the installation by locking the machine. If successfully installed, the sign-in screen shows <span class="mc-variable okta-variables.ProductName variable">Okta</span> as a sign-in option, as shown by the <span class="mc-variable okta-variables.ProductName variable">Okta</span> logo in the following image:</p>
                                                            <p>
                                                                <img src="../../Resources/Images/mfa-ms-rdp-05.png" data-mc-target-name="mfa-ms-rdp-5-dropdown" />
                                                            </p>
                                                            <p>The appearance of the sign-in screen varies between different versions of Windows Server.</p>
                                                        </li>
                                                    </ol>
                                                    <h2><a name="Silent"></a>Silent installation</h2>
                                                    <ol>
                                                        <li value="1">Go to the location where you downloaded the installer.</li>
                                                        <li value="2">
                                                            <p>Extract the files from the .zip archive. </p>
                                                        </li>
                                                        <li value="3">On the Windows server, run the following command from the <span class="filepath">vcredist_x64</span> folder of the unzipped archive:<p><span class="codeblock">vcredist_x64.exe /install /quiet /norestart</span></p></li>
                                                        <li value="4">
                                                            <p>Run the following command to  install <span class="mc-variable okta-variables.ProductName variable">Okta</span> Windows Credential Provider silently:</p>
                                                            <p><span class="codeblock">msiexec /qb /log log.txt /i OktaWindowsCredentialProvider.msi CLIENT_ID="cid" CLIENT_SECRET="cs" OKTA_URL="https://a.b.c"</span>
                                                            </p>
                                                            <p>You can find the values for each of the parameters as follows:</p>
                                                            <ul>
                                                                <li>
                                                                    <p>CLIENT_ID: Find this value on the <span class="wintitle">General</span> tab of the Microsoft RDP (MFA) application in <span class="mc-variable okta-variables.ProductName variable">Okta</span>. You can also manually edit this value in the RDP agent config file.</p>
                                                                </li>
                                                                <li>
                                                                    <p>CLIENT_SECRET: Find this value on the <span class="wintitle">General</span> tab of the Microsoft RDP (MFA) application in <span class="mc-variable okta-variables.ProductName variable">Okta</span>. If the client secret is reset, you must reinstall the agent because the secret is encrypted in the agent config file. You can also manually edit this value in the RDP agent config file.</p>
                                                                </li>
                                                                <li>
                                                                    <p>OKTA_URL: Your org URL. Must use the format <span class="url">https://org_name.okta.com</span>.  HTTPS is required. Also supported are *.okta-gov.com, *.oktapreview.com, and *.okta-emea.com.</p>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                        <li value="5">
                                                            <p><a name="Modify"></a>Modify additional properties. In addition to the parameters you added in the previous step, you can modify the following properties to ensure MFA is enforced: </p>
                                                            <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                <thead>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                                                                        <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                                                                            <p>Property</p>
                                                                        </th>
                                                                        <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                                                                            <p>Definition</p>
                                                                        </th>
                                                                        <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                                                                            <p>Default value</p>
                                                                        </th>
                                                                        <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">
                                                                            <p>Suggested value</p>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">FilterCredentialProvider</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                                                            <p>This property provides a workaround when a server has multiple credential providers installed. If true, the <span class="mc-variable okta-variables.ProductName variable">Okta</span> MFA Credential Provider  is the only method used to apply MFA to RDP connections. It doesn't permit unauthenticated users to select which credential provider to use.</p>
                                                                            <p>Setting FilterCredentialProvider to true and RdpOnly to false causes the agent to prompt for MFA if required by the policy.</p>
                                                                        </td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="text-align: center;">false</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="text-align: center;">-</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">InternetFailOpenOption</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                                                            <p>Sets authentication flow behavior if network connectivity is lost. This property governs proper access if the target machine doesn't have internet access for MFA.</p>
                                                                            <p>If true, a user attempting to authenticate across RDP isn't  challenged for MFA and is granted access based on password alone.</p>
                                                                            <p>When false, a user attempting to authenticate across RDP isn't granted access because the credential provider can't reach the <span class="mc-variable okta-variables.ProductName variable">Okta</span> service.</p>
                                                                            <p>Set this property to true if internet connectivity is a frequent issue.</p>
                                                                        </td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="text-align: center;">false</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="text-align: center;">-</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">RdpOnly</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                                                                            <p>By default, the installed credential provider inserts <span class="mc-variable okta-variables.ProductName variable">Okta</span> MFA between both an RDP and a local authentication event. Setting this property to true removes <span class="mc-variable okta-variables.ProductName variable">Okta</span> MFA from local (interactive) logons.</p>
                                                                            <p>Setting FilterCredentialProvider to true and RdpOnly to false  causes the agent to prompt for MFA if required by the policy.</p>
                                                                        </td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="text-align: center;">false</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="text-align: center;">-</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">WidgetTimeOutInSeconds</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                                                                            <p>The number of seconds before timeout. To prevent the possibility that Windows might close the RDP session, this value must be smaller than the idle timeout set in Windows.</p>
                                                                            <p>The maximum value is 120 seconds.</p>
                                                                        </td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="text-align: center;">60</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="text-align: center;">30</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">ErrorTimeOutInSeconds</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">The timeout after which the RDP session is closed when an error message is displayed.</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="text-align: center;">30</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="text-align: center;">30</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">EnforceTimeoutVersionAgnostic</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Enforce timeout for Windows 2012,  2016 or 2019. </td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="text-align: center;">false</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="text-align: center;">true</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">SslPinningEnabled</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Validate the public key of the <span class="mc-variable okta-variables.ProductName variable">Okta</span> server  to which the agent is connecting.</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="text-align: center;">true</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="text-align: center;">true</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">DisplayPasswordResetLink<p> If you upgraded from the version 1.1.4 to a later version, you must add this property.</p></td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Display link to reset Active Directory password.</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="text-align: center;">false</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="text-align: center;">true</td>
                                                                    </tr>
                                                                    <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">DisconnectSessionOnError</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">When this property is set to true, <span class="mc-variable okta-variables.ProductName variable">Okta</span> attempts to disconnect the userâ€™s session if thereâ€™s a timeout or an unexpected error. Under the default value, the userâ€™s session terminates instead of disconnects so that unsaved data may be lost.</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1" style="text-align: center;">false</td>
                                                                        <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1" style="text-align: center;">-</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <p>To modify these properties, edit the file <span class="filepath">rdp_app_config.json</span> (by default, in the <span class="filepath">C:\Program Files\Okta\Okta Windows Credential Provider\config</span> folder) or use the following PowerShell script:</p><span class="codeblock">$rdpAppConfig = Get-Content 'C:\Program Files\Okta\Okta Windows Credential Provider\config\rdp_app_config.json' -raw | ConvertFrom-Json
$rdpAppConfig.RdpOnly =([System.Convert]::ToBoolean('true'))
$rdpAppConfig | ConvertTo-Json | Set-Content  'C:\Program Files\Okta\Okta Windows Credential Provider\config\rdp_app_config.json'</span>
                                                            <p>You can run this script from the same location you ran the installation in step 2, above.</p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">This script was tested with PowerShell versions, 3, 4, and 5. To determine the version of PowerShell on your system, open PowerShell as administrator and enter:<span class="codeblock">$PSVersionTable</span></p>
                                                            </div>
                                                        </li>
                                                    </ol>
                                                    <h2><a name="Mass"></a>Mass deployment</h2>
                                                    <p>Use the Microsoft <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/psexec" target="_blank">psexec64</a> tool to execute commands on remote machines. Modify the following command for a mass deployment:</p>
                                                    <div class="terminal">
                                                        <div class="terminal-content">
                                                            <div>psexec64 &lt;IP of the machine to deploy&gt; -u &lt;AD admin user&gt; -p &lt;AD admin password&gt; msiexec /i &lt;//machine/share/OktaWindowsCredentialProvider.msi&gt; CLIENT_ID="&lt;client id&gt;" CLIENT_SECRET="&lt;client secret&gt;" OKTA_URL="https://yourdomain.okta.com" /qn /l*v &lt;path for installation log&gt;</div>
                                                        </div>
                                                    </div>
                                                    <p>Elements of the command should be modified as follows:</p>
                                                    <ul>
                                                        <li>Replace <span class="code">&lt;IP of the machine to deploy&gt;</span>, <span class="code">&lt;AD admin user&gt;, and</span> <span class="code">&lt;path for installation log&gt;</span> with appropriate values for your organization.</li>
                                                        <li>Replace the <span class="code">&lt;client secret&gt;</span> and <span class="code">&lt;client ID&gt;</span> to match your application.</li>
                                                        <li>Replace <span class="code">yourdomain</span> with the name of your <span class="mc-variable okta-variables.ProductName variable">Okta</span> organization.</li>
                                                    </ul>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Configure behavior if network connectivity is lost.</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>After completing the installation, you can configure the behavior of the authentication flow if network connectivity is lost.</p>
                                                            <p>To configure this behavior, edit <span class="filepath">rdp_app_config.json</span> (by default, in the <span class="filepath">C:\Program Files\Okta\Okta Windows Credential Provider\config</span> folder). Set <span class="code">InternetFailOpenOption</span> to one of the following values:</p>
                                                            <ul>
                                                                <li><span class="code">true</span>: If internet connectivity is lost, a user attempting to authenticate across RDP isn't challenged for MFA and is granted access based on password alone.</li>
                                                                <li><span class="code">false</span>: If internet connectivity is lost, a user attempting to authenticate across RDP isn't granted access because the credential provider can't reach the <span class="mc-variable okta-variables.ProductName variable">Okta</span> service.</li>
                                                            </ul>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">You can also modify any of the other properties listed in Step 4 in the Silent Installation section, above.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <h2><a name="Verify"></a>Verify timeout settings</h2>
                                                    <p>To ensure that MFA works as expected, verify that the <span class="mc-variable okta-variables.ProductName variable">Okta</span> sign in session times out before the Windows session. </p>
                                                    <p>Note the following:</p>
                                                    <ul>
                                                        <li>By default, the <span class="mc-variable okta-variables.ProductName variable">Okta</span> widget timeout session is set to 60 seconds.</li>
                                                        <li>Determine the timeout duration in your Windows environment then set the session timeout duration for the <span class="mc-variable okta-variables.ProductName variable">Okta</span> widget to be shorter than the Windows timeout session. <br /><div class="noteOkta"><p class="noteContent">Set up a test in the environment by manually timing the session duration for both Windows and <span class="mc-variable okta-variables.ProductName variable">Okta</span> to ensure that the timeout duration specified for each work as expected.</p></div></li>
                                                    </ul>
                                                    <p>To configure the <span class="mc-variable okta-variables.ProductName variable">Okta</span> widget timeout session duration: </p>
                                                    <ol>
                                                        <li value="1">Navigate to <span class="filepath">C:\Program Files\Okta\Okta Windows Credential Provider\config</span></li>
                                                        <li value="2">Edit <span class="filepath">rdp_app_config.json</span></li>
                                                        <li value="3">Add the following properties and values to the file, delineating each entry with a comma: <br /><ul><li><span class="code">"WidgetTimeOutInSeconds": 30</span></li><li><p><span class="code">"ErrorTimeOutInSeconds": 30</span></p></li><li><span class="code">"EnforceTimeoutVersionAgnostic": false</span></li></ul><div class="noteOkta"><p class="noteContent">You may specify another value for timeout as long as it is lower than your Windows session timeout duration.</p></div></li>
                                                    </ol>
                                                    <div>
                                                        <h2>Next steps</h2>
                                                        <p><a href="proc-mfa-win-creds-rdp-test.htm" class="MCXref xref">Verify MFA for RDP sessions</a>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-mc-conditions="MultiProdPublish.OIE">Okta Identity Engine is currently available to a selected audience.
	</p>
                                            <p class="copyright" data-test="copyrightNotice">Â©  <span class="mc-variable okta-variables.Year variable">2023</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- Qualtrics setup to use with script below, replacing getfeedback -->
                                    <div id="ZN_6fGBJ8J3VcIBymN">
                                        <!--DO NOT REMOVE-CONTENTS PLACED HERE-->
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/js/vendor/qualtrics.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
