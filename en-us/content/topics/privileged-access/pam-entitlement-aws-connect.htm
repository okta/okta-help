<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedHeader%]|[%=System.LinkedHeader%]|[%=System.LinkedHeader%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, height=device-height" /><title>Connect an AWS account | Okta</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../resources/stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link href="../../resources/tablestyles/standard.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
        function openSurvey() {
            window.open('https://surveys.okta.com/jfe/form/SV_e4L0iW8a3tz8Yol?source=' + encodeURIComponent(document.location.href), '_blank');
        }
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxf1de37f5-c8aa-42db-a8ef-0cbf06dfa5e3</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPublish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar" data-mc-conditions="Primary.live-site-only">
                                            <div class="dropdown" data-test="menuBarCategory" id="documentationMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Documentation <em class="fa fa-caret-down"></em></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=oie-index" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=index-admin" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_main" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=csh-asa-overview" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-Okta-workflows" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="relnotesMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Release notes <em class="fa fa-caret-down"></em></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=csh-oie-release-notes" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=ext_okta_relnotes" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_releasenotes" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=ext-asa-releasenotes" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-workflows-releasenotes" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="oktaDevDocsMenu"><a href="https://developer.okta.com/" target="_blank" data-test="menuBarLink">Okta Developer</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="auth0Menu"><a href="https://auth0.com/docs" target="_blank" data-test="menuBarLink">Auth0</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="trainingMenu"><a href="https://www.okta.com/services/training/" target="_blank" data-test="menuBarLink">Training</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="supportMenu"><a href="https://support.okta.com/help/s/?language=en_US" target="_blank" data-test="menuBarLink">Support</a>
                                            </div>
                                        </div>
                                        <div class="logo_container" id="OktaBanner" data-mc-conditions="Primary.live-site-only"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" data-test="OktaBanner"><img src="../../resources/images/okta-assets/logo.png" alt="Okta Docs" title="Okta Docs" data-test="OktaBannerImg" /></a>
                                        </div>
                                        <div class="toolbar-main" data-test="toolBar" data-mc-conditions="Primary.live-site-only">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="oie-label" data-mc-conditions="MultiProdPublish.Classic">
                                                <img class="oie-label" title="Label: Okta Classic Engine content" src="../../resources/images/okta-assets/classic_engine.svg" />
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1>Connect an AWS account</h1>
                                                    <p>You can connect one or more AWS accounts to <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> for entitlement analysis and discovery of high-risk AWS resources.</p>
                                                    <p><span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> uses an Okta-managed service account (referred to as an <span class="term">External ID</span>) to interrogate your AWS accounts. These service accounts are unique to each connected cloud account and are necessary for <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> to access and obtain information from your AWS accounts. These accounts require minimal read permissions granted through an AWS IAM role. For more information on IAM roles, see the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html" target="_blank">AWS documentation</a>.</p>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">An AWS management account ID and AWS IAM roles are required for entitlement analysis to work correctly.</p>
                                                    </div>
                                                    <p>To connect your AWS account to <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span>, create IAM roles, configure them with required permissions and policies, and connect those accounts to <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span>.</p>
                                                    <ol>
                                                        <li value="1">Create IAM policies in your AWS management account.</li>
                                                        <li value="2">Create IAM roles and add the policies. You need an Okta AWS account ID and an External ID when creating the roles.</li>
                                                        <li value="3">Create an AWS IAM connection in <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> and use of the ARN of the AWS IAM role for discovery.</li>
                                                    </ol>
                                                    <h2><a name="Create"></a>Create and configure AWS IAM roles</h2>
                                                    <ol>
                                                        <li value="1">In a new browser window, access the <span class="mc-variable _3rd_Party_Integrations.Amazon_Web_Services variable">Amazon Web Services</span> management console and open the IAM console.</li>
                                                        <li value="2">Create a policy in the management account to allow <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> to connect to your AWS organization and discover accounts, users, and groups. For purposes of these steps, let's call this policy <span class="userinput">OktaPA_CIEM_Policies</span>. The policy should contain the following permissions:
                <div class="mcf_dd"><div class="mcf_ddhead">Click here to see the permissions.<br /></div><div class="mcf_dd_body"><p><div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a><div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>{<br />    "Version": "2012-10-17",<br />    "Statement": [<br />        {<br />            "Sid": "VisualEditor0",<br />            "Effect": "Allow",<br />            "Action": [<br />                "iam:GetPolicyVersion",<br />                "sso-directory:ListGroupsForUser",<br />                "identitystore:ListGroupMemberships",<br />                "sso:ListTagsForResource",<br />                "organizations:ListRoots",<br />                "sso:ListCustomerManagedPolicyReferencesInPermissionSet",<br />                "organizations:ListDelegatedServicesForAccount",<br />                "organizations:DescribeAccount",<br />                "sso:DescribeRegisteredRegions",<br />                "organizations:ListChildren",<br />                "sso-directory:SearchGroups",<br />                "sso:ListPermissionSetProvisioningStatus",<br />                "organizations:DescribeOrganization",<br />                "sso:SearchGroups",<br />                "sso:ListInstances",<br />                "sso-directory:DescribeUser",<br />                "sso:DescribeAccountAssignmentDeletionStatus",<br />                "sso:ListAccountAssignmentDeletionStatus",<br />                "iam:ListPolicies",<br />                "ds:DescribeTrusts",<br />                "sso:DescribeAccountAssignmentCreationStatus",<br />                "identitystore:ListUsers",<br />                "organizations:ListAccountsForParent",<br />                "sso:ListAccountAssignments",<br />                "organizations:ListHandshakesForAccount",<br />                "sso:DescribeDirectories",<br />                "sso:GetInlinePolicyForPermissionSet",<br />                "sso:ListManagedPoliciesInPermissionSet",<br />                "sso-directory:DescribeDirectory",<br />                "sso:DescribePermissionSetProvisioningStatus",<br />                "organizations:ListOrganizationalUnitsForParent",<br />                "sso:GetTrust",<br />                "sso-directory:DescribeGroup",<br />                "identitystore:DescribeUser",<br />                "sso:DescribePermissionsPolicies",<br />                "identitystore-auth:BatchGetSession",<br />                "sso:DescribeInstanceAccessControlAttributeConfiguration",<br />                "account:ListRegions",<br />                "sso-directory:ListMembersInGroup",<br />                "sso:ListProfiles",<br />                "sso:SearchUsers",<br />                "sso:GetPermissionSet",<br />                "sso-directory:DescribeGroups",<br />                "organizations:ListCreateAccountStatus",<br />                "sso-directory:DescribeUserByUniqueAttribute",<br />                "identitystore:DescribeGroupMembership",<br />                "sso-directory:SearchUsers",<br />                "identitystore:ListGroups",<br />                "sso:DescribePermissionSet",<br />                "sso:GetProfile",<br />                "sso-directory:ListExternalIdPCertificates",<br />                "sso-directory:GetUserPoolInfo",<br />                "organizations:ListPoliciesForTarget",<br />                "sso:ListPermissionSets",<br />                "sso:ListPermissionSetsProvisionedToAccount",<br />                "organizations:ListTargetsForPolicy",<br />                "organizations:ListTagsForResource",<br />                "sso:GetPermissionsPolicy",<br />                "identitystore-auth:ListSessions",<br />                "sso-directory:DescribeProvisioningTenant",<br />                "sso:GetSsoConfiguration",<br />                "sso:GetPermissionsBoundaryForPermissionSet",<br />                "organizations:ListAWSServiceAccessForOrganization",<br />                "sso:ListAccountAssignmentCreationStatus",<br />                "organizations:ListPolicies",<br />                "sso-directory:DescribeUsers",<br />                "identitystore:ListGroupMembershipsForMember",<br />                "organizations:ListHandshakesForOrganization",<br />                "organizations:ListDelegatedAdministrators",<br />                "organizations:ListAccounts",<br />                "sso:ListAccountsForProvisionedPermissionSet",<br />                "iam:ListPolicyVersions",<br />                "sso-directory:ListGroupsForMember",<br />                "identitystore:DescribeGroup",<br />                "organizations:ListParents",<br />                "ds:DescribeDirectories",<br />                "sso-directory:IsMemberInGroup",<br />                "sso:GetSSOStatus",<br />                "sso-directory:ListProvisioningTenants"<br />            ],<br />            "Resource": "*"<br />        }<br />    ]<br />}</code></pre></div></div></p></div></div></li>
                                                        <li value="3">Create another policy in your AWS management account that contains permissions to discover resources. Call this policy, for example,  <span class="userinput">OktaPA_CIEM_ResourceDiscovery_Policy</span>. This policy should have the following permissions:
				<div class="mcf_dd"><div class="mcf_ddhead">Click here to see the permissions.<br /></div><div class="mcf_dd_body"><p><div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a><div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>{<br />"Version": "2012-10-17",<br />"Statement": [<br />        {<br />            "Sid": "VisualEditor0",<br />            "Effect": "Allow",<br />            "Action": [<br />                    "rds:DescribeDBInstances",<br />                    "iam:GetPolicyVersion",<br />                    "iam:ListPolicyVersions"<br />                        ],<br />            "Resource": "*"<br />        }<br />            ]<br />}</code></pre></div></div></p></div></div></li>
                                                        <li value="4">For each member account in your AWS organization, create another <span class="userinput">OktaPA_CIEM_ResourceDiscovery_Policy</span>. Grant the same permissions as in the previous step to allow for the discovery of resources in all member accounts.
                <div class="noteOkta"><p class="noteContent">If this policy and a suitable role aren't created in a member account, <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> can’t discover entitlements and resources in that account.</p></div></li>
                                                        <li value="5">Log in to your <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> account and create an AWS connection. Note the Okta AWS Account ID and External ID, you need them in a subsequent step. See <a href="#Connect" class="MCXref xref">Connect your AWS account to Okta Privileged Access</a>.</li>
                                                        <li value="6">Create an IAM role in the AWS management account that will be linked to the policies you created.<ol style="list-style-type: lower-alpha;"><li value="1">In the IAM console, go to the <span class="wintitle">Roles</span> page and click <span class="uicontrol">Create role</span>.</li><li value="2">In the <span class="wintitle">Select trusted entity</span> page, select <span class="menucascade"><span class="uicontrol">AWS Account</span><span class="uicontrol">Another AWS Account</span></span>.</li><li value="3">Paste the <span class="mc-variable okta-variables.ProductName variable">Okta</span> AWS account ID that you copied earlier.</li><li value="4">Select the <span class="uicontrol">Require external ID</span> option, and paste the <span class="mc-variable okta-variables.ProductName variable">Okta</span> AWS account External ID you copied earlier.</li><li value="5">Select the two permissions policies that you created and associate them with the role.</li><li value="6">Give the role a meaningful name, such as <span class="userinput">OktaPA_CIEM_Role</span>.</li><li value="7">After the role is created, copy the ARN of the role.</li><li value="8">Go to your <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> dashboard, paste it into the connection <span class="wintitle">Create connection screen</span>, and test the connection. See <a href="#Connect" class="MCXref xref">Connect your AWS account to Okta Privileged Access</a>.</li></ol></li>
                                                        <li value="7">Create another role in the AWS management account.<ol style="list-style-type: lower-alpha;"><li value="1">In the IAM console, go to the <span class="wintitle">Roles</span> page and click <span class="uicontrol">Create role</span>.</li><li value="2">In the <span class="wintitle">Select trusted entity</span> page, select <span class="uicontrol">Custom trust policy</span>.</li><li value="3">In the policy editor, select <span class="uicontrol">Add a principal</span>, and then choose <span class="uicontrol">IAM Roles</span> for <span class="wintitle">Principal type</span>.</li><li value="4">Paste the ARN of the <span class="userinput">OktaPA_CIEM_Role</span> you copied earlier into the <span class="uicontrol">ARN</span> field.</li><li value="5">Click <span class="uicontrol">Add a condition</span>. Choose <span class="uicontrol">sts:ExternalId</span> as the condition key.</li><li value="6">Choose <span class="uicontrol">StringEquals</span> for the <span class="wintitle">Operator</span>, and then paste the Okta AWS account External ID you copied earlier into the value field.</li><li value="7">Add the resource discovery policy that you created earlier to the role, in this example, it’s the policy named <span class="userinput">OktaPA_CIEM_ResourceDiscovery_Policy</span>.</li><li value="8">Click <span class="uicontrol">Next</span>.</li><li value="9">Provide the exact name for this role: <span class="userinput">OktaPAMResourcesReadOnlyRole</span>. <div class="noteOkta"><p class="noteContent">The role name must match the exact name. If another role name is used, discovery won't function.</p></div></li><li value="10">Copy the ARN for this role once it's created; you need it in subsequent steps.</li></ol></li>
                                                        <li value="8">Repeat the previous step to create this <span class="userinput">OktaPAMResourcesReadOnlyRole</span> in all downstream member accounts in your organization. Copy the ARN for this role for each account that you create it in.
                <div class="noteOkta"><p class="noteContent">If this policy and a suitable role aren't created in a member account, <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> can’t discover entitlements and resources in that account.</p></div></li>
                                                        <li value="9">Create another policy in your management account that will be used to enable your management account and Okta’s AWS account to interact with your member accounts. You can call this policy <span class="userinput">OktaPA_CIEM_Assume_Role</span>.<ol style="list-style-type: lower-alpha;"><li value="1">Choose <span class="uicontrol">STS</span> as the service for this policy.</li><li value="2">For actions <span class="wintitle">Allowed</span>, choose <span class="menucascade"><span class="uicontrol">WriteAssumeRole</span></span>.</li><li value="3">For <span class="wintitle">Resources</span>, choose <span class="uicontrol">Specific</span>, and then click <span class="uicontrol">Add ARNs</span> link to restrict access.</li><li value="4">Select <span class="uicontrol">Text</span> on the dialog that appears, and then paste in the ARN values for the <span class="userinput">OktaPAMResourcesReadOnlyRole</span> you copied earlier for each individual AWS member account role you created.</li><li value="5">Click <span class="uicontrol">Add ARNs</span>.</li><li value="6">Name the policy <span class="userinput">OktaPA_CIEM_Assume_Role</span>.</li></ol></li>
                                                        <li value="10">Finally, attach the policy to the role created earlier in your management account. In this case, the management account is <span class="userinput">OktaPA_CIEM_Role</span>.</li>
                                                    </ol>
                                                    <h2><a name="Connect"></a>Connect your AWS account to <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span></h2>
                                                    <ol>
                                                        <li value="1">Identify your AWS account ID.<ol style="list-style-type: lower-alpha;"><li value="1">Go to the <span class="mc-variable workflows_connectors.Amazon_Web_Services variable">Amazon Web Services</span> management console.</li><li value="2">At the top of the page, select the dropdown menu next to your profile name and click <span class="uicontrol">My Account</span>.</li><li value="3">Under <span class="wintitle">Account Settings</span>, note your account ID number.</li></ol></li>
                                                        <li value="2">
                                                            <p>Open a new browser, and sign in to your <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> account.</p>
                                                        </li>
                                                        <li value="3">Create an AWS IAM connection. Keep this window open as you're configuring AWS IAM roles and creating this connection simultaneously.<ol style="list-style-type: lower-alpha;"><li value="1">In your <span class="mc-variable okta-feature-names.Okta_Privileged_Access variable">Okta Privileged Access</span> dashboard, go to <span class="menucascade"><span class="uicontrol">Resource Administration</span><span class="uicontrol">Cloud Connections</span></span>.</li><li value="2">Click  <span class="menucascade"><span class="uicontrol">Create connection</span><span class="uicontrol"> AWS IAM connection</span></span>.</li><li value="3">Configure the cloud account settings: <table style="width: 100%;mc-table-style: url('../../resources/tablestyles/standard.css');" class="TableStyle-standard" cellspacing="0"><col class="TableStyle-standard-Column-Column1" style="width: 144px;" /><col class="TableStyle-standard-Column-Column1" /><thead><tr class="TableStyle-standard-Head-Header1"><th class="TableStyle-standard-HeadF-Column1-Header1">Setting</th><th class="TableStyle-standard-HeadD-Column1-Header1">Action</th></tr></thead><tbody><tr class="TableStyle-standard-Body-Body1"><td class="TableStyle-standard-BodyF-Column1-Body1"><p>Connection name</p></td><td class="TableStyle-standard-BodyD-Column1-Body1"><p>Enter a connection name.</p></td></tr><tr class="TableStyle-standard-Body-Body2"><td class="TableStyle-standard-BodyF-Column1-Body2"><p>AWS Management account ID</p></td><td class="TableStyle-standard-BodyD-Column1-Body2"><p>Enter the ID of your main AWS management account that you noted earlier.</p></td></tr><tr class="TableStyle-standard-Body-Body1"><td class="TableStyle-standard-BodyC-Column1-Body1"><p>AWS role</p></td><td class="TableStyle-standard-BodyA-Column1-Body1"><p>Enter the ARN of the AWS IAM role. See <a href="#Create" class="MCXref xref">Create and configure AWS IAM roles</a> roles to get the ARN.</p><p><span class="wintitle">Okta AWS Account ID</span> and <span class="wintitle">External ID</span> fields are automatically populated.</p><p>Make note of the External ID value, as you require it when creating AWS IAM roles. It's related to an AWS service account managed by <span class="mc-variable okta-variables.ProductName variable">Okta</span> and is distinct from your AWS Account ID. For details on using an External ID, see the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html" target="_blank">AWS documentation</a>.</p></td></tr></tbody></table></li><li value="4">Click <strong>Test</strong>, and verify that the connection was successful.</li><li value="5">Click <strong>Save</strong>.</li></ol></li>
                                                    </ol>
                                                    <h2>Next steps</h2>
                                                    <p><a href="pam-entitlement-analysis-job.htm" class="MCXref xref">Entitlement analysis</a>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-test="copyrightNotice">©  <span class="mc-variable okta-variables.Year variable">2024</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <script src="../../resources/scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../resources/scripts/js/app.js">
                                    </script>
                                    <script src="../../resources/scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../resources/scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../resources/scripts/coveo-resources/js/coveo.madcapflare.requirejs.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../resources/scripts/coveo-resources/js/coveo.madcapflare.okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                    <!-- Feedback tab for Qualtrics survey -->
                                    <div id="feedback-tab" data-mc-conditions="Primary.live-site-only"><a id="feedback-link" href="#" onclick="openSurvey();  return false" target="_blank" title="Submit feedback"><div id="feedback-container"><p id="feedback-text" translate="no">Feedback</p></div></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
