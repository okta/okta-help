<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="Devices|Device Trust" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Okta Device Trust for managed Windows computers prevents unmanaged computers from accessing apps. A Device Registration Task enrolls individual workstations." />
        <meta name="viewport" content="width=device-width, height=device-height" /><title>Enforce Okta Device Trust for managed Windows computers | Okta</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/stylesheets/print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../resources/stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
        function openSurvey() {
            window.open('https://surveys.okta.com/jfe/form/SV_e4L0iW8a3tz8Yol?source=' + encodeURIComponent(document.location.href), '_blank');
        }
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <div id="coveo_dev_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.DevOrgId variable">oktanonproduction1il1gtac7</span>
                                    </div>
                                    <div id="coveo_dev_token" style="Display:None"><span class="mc-variable okta-coveo-config.DevSearchToken variable">xxf1de37f5-c8aa-42db-a8ef-0cbf06dfa5e3</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPublish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar" data-mc-conditions="Primary.live-site-only">
                                            <div class="dropdown" data-test="menuBarCategory" id="documentationMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Documentation <em class="fa fa-caret-down"></em></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=oie-index" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=index-admin" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_main" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=csh-asa-overview" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-Okta-workflows" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="relnotesMenu" data-mc-conditions="MultiProdPublish.DocMenu">
                                                <button class="dropbtn">Release notes <em class="fa fa-caret-down"></em></button>
                                                <div class="dropdown-content" data-test="menuBarItems">
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oie&amp;id=csh-oie-release-notes" data-test="menuBarLink">Identity Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?id=ext_okta_relnotes" data-test="menuBarLink">Classic Engine</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=oag&amp;id=ext_oag_releasenotes" data-test="menuBarLink">Access Gateway</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=asa&amp;id=ext-asa-releasenotes" data-test="menuBarLink">Advanced Server Access</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/okta_help.htm?type=wf&amp;id=ext-workflows-releasenotes" data-test="menuBarLink">Workflows</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="oktaDevDocsMenu"><a href="https://developer.okta.com/" target="_blank" data-test="menuBarLink">Okta Developer</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="auth0Menu"><a href="https://auth0.com/docs" target="_blank" data-test="menuBarLink">Auth0</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="trainingMenu"><a href="https://www.okta.com/services/training/" target="_blank" data-test="menuBarLink">Training</a>
                                            </div>
                                            <div class="dropdown" data-test="menuBarCategory" id="supportMenu"><a href="https://support.okta.com/help/s/?language=en_US" target="_blank" data-test="menuBarLink">Support</a>
                                            </div>
                                        </div>
                                        <div class="logo_container" id="OktaBanner" data-mc-conditions="Primary.live-site-only"><a class="logo" href="https://help.okta.com/okta_help.htm?id=csh-index" data-test="OktaBanner"><img src="../../resources/images/okta-assets/logo.png" alt="Okta Docs" title="Okta Docs" data-test="OktaBannerImg" /></a>
                                        </div>
                                        <div class="toolbar-main" data-test="toolBar" data-mc-conditions="Primary.live-site-only">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics" data-test="bodyWrapper">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="oie-label" data-mc-conditions="MultiProdPublish.Classic">
                                                <img class="oie-label" title="Label: Okta Classic Engine content" src="../../resources/images/okta-assets/classic_engine.svg" />
                                            </div>
                                            <div class="body-main" data-test="bodyContent">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1><a name="top"></a>Enforce <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for managed Windows computers</h1>
                                                    <div id="microcontent1">
                                                        <p><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for Windows allows you to prevent unmanaged Windows computers from accessing corporate SAML and WS-Fed cloud apps. It works with any browser or native app that can access the certificate store when performing the federated authentication flow to <span class="mc-variable okta-variables.ProductName variable">Okta</span>. This includes Edge, Internet Explorer, Chrome, and Microsoft Office clients that support Modern <span class="disableGlossary">Authentication</span>. </p>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt-win-auth-flow-diagram.png" data-mc-popup-alt="The image illustrates how Okta Device Trust is enforced for managed Windows devices."><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="927" data-mc-height="487" src="../../resources/images/dt-win-auth-flow-diagram_thumb_220_220.png" alt="The image illustrates how Okta Device Trust is enforced for managed Windows devices." tabindex="" /></a>
                                                        </p>
                                                    </div>
                                                    <p><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for Windows provides these key benefits:</p>
                                                    <ul>
                                                        <li>Ensures that only end users on domain-joined Windows computers can seamlessly SSO into SAML and WS-Fed cloud apps</li>
                                                        <li>
			Protects enterprise data even when there is no defined network boundary</li>
                                                        <li>Provides a frictionless end user experience by utilizing the <span class="mc-variable okta-variables.ProductName variable">Okta</span> Certificate Authority
			</li>
                                                        <li>Support for <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> enrollment in multi-forest environments.</li>
                                                    </ul>
                                                    <h2><a name="Prerequi"></a>Prerequisites</h2>
                                                    <h3>Client workstations</h3>
                                                    <ul>
                                                        <li>Active Directory domain-joined Windows computer(s) running Microsoft Windows 7, Windows 8.1, or Windows 10.</li>
                                                        <li>.NET Framework version 4.5.2 and later. The Device Registration Task checks whether a supported version of .NET Framework is present, and if not, installs a supported version automatically. See <a href="#KnownIssues">Known Issues</a>.</li>
                                                    </ul>
                                                    <h3>Active Directory and IWA servers</h3>
                                                    <p>See <a href="../directory/ad-agent-manage-integration.htm" class="MCXref xref">Manage your Active Directory integration</a> and <a href="../directory/configuring_desktop_sso.htm">IWA agent</a> documentation.</p>
                                                    <h3>IWA agent</h3>
                                                    <p><a href="../settings/version_histories/ver_history_sso_iwa_agent.htm">Device Trust-capable version</a> of the <span class="mc-variable okta-variables.ProductName variable">Okta</span> IWA web agent. For installation details, see <a href="../directory/configuring_desktop_sso.htm">IWA documentation</a>. Note: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> enrollment in multi-forest environments requires IWA web app version 1.12.2+. An IWA web app running in one forest can detect and assess the trust posture of Windows desktop devices located in another trusted forest and then allow these devices to enroll in <span class="mc-variable okta-feature-names.Device_Trust_for_Windows variable">Device Trust for Windows</span>.</p>
                                                    <h3>Supported browsers</h3>
                                                    <ul>
                                                        <li>Microsoft Internet Explorer versions 10 and 11</li>
                                                        <li>Microsoft Edge (current and previous release)</li>
                                                        <li>Google Chrome (current and previous release)</li>
                                                    </ul>
                                                    <h2>Before you begin</h2>
                                                    <ul>
                                                        <li>Web view must have access to the device certificate store: <span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> computers works with any SAML/WS-Fed-enabled app that supports authentication through a webview. The web view in which authentication is performed must have access to the certificate store on the device. This includes Microsoft Office clients that support Modern Authentication, among others. See the Microsoft article <a href="https://www.microsoft.com/en-us/microsoft-365/blog/2015/11/19/updated-office-365-modern-authentication-public-preview/" target="_blank">Updated Office 365 modern authentication</a>.  </li>
                                                        <li>Device + end user authentication requires a network connection: For the IWA web app to authenticate end users and devices, end users must be logged-in to your company's network at the time the Device Registration Task runs. See <a href="#B.1">IWA web app</a>.</li>
                                                        <li>Device Trust enrollment is not supported when Okta is in read-only mode: Devices  cannot be enrolled in <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> if the cell in which your Okta org resides is in <a href="#" class="MCTextPopup popup popupHead">read-only mode<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>A mode during which most administrative operations are disabled and a banner is displayed in the admin (not end-user) Dashboard. During read-only mode, all background jobs such as imports, OMM enrollment, OMM deprovisioning, and JIT provisioning are queued, and all are restarted when read-only mode is disabled.</span></a>.</li>
                                                        <li>Support for proxy server environments: To ensure that this device trust solution works in environments that implement a proxy server, you must install Device Registration Task version 1.2.1 or higher through a command line and append the appropriate HttpProxy parameter to the installation command. See <a href="#Install" class="MCXref xref">Install the Registration Task</a>.</li>
                                                        <li>Make sure that certificates are installed on targeted computers: Before you configure the <span class="uicontrol">Trusted</span> option for apps in <span class="uicontrol">App Sign On Policy</span> rules, you must make sure that certificates are installed in the certificate store on the domain-joined computers you have targeted for this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution. If certificates are not installed and the Trusted setting is enabled, users are denied access to the app and are redirected to a security message advising them to contact their administrator. (You can configure the message to include a <span class="uicontrol">Learn more</span> link to more information. See <a href="#PartA">Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</a>). To verify certificate enrollment, <span class="mc-variable okta-variables.ProductName variable">Okta</span> recommends that you use your management tool to parse the <span class="uicontrol">Windows Event Viewer</span>, or use a command line to query the user certificate store directly. Look for <span class="uicontrol"><span class="mc-variable okta-variables.ProductName variable">Okta</span> MTLS certificate</span>.</li>
                                                        <li>Take care when disabling the <span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span> setting: Don't disable the <span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span> setting on the <span class="menucascade"><span class="uicontrol">Security</span><span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span></span> page if you have also configured an app sign-on policy that allows trusted Windows devices. Otherwise, your <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration will be in an inconsistent state and users with untrusted devices won't be shown the security message advising them to contact their administrator, nor the <span class="uicontrol">Learn more</span> link to more information (if configured; see <a href="#PartA">Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</a>).</li>
                                                        <li>
                                                            <p>Before asking <span class="uicontrol"><span class="mc-variable okta-variables.ProductName variable">Okta</span></span> Support to disable<span class="uicontrol"> </span><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span>: First make sure to change the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting in the app sign-on policy rules to Any (Applications &gt; app &gt; Sign On). If you do not make this change and then later have <span class="mc-variable okta-variables.ProductName variable">Okta</span> Support re-enable <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> capability for your org, the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting in app sign-on policy rules will take effect immediately, which you may not have expected.</p>
                                                        </li>
                                                        <li>
                                                            <p>To verify installation of the Registration Task, use an appropriate detection setting: After installing the Device Registration Task on your managed Windows computers, SCCM runs a script  to verify that installation was successful. Make sure to specify either <span class="uicontrol">File System</span> or <span class="uicontrol">Registry</span> in your <span class="uicontrol">Detection Rule</span>. Don't use the <span class="uicontrol">Windows Installer</span> setting type to detect the installation, as SCCM cannot detect the Device Registration Task using that setting. </p>
                                                        </li>
                                                        <li>Ensure clients can complete the MTLS handshake:  If your org implements proxy servers/proxy clients or endpoint protection software, make sure to configure them in a way that doesn't block the Mutual TLS certificate exchange (handshake) that occurs during this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow. See <a href="#MTLS-handshake">Troubleshooting</a>.</li>
                                                        <li>Shared-terminal scenarios not supported: <span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> doesn't support shared-terminal scenarios in which multiple end users log in to the same domain-joined workstation.</li>
                                                        <li>
                                                            <p>Apps secured by <span style="font-weight: normal;" class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> are shown as locked on the <span style="font-weight: normal;" class="mc-variable okta-feature-names.Okta_End-User_Dashboard variable">Okta End-User Dashboard</span>. A lock icon is shown beside apps secured by <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> under these conditions:</p>
                                                            <ul>
                                                                <li>  The end users accessed the dashboard in a desktop or mobile browser (not in <span class="mc-variable Mobile.Okta_Mobile variable">Okta Mobile</span>). </li>
                                                                <li><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> is enabled for the org.</li>
                                                                <li>The device is not trusted.</li>
                                                                <li>The end user tried to access any <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured app from their dashboard. </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                    <h2>Procedures</h2>
                                                    <h3>Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</h3><a name="PartA"></a>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">Do not disable the Windows <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting on the <span class="menucascade"><span class="uicontrol">Security</span><span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span></span> page if you have also configured an app sign-on policy that allows trusted Windows devices. Otherwise, your <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration will be in an inconsistent state and users with untrusted devices won't be shown the security message advising them to contact their administrator, nor the <span class="uicontrol">Learn more</span> link to more information (if configured; see <a href="#LearnMoreStep">Enable the global Device Trust setting for your org</a>).</p>
                                                    </div>
                                                    <ol>
                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Admin_Console variable">Admin Console</span>, go to <span class="menucascade"><span class="uicontrol">Security</span><span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span></span>.</li>
                                                        <li value="2">In the <span class="wintitle"><span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span></span>section, click <span class="uicontrol">Edit</span>.</li>
                                                        <li value="3">Select <span class="uicontrol">Enable <span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span></span>.</li>
                                                        <li value="4"><a name="LearnMoreStep"></a>Optional. In the <span class="uicontrol">Learn more</span> link field, you can enter an externally-accessible redirect URL where end users with untrusted devices can find more information. The security message shown to these end users will include a <span class="uicontrol">Learn more</span> link that redirects to your specified URL.
							<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_security_urlspecified_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="386" data-mc-height="265" src="../../resources/images/dt_security_urlspecified_2_thumb_220_220.png" tabindex="" /></a></p><p>If you choose not to specify a URL in this optional field, these end users are shown the same message but without the <span class="uicontrol">Learn more</span> link.</p><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_security_nourlspecified_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="373" data-mc-height="198" src="../../resources/images/dt_security_nourlspecified_2_thumb_220_220.png" tabindex="" /></a></p></li>
                                                        <li value="5">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="6">Proceed to Step 2.</li>
                                                    </ol>
                                                    <h3><a name="PartB"></a> Enroll the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate on domain-joined Windows computers</h3>
                                                    <p>Perform the four sub-procedures in this section to ensure that the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate is installed successfully on domain-joined Windows computers.</p>
                                                    <h3>2.1 Install a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-supported version of the <span class="mc-variable okta-variables.ProductName variable">Okta</span> IWA web app in your AD domain
        </h3><a name="B.1"></a>
                                                    <p><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> uses the IWA web app to confirm the security posture of Windows computers and users by validating that both are joined to your Active Directory domain. (Enrollment is also supported in multi-forest environments. See <a href="#Prerequi">Prerequisites</a>.) Okta then issues a certificate to the Windows computer enabling <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flows to Okta-federated apps. Private keys associated with the Okta certificate never leave the Windows computer. Certificates are renewed automatically once a year, approximately 30 days before they expire.</p>
                                                    <p>The role of the IWA web app is limited to the certificate enrollment and renewal process. Once the certificate is installed, the Device Registration Task no longer needs to communicate with the IWA web app in order for end users to access apps. Desktop SSO doesn't need to be <span class="uicontrol">On</span> in <span class="menucascade"><span class="uicontrol">Security</span><span class="uicontrol">Delegated Authentication</span></span> for <span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> desktop to function. </p>
                                                    <ol>
                                                        <li value="1">To download the  IWA web app, configure a link as follows:</li>
                                                        <p><span class="varname">https://&lt;org&gt;.&lt;okta/oktapreview&gt;.com/static/agents/iwa/OktaSsoIwa-x.x.x.exe</span>
                                                        </p>
                                                        <p>Where:</p>
                                                        <ul>
                                                            <li><span class="code">&lt;org&gt;</span> is the name of your org</li>
                                                            <li><span class="code">&lt;okta/oktapreview&gt;</span> denotes either your <span class="mc-variable okta-variables.ProductName variable">Okta</span> Production or Preview environment.</li>
                                                            <li><span class="code">oktaSsoIwa-x.x.x.exe</span> is the version of the IWA web app that supports <span class="mc-variable okta-feature-names.Device_Trust_for_Windows variable">Device Trust for Windows</span>. For the current <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-capable version, see <a href="../settings/version_histories/ver_history_sso_iwa_agent.htm">SSO IWA Web App Version History</a>.</li>
                                                        </ul>
                                                        <p>For example, a link for downloading version 1.11.0 to the org <span class="code">example.oktapreview.com</span> would look like this:</p>
                                                        <p><span class="varname">https://example.oktapreview.com/static/agents/iwa/OktaSsoIwa-1.11.0.exe</span>
                                                        </p>
                                                        <li value="2">Install the <span class="mc-variable okta-variables.ProductName variable">Okta</span> IWA web app as detailed in <a href="../directory/configuring_desktop_sso.htm#top">Install and Configure the Okta IWA Web App for Desktop SSO</a>.</li>
                                                        <li value="3"><a name="Test_IWA_web_app"></a>To make sure that the IWA web agent is operational, test it as <a href="../directory/configuring_desktop_sso.htm">described in the guide</a>. </li>
                                                        <li value="4"><a name="ModWebConfig"></a>If you use HTTPS for IWA, you must modify the IWA web.config file as follows:</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">On the server running the IWA web agent, access the file <span class="filepath">C:\inetpub\wwwroot\IWA\web.config</span></li>
                                                            <li value="2">Locate the section <span class="code">&lt;system.serviceModel&gt;</span> and replace it with the following:
                    <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a><div style="mc-code-lang: HTML;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #63a35c; ">&lt;system.serviceModel&gt;</span><br /><span style="color: #63a35c; ">&lt;bindings&gt;</span><br /><span style="color: #63a35c; ">&lt;webHttpBinding&gt;</span><br /><span style="color: #63a35c; ">&lt;binding <span style="color: #795da3; ">name</span> <span style="color: #333333; ">=</span> <span style="color: #df5000; ">"SecureBindingForDeviceTrust"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;security <span style="color: #795da3; ">mode</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"Transport"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;transport <span style="color: #795da3; ">clientCredentialType</span> <span style="color: #333333; ">=</span> <span style="color: #df5000; ">"Windows"</span> <span style="color: #795da3; ">proxyCredentialType</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"Windows"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>security&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>binding&gt;</span><br /><span style="color: #63a35c; ">&lt;binding <span style="color: #795da3; ">name</span> <span style="color: #333333; ">=</span> <span style="color: #df5000; ">"HttpBindingForDeviceTrust"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;security <span style="color: #795da3; ">mode</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"TransportCredentialOnly"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;transport <span style="color: #795da3; ">clientCredentialType</span> <span style="color: #333333; ">=</span> <span style="color: #df5000; ">"Windows"</span> <span style="color: #795da3; ">proxyCredentialType</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"Windows"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>security&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>binding&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>webHttpBinding&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>bindings&gt;</span><br /><span style="color: #63a35c; ">&lt;services&gt;</span><br /><span style="color: #63a35c; ">&lt;service <span style="color: #795da3; ">name</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrust"</span> <span style="color: #795da3; ">behaviorConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrustBehavior"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;endpoint <span style="color: #795da3; ">binding</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttpBinding"</span> <span style="color: #795da3; ">bindingConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"SecureBindingForDeviceTrust"</span> <span style="color: #795da3; ">contract</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.IDeviceTrust"</span> <span style="color: #795da3; ">behaviorConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttp"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>service&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>services&gt;</span><br /><span style="color: #63a35c; ">&lt;behaviors&gt;</span><br /><span style="color: #63a35c; ">&lt;endpointBehaviors&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #795da3; ">behavior</span> <span style="color: #795da3; ">name</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttp"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;webHttp<span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span><span style="color: #795da3; ">behavior</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>endpointBehaviors&gt;</span><br /><span style="color: #63a35c; ">&lt;serviceBehaviors&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #795da3; ">behavior</span> <span style="color: #795da3; ">name</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrustBehavior"</span>&gt;</span><br /><span style="color: #969896; ">&lt;!-- To avoid disclosing metadata information, set the value below to false before deployment --&gt;</span><br /><span style="color: #63a35c; ">&lt;serviceMetadata <span style="color: #795da3; ">httpGetEnabled</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"false"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #969896; ">&lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;</span><br /><span style="color: #63a35c; ">&lt;serviceDebug <span style="color: #795da3; ">includeExceptionDetailInFaults</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"false"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;serviceCredentials&gt;</span><br /><span style="color: #63a35c; ">&lt;windowsAuthentication <span style="color: #795da3; ">allowAnonymousLogons</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"False"</span> <span style="color: #795da3; ">includeWindowsGroups</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"True"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>serviceCredentials&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span><span style="color: #795da3; ">behavior</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>serviceBehaviors&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>behaviors&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>system.serviceModel&gt;</span></code></pre></div></div><p>Here's a detailed look at the values that configure HTTP or HTTPS binding:</p><p>HTTPS binding configured:</p><div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a><div style="mc-code-lang: HTML;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #63a35c; ">&lt;services&gt;</span><br /><span style="color: #63a35c; ">&lt;service <span style="color: #795da3; ">name</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrust"</span> <span style="color: #795da3; ">behaviorConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrustBehavior"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;endpoint <span style="color: #795da3; ">binding</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttpBinding"</span> <span style="color: #795da3; ">bindingConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"SecureBindingForDeviceTrust"</span> <span style="color: #795da3; ">contract</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.IDeviceTrust"</span> <span style="color: #795da3; ">behaviorConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttp"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>service&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>service</span></code></pre></div></div><p>HTTP binding configured:</p><div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a><div style="mc-code-lang: HTML;" class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #63a35c; ">&lt;services&gt;</span><br /><span style="color: #63a35c; ">&lt;service <span style="color: #795da3; ">name</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrust"</span> <span style="color: #795da3; ">behaviorConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.DeviceTrustBehavior"</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;endpoint <span style="color: #795da3; ">binding</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttpBinding"</span> <span style="color: #795da3; ">bindingConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"HttpBindingForDeviceTrust"</span> <span style="color: #795da3; ">contract</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"OktaSSO.IDeviceTrust"</span> <span style="color: #795da3; ">behaviorConfiguration</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"webHttp"</span><span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;endpoint <span style="color: #795da3; ">address</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"mex"</span> <span style="color: #795da3; ">binding</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"mexHttpBinding"</span> <span style="color: #795da3; ">contract</span><span style="color: #333333; ">=</span><span style="color: #df5000; ">"IMetadataExchange"</span> <span style="color: #0086b3; ">/</span>&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>service&gt;</span><br /><span style="color: #63a35c; ">&lt;<span style="color: #0086b3; ">/</span>services&gt;</span></code></pre></div></div></li>
                                                            <li value="3">Save and close the web.config file.</li>
                                                            <li value="4">From your Windows command prompt, restart Internet Information Services (IIS) by issuing the following commands:
											<p><span class="code">iisreset /stop</span></p><p><span class="code">iisreset /start</span></p></li>
                                                            <li value="5">Before proceeding, retest the IWA web app as described in <a href="../directory/configuring_desktop_sso.htm">Install and Configure the IWA Web App for Desktop SSO</a>.</li>
                                                            <li value="6">If you haven't already, install the Device Registration Task as described in <a href="#B.2">Obtain and install the Device Registration Task</a>.</li>
                                                        </ol>
                                                    </ol>
                                                    <h3><a name="B.2"></a>2.2 Obtain and install the Device Registration Task
        </h3>
                                                    <p>Review this information before you begin.</p>
                                                    <h3>Trusted Platform Module (TPM)</h3>
                                                    <p> To leverage the security benefits of TPM, see <a href="../device-trust/dt-win-tpm.htm" class="MCXref xref">Enhance Windows Device Trust security with Trusted Platform Module (TPM)</a>.</p>
                                                    <h3> Schedule the Registration Task to run when end users are on the corporate network</h3>
                                                    <p>Once installed on domain-joined computers, the Registration Task runs:</p>
                                                    <ul>
                                                        <li>Immediately after it is installed</li>
                                                        <li>Whenever the user logs on to the computer</li>
                                                        <li>Once every 24 hours, starting with the time that the Registration Task first ran.</li>
                                                    </ul>
                                                    <p>It is important that you configure your management tool to schedule the Registration Task to run when end users are on the corporate network. When the Registration Task runs, it triggers the certificate enrollment flow and creates a Scheduled Task that will run every 24 hours and whenever the user logs on to the computer. This retry behavior helps both certificate enrollment and renewal scenarios. </p>
                                                    <h3>Automatic certificate renewal can only occur when end users are on the corporate network</h3>
                                                    <p>Certificates are valid for one year and are renewed automatically sometime within 30 days before expiration. In order for automatic renewal to succeed, end users must be logged on to the domain-joined computer and connected to your corporate network.</p>
                                                    <h3>Manually force certificate renewal</h3>
                                                    <p>You can manually force certificate renewal to try to fix the following problems (requires Device Registration Task 1.3.1 or later):</p>
                                                    <ul>
                                                        <li>An end user's certificate was incorrectly or accidentally revoked by the admin through the Admin Console (see <a href="#PartD">Revoke</a>).</li>
                                                        <li>The certificate was corrupted on the client due to accidental deletion, file corruption, or loss of the  private key.</li>
                                                    </ul>
                                                    <p>See <a href="#force-cert-renewal">Force certificate renewal in some circumstances</a>.</p>
                                                    <h3>Automatic certificate selection</h3>
                                                    <p>By default, the Registration Task configures registry keys on domain-joined Windows computers to allow supported Chrome, Edge, and IE browsers to automatically select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate that will be presented to <span class="mc-variable okta-variables.ProductName variable">Okta</span>. If appropriate for your environment, you can disable this behavior by adding the flag <span class="code">SkipBrowserSetup=true</span> to the installation command.</p>
                                                    <p>See <a href="#obtain-reg-task">Obtain the registration task</a>. For example, this would be necessary if you want to configure automatic certificate selection using a <a href="#B.4">Group Policy Object (GPO) tool</a>.</p>
                                                    <p>If you opt not to configure automatic certificate selection — either through the Registration Task or a GPO — end users are prompted to select the certificate when accessing the app. In that case, to make the selection easier for end users, only the <span class="mc-variable okta-variables.ProductName variable">Okta</span><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate will be shown to them.</p>
                                                    <h3>Proxy server environment</h3>
                                                    <p>If your organization routes internet traffic through a proxy server, note the following:</p>
                                                    <ul>
                                                        <li>You must install Device Registration Task version 1.2.1 or higher through a command line and append the appropriate <span class="code">HttpProxy</span> parameter to the installation command.
											<p>See <a href="#Install" class="MCXref xref">Install the Registration Task</a>.</p></li>
                                                        <li>If your org implements  proxy servers/proxy clients or endpoint protection software, make sure to configure them in a way that doesn't block the Mutual TLS certificate exchange (handshake) that occurs during this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow.
											<p>See <a href="#MTLS-handshake">Troubleshooting</a>.</p></li>
                                                    </ul>
                                                    <h3>Certificate revocation</h3>
                                                    <p>You may need to revoke an end user's <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s) from the <span class="mc-variable okta-variables.ProductName variable">Okta</span> Certificate Authority. This is recommended if the computer is lost or stolen. To re-secure an end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking their certificate(s), you need to remove the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from their computer before you enroll a new certificate. Certificate revocation doesn't remove existing certificates from managed Windows computers.</p>
                                                    <p>See <a href="#PartD">Revoke and remove <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates</a>.</p>
                                                    <h3>Use an appropriate Setting Type in SCCM to verify Device Registration Task installation</h3>
                                                    <p>After installing the Device Trust client on your managed Windows computers, SCCM runs a script  to verify that installation was successful. Make sure to specify either <span class="userinput">File System</span> or <span class="userinput">Registry</span> in your <span class="uicontrol">Detection Rule</span>. Do not use the <span class="uicontrol">Windows Installer</span> setting type to detect the installation, as SCCM cannot detect the Device Trust client using that setting. </p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_sccm_filesystemdetect.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="421" data-mc-height="414" src="../../resources/images/dt_sccm_filesystemdetect_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <h3><a name="obtain-reg-task"></a>Obtain the Registration Task</h3>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">To leverage the security benefits of the Trusted Platform Module (TPM), see <a href="../device-trust/dt-win-tpm.htm" class="MCXref xref">Enhance Windows Device Trust security with Trusted Platform Module (TPM)</a>.</p>
                                                    </div>
                                                    <p><a name="obtain-EA-reg-task"></a>
                                                    </p>
                                                    <h3>To obtain an Early Access (EA) version of the Registration Task
								</h3>
                                                    <p>Unlike the GA version, EA versions of the Device Registration Task are not available from the <span class="wintitle">Downloads</span> page in the <span class="mc-variable okta-variables.ProductName variable">Okta</span> Admin Console. To obtain an EA version, you must configure a link as follows:</p>
                                                    <p><span class="varname">https://&lt;org&gt;.&lt;okta/oktapreview&gt;.com/static/devicetrust/OktaDeviceRegistrationTaskSetup-x.x.x.&lt;msi/exe&gt;</span>
                                                    </p>
                                                    <p>Where:</p>
                                                    <ul>
                                                        <li>
                                                            <p><span class="varname">&lt;org&gt;</span> is the name of your org</p>
                                                        </li>
                                                        <li>
                                                            <p><span class="varname">&lt;okta/oktapreview&gt;</span> denotes either your <span class="mc-variable okta-variables.ProductName variable">Okta</span> Production or Preview environment.</p>
                                                        </li>
                                                        <li>
                                                            <p><span class="code">OktaDeviceRegistrationTaskSetup-<span class="uicontrol">x.x.x</span></span> is the version of the Registration Task. For the latest version of the Registration Task, see <a href="https://help.okta.com/okta_help.htm?id=ver-hist_dt-win-desktop" target="_blank">Device Trust for Windows Desktop Registration Task Version History</a>.</p>
                                                        </li>
                                                        <li>
                                                            <p><span class="code">&lt;msi/exe&gt;</span> is the file type of the Registration Task, either .msi or .exe.</p>
                                                        </li>
                                                    </ul>
                                                    <p>For example, a link for downloading .msi Registration Task version 1.4.0 to <span class="code">example.oktapreview.com</span> would look like this:</p><pre xml:space="preserve" id="code">https://example.oktapreview.com/static/devicetrust/OktaDeviceRegistrationTaskSetup-1.4.0.msi</pre>
                                                    <p>For version history, see <a href="https://help.okta.com/okta_help.htm?id=ver-hist_dt-win-desktop" target="_blank">Device Trust for Windows Desktop Registration Task Version History</a>.</p>
                                                    <h3>To obtain a Generally Available (GA) version of the Registration Task</h3>
                                                    <p>The latest GA version of the Registration Task is available from the <span class="wintitle">Downloads</span> page in .msi and .exe formats. For version history, see <a href="https://help.okta.com/okta_help.htm?id=ver-hist_dt-win-desktop" target="_blank">Device Trust for Windows Desktop Registration Task Version History</a>.</p>
                                                    <ol>
                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Admin_Console variable">Admin Console</span>, go to <span class="menucascade"><span class="uicontrol">Settings</span><span class="uicontrol">Downloads</span></span>.</li>
                                                        <li value="2">Scroll to <span class="uicontrol"><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span></span><span class="uicontrol">Agents</span> and then click <span class="uicontrol">Download Latest</span> for the type of installer you want (.msi or .exe).</li>
                                                    </ol>
                                                    <h3><a name="Install"></a>Install the Registration Task</h3>
                                                    <p>Install the Registration Task using either of the following methods:
									<h3><a name="InstallRegTask_WinDT"></a>Method 1: Distribute the Registration Task using a management tool (SCCM)</h3><p><a name="DistributeInstaller"></a>Follow your organization's procedure for distributing software to domain-joined workstations. If your organization uses SCCM, you may want to refer to the Microsoft article <a href="https://technet.microsoft.com/en-us/library/gg682082.aspx">How to Deploy Applications in Configuration Manager</a>. Execute the appropriate command for <span class="code">*.exe</span> or <span class="code">*.msi</span> installation.</p><h3>About the Device Registration Task and proxy servers</h3><p>If your organization routes internet traffic through a proxy server, you must do the following:</p><h3>Use a command line to install the Device Registration Task and include parameters</h3><p>Install Device Registration Task version 1.2.2+ through a command line and append the appropriate <span class="code">HttpProxy</span> parameter to the installation command. This is necessary because the Registration Task installer installs these two scheduled tasks:</p><ul><li>A user task that runs as the logged-in user.</li><li>A device task that runs as a network service. If you set up your proxy server(s) as part of your Internet Explorer (IE) configuration, the device task does not detect your IE settings unless you specify that behavior through a command line as shown in the following examples.</li></ul><p>Include the parameter appropriate for your environment:</p><h3>Proxy server environments
</h3><p><span class="code">HttpProxy=http://&lt;your proxy http url&gt;:&lt;port number&gt;</span></p><p>For example, the installation command that includes the proxy server parameter would look similar to this for:</p><p> MSI installation:</p><p><span class="code">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;/ HttpProxy=http://&lt;your proxy http url&gt;:&lt;port number&gt;"</span></p><p>EXE installation:</p><p><span class="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com HttpProxy=http://&lt;your proxy http url&gt;:&lt;port number&gt;</span></p><div class="noteOkta"><p class="noteContent">Make sure to add a space if you are also adding the parameter to disable automatic certificate handling.</p></div><h3>Proxy Auto-Configuration (PAC) environments</h3><p>A. Specify the PAC location</p><p><span class="code">HttpProxyPacLocation=http://mypacfile.url.location</span></p><p>For example, the installation command that includes the PAC location parameter would look similar to this for:</p><p> MSI installation:</p><p><span class="code">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;/ HttpProxyPacLocation=http://mypacfile.url.location"</span></p><p>EXE installation:</p><p><span class="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com HttpProxyPacLocation=http://mypacfile.url.location</span></p><div class="noteOkta"><p class="noteContent">Make sure to add a space if you are also adding the parameter to disable automatic certificate handling.</p></div><p>B. Optional. Allow your Okta org</p><p>If you implement a PAC file in your proxy environment, consider allowing your Okta org by adding an exception to the PAC file like this:</p><p><span class="code">if(localHostOrDomainIs(host,"*.okta.com"))</span></p><p><span class="code">{ return "DIRECT"; }</span><br /></p><h3>Ensure clients can complete the MTLS handshake</h3><div><p data-mc-conditions="SnippetConditionsForDevices.Windows Only">The Mutual TLS certificate exchange (handshake) in this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example). Make sure to configure  proxy servers/proxy clients, as well as any endpoint protection software you may implement, in a way that does not block your clients from completing the certificate exchange with Okta. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):</p><p><span class="code">*.okta.com</span></p><p><span class="code">*.okta-emea.com</span></p><p><span class="code">*.okta-gov.com</span></p></div><p>With automatic certificate challenge handling: MSI installation <span class="filepath">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;"</span></p><p>EXE installation <span class="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com</span></p><p>Without automatic certificate challenge handling: MSI installation <span class="filepath">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;/ <span class="uicontrol">SkipBrowserSetup=true</span>"</span></p></p>
                                                    <p>EXE installation</p>
                                                    <p><span class="varname">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com/ SkipBrowserSetup=true</span>
                                                    </p>
                                                    <h3>Method 2: Manually install the Registration Task</h3>
                                                    <p>This procedure is provided in case you want to install the Registration Task manually during the testing or Proof of Concept phase of your implementation.</p>
                                                    <ol>
                                                        <li value="1">Copy the Registration Task to the domain-joined Windows computer.</li>
                                                        <li value="2">Run the command prompt as an Administrator. </li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">Click <span class="uicontrol">Start</span>.</li>
                                                            <li value="2">In the search box, enter <span class="userinput">cmd</span>, and then press <span class="uicontrol">CTRL+SHIFT+ENTER</span>.								</li>
                                                        </ol>
                                                        <li value="3">Change directories to the location of the file. </li>
                                                        <li value="4">Issue the command appropriate for the file type, either *.msi or *.exe. For installation and proxy server details, see the previous section <a href="#InstallRegTask_WinDT">Distribute the Registration Task using a management tool (SCCM)</a>.</li>
                                                    </ol>
                                                    <h3>2.3 Verify certificate enrollment before you configure the Trusted option in app sign-on policy rules
        </h3><a name="B.3"></a>
                                                    <p>Before you configure the <span class="uicontrol">Trusted</span> option for apps in app sign-on policy rules, you must make sure that certificates are installed in the certificate store on the domain-joined computers you have targeted for this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution. If certificates are not installed and the Trusted setting is enabled, users are denied access to the app and are redirected to a security message advising them to contact their administrator. (You can configure the message to include a <span class="uicontrol">Learn more</span> link to more information. See <a href="#LearnMoreStep">Enable the global Device Trust setting for your org</a>). To verify certificate enrollment, Okta recommends that you use your management tool to parse the Windows Event Viewer, or use a command line to query the user certificate store directly. Look for <span class="uicontrol">Okta MTLS certificate</span>.</p>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">If an end user is deactivated, all <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates installed on their domain-joined Windows computer(s) are revoked (but not removed) automatically. To remove revoked certificates, see <a href="#PartD">Revoke and remove Device Trust certificates</a>.</p>
                                                    </div>
                                                    <p>Though you'll probably use a management tool to verify that certificates are installed on multiple domain-joined computers, here are two ways to check enrollment on a single computer:</p>
                                                    <h3>Verify with Windows Event Viewer</h3><a name="WinEventViewer"></a>
                                                    <ol>
                                                        <li value="1">Go to <span class="wintitle">Start</span> and enter <span class="userinput">event</span> in the search field.</li>
                                                        <li value="2">When <span class="uicontrol">Event Viewer</span> appears at the top of the <span class="uicontrol">Start</span> menu, press <span class="uicontrol">Enter</span> to open it.</li>
                                                        <li value="3">Expand <span class="wintitle">Applications and Services Logs</span>.</li>
                                                        <li value="4">Click <span class="uicontrol"><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span></span> and find Event ID 1000. </li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/verify_windowseventvwr.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="703" data-mc-height="385" src="../../resources/images/verify_windowseventvwr_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ol>
                                                    <h3><a name="Verify"></a>Verify with Microsoft Management Console
								</h3>
                                                    <ol start="1"><a name="VerifyCert_MMC"></a>
                                                        <li value="1">Go to <span class="uicontrol">Start</span> and enter <span class="userinput">mmc</span> in the search field to open the console.</li>
                                                        <li value="2">Go to <span class="uicontrol">File</span> and click <span class="uicontrol">Add/Remove Snap-in</span>.</li>
                                                        <li value="3">Select <span class="uicontrol">Certificates</span> and then click <span class="uicontrol">Add</span>.</li>
                                                        <li value="4">In the <span class="wintitle">Certificates snap-in</span> dialog box, select <span class="uicontrol">My user account</span>.</li>
                                                        <li value="5">Click <span class="uicontrol">Finish</span>.</li>
                                                        <li value="6">Click <span class="uicontrol">OK</span>.</li>
                                                        <li value="7">Under <span class="wintitle">Console Root</span>, expand <span class="uicontrol">Certificates - Current User</span>.</li>
                                                        <li value="8">Expand the <span class="uicontrol">Personal</span> folder, click <span class="uicontrol">Certificates</span> and see the <span class="uicontrol"><span class="mc-variable okta-variables.ProductName variable">Okta</span> MTLS certificate</span>. </li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/verify_msftmgmtconsole2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="661" data-mc-height="281" src="../../resources/images/verify_msftmgmtconsole2_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ol>
                                                    <h3>2.4. Optional. Use GPO to configure browsers to select the certificate automatically.
        </h3>
                                                    <p><a name="B.4"></a>If appropriate for your environment, you can use a Group Policy Object (GPO) tool instead of the default capability of the Device Registration Task to configure browsers to automatically select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate. If you use a GPO tool, make sure that you have added the flag <span class="code">SkipBrowserSetup=true</span> to the Registration Task installation command. See <a href="#B.1">Install a Device Trust-supported version of the Okta IWA web app in your AD domain</a>. </p>
                                                    <p>If you don't configure automatic certificate selection — either through the Registration Task or a GPO — end users are prompted to select the certificate when accessing the app. To make the selection easier for end users, only the <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> certificate will be shown to them  in this case.</p>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">Depending on the refresh interval, changes you make using GPO may not be seen immediately on Windows client computers. For more information, see the Microsoft article <a href="https://technet.microsoft.com/en-us/library/cc940895.aspx">Group Policy refresh interval for computers</a>.</p>
                                                    </div>
                                                    <h3>To configure Chrome to select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate automatically</h3>
                                                    <ol>
                                                        <li value="1">Download <a href="https://dl.google.com/dl/edgedl/chrome/policy/policy_templates.zip" target="_blank">policy templates</a>.</li>
                                                        <li value="2">Extract the zip file to the Desktop of the Active Directory Domain Controller.</li>
                                                        <li value="3">Copy files to folders: </li>
                                                        <p>Copy:</p>
                                                        <p><span class="filepath">C:\end users\Administrator\Desktop\policy_templates\windows\admx\en-US\chrome.adml</span>
                                                        </p>
                                                        <p>To:</p>
                                                        <p><span class="filepath">C:\Windows\PolicyDefinitions\en-US\</span>
                                                        </p>
                                                        <p>Copy:</p>
                                                        <p><span class="filepath">C:\end users\Administrator\Desktop\policy_templates\windows\admx\chrome.admx</span>
                                                        </p>
                                                        <p>To:</p>
                                                        <p><span class="filepath">C:\Windows\PolicyDefinitions\</span>
                                                        </p>
                                                        <li value="4">Open the Group Policy Management Console (GMPC).</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">In the <span class="uicontrol">Start</span> menu type <span class="uicontrol">Run</span>.</li>
                                                            <li value="2">In <span class="uicontrol">Run</span>, enter <span class="userinput">gpmc.msc</span>.</li>
                                                        </ol>
                                                        <li value="5">Expand to the appropriate domain, navigate to <span class="uicontrol">Group Policy Objects</span>, right-click <span class="uicontrol">Default Domain Policy</span>, and then click <span class="uicontrol">Edit</span>.
											</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_1.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="602" data-mc-height="403" src="../../resources/images/gpcm_1_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <li value="6">Navigate to <span class="menucascade"><span class="uicontrol">Computer Configuration</span><span class="uicontrol">Policies</span><span class="uicontrol">Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer</span><span class="uicontrol">Google Chrome</span><span class="uicontrol">Content Settings</span></span>.</li>
                                                        <li value="7">In the right pane click <span class="uicontrol">Automatically select client certificate for these sites</span>, and then under <span class="uicontrol">Content Settings</span>, click <span class="uicontrol">Edit policy setting</span>.</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="632" data-mc-height="429" src="../../resources/images/gpcm_2_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <li value="8">In the dialog box that opens, click <span class="uicontrol">Enabled</span>.</li>
                                                        <li value="9">Under <span class="uicontrol">Options</span>, click <span class="uicontrol">Show</span>.</li>
                                                        <li value="10">In the <span class="wintitle">Show Contents</span> dialog box, enter a value that specifies the subdomain of your org and indicates whether it applies to your Preview or Production org.</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_3.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="525" data-mc-height="483" src="../../resources/images/gpcm_3_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <p>For example:</p>
                                                        <p> If your <span class="mc-variable okta-variables.ProductName variable">Okta</span> Preview org URL is <span class="code">https://[*.]oktapreview.com</span>, you would enter the following value:</p>
                                                        <p><span class="code">{"pattern":<span class="varname">"https://[*.]oktapreview.com"</span>,"filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}</span>
                                                        </p>
                                                        <p>If your <span class="mc-variable okta-variables.ProductName variable">Okta</span> Production org URL is <span class="url">https://[*.]okta.com</span>, you would enter the following value:</p>
                                                        <p><span class="code">{"pattern":"https://[*.]okta.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}</span>
                                                        </p>
                                                        <li value="11">Click <span class="uicontrol">OK</span>.</li>
                                                        <li value="12">Confirm that auto certificate settings are configured:</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">Refresh GPO, either by waiting for the next GPO refresh interval, or by issuing the <span class="code">gpupdate</span> command.
												</li>
                                                            <li value="2">In Chrome, enter chrome://policy in the address bar, and then press <span class="uicontrol">Enter</span>.</li>
                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/verifypolicy_chrome.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="734" data-mc-height="274" src="../../resources/images/verifypolicy_chrome_thumb_220_220.png" tabindex="" /></a>
                                                            </p>
                                                            <li value="3">Click <span class="uicontrol">Show value</span> and verify that the policy <span class="uicontrol">AutoSelectCertificateForUrls</span> displays this value:</li>
                                                            <p><span class="code">{"pattern":"https://[*.]oktapreview.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}</span>
                                                            </p>
                                                        </ol>
                                                        <p>You can also confirm settings through the Windows <span class="uicontrol">Registry Editor</span>:</p>
                                                        <ol style="list-style-type: lower-alpha;" data-mc-continue="true">
                                                            <li value="4">Go to <span class="uicontrol">Start</span> and enter <span class="userinput">regedit</span> in the search field</li>
                                                            <li value="5">In Registry Editor, navigate to:
               <span class="menucascade"><span class="uicontrol">HKEY_LOCAL_MACHINE</span><span class="uicontrol">SOFTWARE</span><span class="uicontrol">Policies</span><span class="uicontrol">Google</span><span class="uicontrol">Chrome</span><span class="uicontrol">AutoSelectCertificateForUrls</span></span><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/verifypolicy_regedit.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="749" data-mc-height="354" src="../../resources/images/verifypolicy_regedit_thumb_220_220.png" tabindex="" /></a></p></li>
                                                        </ol>
                                                    </ol>
                                                    <h3>To configure IE to select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate automatically</h3>
                                                    <ol>
                                                        <li value="1">From the Active Directory Domain Controller, open the Group Policy Management Console (GMPC).</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">In the <span class="uicontrol">Start</span> menu type <span class="userinput">Run</span>.</li>
                                                            <li value="2">In <span class="uicontrol">Run</span>, enter <span class="userinput">gpmc.msc</span> and then press <span class="uicontrol">Enter</span>.</li>
                                                        </ol>
                                                        <li value="2">
												Expand to the appropriate domain, navigate to <span class="uicontrol">Group Policy Objects</span>, right-click <span class="uicontrol">Default Domain Policy</span>, and then click <span class="uicontrol">Edit</span>.
											</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_1.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="602" data-mc-height="403" src="../../resources/images/gpcm_1_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <li value="3"><a name="trusted-sites-zone"></a>Navigate to <span class="menucascade"><span class="uicontrol">Computer Configuration</span><span class="uicontrol">Policies</span><span class="uicontrol">Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer</span><span class="uicontrol">Windows Components</span><span class="uicontrol">Internet Explorer</span><span class="uicontrol">Internet Control Panel</span><span class="uicontrol">Security Page</span><span class="uicontrol">Trusted Sites Zone</span></span>.</li>
                                                        <li value="4">In the right pane under <span class="uicontrol">Settings</span>, double-click <span class="uicontrol">Don't prompt for client certificate selection when no certificates or only one certificate exists</span>.
											</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_2a_ie.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="626" data-mc-height="443" src="../../resources/images/gpcm_2a_ie_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <li value="5"> In the dialog box that opens, click <span class="uicontrol">Enabled</span>.
											</li>
                                                        <li value="6">Close open windows.</li>
                                                        <li value="7">Navigate to <span class="menucascade"><span class="uicontrol">Computer Configuration</span><span class="uicontrol">Policies</span><span class="uicontrol">Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer</span><span class="uicontrol">Windows Components</span><span class="uicontrol">Internet Explorer</span><span class="uicontrol">Internet Control Panel</span><span class="uicontrol">Security Page</span></span>.</li>
                                                        <li value="8">In the right pane under <span class="uicontrol">Settings</span>, double click <span class="uicontrol">Site to Zone Assignment List</span>. </li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_3_ie_sitetozone.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="654" data-mc-height="595" src="../../resources/images/gpcm_3_ie_sitetozone_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <li value="9">In the dialog box that opens, click <span class="uicontrol">Enabled</span>.
											</li>
                                                        <li value="10">Under <span class="uicontrol">Options</span>, next to <span class="uicontrol">Enter the zone assignments here</span>, click <span class="uicontrol">Show</span>.</li>
                                                        <li value="11">Enter the following in the <span class="uicontrol">Show Contents</span> dialog box:


												<ol style="list-style-type: lower-alpha;"><li value="1">In the <span class="uicontrol">Value name</span> column, enter either <span class="code">https://*.okta.com</span> or <span class="code">https://*.oktapreview.com</span> depending on whether you are deploying this feature in your <span class="mc-variable okta-variables.ProductName variable">Okta</span> Production or Preview org.</li><li value="2">In the <span class="uicontrol">Value</span> column, enter <span class="userinput">2</span>. This value corresponds to the security zone setting <span class="uicontrol">Trusted sites zone</span> that you configured in <a href="#trusted-sites-zone">Step 3</a>.




											<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_4_ie_sitetozone.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="576" data-mc-height="479" src="../../resources/images/gpcm_4_ie_sitetozone_thumb_220_220.png" tabindex="" /></a></p></li></ol></li>
                                                        <li value="12">Click <span class="uicontrol">OK</span> to close open windows.</li>
                                                        <li value="13">Confirm that the GPO settings are configured:</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">Refresh GPO, either by waiting for the next GPO refresh interval, or by issuing the <span class="code">gpupdate</span> command in a command line.</li>
                                                            <li value="2">In the <span class="uicontrol">Start</span> menu type <span class="userinput">Run</span>.</li>
                                                            <li value="3">In <span class="uicontrol">Run</span>, enter <span class="userinput">gpedit.msc</span> and then press <span class="uicontrol">Enter</span>.</li>
                                                            <li value="4">Navigate to <span class="menucascade"><span class="uicontrol">Computer Configuration</span><span class="uicontrol">Policies</span><span class="uicontrol">Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer</span><span class="uicontrol">Windows Components</span><span class="uicontrol">Internet Explorer</span><span class="uicontrol">Internet Control Panel</span><span class="uicontrol">Security Page</span><span class="uicontrol">Internet Zone</span></span>.
												</li>
                                                            <li value="5">In the right pane under <span class="uicontrol">Settings</span>, double-click <span class="uicontrol">Don't prompt for client certificate selection when no certificates or only one certificate exists</span>.
												</li>
                                                            <li value="6">In the dialog box that opens, confirm that the setting is <span class="uicontrol">Enabled</span>.
												</li>
                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/gpcm_e_ie_verifyenabled.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="525" data-mc-height="480" src="../../resources/images/gpcm_e_ie_verifyenabled_thumb_220_220.png" tabindex="" /></a>
                                                            </p>
                                                        </ol>
                                                    </ol>
                                                    <h3><span style="font-size: 14pt;">Step 3. Configure app sign-on policy rules in <span class="mc-variable okta-variables.ProductName variable">Okta</span></span>
                                                    </h3><a name="PartC"></a>
                                                    <h4>About app sign-on policy rules</h4>
                                                    <p>By default, all Client options in the App Sign On Rule dialog box are pre-selected. To configure more granular access to the app, create rules  that reflect:</p>
                                                    <ul>
                                                        <li>Who users are, or the groups to which they belong</li>
                                                        <li>Whether they are on or off network, or within a defined network zone</li>
                                                        <li>The type of client running on their device  (<span class="mc-variable Mobile.O365 variable">Office 365</span> apps only)</li>
                                                        <li>The platform of their mobile or desktop device</li>
                                                        <li>Whether or not their devices are Trusted</li>
                                                    </ul>
                                                    <div>
                                                        <h4>Taking an allow-list approach to sign-on policy rules</h4>
                                                        <ul>
                                                            <ol>
                                                                <li value="1">Create one or more Allow rules to support the scenarios that will allow access to the app, then assign those rules the highest priority. </li>
                                                                <li value="2">Create a Deny catch-all rule that will apply to users who don't match the permissive scenarios you created in Step 1. Assign the Deny catch-all rule the lowest priority, just above the default rule. In the allow-list approach described here, the default rule is never reached because it is effectively negated by the Deny catch-all rule.</li>
                                                            </ol>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">For important security information about creating app sign-on policy rules, see <a href="../security/policies/about-app-signon-policies.htm" class="MCXref xref">App sign-on policies</a>.</p>
                                                            </div>
                                                        </ul>
                                                    </div>
                                                    <h3><a name="SignInRulesProcedure"></a>Procedure</h3>
                                                    <ol>
                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Admin_Console variable">Admin Console</span>, go to <span class="menucascade"><span class="uicontrol">Applications</span><span class="uicontrol">Applications</span></span>, and then click the SAML or WS-enabled app that you want to protect with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</li>
                                                        <li value="2">Click the <span class="uicontrol">Sign On</span> tab.</li>
                                                        <li value="3">Scroll down to the <span class="uicontrol">Sign On Policy</span>, and click <span class="uicontrol">Add Rule</span>.</li>
                                                        <li value="4">Configure one or more rules using the following example as a guide.</li>
                                                    </ol>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">This example shows <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> rules for managing access to Office 365. For other apps, note that the section <span class="uicontrol">If the user's client is any of these</span> isn't present.</p>
                                                    </div>
                                                    <h3>Example Allowlist</h3>
                                                    <h3><a name="Ex2_R1"></a>Example Rule 1: Exchange ActiveSync or Legacy Auth; All platforms; Any Trust; Allow access</h3>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/e2_r1_eas-anyp-anyt-allow.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="611" data-mc-height="958" src="../../resources/images/e2_r1_eas-anyp-anyt-allow_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive rule name.</li>
                                                    </ol>
                                                    <p>Conditions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">Under <span class="uicontrol">PEOPLE</span>, specify whether to apply the rule to individuals only or to individuals and groups. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="3">Under <span class="uicontrol">LOCATION</span>, specify the user location to which the rule will apply. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="4">Under <span class="uicontrol">CLIENT</span>, configure the following settings:</li>
                                                        <p><span class="uicontrol">Web browser</span> unselected.</p>
                                                        <p><span class="uicontrol">Modern Auth client</span> unselected.</p>
                                                        <p><span class="uicontrol">Exchange ActiveSync client or Legacy Auth client</span> is selected.</p>
                                                        <p>Mobile									</p>
                                                        <p><span class="uicontrol">iOS</span> is selected.</p>
                                                        <p><span class="uicontrol">Android</span> is selected.</p>
                                                        <p><span class="uicontrol">Other mobile (e.g. BlackBerry)</span> is selected.</p>
                                                        <p>Desktop</p>
                                                        <p><span class="uicontrol">Windows</span> is selected.</p>
                                                        <p><span class="uicontrol">macOS</span> is selected.</p>
                                                        <p><span class="uicontrol">Other desktop (e.g. Linux)</span> is selected</p>
                                                        <li value="5">Under <span class="uicontrol">DEVICE TRUST</span>, configure the following:</li>
                                                        <div>
                                                            <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                            <ul>
                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                <li>Other desktop (for example,  Linux)</li>
                                                            </ul>
                                                        </div>
                                                        <p><span class="uicontrol">Any</span> is selected.</p>
                                                        <p><span class="uicontrol">Trusted</span> is unselected.</p>
                                                        <p><span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p>Actions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="6">Configure <span class="uicontrol">Access</span>.</li>
                                                        <p><span class="uicontrol">Allowed</span> is selected.</p>
                                                        <li value="7">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="8">Create <span class="uicontrol">Rule 2</span>.</li>
                                                    </ol>
                                                    <h3><a name="Ex2_R2"></a>Example Rule 2: Web browser or Modern Auth; Windows; Trusted; Allow access  + MFA </h3>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/e2_r2_web-win-trust-allow-mfa.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="612" data-mc-height="1065" src="../../resources/images/e2_r2_web-win-trust-allow-mfa_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p>Conditions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">Under <span class="uicontrol">PEOPLE</span>, select the same People option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The People option needs to be the same for all rules in this example.</li>
                                                        <li value="3">Under <span class="uicontrol">LOCATION</span>, select the same Location option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The Location option needs to be the same for all rules in this example.</li>
                                                        <li value="4">Under <span class="uicontrol">CLIENT</span>, configure the following settings:</li>
                                                        <p><span class="uicontrol">Web browser</span> selected.</p>
                                                        <p><span class="uicontrol">Modern Auth client</span> selected.</p>
                                                        <p><span class="uicontrol">Exchange ActiveSync client</span> is unselected.</p>
                                                        <p>Mobile</p>
                                                        <p><span class="uicontrol">iOS</span> is unselected.</p>
                                                        <p><span class="uicontrol">Android</span> is unselected.</p>
                                                        <p><span class="uicontrol">Other mobile (e.g. BlackBerry)</span> is unselected.</p>
                                                        <p>Desktop</p>
                                                        <p><span class="uicontrol">Windows</span> is selected.</p>
                                                        <p><span class="uicontrol">macOS</span> is unselected.</p>
                                                        <p><span class="uicontrol">Other desktop  (e.g. Linux)</span> is unselected.</p>
                                                        <li value="5">Under <span class="uicontrol">DEVICE TRUST</span>, configure the following:</li>
                                                        <div>
                                                            <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                            <ul>
                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                <li>Other desktop (for example,  Linux)</li>
                                                            </ul>
                                                        </div>
                                                        <p><span class="uicontrol">Any</span> is unselected.</p>
                                                        <p><span class="uicontrol">Trusted</span> is selected.</p>
                                                        <p><span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p>Actions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="6">Configure <span class="uicontrol">Access</span>:</li>
                                                        <p><span class="uicontrol">Allowed</span> is selected.</p>
                                                        <p><span class="uicontrol">Prompt for factor</span> is selected.</p>
                                                        <li value="7">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="8">Create <span class="uicontrol">Rule 3</span>.</li>
                                                    </ol>
                                                    <h3><a name="Ex2_R3"></a>Example Rule 3: Web browser or Modern Auth; All platforms except Windows; Any Trust, Allow access + MFA </h3>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/e2_r3_web_allbutwin_anyt_mfa.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="609" data-mc-height="1105" src="../../resources/images/e2_r3_web_allbutwin_anyt_mfa_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p>Conditions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">Under <span class="uicontrol">PEOPLE</span>, select the same People option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The option must be the same for all rules in this example.</li>
                                                        <li value="3">Under <span class="uicontrol">LOCATION</span>, select the same Location option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The option must be the same for all rules in this example.</li>
                                                        <li value="4">Under <span class="uicontrol">CLIENT</span>, configure the following settings:</li>
                                                        <p><span class="uicontrol">Web browser</span> selected.</p>
                                                        <p><span class="uicontrol">Modern Auth client</span> selected.</p>
                                                        <p><span class="uicontrol">Exchange ActiveSync client</span> is unselected.</p>
                                                        <p>Mobile</p>
                                                        <p><span class="uicontrol">iOS</span> is selected.</p>
                                                        <p><span class="uicontrol">Android</span> is selected.</p>
                                                        <p><span class="uicontrol">Other mobile (e.g. BlackBerry)</span> is selected.</p>
                                                        <p>Desktop</p>
                                                        <p><span class="uicontrol">Windows</span> is selected</p>
                                                        <p><span class="uicontrol">macOS</span> is selected</p>
                                                        <p><span class="uicontrol">Other desktop  (e.g. Linux)</span> is selected</p>
                                                        <li value="5">Under <span class="uicontrol">DEVICE TRUST</span>, configure the following:</li>
                                                        <div>
                                                            <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                            <ul>
                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                <li>Other desktop (for example,  Linux)</li>
                                                            </ul>
                                                        </div>
                                                        <p><span class="uicontrol">Any</span> is selected.</p>
                                                        <p><span class="uicontrol">Trusted</span> is unselected.</p>
                                                        <p><span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p>Actions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="6">Configure <span class="uicontrol">Access</span>.</li>
                                                        <p><span class="uicontrol">Allowed</span> is selected.</p>
                                                        <p><span class="uicontrol">Prompt for factor</span> is selected.</p>
                                                        <li value="7">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="8">Create <span class="uicontrol">Rule 4</span>.</li>
                                                    </ol>
                                                    <h3><a name="Ex2_R4"></a>Example Rule 4: Any client; All platforms; Any Trust; Deny access</h3>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/e2_r4_anyclien_anyp_anyt_denied.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="611" data-mc-height="842" src="../../resources/images/e2_r4_anyclien_anyp_anyt_denied_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p>Conditions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">Under <span class="uicontrol">PEOPLE</span>, select the same People option that you selected in <a href="#Ex2_R1">Rule 1</a>. The option must be the same for all the rules you create for this example.</li>
                                                        <li value="3">Under <span class="uicontrol">LOCATION</span>, select the same Location option that you selected in <a href="#Ex2_R1">Rule 1</a>. The option must be the same for all the rules you create for this example.</li>
                                                        <li value="4">Under <span class="uicontrol">CLIENT</span>, configure the following settings:</li>
                                                        <p><span class="uicontrol">Web browser</span> selected.</p>
                                                        <p><span class="uicontrol"> Modern Auth client</span> selected.</p>
                                                        <p><span class="uicontrol">Exchange ActiveSync client</span> is selected.</p>
                                                        <p>Mobile</p>
                                                        <p><span class="uicontrol">iOS</span> is selected.</p>
                                                        <p><span class="uicontrol">Android</span> is selected.</p>
                                                        <p><span class="uicontrol">Other mobile (e.g. BlackBerry)</span> is selected.</p>
                                                        <p>Desktop</p>
                                                        <p><span class="uicontrol">Windows</span> is selected.</p>
                                                        <p><span class="uicontrol">macOS</span> is selected.</p>
                                                        <p><span class="uicontrol">Other desktop  (e.g. Linux)</span> is selected.</p>
                                                        <li value="5">Under <span class="uicontrol">DEVICE TRUST</span>, configure the following:</li>
                                                        <div>
                                                            <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                            <ul>
                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                <li>Other desktop (for example,  Linux)</li>
                                                            </ul>
                                                        </div>
                                                        <p><span class="uicontrol">Any</span> is selected.</p>
                                                        <p><span class="uicontrol">Trusted</span> is unselected.</p>
                                                        <p><span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p>Actions:</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="6">Configure <span class="uicontrol">Access</span>.</li>
                                                        <p><span class="uicontrol">Denied</span> is selected.</p>
                                                        <li value="7">Click <span class="uicontrol">Save</span>.</li>
                                                    </ol>
                                                    <h3><a name="WL-Rule5"></a>Example Rule 5: Default sign on rule – Any client; All platforms; Any Trust; Allow access
      </h3>
                                                    <p>The Default sign-on rule is already created and cannot be edited. Note that in this allowlist example, the Default rule is never reached because it is effectively negated by Rule 4.</p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt-android-rule-5-default.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="610" data-mc-height="960" src="../../resources/images/dt-android-rule-5-default_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <h2><span style="font-size: 14pt;">Revoke and remove <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates</span>
                                                    </h2><a name="PartD"></a>
                                                    <p><a name="You"></a>You may need to revoke an end user's <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s) from the <span class="mc-variable okta-variables.ProductName variable">Okta</span> Certificate Authority. This is recommended if the computer is lost or stolen, or if the end user is deactivated. To re-secure an end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking their <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s), you need to remove the revoked certificate from their computer before enrolling a new certificate.</p>
                                                    <p>Be aware of the following:</p>
                                                    <div>
                                                        <ul>
                                                            <li>Steps 1 - 4 of this procedure revoke all <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates from the Okta Certificate Authority that were issued to the end user. Certificate revocation does not remove existing certificates from managed Windows computers. In order to re-secure a Windows computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking certificates, you must first remove any existing <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the computer and then re-enroll the computer with a new certificate as detailed in Step 5. The Device Registration Task will not enroll a new certificate if another certificate (whether revoked or not) is present on the computer.</li>
                                                            <li>Deactivating an end user in Okta also revokes their <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the Okta Certificate Authority (but does not remove the certificate from their computer).</li>
                                                        </ul>
                                                        <ol>
                                                            <li value="1">In the <span class="mc-variable okta-feature-names.Admin_Console variable">Admin Console</span>, go to <span class="menucascade"><span class="uicontrol">Directory</span><span class="uicontrol">People</span></span>.</li>
                                                            <li value="2">
                                                                <p>Click the end user whose <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate you want to revoke.</p>
                                                            </li>
                                                            <li value="3">In the <span class="uicontrol">More Actions</span> menu, click <span class="uicontrol">Revoke Trust Certificate</span>.
					<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_revoketrustcert_80per.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="818" data-mc-height="634" src="../../resources/images/dt_revoketrustcert_80per_thumb_220_220.png" tabindex="" /></a></p></li>
                                                            <li value="4">
                                                                <p>Read the message that displays, and then click <span class="uicontrol">Revoke Trust Certificate</span>.</p>
                                                            </li>
                                                            <li value="5">
                                                                <p>Optional. If you want to re-secure the end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>, first remove any existing <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the computer.</p>
                                                                <ul>
                                                                    <li>
                                                                        <p>To remove a certificate from a single computer (such as during testing or the Proof of Concept phase of your implementation), use a third-party management tool such as <a href="https://docs.microsoft.com/en-us/dotnet/framework/tools/certmgr-exe-certificate-manager-tool" target="_blank">Certificate Manager Tool</a> (Certmgr.exe) to remove the certificate issued by the Okta MTLS Certificate Authority.</p>
                                                                    </li>
                                                                    <li>
                                                                        <p>To remove certificates from multiple computers, use a third-party management tool such as <a href="https://support.microsoft.com/en-us/help/816102/how-to-use-group-policy-to-remotely-install-software-in-windows-server" target="_blank">GPO</a> or <a href="https://docs.microsoft.com/en-us/sccm/core/understand/introduction" target="_blank">SCCM</a> to remove the certificate issued by the Okta MTLS Certificate Authority.</p>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                    <h2>Troubleshooting</h2>
                                                    <p><a name="Troubleshooting_DT-Win"></a><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> generates a certificate on domain-joined Windows devices and presents it to <span class="mc-variable okta-variables.ProductName variable">Okta</span> when a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured WS-Fed or SAML app is launched. The two problems that you are most likely to encounter are:</p>
                                                    <ul>
                                                        <li>Trusted devices are unable to access <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps.</li>
                                                        <li>Untrusted devices are able to access <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps.</li>
                                                    </ul>
                                                    <p>If you encounter either problem, try to correct it by performing Basic Troubleshooting. If the problem persists, perform Advanced Troubleshooting.</p>
                                                    <h3>Basic Troubleshooting</h3><a name="BasicTroubleshooting_DT-Win"></a>
                                                    <p>To perform basic troubleshooting, review the following areas:</p>
                                                    <h3>IWA web app installation and setup</h3>
                                                    <p>Verify the following:</p>
                                                    <ul>
                                                        <li>You have <a href="#B.1">installed</a> a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-capable version of the IWA web app in your Active Directory domain.</li>
                                                        <li>If you use HTTPS for IWA, you have <a href="#ModWebConfig">modified the IWA web.config file</a> to support HTTPS binding.</li>
                                                    </ul>
                                                    <p>If the problem persists, proceed to <a href="#AdvancedTroubleshooting_DT-Win">Advanced Troubleshooting</a>.</p>
                                                    <h3>Enablement</h3>
                                                    <p>Verify that you have <a href="#PartB">enabled the global Device Trust setting</a> in <span class="menucascade"><span class="uicontrol">Security</span><span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span></span>.</p>
                                                    <h3>Registration task</h3>
                                                    <p>Verify that you have <a href="#DistributeInstaller">distributed</a> the Device Registration Task to Windows domain-joined workstations.</p>
                                                    <p>Proxy server environments: For the Registration Task installation to succeed in environments that implement a proxy server, you must install Device Registration Task version 1.2.1 or later using a command line and append the appropriate HttpProxy parameter to the installation command. </p>
                                                    <p>See <a href="#Install" class="MCXref xref">Install the Registration Task</a>. </p>
                                                    <h3>Certificate</h3>
                                                    <div>
                                                        <h3>Verify that the certificate is installed</h3>
                                                        <ol>
                                                            <li value="1">Open <span class="uicontrol">Microsoft Management Console</span>. See <a href="#Verify">Verify with Microsoft Management Console</a>.</li>
                                                            <li value="2">Open the end user's personal store (not the Local computer store).</li>
                                                            <li value="3">Verify that a single certificate appears under <span class="menucascade"><span class="uicontrol">Personal</span><span class="uicontrol">Certificates</span></span> issued by <span class="uicontrol">MTLS Certificate Authority</span>.</li>
                                                            <li value="4">If no certificate appears, see <a href="#AdvancedTroubleshooting_DT-Win">Advanced Troubleshooting</a>.</li>
                                                        </ol>
                                                    </div>
                                                    <div>
                                                        <h3><a name="Certific"></a>Known Issue – Auth failure caused by blocked Mutual TLS certificate exchange</h3>
                                                        <p><a name="MTLS-handshake"></a>
                                                            <div>
                                                                <p data-mc-conditions="SnippetConditionsForDevices.Windows Only">The Mutual TLS certificate exchange (handshake) in this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example). Make sure to configure  proxy servers/proxy clients, as well as any endpoint protection software you may implement, in a way that does not block your clients from completing the certificate exchange with Okta. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):</p>
                                                                <p><span class="code">*.okta.com</span>
                                                                </p>
                                                                <p><span class="code">*.okta-emea.com</span>
                                                                </p>
                                                                <p><span class="code">*.okta-gov.com</span>
                                                                </p>
                                                            </div>
                                                        </p>
                                                    </div>
                                                    <h3>Sign-on policy</h3>
                                                    <p>Verify the following:</p>
                                                    <p>You have <a href="#PartC">configured a sign-on policy</a> that:</p>
                                                    <ul>
                                                        <li>Is applied to the WS-Fed or SAML app that you want to secure with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</li>
                                                        <li>Is applied to the correct user(s) and/or groups.</li>
                                                        <li>Includes, at minimum, an Active <a href="#SignInRulesProcedure">rule</a> that denies access to untrusted devices.</li>
                                                    </ul>
                                                    <h3><a name="DT_Win_SysLog"></a>System Log</h3>
                                                    <p>Review the <a href="../reports/reports_syslog.htm">System Log</a> to verify the following <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> System Log events:

								</p>
                                                    <h3>Authentication</h3>
                                                    <ul>
                                                        <li>DisplayMessage: Authentication of device through a certificate</li>
                                                        <li>EventType: <span class="code">user.authentication.authenticate</span></li>
                                                    </ul>
                                                    <h3>Enrollment</h3>
                                                    <ul>
                                                        <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate enrollment</li>
                                                        <li>EventType: <span class="code">user.credential.enroll</span></li>
                                                    </ul>
                                                    <h3>Issuance</h3>
                                                    <ul>
                                                        <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate issuance</li>
                                                        <li>EventType: <span class="code">pki.cert.issue</span></li>
                                                    </ul>
                                                    <h3>Revocation</h3>
                                                    <ul>
                                                        <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate revocation</li>
                                                        <li>EventType: <span class="code">pki.cert.revoke</span></li>
                                                    </ul>
                                                    <h3>Renewal</h3>
                                                    <ul>
                                                        <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate renewal</li>
                                                        <li>EventType: <span class="code">pki.cert.renew</span></li>
                                                    </ul>
                                                    <div>
                                                        <h3>View unique device IDs in DebugContext</h3>
                                                        <p>DebugData shows the unique ID of the devices associated with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> events and is useful for debugging purposes. This information can also help you  verify that<span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> is being enforced on devices in your device inventory, which may be useful prior to rolling out the feature to a large group of users.</p>
                                                        <div class="noteOkta">
                                                            <p class="noteContent">The information contained in debugContext.debugData is intended to add context when troubleshooting customer platform issues. Note that key names and values are subject to change without notice and should be used primarily as a debugging aid, not as a data contract.  See <a href="https://developer.okta.com/docs/reference/api/system-log/#debugcontext-object" target="_blank">DebugContext Object</a> in Okta Developer documentation.</p>
                                                        </div>
                                                        <ol>
                                                            <li value="1">In the <span class="mc-variable okta-feature-names.Admin_Console variable">Admin Console</span>, go to <span class="menucascade"><span class="uicontrol">Reports</span><span class="uicontrol">System Log</span></span>.</li>
                                                            <li value="2">Search for the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> Event (date) that you’re interested in, then navigate to:  <span class="menucascade"><span class="uicontrol">Event</span><span class="uicontrol">AuthenticationContext</span><span class="uicontrol">System</span><span class="uicontrol">DebugContext</span><span class="uicontrol">DebugData</span></span></li>
                                                        </ol>
                                                    </div>
                                                    <h3><a name="AdvancedTroubleshooting_DT-Win"></a>Advanced Troubleshooting</h3>
                                                    <p>If Basic Troubleshooting didn't resolve the problem you are experiencing, and the certificate isn't installed on the Windows workstation, check in the following locations:</p>
                                                    <h3>In the <span class="mc-variable okta-variables.ProductName variable">Okta</span> Admin Console</h3>
                                                    <p>Verify the following:</p>
                                                    <ul>
                                                        <li>The org has an active Active Directory (AD) integration (<span class="menucascade"><span class="uicontrol">Directory</span><span class="uicontrol">Directory Integrations</span></span>)</li>
                                                        <li>The end user of the domain-joined Windows computer is:
									<ul><li>Present in <span class="menucascade"><span class="uicontrol">Directory</span><span class="uicontrol">People</span></span></li><li>Activated</li><li>A member of the Active Directory domain</li></ul></li>
                                                        <li>The IWA web app is:
									<ul><li>Primary</li><li>Enabled</li></ul></li>
                                                        <li>A <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-capable <a href="../settings/version_histories/ver_history_sso_iwa_agent.htm">version</a></li>
                                                    </ul>
                                                    <p>(<span class="menucascade"><span class="uicontrol">Security</span><span class="uicontrol">Delegated Authentication</span><span class="uicontrol">IWA Agents</span></span>)</p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_trouble_iwa_status.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="555" data-mc-height="504" src="../../resources/images/dt_trouble_iwa_status_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <h3>On the IWA server</h3>
                                                    <h3>Check IIS settings for the IWA web app</h3>
                                                    <ol>
                                                        <li value="1">Click <span class="uicontrol">Start</span>.</li>
                                                        <li value="2">In the search box, enter <span class="uicontrol">IIS</span>.</li>
                                                        <li value="3">Right click <span class="uicontrol">Internet Information Services Manager</span> and select <span class="uicontrol">Run as administrator</span>.</li>
                                                        <li value="4">If the IWA web app is configured for SSL, open SSL settings and make sure the option Require SSL is selected.</li>
                                                        <li value="5">Open the Authentication feature and make sure Windows Authentication is Enabled.</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_trouble_iwa_iis_1.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="731" data-mc-height="354" src="../../resources/images/dt_trouble_iwa_iis_1_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ol>
                                                    <h3>Check for errors in the web.config file</h3>
                                                    <ol>
                                                        <li value="1">Go to <span class="filepath">C:\Inetpub\wwwroot\IWA\web.config</span>.</li>
                                                        <li value="2">Use a validation tool to make sure the web.config file contains valid XML syntax.</li>
                                                        <li value="3">If HTTPS was enabled in IIS on the site, make sure that the web.config file enables <span class="code">SecureBindingForDeviceTrust</span>.</li>
                                                    </ol>
                                                    <h3>Check for errors in Windows Logs &gt; Applications and Services Logs &gt; <span class="mc-variable okta-variables.ProductName variable">Okta</span> Single Sign On</h3>
                                                    <ol>
                                                        <li value="1">Click <span class="uicontrol">Start</span>.</li>
                                                        <li value="2">In the search box, enter <span class="uicontrol">Event Viewer</span>.</li>
                                                        <li value="3">Expand <span class="uicontrol">Application and Services Logs</span>.</li>
                                                        <li value="4">Check for errors in <span class="mc-variable okta-variables.ProductName variable">Okta</span> Single Sign On.</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_trouble_appsvclogs.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="658" data-mc-height="262" src="../../resources/images/dt_trouble_appsvclogs_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ol>
                                                    <h3>On the domain-joined Windows computer</h3>
                                                    <h3>Make sure <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> Tasks were installed and successful:</h3>
                                                    <ol>
                                                        <li value="1">Click <span class="uicontrol">Start</span>.</li>
                                                        <li value="2">In the search box, enter <span class="uicontrol">Task Scheduler</span>.</li>
                                                        <li value="3">Right click <span class="uicontrol">Task Scheduler</span> and select <span class="uicontrol">Run as administrator</span>.</li>
                                                        <li value="4">Make sure the <span class="code">okta-devicetrust-devicetask</span> and <span class="code">okta-devicestrust-usertask</span> tasks appear and have completed successfully.</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_tasksched.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="906" data-mc-height="199" src="../../resources/images/dt_tasksched_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ol>
                                                    <h3>Check for errors in Windows Logs &gt; Applications and Services Logs &gt; <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span>:</h3>
                                                    <ol>
                                                        <li value="1">Click <span class="uicontrol">Start</span>.</li>
                                                        <li value="2">In the search box, enter <span class="uicontrol">Event Viewer</span>.</li>
                                                        <li value="3">Expand <span class="uicontrol">Application and Services Logs</span>.</li>
                                                        <li value="4">Click <span class="uicontrol"><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span></span>.</li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_eviewer.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="697" data-mc-height="450" src="../../resources/images/dt_eviewer_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ol>
                                                    <div>
                                                        <h3><a name="force-cert-renewal"></a>Force certificate renewal in some circumstances</h3>
                                                        <p>Certificates are valid for one year and are renewed automatically sometime within 30 days before expiration. In order for automatic renewal to succeed, end users must be logged on to the domain-joined computer and connected to your corporate network.</p>
                                                        <p>You can manually force certificate renewal to try to fix the following problems (requires Device Registration Task 1.3.1 or later):</p>
                                                        <ul>
                                                            <li>An end user's certificate was incorrectly or accidentally revoked by the admin through the Admin Console (see <a href="#PartD">Revoke</a>). </li>
                                                            <li>The certificate was corrupted on the client due to accidental deletion, file corruption, or loss of the  private key.</li>
                                                        </ul>
                                                        <p>Open a command prompt and issue the following command:</p>
                                                        <p><span class="filepath">"C:\Program Files\Okta\DeviceTrust\OktaDeviceReg.exe" --user --forceRenewal</span>
                                                        </p>
                                                    </div>
                                                    <h3>Run the task in debug mode as the logged-on user</h3>
                                                    <ol>
                                                        <li value="1">Make sure the IWA server is reachable when the task is run (either directly over the internet or through a VPN).</li>
                                                        <li value="2">Open a command prompt and issue the following command: <p><span class="code">"C:\Program Files\Okta\DeviceTrust\OktaDeviceReg.exe" --user --debug</span></p></li>
                                                        <li value="3">If the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>certificate isn't generated on the device, the task executes the following actions:
									<ul><li>Contacts <span class="mc-variable okta-variables.ProductName variable">Okta</span> at the registry value pointed to by <span class="code">HKLM\Software\Okta\DeviceTrust\OktaOrgUrl</span> and gets the location of the IWA server for the org.</li><li>Contacts the IWA server to generate the device token for the device.</li><li>Contacts the IWA server to generate a user token based on the device token.</li><li>Contacts <span class="mc-variable okta-variables.ProductName variable">Okta</span> with the generated user token to generate the certificate.</li><li>Installs the certificate in the user's personal store.</li></ul></li>
                                                    </ol>
                                                    <p>The user token is a set of JWT claims signed by the IWA server. You may be asked to copy the token and provide it to <span class="mc-variable okta-variables.ProductName variable">Okta</span> Support for analysis.</p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/dt_oktadevicereg-running2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="784" data-mc-height="555" src="../../resources/images/dt_oktadevicereg-running2_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <h2><span style="font-size: 14pt;">Known issues</span><a name="KnownIssues"></a>
                                                    </h2>
                                                    <ul>
                                                        <li>Multiple apps opening simultaneously: If multiple apps secured by <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> are configured to open automatically when end users sign in to their <span class="mc-variable okta-variables.ProductName variable">Okta</span> dashboard from IE or Edge browsers, only one of the apps completes the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow. Access to the remaining apps fails and end users are presented a message advising them to contact their administrator. (See <a href="#LearnMoreStep">Enable the global Device Trust setting for your org</a>.)</li>
                                                        <li><span class="uicontrol"><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span></span>+ certificate-based IWA for SSO: Configuring this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution may cause an incompatibility issue if your org is configured with certificate-based IWA to support SSO for iOS and Android mobile devices. In that case, end users signing in to <span class="mc-variable okta-variables.ProductName variable">Okta</span> using IWA from Windows computers with a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate <em>and</em> an IWA certificate installed may be presented with a certificate picker containing both certificates during the Desktop SSO flow, which may cause confusion. If end users select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate, they will get a 403 error during the IWA flow.
					It may be possible to  enable certificate hinting in IIS so that only one certificate is shown to users.	See the Microsoft article <a href="https://technet.microsoft.com/en-au/library/dn786429.aspx">Schannel SSP Technical Overview</a>.		</li>
                                                        <li><a name=".NETFramework"></a>Checking .NET version: The Device Registration Task checks the version of the .NET Framework running on managed Windows computers. If the version isn't 4.5.2 or later, the Registration Task automatically installs version 4.5.2. During installation, progress indicators and other installation dialog boxes appear on the end user screen.</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2" data-test="footer">
                                        <div>
                                            <p class="copyright" data-test="copyrightNotice">©  <span class="mc-variable okta-variables.Year variable">2024</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <script src="../../resources/scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../resources/scripts/js/app.js">
                                    </script>
                                    <script src="../../resources/scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../resources/scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../resources/scripts/coveo-resources/js/coveo.madcapflare.requirejs.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../resources/scripts/coveo-resources/js/coveo.madcapflare.okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                    <!-- Feedback tab for Qualtrics survey -->
                                    <div id="feedback-tab" data-mc-conditions="Primary.live-site-only"><a id="feedback-link" href="#" onclick="openSurvey();  return false" target="_blank" title="Submit feedback"><div id="feedback-container"><p id="feedback-text" translate="no">Feedback</p></div></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
