<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="Device Trust" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- ******************************************************************************** -->
    <!-- IMPORTANT: replicate changes in this file to other master pages, as appropriate. -->
    <!-- ******************************************************************************** -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="robots" content="noindex, nofollow" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Okta Device Trust for managed Windows computers prevents unmanaged computers from accessing apps. A Device Registration Task enrolls individual workstations." /><title>Enforce Okta Device Trust for managed Windows computers | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#fff, #fff);
}

.button.select-language-button
{
	-pie-background: linear-gradient(#fff, #fff);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#fff, #fff);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },	
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPubish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <!--<div class="title-bar-layout outer-row">-->
                                        <!--<div class="navigation-wrapper nocontent">
			<ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True" data-mc-chunk="Data/Toc.xml">                               
			<li class="has-children" data-mc-id="0"><a href="javascript:void(0);">Documentation</a></li>
			<li data-mc-id="1"><a href="https://support.okta.com/help/s/documentation">Knowledge base</a></li>
			<li class="has-children" data-mc-id="2"><a href="javascript:void(0);">Community</a></li>
			<li class="has-children" data-mc-id="3"><a href="javascript:void(0);">Product</a></li>
			<li data-mc-id="4"><a href="https://www.okta.com/services/education-services/">Training</a></li>
			</ul>
			</div>-->
                                        <div class="navbar">
                                            <div class="dropdown" data-mc-conditions="MultiProdPubish.DocMenu">
                                                <button class="dropbtn">Documentation <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://help.okta.com/en/prod/Content/Topics/ReleaseNotes/okta-relnotes.htm">Release notes</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/en/prod/Content/index.htm">Product documentation</a>
                                                    </div>
                                                    <div><a href="https://developer.okta.com/documentation" target="_blank">Developer documentation<img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown"><a href="https://support.okta.com/help/s/knowledge">Knowledge base</a>
                                            </div>
                                            <div class="dropdown">
                                                <button class="dropbtn">Community <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://support.okta.com/help/s/questions?language=en_US">Questions</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/group/CollaborationGroup/Recent?language=en_US">Discussions</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/events?language=en_US">Webinars</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown">
                                                <button class="dropbtn">Product <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://support.okta.com/help/s/ideas" target="_blank">Ideas<img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/productroadmap?language=en_US">Roadmap</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/product-hub?language=en_US">Product hub</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown"><a href="https://www.okta.com/services/education-services/" target="_blank">Training<span><img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></span></a>
                                            </div>
                                        </div>
                                        <div class="logo_container"><a class="logo" href="https://support.okta.com/help/s/"><img src="../../Resources/Images/okta-assets/Logo.png" alt="Okta Support" title="Okta Support" /></a>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** ****commented out, with new left accordion implementation***-->
                                        <!--<div class="is-not-in-mobile">
                <MadCap:menuProxy data-mc-skin="/Project/Skins/okta-left-menu.flskn" mc-linked-toc="/Project/TOCs/left-nav-TOC.fltoc" style="mc-toc-depth: 2;mc-context-sensitive: False;mc-include-parent: True;mc-include-siblings: True;mc-include-children: True;" />
            </div>-->
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_nav_poc mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie select-language-button" title="Change language">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie previous-topic-button" title="Previous topic" disabled="true">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie next-topic-button" title="Next topic" disabled="true">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1><a name="top"></a>Enforce <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for managed Windows computers</h1>
                                                    <hr width="100%" size="0" align="center" />
                                                    <div id="microcontent1">
                                                        <p><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for Windows allows you to prevent unmanaged Windows computers from accessing corporate SAML and WS-Fed cloud apps. It works with any browser or native app that can access the certificate store when performing the federated authentication flow to Okta. This includes Edge, Internet Explorer, Chrome, and Microsoft Office clients that support Modern <span class="disableGlossary">Authentication</span>. </p>
                                                        <p>
                                                            <img src="../../Resources/Images/dt-win-auth-flow-diagram.png" />
                                                        </p>
                                                    </div>
                                                    <p><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for Windows provides these key benefits:</p>
                                                    <ul>
                                                        <li>Ensures that only end users on domain-joined Windows computers can seamlessly SSO into SAML and WS-Fed cloud apps</li>
                                                        <li>
                        Protects enterprise data even when there is no defined network boundary</li>
                                                        <li>Provides a frictionless end user experience by utilizing the Okta Certificate Authority
</li>
                                                        <li>Support for <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> enrollment in multi-forest environments.</li>
                                                    </ul>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Prerequi"></a><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Prerequisites</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <h4>Client workstations</h4>
                                                            <ul>
                                                                <li>Active Directory domain-joined Windows computer(s) running Microsoft Windows 7, Windows 8.1, or Windows 10.</li>
                                                                <li>.NET Framework version 4.5.2 or higher. The Device Registration Task checks whether a supported version of .NET Framework is present, and if not, installs a supported version automatically. See <a href="#KnownIssues">Known Issues</a>.</li>
                                                            </ul>
                                                            <h4>Active Directory and IWA servers</h4>
                                                            <p>See <a href="../Directory/ad-agent-manage-integration.htm" class="MCXref xref">Manage your Active Directory integration</a> and <a href="../Directory/Configuring_Desktop_SSO.htm#REQUIREM">IWA&#160;agent</a> documentation.</p>
                                                            <h4>IWA agent</h4>
                                                            <p>Device Trust-capable version of the Okta IWA web agent. For installation details, see <a href="../Directory/Configuring_Desktop_SSO.htm">IWA documentation</a>. Note: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> enrollment in multi-forest environments requires IWA web app version 1.12.2+. An IWA web app running in one forest can detect and assess the trust posture of Windows desktop devices located in another trusted forest and then allow these devices to enroll in <span class="mc-variable okta-feature-names.Device_Trust_for_Windows variable">Device Trust for Windows</span>.</p>
                                                            <h4>Supported browsers</h4>
                                                            <ul>
                                                                <li>Microsoft Internet Explorer versions 10 and 11</li>
                                                                <li>Microsoft Edge (<a href="https://en.wikipedia.org/wiki/Microsoft_Edge#Release_history">current</a> and previous release)</li>
                                                                <li>Google Chrome (<a href="https://chromereleases.googleblog.com/">current</a> and previous release)</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Before you begin</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <ul>
                                                                <li><b>Web view must have access to the device certificate store</b> — <span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> computers works with any SAML/WS-Fed-enabled app that supports authentication through a webview. The web view in which authentication is performed must have access to the certificate store on the device. This includes Microsoft Office clients that support Modern Authentication, among others. See the Microsoft article <a href="https://www.microsoft.com/en-us/microsoft-365/blog/2015/11/19/updated-office-365-modern-authentication-public-preview/" target="_blank">Updated Office 365 modern authentication</a>.  </li>
                                                                <li><b>Device + end user authentication requires a network connection</b> — For the IWA web app to authenticate end users and devices, end users must be logged-in to your company's network at the time the Device Registration Task runs. See <a href="#B.1">IWA web app</a>.</li>
                                                                <li><b>Device Trust enrollment is not supported when Okta is in read-only mode</b>: Devices  cannot be enrolled in <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> if the cell in which your Okta org resides is in <a href="#" class="MCTextPopup popup popupHead">read-only mode<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>A mode during which most administrative operations are disabled and a banner is displayed in the admin (not end-user) Dashboard. During read-only mode, all background jobs such as imports, OMM enrollment, OMM deprovisioning, and JIT provisioning are queued, and all are restarted when read-only mode is disabled.</span></a>.</li>
                                                                <li><b>Support for proxy server environments</b> — To ensure that this device trust solution works in environments that implement a proxy server, you must install Device Registration Task version 1.2.1 or higher through a command line and append the appropriate HttpProxy parameter to the installation command. See <a href="#MSI-installation">Install the Registration Task</a>.</li>
                                                                <li><b>Make sure that certificates are installed on targeted computers — </b>Before you configure the <b>Trusted</b> option for apps in <b>App Sign On Policy</b> rules, you must make sure that certificates are installed in the certificate store on the domain-joined computers you have targeted for this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution. If certificates are not installed and the Trusted setting is enabled, users are denied access to the app and are redirected to a security message advising them to contact their administrator. (You can configure the message to include a <b>Learn more</b> link to more information. See <a href="#PartA">Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</a>). To verify certificate enrollment, Okta recommends that you use your management tool to parse the <b>Windows Event Viewer</b>, or use a command line to query the user certificate store directly. Look for <b>Okta MTLS certificate</b>.</li>
                                                                <li><b>Take care when disabling the <span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span> setting</b> — Don't disable the <span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span> setting on the <b>Security &gt; <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </b> page if you have also configured an app sign-on policy that allows trusted Windows devices. Otherwise, your <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration will be in an inconsistent state and users with untrusted devices won't be shown the security message advising them to contact their administrator, nor the <b>Learn more</b> link to more information (if configured; see <a href="#PartA">Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</a>).</li>
                                                                <li>
                                                                    <p><b>Before asking Okta Support to disable </b><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span>  — First make sure to change the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting in the app sign-on policy rules to Any (Applications &gt; app &gt; Sign On). If you do not make this change and then later have Okta Support re-enable <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> capability for your org, the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting in app sign-on policy rules will take effect immediately, which you may not have expected.</p>
                                                                </li>
                                                                <li>
                                                                    <p><b>To verify installation of the Registration Task, use an appropriate detection setting</b> — After installing the Device Registration Task on your managed Windows computers, SCCM runs a script  to verify that installation was successful. Make sure to specify either <b>File System</b> or <b>Registry</b> in your <b>Detection Rule</b>. Don't use the <b>Windows Installer</b> setting type to detect the installation, as SCCM cannot detect the Device Registration Task using that setting. </p>
                                                                </li>
                                                                <li><b>Ensure clients can complete the MTLS handshake</b> —  If your org implements  proxy servers/proxy clients or endpoint protection software, make sure to configure them in a way that doesn't block the Mutual TLS certificate exchange (handshake) that occurs during this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow. See <a href="#MTLS-handshake">Troubleshooting</a>.</li>
                                                                <li><b>Shared-terminal scenarios not supported</b> — <span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> doesn't support shared-terminal scenarios in which multiple end users log in to the same domain-joined workstation.</li>
                                                                <li>
                                                                    <p>Apps secured by <span style="font-weight: normal;" class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> are shown as locked on the <span style="font-weight: normal;" class="mc-variable okta-feature-names.Okta_End-User_Dashboard variable">Okta End-User Dashboard</span>. A lock icon is shown beside apps secured by <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> under these conditions:</p>
                                                                    <ul>
                                                                        <li> &#160;The end users accessed the dashboard in a desktop or mobile browser (not in <span class="mc-variable Mobile.Okta_Mobile variable">Okta Mobile</span>). </li>
                                                                        <li><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> is enabled for the org.</li>
                                                                        <li>The device is not trusted.</li>
                                                                        <li>The end user tried to access any <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured app from their dashboard. </li>
                                                                    </ul>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-weight: bold; font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Procedures</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>These procedures have three main steps: </p>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP 1 — Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</a></span>
                                                                <div class="MCDropDownBody dropDownBody"><a name="PartA"></a>
                                                                    <div class="noteOkta">
                                                                        <p class="noteContent">Do not disable the Windows <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting on the <b>Security &gt; <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b> page if you have also configured an app sign-on policy that allows trusted Windows devices. Otherwise, your <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration will be in an inconsistent state and users with untrusted devices won't be shown the security message advising them to contact their administrator, nor the <b>Learn more</b> link to more information (if configured; see <a href="#LearnMoreStep">Enable the global Device Trust setting for your org</a>).</p>
                                                                    </div>
                                                                    <ol>
                                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <b>Security</b> &gt; <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b>.</li>
                                                                        <li value="2">In the <b><span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span></b> section, click <b>Edit</b>.</li>
                                                                        <li value="3">Select <b>Enable <span class="mc-variable okta-feature-names.Windows_Device_Trust variable">Windows Device Trust</span></b>.</li>
                                                                        <li value="4"><a name="LearnMoreStep"></a>Optional. In the <b>Learn more link</b> field, you can enter an externally-accessible redirect URL where end users with untrusted devices can find more information. The security message shown to these end users will include a <b>Learn more</b> link that redirects to your specified URL. 
									
									
									
									
								<p><img src="../../Resources/Images/DT_Security_URLspecified_2.png" /></p><p>If you choose not to specify a URL in this optional field, these end users are shown the same message but without the <b>Learn more</b> link.</p><p><img src="../../Resources/Images/DT_Security_noURLspecified_2.png" /></p></li>
                                                                        <li value="5">Click <b>Save</b>.</li>
                                                                        <li value="6">Proceed to STEP 2.</li>
                                                                    </ol>
                                                                </div>
                                                            </div>
                                                            <div style="line-height:150%;">
                                                                <br />
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="PartB"></a><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">STEP 2 —  Enroll the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate on domain-joined Windows computers</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <p>Perform the four sub-procedures in this section to ensure that the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate is installed successfully on domain-joined Windows computers.</p>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b style="background-color: #ffffff; color: #5d5d5d; font-size: 14pt;">2.1</b> <span style="font-size: 14pt;">— Install a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-supported version of the Okta IWA web app in your AD domain</span></a></span>
                                                                        <div class="MCDropDownBody dropDownBody"><a name="B.1"></a>
                                                                            <p><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> uses the IWA&#160;web app to confirm the security posture of Windows computers and users by validating that both are joined to your Active Directory domain. (Enrollment is also supported in multi-forest environments. See <a href="#Prerequi">Prerequisites</a>.) Okta then issues a certificate to the Windows computer enabling <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flows to Okta-federated apps. Private keys associated with the Okta certificate never leave the Windows computer. Certificates are renewed automatically once a year, approximately 30 days before they expire.</p>
                                                                            <p>The role of the IWA web app is limited to the certificate enrollment and renewal process. Once the certificate is installed, the Device Registration Task no longer needs to communicate with the IWA web app in order for end users to access apps. Desktop SSO doesn't need to be <b>On</b> in <b>Security &gt; Delegated Authentication</b> for <span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> desktop to function. </p>
                                                                            <ol>
                                                                                <li value="1">To download the  IWA&#160;web app, configure a link as follows:</li>
                                                                                <p class="code">https://&lt;org&gt;.&lt;okta/oktapreview&gt;.com/static/agents/iwa/OktaSsoIwa-x.x.x.exe</p>
                                                                                <p>Where:</p>
                                                                                <ul>
                                                                                    <li><span class="code">&lt;org&gt;</span> is the name of your org</li>
                                                                                    <li><span class="code">&lt;okta/oktapreview&gt;</span> denotes either your Okta Production or Preview environment.</li>
                                                                                    <li><span class="code">oktaSsoIwa-x.x.x.exe</span> is the version of the IWA web app that supports <span class="mc-variable okta-feature-names.Device_Trust_for_Windows variable">Device Trust for Windows</span>. For the current <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-capable version, see SSO IWA Web App Version History.</li>
                                                                                </ul>
                                                                                <p>For example, a link for downloading version 1.11.0 to the org <span class="code">example.oktapreview.com</span> would look like this:</p><pre id="code">https://example.oktapreview.com/static/agents/iwa/OktaSsoIwa-1.11.0.exe</pre>
                                                                                <li value="2">Install the Okta IWA web app as detailed in <a href="../Directory/Configuring_Desktop_SSO.htm#top">Install and Configure the Okta IWA Web App for Desktop SSO</a>.</li>
                                                                                <li value="3"><a name="Test_IWA_web_app"></a>To make sure that the IWA web agent is operational, test it as <a href="../Directory/Configuring_Desktop_SSO.htm#TestingIWA">described in the guide</a>. </li>
                                                                                <li value="4"><a name="ModWebConfig"></a>If you use HTTPS for IWA, you must modify the IWA <b>web.config</b> file as follows:</li>
                                                                                <ol style="list-style-type: lower-alpha;">
                                                                                    <li value="1">On the server running the IWA web agent, access the file <span class="code">C:\inetpub\wwwroot\IWA\web.config</span></li>
                                                                                    <li value="2">Locate the section <span class="code">&lt;system.serviceModel&gt;</span> and replace it with the following:</li>
                                                                                    <div style="padding:10px;border:1px solid black;line-height:2em;min-height:50px;min-width:100px;overflow:auto;"><pre>&lt;system.serviceModel&gt;
&lt;bindings&gt;
&lt;webHttpBinding&gt;
&lt;binding name = "SecureBindingForDeviceTrust"&gt;
&lt;security mode="Transport"&gt;
&lt;transport clientCredentialType = "Windows" proxyCredentialType="Windows"/&gt;
&lt;/security&gt;
&lt;/binding&gt;
&lt;binding name = "HttpBindingForDeviceTrust"&gt;
&lt;security mode="TransportCredentialOnly"&gt;
&lt;transport clientCredentialType = "Windows" proxyCredentialType="Windows"/&gt;
&lt;/security&gt;
&lt;/binding&gt;
&lt;/webHttpBinding&gt;
&lt;/bindings&gt;
&lt;services&gt;
&lt;service name="OktaSSO.DeviceTrust" behaviorConfiguration="OktaSSO.DeviceTrustBehavior"&gt;
&lt;endpoint binding="webHttpBinding" bindingConfiguration="SecureBindingForDeviceTrust" contract="OktaSSO.IDeviceTrust" behaviorConfiguration="webHttp"/&gt;
&lt;/service&gt;
&lt;/services&gt;
&lt;behaviors&gt;
&lt;endpointBehaviors&gt;
&lt;behavior name="webHttp"&gt;
&lt;webHttp/&gt;
&lt;/behavior&gt;
&lt;/endpointBehaviors&gt;
&lt;serviceBehaviors&gt;
&lt;behavior name="OktaSSO.DeviceTrustBehavior"&gt;
&lt;!-- To avoid disclosing metadata information, set the value below to false before deployment --&gt;
&lt;serviceMetadata httpGetEnabled="false"/&gt;
&lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;
&lt;serviceDebug includeExceptionDetailInFaults="false"/&gt;
&lt;serviceCredentials&gt;
&lt;windowsAuthentication allowAnonymousLogons="False" includeWindowsGroups="True"/&gt;
&lt;/serviceCredentials&gt;
&lt;/behavior&gt;
&lt;/serviceBehaviors&gt;
&lt;/behaviors&gt;
&lt;/system.serviceModel&gt;

</pre>
                                                                                    </div> <p>Here's a detailed look at the values that configure HTTP or HTTPS binding:</p><p></p><p><b>HTTPS</b> binding configured:</p><a name="HTTPS_Binding"></a><div style="padding:10px;border:1px solid black;line-height:2em;min-height:23px;min-width:100px;overflow-y:hidden;overflow-x:auto;"><pre>&lt;services&gt;
&lt;service name="OktaSSO.DeviceTrust" behaviorConfiguration="OktaSSO.DeviceTrustBehavior"&gt;
<strong>&lt;endpoint binding="webHttpBinding" bindingConfiguration=<font color="red">"SecureBindingForDeviceTrust"</font> contract="OktaSSO.IDeviceTrust" behaviorConfiguration="webHttp"/&gt;</strong>
&lt;/service&gt;
&lt;/services&gt;

</pre></div><p><b>HTTP</b> binding configured:</p><div style="padding:10px;border:1px solid black;line-height:2em;min-height:23px;min-width:100px;overflow-y:hidden;overflow-x:auto;"><pre>&lt;services&gt;
&lt;service name="OktaSSO.DeviceTrust" behaviorConfiguration="OktaSSO.DeviceTrustBehavior"&gt;
&lt;<strong>endpoint binding="webHttpBinding" bindingConfiguration=<font color="red">"HttpBindingForDeviceTrust"</font> contract="OktaSSO.IDeviceTrust" behaviorConfiguration="webHttp"/</strong>&gt;
&lt;endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" /&gt;
&lt;/service&gt;
&lt;/services&gt;

</pre></div><li value="3">Save and close the <b>web.config</b> file.</li><li value="4">From your Windows command prompt, restart <b>Internet Information Services (IIS)</b> by issuing the following commands:
                   
								<p id="code">iisreset /stop</p><p id="code">iisreset /start</p></li><li value="5">Before proceeding, retest the IWA web app as described in <a href="../Directory/Configuring_Desktop_SSO.htm#TestingIWA">Install and Configure the IWA&#160;Web App for Desktop SSO</a>.</li><li value="6">If you haven't already, install the Device Registration Task as described in <a href="#B.2">Obtain and install the Device Registration Task</a>.</li></ol>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div style="line-height:130%;">
                                                                        <br />
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b style="background-color: #ffffff;color: #5d5d5d;font-size: 14pt;">2.2</b><span style="font-size: 14pt;"> — Obtain and install the Device Registration Task </span></a></span>
                                                                        <div class="MCDropDownBody dropDownBody"><a name="B.2"></a>
                                                                            <div style="line-height:115%;">
                                                                                <br />
                                                                            </div>
                                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b>Important to know before you begin</b></a></span>
                                                                                <div class="MCDropDownBody dropDownBody">
                                                                                    <h3>Trusted Platform Module (TPM)</h3>
                                                                                    <p> To leverage the security benefits of TPM, see <a href="../device-trust/dt-win-tpm.htm" class="MCXref xref">Enhance Windows Device Trust security with Trusted Platform Module (TPM)</a>.</p>
                                                                                    <h3> Schedule the Registration Task to run when end users are on the corporate network</h3>
                                                                                    <p>Once installed on domain-joined computers, the Registration Task runs: </p>
                                                                                    <ul>
                                                                                        <li>Immediately after it is installed</li>
                                                                                        <li>Whenever the user logs on to the computer</li>
                                                                                        <li>Once every 24 hours, starting with the time that the Registration Task first ran.</li>
                                                                                    </ul>
                                                                                    <p>It is important that you configure your management tool to schedule the Registration Task to run when end users are on the corporate network. When the Registration Task runs, it triggers the certificate enrollment flow and creates a Scheduled Task that will run every 24 hours and whenever the user logs on to the computer. This retry behavior helps both certificate enrollment and renewal scenarios. </p>
                                                                                    <h3>Automatic certificate renewal can only occur when end users are on the corporate network</h3>
                                                                                    <p>Certificates are valid for one year and are renewed automatically sometime within 30 days before expiration. In order for automatic renewal to succeed, end users must be logged on to the domain-joined computer and connected to your corporate network.</p>
                                                                                    <h3>Manually force certificate renewal</h3>
                                                                                    <p>You can manually force certificate renewal to try to fix the following problems (requires Device Registration Task 1.3.1 or later):</p>
                                                                                    <ul>
                                                                                        <li>An end user's certificate was incorrectly or accidentally revoked by the admin through the Admin Console (see <a href="#Revoke">Revoke</a>). </li>
                                                                                        <li>The certificate was corrupted on the client due to accidental deletion, file corruption, or loss of the  private key.</li>
                                                                                    </ul>
                                                                                    <p>See <a href="#force-cert-renewal">Force certificate renewal in some circumstances</a>.</p>
                                                                                    <h3>Automatic certificate selection</h3>
                                                                                    <p>By default, the Registration Task configures registry keys on domain-joined Windows computers to allow supported <b>Chrome</b>, <b>Edge</b>, and <b>IE</b> browsers to automatically select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate that will be presented to Okta.  If appropriate for your environment, you can disable this behavior by adding the flag <span class="code">SkipBrowserSetup=true</span> to the installation command. See <a href="#obtain-reg-task">Obtain the registration task</a>. For example, this would be necessary if you want to configure automatic certificate selection using a <a href="#B.4">Group Policy Object (GPO) tool</a>. </p>
                                                                                    <p>If you opt not to configure automatic certificate selection — either through the Registration Task or a GPO — end users are prompted to select the certificate when accessing the app. In that case, to make the selection easier for end users, only the Okta <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate will be shown to them.</p>
                                                                                    <h3>Proxy server environment</h3>
                                                                                    <p>If your organization routes internet traffic through a proxy server, note the following:</p>
                                                                                    <ul>
                                                                                        <li>You must install Device Registration Task version 1.2.1 or higher through a command line and append the appropriate <span class="code">HttpProxy</span> parameter to the installation command. See <a href="#MSI-installation">Install the Registration Task</a>. </li>
                                                                                        <li>   If your org implements  proxy servers/proxy clients or endpoint protection software, make sure to configure them in a way that doesn't block the Mutual TLS certificate exchange (handshake) that occurs during this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow. See <a href="#MTLS-handshake">Troubleshooting</a>.</li>
                                                                                    </ul>
                                                                                    <h3>Certificate revocation</h3>
                                                                                    <p>You may need to revoke an end user's <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s) from the Okta Certificate Authority. This is recommended if the computer is lost or stolen. To re-secure an end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking their certificate(s), you need to remove the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from their computer before you enroll a new certificate. Certificate revocation doesn't remove existing certificates from managed Windows computers. See <a href="#PartD">Revoke and remove <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates</a>.</p>
                                                                                    <h3>Use an appropriate Setting Type in SCCM to verify Device Registration Task installation</h3>
                                                                                    <p>After installing the Device Trust client on your managed Windows computers, SCCM runs a script  to verify that installation was successful. Make sure to specify either <b>File System</b> or <b>Registry</b> in your <b>Detection Rule</b>. Do not use the <b>Windows Installer</b> setting type to detect the installation, as SCCM cannot detect the Device Trust client using that setting. </p>
                                                                                    <p>
                                                                                        <img src="../../Resources/Images/DT_SCCM_FileSystemDetect_421x413.png" style="width: 421;height: 413;" />
                                                                                    </p>
                                                                                    <hr width="100%" size="0" align="center" />
                                                                                </div>
                                                                            </div>
                                                                            <div style="line-height:130%;">
                                                                                <br />
                                                                            </div>
                                                                            <h3><a name="obtain-reg-task"></a>Obtain the Registration Task</h3>
                                                                            <div class="noteOkta">
                                                                                <p class="noteContent">To leverage the security benefits of the Trusted Platform Module (TPM), see <a href="../device-trust/dt-win-tpm.htm" class="MCXref xref">Enhance Windows Device Trust security with Trusted Platform Module (TPM)</a>.</p>
                                                                            </div>
                                                                            <p><a name="obtain-EA-reg-task"></a>
                                                                            </p>
                                                                            <h4>To obtain an Early Access (EA) version of the Registration Task
										</h4>
                                                                            <p>Unlike the GA version, EA versions of the Device Registration Task are not available from the <b>Downloads</b> page in the Okta Admin Console. To obtain an EA version, you must configure a link as follows:</p><pre id="code">https://&lt;org&gt;.&lt;okta/oktapreview&gt;.com/static/devicetrust/OktaDeviceRegistrationTaskSetup-x.x.x.&lt;msi/exe&gt;</pre>
                                                                            <p>Where:</p>
                                                                            <ul>
                                                                                <li><span class="code">&lt;org&gt;</span> is the name of your org</li>
                                                                                <li><span class="code">&lt;okta/oktapreview&gt;</span> denotes either your Okta Production or Preview environment.</li>
                                                                                <li><span class="code">OktaDeviceRegistrationTaskSetup-<b>x.x.x</b></span> is the version of the Registration Task. For the latest version of the Registration Task, see Device Trust for Windows Desktop Registration Task Version History.</li>
                                                                                <li><span class="code">&lt;msi/exe&gt;</span> is the file type of the Registration Task, either .msi or .exe.</li>
                                                                            </ul>
                                                                            <p>For example, a link for downloading .msi Registration Task version 1.4.0 to <span class="code">example.oktapreview.com</span> would look like this:</p><pre xml:space="preserve" id="code">https://example.oktapreview.com/static/devicetrust/OktaDeviceRegistrationTaskSetup-1.4.0.msi</pre>
                                                                            <p>For version history, see Device Trust for Windows Desktop Registration Task Version History.</p>
                                                                            <h4>To obtain a Generally Available (GA) version of the Registration Task</h4>
                                                                            <p>The latest GA version of the Registration Task is available from the <b>Downloads</b> page in .msi and .exe formats. For version history, see Device Trust for Windows Desktop Registration Task Version History.</p>
                                                                            <ol>
                                                                                <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <b>Settings</b> &gt; <b>Downloads</b>.</li>
                                                                                <li value="2">Scroll to <b><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> Agents</b> and then click  <b>Download Latest</b> for the type of installer you want (.msi or .exe).</li>
                                                                            </ol>
                                                                            <h3>Install the Registration Task</h3>
                                                                            <p>Install the Registration Task in using either of the following methods:
                                        <div style="line-height:115%;"><br /></div><h4><a name="InstallRegTask_WinDT"></a>Method 1: 									
									
							Distribute the Registration Task using a management tool (SCCM)</h4><p><a name="DistributeInstaller"></a>Follow your organization's procedure for distributing software to domain-joined workstations. If your organization uses SCCM, you may want to refer to the Microsoft article <a href="https://technet.microsoft.com/en-us/library/gg682082.aspx">How to Deploy Applications in Configuration Manager</a>. Execute the appropriate command for <span class="code">*.exe</span> or <span class="code">*.msi</span> installation.</p><p>&#160;</p><p style="background-color: #E6E6E8;"><a targets="proxyserver_msi-1" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="proxyserver_msi-1"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b style="color: #0000ff;">Using a proxy server?</b></a></p><div style="display: none;" data-mc-target-name="proxyserver_msi-1"><h3>About the Device Registration Task and proxy servers</h3><p>If your organization routes internet traffic through a proxy server, you must do the following:</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP 1. Use a command line to install the Device Registration Task and include parameters</a></span><div class="MCDropDownBody dropDownBody"><p>Install Device Registration Task version 1.2.2+&#160;through a command line and append the appropriate <span class="code">HttpProxy</span> parameter to the installation command. This is necessary because the Registration Task installer installs these two scheduled tasks:</p><ul><li>A user task that runs as the logged-in user.</li><li>A device task that runs as a network service. If you set up your proxy server(s) as part of your Internet Explorer (IE) configuration, the device task does not detect your IE settings unless you specify that behavior through a command line as shown in the following examples.</li></ul><p>Include the parameter appropriate for your environment:</p><h4>Proxy server environments
</h4><p><span class="code">HttpProxy=http://&lt;your proxy http url&gt;:&lt;port number&gt;</span></p><p>For example, the installation command that includes the proxy server parameter would look similar to this for:</p><p> MSI installation:</p><p><span class="code">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;/ HttpProxy=http://&lt;your proxy http url&gt;:&lt;port number&gt;"</span></p><p>EXE installation:</p><p><span class="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com HttpProxy=http://&lt;your proxy http url&gt;:&lt;port number&gt;</span></p><div class="noteOkta"><p class="noteContent">Make sure to add a space if you are also adding the parameter to disable automatic certificate handling.</p></div><h4>Proxy Auto-Configuration (PAC) environments</h4><p><b>A. Specify the PAC location</b></p><p id="code">HttpProxyPacLocation=http://mypacfile.url.location</p><p>For example, the installation command that includes the PAC&#160;location parameter would look similar to this for:</p><p> MSI installation:</p><p id="code">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;/ HttpProxyPacLocation=http://mypacfile.url.location"</p><p>EXE installation:</p><p id="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com HttpProxyPacLocation=http://mypacfile.url.location</p><div class="noteOkta"><p class="noteContent">Make sure to add a space if you are also adding the parameter to disable automatic certificate handling.</p></div><p><b>B. Optional. Allow your Okta org</b></p><p>If you implement a PAC file in your proxy environment, consider allowing your Okta org by adding an exception to the PAC file like this:</p><p><span class="code">if(localHostOrDomainIs(host,"*.okta.com"))</span></p><p><span class="code">{ return "DIRECT"; }</span></p><div style="line-height:115%;"><br /></div><hr /></div></div><div style="line-height:90%;"><br /></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Ensure clients can complete the MTLS handshake</a></span><div class="MCDropDownBody dropDownBody"><div><p data-mc-conditions="SnippetConditionsForDevices.Windows Only">The Mutual TLS certificate exchange (handshake) in this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example). Make sure to configure  proxy servers/proxy clients, as well as any endpoint protection software you may implement, in a way that does not block your clients from completing the certificate exchange with Okta. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):</p><p id="code">*.okta.com</p><p id="code">*.okta-emea.com</p><p id="code">*.okta-gov.com</p></div></div></div></div><p style="line-height: 150%;"><br /></p><p style="font-weight: bold;">With automatic certificate challenge handling:</p><p style="font-weight: normal;">MSI installation</p><p id="code">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;"</p><p style="line-height: 150%;"><br /></p><p style="font-weight: normal;">EXE installation</p><p id="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com</p><p style="line-height: 150%;"><br /></p><p style="font-weight: bold;">Without automatic certificate challenge handling:</p><p style="font-weight: normal;">MSI installation</p><p id="code">msiexec /i OktaDeviceRegistrationTaskSetup-1.x.x-xxxxxxx INSTALLDIR="c:\Program Files\Okta\DeviceTrust" EXEOPTIONS="/q2 OktaURL=https://&lt;your Okta org&gt;/ <b>SkipBrowserSetup=true"</b></p></p>
                                                                            <p>&#160;</p>
                                                                            <p style="font-weight: normal;">EXE installation</p>
                                                                            <p id="code">OktaDeviceRegistrationTaskSetup-1.0.0-XXXX.exe /q2 OktaURL=https://&lt;your-okta-org-url&gt;.com/ <b>SkipBrowserSetup=true</b></p>
                                                                            <p>&#160;</p>
                                                                            <h4>Method 2: Manually install the Registration Task</h4>
                                                                            <p>This procedure is provided in case you want to install the Registration Task manually during the testing or Proof of Concept phase of your implementation. </p>
                                                                            <ol>
                                                                                <li value="1">Copy the Registration Task to the domain-joined Windows computer.</li>
                                                                                <li value="2">Run the command prompt as an Administrator. </li>
                                                                                <ol style="list-style-type: lower-alpha;">
                                                                                    <li value="1">Click <b>Start</b>.</li>
                                                                                    <li value="2">In the search box, enter <span class="code">cmd</span>, and then press <b>CTRL+SHIFT+ENTER</b>.								</li>
                                                                                </ol>
                                                                                <li value="3">Change directories to the location of the file. </li>
                                                                                <li value="4">Issue the command appropriate for the file type, either *.msi or *.exe. For installation and proxy server details, see the previous section <a href="#InstallRegTask_WinDT">Distribute the Registration Task using a management tool (SCCM)</a>.</li>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div style="line-height:130%;">
                                                                        <br />
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b style="background-color: #ffffff;color: #5d5d5d;font-size: 14pt;">2.3</b><span style="font-size: 14pt;"> — Verify certificate enrollment before you configure the Trusted option in app sign-on policy rules</span></a></span>
                                                                        <div class="MCDropDownBody dropDownBody"><a name="B.3"></a>
                                                                            <p>Before you configure the <b>Trusted</b> option for apps in app sign-on policy rules, you must make sure that certificates are installed in the certificate store on the domain-joined computers you have targeted for this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution. If certificates are not installed and the Trusted setting is enabled, users are denied access to the app and are redirected to a security message advising them to contact their administrator. (You can configure the message to include a <b>Learn more</b> link to more information. See <a href="#LearnMoreStep">Enable the global Device Trust setting for your org</a>). To verify certificate enrollment, Okta recommends that you use your management tool to parse the <b>Windows Event Viewer</b>, or use a command line to query the user certificate store directly. Look for <b>Okta MTLS certificate</b>.</p>
                                                                            <p>&#160;</p>
                                                                            <div class="noteOkta">
                                                                                <p class="noteContent">If an end user is deactivated, all <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates installed on their domain-joined Windows computer(s) are revoked (but not removed) automatically. To remove revoked certificates, see <a href="#PartD">Revoke and remove Device Trust certificates</a>.</p>
                                                                            </div>
                                                                            <p>Though you will probably use a management tool to verify that certificates are installed on multiple domain-joined computers, here are two ways to check enrollment on a single computer:</p>
                                                                            <h3>Verify with Windows Event Viewer</h3><a name="WinEventViewer"></a>
                                                                            <ol>
                                                                                <li value="1">Go to <b>Start</b> and enter <b>event</b> in the search field.</li>
                                                                                <li value="2">When <b>Event Viewer</b> appears at the top of the <b>Start</b> menu, press <b>Enter</b> to open it.</li>
                                                                                <li value="3">Expand <b>Applications and Services Logs</b>.</li>
                                                                                <li value="4">Click <b><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> </b> and find Event ID&#160;1000. </li>
                                                                                <p>
                                                                                    <img src="../../Resources/Images/Verify_WindowsEventVwr.png" />
                                                                                </p>
                                                                            </ol>
                                                                            <h3><a name="Verify"></a>Verify with Microsoft Management Console
										</h3>
                                                                            <ol start="1"><a name="VerifyCert_MMC"></a>
                                                                                <li value="1">Go to <b>Start</b> and enter <b>mmc</b> in the search field to open the console.</li>
                                                                                <li value="2">Go to <b>File</b> and click <b>Add/Remove Snap-in</b>.</li>
                                                                                <li value="3">Select <b>Certificates</b> and then click <b>Add</b>.</li>
                                                                                <li value="4">In the  <b>Certificates snap-in</b> dialog box, select <b>My user account</b>.</li>
                                                                                <li value="5">Click <b>Finish</b>.</li>
                                                                                <li value="6">Click <b>OK</b>.</li>
                                                                                <li value="7">Under <b>Console Root</b>, expand  <b>Certificates - Current User</b>.</li>
                                                                                <li value="8">Expand the <b>Personal</b> folder, click <b>Certificates</b> and see the <b>Okta MTLS certificate</b>. </li>
                                                                                <p>
                                                                                    <img src="../../Resources/Images/Verify_MSFTMgmtConsole2.png" />
                                                                                </p>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b style="background-color: #ffffff;color: #5d5d5d;font-size: 14pt;">2.4</b><span style="font-size: 14pt;"> — Optional. Use GPO to configure browsers to select the certificate automatically</span></a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p><a name="B.4"></a>If appropriate for your environment, you can use a Group Policy Object (GPO)&#160;tool instead of the default capability of the Device Registration Task to configure browsers to automatically select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate. If you use a GPO&#160;tool, make sure that you have added the flag <span class="code">SkipBrowserSetup=true</span> to the Registration Task installation command. &#160;See <a href="#B.1">Install a Device Trust-supported version of the Okta IWA web app in your AD domain</a>. </p>
                                                                            <p>If you don't configure automatic certificate selection — either through the Registration Task or a GPO — end users are prompted to select the certificate when accessing the app. To make the selection easier for end users, only the <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> certificate will be shown to them  in this case.</p>
                                                                            <div class="noteOkta">
                                                                                <p class="noteContent">Depending on the refresh interval, changes you make using GPO may not be seen immediately on Windows client computers. For more information, see the Microsoft article <a href="https://technet.microsoft.com/en-us/library/cc940895.aspx">Group Policy refresh interval for computers</a>.</p>
                                                                            </div>
                                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />To configure Chrome to select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate automatically</a></span>
                                                                                <div class="MCDropDownBody dropDownBody">
                                                                                    <ol>
                                                                                        <li value="1">Download <a href="https://dl.google.com/dl/edgedl/chrome/policy/policy_templates.zip" target="_blank">policy templates</a>.</li>
                                                                                        <li value="2">Extract the zip file to the Desktop of the Active Directory Domain Controller.</li>
                                                                                        <li value="3">Copy files to folders: </li>
                                                                                        <p>Copy:</p>
                                                                                        <p id="code">C:\end users\Administrator\Desktop\policy_templates\windows\admx\en-US<b>\chrome.adml</b></p>
                                                                                        <p>To:
                                            </p>
                                                                                        <p id="code">C:\Windows\PolicyDefinitions\en-US\
                                            </p>
                                                                                        <div style="line-height:125%;">
                                                                                            <br />
                                                                                        </div>
                                                                                        <p>Copy:
                                            </p>
                                                                                        <p id="code">C:\end users\Administrator\Desktop\policy_templates\windows\admx\chrome.admx</p>
                                                                                        <p>To:
                                            </p>
                                                                                        <p id="code">C:\Windows\PolicyDefinitions\
                                            </p>
                                                                                        <div style="line-height:110%;">
                                                                                            <br />
                                                                                        </div>
                                                                                        <li value="4">Open the Group Policy Management Console (GMPC).</li>
                                                                                        <ol style="list-style-type: lower-alpha;">
                                                                                            <li value="1">In the <b>Start</b> menu type <b>Run</b>.</li>
                                                                                            <li value="2">In <b>Run</b>, enter <span class="code">gpmc.msc</span>.</li>
                                                                                        </ol>
                                                                                        <li value="5">
										Expand to the appropriate domain, navigate to <b>Group Policy Objects</b>, right click <b>Default Domain Policy</b>, and then click <b>Edit</b>.
									</li>
                                                                                        <p>
                                                                                            <img src="../../Resources/Images/GPCM_1_602x402.png" style="width: 602;height: 402;" />
                                                                                        </p>
                                                                                        <li value="6">Navigate to <b>Computer Configuration &gt; Policies &gt; Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer &gt; Google Chrome &gt; Content Settings</b>.</li>
                                                                                        <li value="7">In the right pane click <b>Automatically select client certificate for these sites</b>, and then under <b>Content Settings</b>, click <b>Edit policy setting</b>. </li>
                                                                                        <p>
                                                                                            <img src="../../Resources/Images/GPCM_2.png" />
                                                                                        </p>
                                                                                        <li value="8">In the dialog box that opens, click <b>Enabled</b>.</li>
                                                                                        <li value="9">Under <b>Options</b>, click <b>Show</b>.</li>
                                                                                        <li value="10">In the <b>Show Contents</b> dialog box, enter  a value that specifies the subdomain of your org and indicates whether it applies to your Preview or Production org. </li>
                                                                                        <p>
                                                                                            <img src="../../Resources/Images/GPCM_3.png" />
                                                                                        </p>
                                                                                        <P>For example:</P>
                                                                                        <p> If your Okta Preview org URL is <span class="code">https://[*.]oktapreview.com</span>, you would enter the following value:</p>
                                                                                        <p class="code">{"pattern":"https://[*.]oktapreview.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}} </p>
                                                                                        <p>If your Okta Production org URL is <span class="code">https://[*.]okta.com</span>, you would enter the following value:</p>
                                                                                        <p class="code">{"pattern":"https://[*.]okta.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}</p>
                                                                                        <li value="11">Click <b>OK</b>.</li>
                                                                                        <li value="12">Confirm that auto certificate settings are configured:</li>
                                                                                        <ol style="list-style-type: lower-alpha;">
                                                                                            <li value="1">Refresh GPO, either by waiting for the next GPO refresh interval, or by issuing the <span class="code">gpupdate</span> command.
										</li>
                                                                                            <li value="2">In Chrome, enter chrome://policy in the address bar, and then press <b>Enter</b>. </li>
                                                                                            <p>
                                                                                                <img src="../../Resources/Images/VerifyPolicy_Chrome.png" />
                                                                                            </p>
                                                                                            <li value="3">Click <b>Show value</b> and verify that the policy <b>AutoSelectCertificateForUrls</b> displays this value: </li>
                                                                                            <p class="code">{"pattern":"https://[*.]oktapreview.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority"}}}</p>
                                                                                        </ol>
                                                                                        <p>You can also confirm settings through the Windows <b>Registry Editor</b>:</p>
                                                                                        <ol style="list-style-type: lower-alpha;" data-mc-continue="true">
                                                                                            <li value="4">Go to <b>Start</b> and enter <b>regedit</b> in the search field</li>
                                                                                            <li value="5">In Registry Editor, navigate to:</li>
                                                                                            <p> <span class="code">HKEY_LOCAL_MACHINE &gt;&#160;SOFTWARE &gt;&#160;Policies &gt;&#160;Google &gt;&#160;Chrome &gt;&#160;AutoSelectCertificateForUrls</span> </p>
                                                                                            <p>
                                                                                                <img src="../../Resources/Images/VerifyPolicy_Regedit.png" />
                                                                                            </p>
                                                                                        </ol>
                                                                                    </ol>
                                                                                </div>
                                                                            </div>
                                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />To configure IE to select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate automatically</a></span>
                                                                                <div class="MCDropDownBody dropDownBody">
                                                                                    <ol>
                                                                                        <li value="1">From the Active Directory Domain Controller, open the Group Policy Management Console (GMPC).</li>
                                                                                        <ol style="list-style-type: lower-alpha;">
                                                                                            <li value="1">In the <b>Start</b> menu type <b>Run</b>.</li>
                                                                                            <li value="2">In <b>Run</b>, enter <span class="code">gpmc.msc</span> and then press <b>Enter</b>.</li>
                                                                                        </ol>
                                                                                        <li value="2">
										Expand to the appropriate domain, navigate to <b>Group Policy Objects</b>, right click on <b>Default Domain Policy</b>, and then click <b>Edit</b>.
									</li>
                                                                                        <p>
                                                                                            <img src="../../Resources/Images/GPCM_1_602x402.png" style="width: 602;height: 402;" />
                                                                                        </p>
                                                                                        <li value="3"><a name="trusted-sites-zone"></a>Navigate to <b>Computer Configuration &gt; Policies &gt; Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer &gt; Windows Components &gt; Internet Explorer &gt; Internet Control Panel &gt;&#160;Security Page &gt;&#160;Trusted Sites Zone</b>.</li>
                                                                                        <li value="4">In the right pane under <b>Settings</b>, double click <b>Don't prompt for client certificate selection when no certificates or only one certificate exists</b>.
									</li>
                                                                                        <p>
                                                                                            <img src="../../Resources/Images/GPCM_2a_IE.png" />
                                                                                        </p>
                                                                                        <li value="5"> In the dialog box that opens, click <b>Enabled</b>.
									</li>
                                                                                        <li value="6">Close open windows.</li>
                                                                                        <li value="7">Navigate to <b>Computer Configuration &gt; Policies &gt; Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer &gt; Windows Components &gt; Internet Explorer &gt; Internet Control Panel &gt;&#160;Security Page</b>.</li>
                                                                                        <li value="8">In the right pane under <b>Settings</b>, double click <b>Site to Zone Assignment List</b>. </li>
                                                                                        <p>
                                                                                            <img src="../../Resources/Images/GPCM_3_IE_SiteToZone.png" />
                                                                                        </p>
                                                                                        <li value="9">In the dialog box that opens, click <b>Enabled</b>. 
									</li>
                                                                                        <li value="10">Under <b>Options</b>, next to <b>Enter the zone assignments here</b>, click <b>Show</b>.</li>
                                                                                        <li value="11">Enter the following in the <b>Show Contents</b> dialog box:
													
													
													<ol style="list-style-type: lower-alpha;"><li value="1">In the <b>Value name</b> column, enter either <span class="code">https://*.okta.com</span> or <span class="code">https://*.oktapreview.com</span> depending on whether you are deploying this feature in your Okta Production or Preview org.</li><li value="2">In the <b>Value</b> column, enter <b>2</b>. This value corresponds to the security zone setting <b>Trusted sites zone</b> that you configured in <a href="#trusted-sites-zone">Step 3</a>. 
												
												
											
											
											<p><img src="../../Resources/Images/GPCM_4_IE_SiteToZone.png" /></p></li></ol></li>
                                                                                        <li value="12">Click <b>OK</b> to close open windows.</li>
                                                                                        <li value="13">Confirm that the GPO settings are configured:</li>
                                                                                        <ol style="list-style-type: lower-alpha;">
                                                                                            <li value="1">Refresh GPO, either by waiting for the next GPO refresh interval, or by issuing the <span class="code">gpupdate</span> command in a command line.</li>
                                                                                            <li value="2">In the <b>Start</b> menu type <b>Run</b>.</li>
                                                                                            <li value="3">In <b>Run</b>, enter <span class="code">gpedit.msc</span> and then press <b>Enter</b>.</li>
                                                                                            <li value="4">
											Navigate to <b>Computer Configuration &gt; Policies &gt; Administrative Templates: Policy definitions (ADMX files) retrieved from the local computer &gt; Windows Components &gt; Internet Explorer &gt; Internet Control Panel &gt;&#160;Security Page &gt;&#160;Internet Zone</b>.
										</li>
                                                                                            <li value="5">
											In the right pane under <b>Settings</b>, double click <b>Don't prompt for client certificate selection when no certificates or only one certificate exists</b>.
										</li>
                                                                                            <li value="6">In the dialog box that opens, confirm that the setting is <b>Enabled</b>.
										</li>
                                                                                            <p>
                                                                                                <img src="../../Resources/Images/GPCM_e_IE_VerifyEnabled.png" />
                                                                                            </p>
                                                                                        </ol>
                                                                                    </ol>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="line-height:150%;">
                                                                <br />
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><span style="font-size: 14pt;">STEP 3 — Configure app sign-on policy rules in Okta</span> </a></span>
                                                                <div class="MCDropDownBody dropDownBody"><a name="PartC"></a>
                                                                    <h3>About app sign-on policy rules</h3>
                                                                    <p>By default, all Client options in the App Sign On Rule dialog box are pre-selected. To configure more granular access to the app, create rules  that reflect:</p>
                                                                    <ul>
                                                                        <li>Who users are, or the groups to which they belong</li>
                                                                        <li>Whether they are on or off network, or within a defined network zone</li>
                                                                        <li>The type of client running on their device  (<span class="mc-variable Mobile.O365 variable">Office 365</span> apps only)</li>
                                                                        <li>The platform of their mobile or desktop device</li>
                                                                        <li>Whether or not their devices are Trusted</li>
                                                                    </ul>
                                                                    <div>
                                                                        <h4>Taking an allow-list approach to sign-on policy rules</h4>
                                                                        <ul>
                                                                            <ol>
                                                                                <li value="1">Create one or more Allow rules to support the scenarios that will allow access to the app, then assign those rules the highest priority. </li>
                                                                                <li value="2">Create a Deny catch-all rule that will apply to users who don't match the permissive scenarios you created in Step 1. Assign the Deny catch-all rule the lowest priority, just above Okta's <b><a href="#" class="MCTextPopup popup popupHead">Default Rule<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>The Default Rule is already created and can't be edited. The Default Rule is designed to allow access to all client types from any device and platform and network locations. It is applied to users who don't match any of the more restrictive rules that have higher priority. </span></a></b>. In the allow-list approach described here, the Default rule is never reached because it is effectively negated by the Deny catch-all rule.</li>
                                                                            </ol>
                                                                            <div class="noteOkta">
                                                                                <p class="noteContent">For important security information about creating app sign-on policy rules, see <a href="../Security/policies/about-app-signon-policies.htm" class="MCXref xref">About app sign-on policies</a>.</p>
                                                                            </div>
                                                                        </ul>
                                                                    </div>
                                                                    <hr width="100%" size="0" align="center" />
                                                                    <h3><a name="SignInRulesProcedure"></a>Procedure</h3>
                                                                    <ol>
                                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <b>Applications</b> &gt;<![CDATA[  ]]><b>Applications</b> and click the SAML or WS-enabled app that you want to protect with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</li>
                                                                        <li value="2">Click the <b>Sign On</b> tab, scroll down to the <b>Sign On Policy</b>, and click <b>Add Rule</b>.</li>
                                                                        <li value="3">Configure one or more rules using the following example as a guide. </li>
                                                                    </ol>
                                                                    <div class="noteOkta">
                                                                        <p class="noteContent">This example shows <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> rules for managing access to <b>Office 365</b>. For other apps, note that the section <b>If the user's client is any of these</b> isn't present.</p>
                                                                    </div>
                                                                    <h3>Example Allowlist</h3>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Ex2_R1"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Example Rule 1 — Exchange ActiveSync or Legacy Auth; All platforms; Any Trust; Allow access</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/E2_R1_EAS-AnyP-AnyT-Allow.png"><img class="MCPopupThumbnail img" data-mc-width="639" data-mc-height="786" src="../../Resources/Images/E2_R1_EAS-AnyP-AnyT-Allow_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a>
                                                                            </p>
                                                                            <ol>
                                                                                <li value="1">Enter a descriptive name for the rule.</li>
                                                                            </ol>
                                                                            <p><b>CONDITIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="2">Under <b>People</b>, specify whether to apply the rule to individuals only or to individuals and groups. The People option you select needs to be the same for all the rules you create for this example.</li>
                                                                                <li value="3">Under <b>Location</b>, specify the user location to which the rule will apply. The Location option you select needs to be the same for all the rules you create for this example.</li>
                                                                                <li value="4">Configure client settings:</li>
                                                                                <p>Enter:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Web browser or Modern Auth client</b> unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Exchange ActiveSync client or Legacy Auth client</b> is selected.</p>
                                                                                <p style="font-weight: normal;">Mobile:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>iOS</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Android</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Other mobile</b> is selected.</p>
                                                                                <p>Desktop: </p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Windows</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>macOS</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Other desktop</b> is selected</p>
                                                                                <li value="5">Configure  <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b>.</li>
                                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b><i>Tip</i>:</b><span style="color: #0000ff;"> To make <span style="color: #000000;">Trusted </span>and <span style="color: #000000;">Not Trusted</span> options selectable:</span></a></span>
                                                                                    <div class="MCDropDownBody dropDownBody">
                                                                                        <div>
                                                                                            <p><b>Trusted</b> and <b>Not trusted</b> options in the <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </b> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                                            <ul>
                                                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                                                <li>Other desktop (for example,  Linux)</li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Any </b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Trusted </b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Not trusted</b> is unselected.</p>
                                                                            </ol>
                                                                            <p><b>ACTIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="6">Configure <b>Access</b>.</li>
                                                                                <p><b>Allowed</b> is selected.</p>
                                                                                <li value="7">Click <b>Save</b>.</li>
                                                                                <li value="8">Create <b>Rule 2</b>.</li>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Ex2_R2"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Example Rule 2 — Web browser or Modern Auth; Windows; Trusted; Allow access  +&#160;MFA </a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/E2_R2_Web-Win-Trust-Allow-MFA.png"><img class="MCPopupThumbnail img" data-mc-width="640" data-mc-height="898" src="../../Resources/Images/E2_R2_Web-Win-Trust-Allow-MFA_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a>
                                                                            </p>
                                                                            <ol>
                                                                                <li value="1">Enter a descriptive name for the rule.</li>
                                                                            </ol>
                                                                            <p><b>CONDITIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="2">
									Under <b>People</b>, select the same People option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The People option needs to be the same for all rules in this example.</li>
                                                                                <li value="3">Under <b>Location</b>, select the same Location option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The Location option needs to be the same for all rules in this example.</li>
                                                                                <li value="4">Configure client settings:</li>
                                                                                <p>Enter:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Web browser or Modern Auth client</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Exchange ActiveSync client</b> is is unselected.</p>
                                                                                <p style="font-weight: normal;">Mobile:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>iOS</b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Android</b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Other mobile</b> is unselected.</p>
                                                                                <p>Desktop: </p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Windows</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>macOS</b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Other desktop</b> is unselected.</p>
                                                                                <li value="5">Configure  <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b>.</li>
                                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b><i>Tip</i>:</b><span style="color: #0000ff;"> To make <span style="color: #000000;">Trusted </span>and <span style="color: #000000;">Not Trusted</span> options selectable:</span></a></span>
                                                                                    <div class="MCDropDownBody dropDownBody">
                                                                                        <div>
                                                                                            <p><b>Trusted</b> and <b>Not trusted</b> options in the <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </b> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                                            <ul>
                                                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                                                <li>Other desktop (for example,  Linux)</li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Any </b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Trusted </b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Not trusted</b> is unselected.</p>
                                                                            </ol>
                                                                            <p><b>ACTIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="6">Configure <b>Access</b>:</li>
                                                                                <p><b>Allowed</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Prompt for factor</b> is selected.</p>
                                                                                <li value="7">Click <b>Save</b>.</li>
                                                                                <li value="8">Create <b>Rule 3</b>.</li>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Ex2_R3"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Example Rule 3 — Web browser or Modern Auth; All platforms except Windows; Any Trust, Allow access +&#160;MFA </a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/E2_R3_Web_AllButWin_AnyT_MFA.png"><img class="MCPopupThumbnail img" data-mc-width="640" data-mc-height="909" src="../../Resources/Images/E2_R3_Web_AllButWin_AnyT_MFA_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a>
                                                                            </p>
                                                                            <ol>
                                                                                <li value="1">Enter a descriptive name for the rule.</li>
                                                                            </ol>
                                                                            <p><b>CONDITIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="2">
									Under <b>People</b>, select the same People option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The People option needs to be the same for all rules in this example.</li>
                                                                                <li value="3">Under <b>Location</b>, select the same Location option that you selected in <a href="#Ex2_R1">Rule 1</a>.  The Location option needs to be the same for all rules in this example.</li>
                                                                                <li value="4">Configure client settings:</li>
                                                                                <p>Enter:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Web browser or Modern Auth client</b> selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Exchange ActiveSync client</b> is unselected.</p>
                                                                                <p style="font-weight: normal;">Mobile:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>iOS</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Android</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Other mobile</b> is selected.</p>
                                                                                <p>Desktop: </p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Windows</b> is selected</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>macOS</b> is selected</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Other desktop</b> is selected</p>
                                                                                <li value="5">Configure  <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b>.</li>
                                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b><i>Tip</i>:</b><span style="color: #0000ff;"> To make <span style="color: #000000;">Trusted </span>and <span style="color: #000000;">Not Trusted</span> options selectable:</span></a></span>
                                                                                    <div class="MCDropDownBody dropDownBody">
                                                                                        <div>
                                                                                            <p><b>Trusted</b> and <b>Not trusted</b> options in the <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </b> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                                            <ul>
                                                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                                                <li>Other desktop (for example,  Linux)</li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Any </b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Trusted </b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Not trusted</b> is unselected.</p>
                                                                            </ol>
                                                                            <p><b>ACTIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="6">Configure <b>Access</b>.</li>
                                                                                <p><b>Allowed</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Prompt for factor</b> is selected.</p>
                                                                                <li value="7">Click <b>Save</b>.</li>
                                                                                <li value="8">Create <b>Rule 4</b>.</li>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Ex2_R4"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Example Rule 4 — Any client; All platforms; Any Trust; Deny access</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/E2_R4_AnyClien_AnyP_AnyT_Denied.png"><img class="MCPopupThumbnail img" data-mc-width="642" data-mc-height="679" src="../../Resources/Images/E2_R4_AnyClien_AnyP_AnyT_Denied_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a>
                                                                            </p>
                                                                            <ol>
                                                                                <li value="1">Enter a descriptive name for the rule.</li>
                                                                            </ol>
                                                                            <p><b>CONDITIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="2">Under <b>People</b>, select the same People option that you selected in <a href="#Ex2_R1">Rule 1</a>. The People option you select needs to be the same for all the rules you create for this example.</li>
                                                                                <li value="3">Under <b>Location</b>, select the same Location option that you selected in <a href="#Ex2_R1">Rule 1</a>. The Location option you select needs to be the same for all the rules you create for this example.</li>
                                                                                <li value="4">Configure client settings:</li>
                                                                                <p>Enter:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Web browser or Modern Auth client</b> selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Exchange ActiveSync client</b> is selected.</p>
                                                                                <p style="font-weight: normal;">Mobile:
									</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>iOS</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Android</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Other mobile</b> is selected.</p>
                                                                                <p>Desktop: </p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Windows</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>macOS</b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Other desktop</b> is selected.</p>
                                                                                <li value="5">Configure  <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b>.</li>
                                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><b><i>Tip</i>:</b><span style="color: #0000ff;"> To make <span style="color: #000000;">Trusted </span>and <span style="color: #000000;">Not Trusted</span> options selectable:</span></a></span>
                                                                                    <div class="MCDropDownBody dropDownBody">
                                                                                        <div>
                                                                                            <p><b>Trusted</b> and <b>Not trusted</b> options in the <b><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> </b> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                                            <ul>
                                                                                                <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                                                <li>Other mobile (for example, BlackBerry)</li>
                                                                                                <li>Other desktop (for example,  Linux)</li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <p><span style="font-family: 'Wingdings'; color: #007dc1;">þ</span> <b>Any </b> is selected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Trusted </b> is unselected.</p>
                                                                                <p><span style="font-family: 'Wingdings'">¨</span> <b>Not trusted</b> is unselected.</p>
                                                                            </ol>
                                                                            <p><b>ACTIONS</b>
                                                                            </p>
                                                                            <ol data-mc-continue="true">
                                                                                <li value="6">Configure <b>Access</b>.</li>
                                                                                <p><b>Denied</b> is selected.</p>
                                                                                <li value="7">Click <b>Save</b>.</li>
                                                                            </ol>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="WL-Rule5"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false"><MadCap:dropDownHotspot>Rule 5 — Default sign on rule – Any client; All platforms; Any Trust; Allow access</MadCap:dropDownHotspot></a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>The Default sign-on rule is already created and cannot be edited. Note that in this allowlist example, the Default rule is never reached because it is effectively negated by Rule 4.</p>
                                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-android-rule-5-default.png"><img class="MCPopupThumbnail img" data-mc-width="480" data-mc-height="617" src="../../Resources/Images/dt-android-rule-5-default_thumb_0_250.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 250px;" tabindex="" /></a>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><span style="font-size: 14pt;">Revoke and remove <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates</span></a></span>
                                                        <div class="MCDropDownBody dropDownBody"><a name="PartD"></a>
                                                            <p><a name="You"></a>You may need to revoke an end user's <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s) from the Okta Certificate Authority. This is recommended if the computer is lost or stolen, or if the end user is deactivated. To re-secure an end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking their <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s), you need to remove the revoked certificate from their computer before enrolling a new certificate.</p>
                                                            <p>Be aware of the following:</p>
                                                            <div>
                                                                <ul>
                                                                    <li>Steps 1 - 4 of this procedure revoke all <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates from the Okta Certificate Authority that were issued to the end user. Certificate revocation does not remove existing certificates from managed Windows computers. In order to re-secure a Windows computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking certificates, you must first remove any existing <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the computer and then re-enroll the computer with a new certificate as detailed in Step 5. The Device Registration Task will not enroll a new certificate if another certificate (whether revoked or not) is present on the computer.</li>
                                                                    <li>Deactivating an end user in Okta also revokes their <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the Okta Certificate Authority (but does not remove the certificate from their computer).</li>
                                                                </ul>
                                                                <ol>
                                                                    <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <b>Directory</b> &gt; <b>People</b>.
                </li>
                                                                    <li value="2">
                                                                        <p>Click the end user whose <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate you want to revoke.</p>
                                                                    </li>
                                                                    <li value="3">
							In the <b>More Actions</b> menu, click <b>Revoke Trust Certificate</b>. <p><img src="../../Resources/Images/DT_revokeTrustCert_80per.png" /></p></li>
                                                                    <li value="4">
                                                                        <p>Read the message that displays, and then click <b>Revoke Trust Certificate</b>.</p>
                                                                    </li>
                                                                    <li value="5">
                                                                        <p>Optional. If you want to re-secure the end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>, first remove any existing <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the computer.</p>
                                                                        <ul>
                                                                            <li>
                                                                                <p>To remove a certificate from a single computer (such as during testing or the Proof of Concept phase of your implementation), use a third-party management tool such as <a href="https://docs.microsoft.com/en-us/dotnet/framework/tools/certmgr-exe-certificate-manager-tool" target="_blank">Certificate Manager Tool</a> (Certmgr.exe) to remove the certificate issued by the Okta MTLS Certificate Authority.</p>
                                                                            </li>
                                                                            <li>
                                                                                <p>To remove certificates from multiple computers, use a third-party management tool such as <a href="https://support.microsoft.com/en-us/help/816102/how-to-use-group-policy-to-remotely-install-software-in-windows-server" target="_blank">GPO</a> or <a href="https://docs.microsoft.com/en-us/sccm/core/understand/introduction" target="_blank">SCCM</a> to remove the certificate issued by the Okta MTLS Certificate Authority.</p>
                                                                            </li>
                                                                        </ul>
                                                                    </li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Troubleshooting</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p><a name="Troubleshooting_DT-Win"></a><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> generates a certificate on domain-joined Windows devices and presents it to Okta when a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured WS-Fed or SAML app is launched. The two problems that you are most likely to encounter are:</p>
                                                            <ul>
                                                                <li>Trusted devices are unable to access <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps.</li>
                                                                <li>Untrusted devices are able to access <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps.</li>
                                                            </ul>
                                                            <p>If you encounter either problem, try to correct it by performing Basic Troubleshooting. If the problem persists, perform Advanced Troubleshooting.</p>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Basic Troubleshooting</a></span>
                                                                <div class="MCDropDownBody dropDownBody"><a name="BasicTroubleshooting_DT-Win"></a>
                                                                    <p>To perform basic troubleshooting, review the following areas:</p>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />IWA web app installation and setup</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>Verify the following:</p>
                                                                            <ul>
                                                                                <li>You have <a href="#B.1">installed</a> a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-capable version of the IWA web app in your Active Directory domain.</li>
                                                                                <li>If you use HTTPS for IWA, you have <a href="#ModWebConfig">modified the IWA web.config file</a> to support HTTPS binding.</li>
                                                                            </ul>
                                                                            <p>If the problem persists, proceed to <a href="#AdvancedTroubleshooting_DT-Win">Advanced Troubleshooting</a>.</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Enablement</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>Verify that you have <a href="#PartB">enabled the global Device Trust setting</a> in <b>Security &gt; <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></b>.</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Registration task</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>Verify that you have <a href="#DistributeInstaller">distributed</a> the Device Registration Task to Windows domain-joined workstations.</p>
                                                                            <p><b>Proxy server environments</b> — In order for the Registration Task installation to succeed in environments that implement a proxy server, you must install Device Registration Task version 1.2.1 or higher through a command line and append the appropriate HttpProxy parameter to the installation command. </p>
                                                                            <p>See <a href="#MSI-installation">Install the Registration Task</a>. </p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Certificate</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <div>
                                                                                <h4>Verify that the certificate is installed</h4>
                                                                                <ol>
                                                                                    <li value="1">Open <b>Microsoft Management Console</b>. See <a href="#Verify">Verify with Microsoft Management Console</a>.</li>
                                                                                    <li value="2">Open the end user's personal store (not the Local computer store).</li>
                                                                                    <li value="3">Verify that a single certificate appears under <b>Personal &gt; Certificates</b> issued by <b>MTLS Certificate Authority</b>.</li>
                                                                                    <li value="4">If no certificate appears, see <a href="#AdvancedTroubleshooting_DT-Win">Advanced Troubleshooting</a>.</li>
                                                                                </ol>
                                                                            </div>
                                                                            <div>
                                                                                <h4><a name="Certific"></a>Known Issue – Auth failure caused by blocked Mutual TLS certificate exchange</h4>
                                                                                <p><a name="MTLS-handshake"></a>
                                                                                    <div>
                                                                                        <p data-mc-conditions="SnippetConditionsForDevices.Windows Only">The Mutual TLS certificate exchange (handshake) in this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example). Make sure to configure  proxy servers/proxy clients, as well as any endpoint protection software you may implement, in a way that does not block your clients from completing the certificate exchange with Okta. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):</p>
                                                                                        <p id="code">*.okta.com</p>
                                                                                        <p id="code">*.okta-emea.com</p>
                                                                                        <p id="code">*.okta-gov.com</p>
                                                                                    </div>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Sign-on policy</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>Verify the following:</p>
                                                                            <p>You have <a href="#PartC">configured a sign-on policy</a> that:</p>
                                                                            <ul>
                                                                                <li>Is applied to the WS-Fed or SAML app that you want to secure with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</li>
                                                                                <li>Is applied to the correct user(s) and/or groups.</li>
                                                                                <li>Includes, at minimum, an Active <a href="#SignInRulesProcedure">rule</a> that denies access to untrusted devices.</li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="DT_Win_SysLog"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">System Log</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>Review the <a href="../Reports/Reports_SysLog.htm">System Log</a> to verify the following <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> System Log events: 
                                    
                                </p>
                                                                            <h4>Authentication</h4>
                                                                            <ul>
                                                                                <li><b>DisplayMessage</b>: Authentication of device through a certificate</li>
                                                                                <li><b>EventType</b>: <span class="code">user.authentication.authenticate</span></li>
                                                                            </ul>
                                                                            <h4>Enrollment</h4>
                                                                            <ul>
                                                                                <li><b>DisplayMessage</b>: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate enrollment</li>
                                                                                <li><b>EventType</b>: <span class="code">user.credential.enroll</span></li>
                                                                            </ul>
                                                                            <h4>Issuance</h4>
                                                                            <ul>
                                                                                <li><b>DisplayMessage</b>: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate issuance</li>
                                                                                <li><b>EventType</b>: <span class="code">pki.cert.issue</span></li>
                                                                            </ul>
                                                                            <h4>Revocation</h4>
                                                                            <ul>
                                                                                <li><b>DisplayMessage</b>: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate revocation</li>
                                                                                <li><b>EventType</b>: <span class="code">pki.cert.revoke</span></li>
                                                                            </ul>
                                                                            <h4>Renewal</h4>
                                                                            <ul>
                                                                                <li><b>DisplayMessage:</b> <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate renewal</li>
                                                                                <li><b>EventType:</b> <span class="code">pki.cert.renew</span></li>
                                                                            </ul>
                                                                            <div>
                                                                                <h3>View unique device IDs in DebugContext</h3>
                                                                                <p>DebugData shows the unique ID of the devices associated with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> events and is useful for debugging purposes. This information can also help you  verify that<span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> is being enforced on devices in your device inventory, which may be useful prior to rolling out the feature to a large group of users.</p>
                                                                                <div class="noteOkta">
                                                                                    <p class="noteContent">The information contained in debugContext.debugData is intended to add context when troubleshooting customer platform issues. Note that key names and values are subject to change without notice and should be used primarily as a debugging aid, not as a data contract.  See <a href="https://developer.okta.com/docs/reference/api/system-log/#debugcontext-object" target="_blank">DebugContext Object</a> in Okta Developer documentation.</p>
                                                                                </div>
                                                                                <ol>
                                                                                    <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <b>Reports</b> &gt; <b>System Log</b>.</li>
                                                                                    <li value="2">Search for the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> Event (date) that you’re interested in, then navigate to:
                                        <p><b>Event &gt; AuthenticationContext &gt; System &gt; DebugContext &gt; DebugData</b></p></li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="AdvancedTroubleshooting_DT-Win"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Advanced Troubleshooting</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <p>If Basic Troubleshooting didn't resolve the problem you are experiencing, and the certificate isn't installed on the Windows workstation, check in the following locations:</p>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />In the Okta Admin app</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <p>Verify the following:</p>
                                                                            <ul>
                                                                                <li>The org has an active Active Directory (AD) integration (<b>Directory &gt; Directory Integrations</b>)</li>
                                                                                <li>The end user of the domain-joined Windows computer is:<![CDATA[
									]]><ul><li>Present in <b>Directory &gt; People</b></li><li>Activated</li><li>A member of the Active Directory domain</li></ul></li>
                                                                                <li>The IWA web app is:
									<ul><li>Primary</li><li>Enabled</li></ul></li>
                                                                                <li>A <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-capable version</li>
                                                                            </ul>
                                                                            <p>(<b>Security &gt; Delegated Authentication &gt; Desktop Single Sign On &gt; Integrated Windows Authentication</b>)</p>
                                                                            <p>
                                                                                <img src="../../Resources/Images/DT_Trouble_IWA_status.png" />
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />On the IWA server</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <h4>Check IIS settings for the IWA web app</h4>
                                                                            <ol>
                                                                                <li value="1">Click <b>Start</b>.</li>
                                                                                <li value="2">In the search box, enter <b>IIS</b>.</li>
                                                                                <li value="3">Right click <b>Internet Information Services Manager</b> and select <b>Run as administrator</b>.</li>
                                                                                <li value="4">If the IWA web app is configured for SSL, open SSL settings and make sure the option Require SSL is selected.</li>
                                                                                <li value="5">Open the Authentication feature and make sure Windows Authentication is Enabled.</li>
                                                                            </ol>
                                                                            <p>
                                                                                <img src="../../Resources/Images/DT_Trouble_IWA_IIS_1.png" />
                                                                            </p>
                                                                            <h4>Check for errors in the web.config file</h4>
                                                                            <ol>
                                                                                <li value="1">Go to <span class="code">C:\Inetpub\wwwroot\IWA\web.config</span>.</li>
                                                                                <li value="2">Use a validation tool to make sure the web.config file contains valid XML syntax.</li>
                                                                                <li value="3">If HTTPS was enabled in IIS on the site, make sure that the web.config file enables <span class="code">SecureBindingForDeviceTrust</span>.</li>
                                                                            </ol>
                                                                            <h4>Check for errors in Windows Logs &gt; Applications and Services Logs &gt; Okta Single Sign On</h4>
                                                                            <ol>
                                                                                <li value="1">Click <b>Start</b>.</li>
                                                                                <li value="2">In the search box, enter <b>Event Viewer</b>.</li>
                                                                                <li value="3">Expand Application and Services Logs.</li>
                                                                                <li value="4">Check for errors in Okta Single Sign On.</li>
                                                                            </ol>
                                                                            <p>
                                                                                <img src="../../Resources/Images/DT_Trouble_AppSvcLogs.png" />
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />On the domain-joined Windows computer</a></span>
                                                                        <div class="MCDropDownBody dropDownBody">
                                                                            <h4>Make sure <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> Tasks were installed and successful:</h4>
                                                                            <ol>
                                                                                <li value="1">Click <b>Start</b>.</li>
                                                                                <li value="2">In the search box, enter <b>Task Scheduler</b>.</li>
                                                                                <li value="3">Right click <b>Task Scheduler</b> and select <b>Run as administrator</b>.</li>
                                                                                <li value="4">Make sure the tasks <span class="code">okta-devicetrust-devicetask</span> and <span class="code">okta-devicestrust-usertask</span> appear and have completed successfully.</li>
                                                                            </ol>
                                                                            <p>
                                                                                <img src="../../Resources/Images/DT_TaskSched.png" />
                                                                            </p>
                                                                            <h4>Check for errors in Windows Logs &gt; Applications and Services Logs &gt; <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span>:</h4>
                                                                            <ol>
                                                                                <li value="1">Click <b>Start</b>.</li>
                                                                                <li value="2">In the search box, enter <b>Event Viewer</b>.</li>
                                                                                <li value="3">Expand <b>Application and Services Logs</b>.</li>
                                                                                <li value="4">Click <b><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span></b>.</li>
                                                                            </ol>
                                                                            <p>
                                                                                <img src="../../Resources/Images/DT_EViewer.png" />
                                                                            </p>
                                                                            <div>
                                                                                <h4><a name="force-cert-renewal"></a>Force certificate renewal in some circumstances</h4>
                                                                                <p>Certificates are valid for one year and are renewed automatically sometime within 30 days before expiration. In order for automatic renewal to succeed, end users must be logged on to the domain-joined computer and connected to your corporate network.</p>
                                                                                <p>You can manually force certificate renewal to try to fix the following problems (requires Device Registration Task 1.3.1 or later):</p>
                                                                                <ul>
                                                                                    <li>An end user's certificate was incorrectly or accidentally revoked by the admin through the Admin Console (see <a href="#PartD">Revoke</a>). </li>
                                                                                    <li>The certificate was corrupted on the client due to accidental deletion, file corruption, or loss of the  private key.</li>
                                                                                </ul>
                                                                                <p>Open a command prompt and issue the following command:</p>
                                                                                <p id="code">"C:\Program Files\Okta\DeviceTrust\OktaDeviceReg.exe" --user --forceRenewal</p>
                                                                            </div>
                                                                            <h4>Run the task in debug mode as the logged-on user</h4>
                                                                            <ol>
                                                                                <li value="1">Make sure the IWA server is reachable when the task is run (either directly over the internet or through a VPN).</li>
                                                                                <li value="2">Open a command prompt and issue the following command:</li>
                                                                                <li value="3">If the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>certificate isn't generated on the device, the task executes the following actions:
									<ul><li>Contacts Okta at the registry value pointed to by <span class="code">HKLM\Software\Okta\DeviceTrust\OktaOrgUrl</span> and gets the location of the IWA server for the org.</li><li>Contacts the IWA server to generate the device token for the device.</li><li>Contacts the IWA server to generate a user token based on the device token.</li><li>Contacts Okta with the generated user token to generate the certificate.</li><li>Installs the certificate in the user's personal store.</li></ul></li>
                                                                            </ol>
                                                                            <p>The user token is a set of JWT claims signed by the IWA server. You may be asked to copy the token and provide it to Okta Support for analysis.</p>
                                                                            <p>
                                                                                <img src="../../Resources/Images/DT_OktaDeviceReg-Running2.png" />
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /><span style="font-size: 14pt;">Known issues</span></a><a name="KnownIssues"></a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <ul>
                                                                <li><b>Multiple apps opening simultaneously</b> — If multiple apps secured by <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> are configured to open automatically when end users sign in to their Okta dashboard from IE or Edge browsers, only one of the apps completes the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow. Access to the remaining apps fails and end users are presented a message advising them to contact their administrator. (See <a href="#LearnMoreStep">Enable the global Device Trust setting for your org</a>.)</li>
                                                                <li><b><span class="mc-variable okta-feature-names.Okta_Device_Trust_for_Windows variable">Okta Device Trust for Windows</span> + certificate-based IWA for SSO</b> — Configuring this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution may cause an incompatibility issue if your org is configured with certificate-based IWA to support SSO for iOS and Android mobile devices. In that case, end users signing in to Okta using IWA from Windows computers with a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate <u style="font-style: normal; text-decoration: none;">and</u> an IWA certificate installed may be presented with a certificate picker containing both certificates during the Desktop SSO flow, which may cause confusion. If end users select the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate, they will get a 403 error during the IWA flow.
It may be possible to  enable certificate hinting in IIS so that only one certificate is shown to users.	See the Microsoft article <a href="https://technet.microsoft.com/en-au/library/dn786429.aspx">Schannel SSP Technical Overview</a>.		</li>
                                                                <li><a name=".NETFramework"></a><b>Checking .NET version</b> — The Device Registration Task checks the version of the .NET Framework running on managed Windows computers. If the version isn't 4.5.2 or higher, the Registration Task installs version 4.5.2 automatically and, during installation, progress indicators and other installation dialog boxes will appear on end user screens.</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a style="font-size: 14pt;" href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Related topics</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <h4>From Okta</h4>
                                                            <p><a href="../Directory/Configuring_Desktop_SSO.htm" target="_blank">Install and Configure the Okta IWA Web App for Desktop SSO</a>
                                                            </p>
                                                            <p><a href="../device-trust/device-trust-landing.htm" target="_blank">Device Trust</a>
                                                            </p>
                                                            <p><a href="../device-trust/dt-win-tpm.htm" class="MCXref xref">Enhance Windows Device Trust security with Trusted Platform Module (TPM)</a>
                                                            </p>
                                                            <p>Device Trust for Windows Desktop Registration Task Version History</p>
                                                            <p><a href="../Security/O365_Client-Access-Policies.htm" target="_blank">Office 365 Client Access Policies</a>
                                                            </p>
                                                            <p><a href="../Apps/Apps_Okta_Enhancements_Office_365_Integration.htm">Okta Enhancements with Microsoft Office 365 Integration</a>
                                                            </p>
                                                            <h4>External sources</h4>
                                                            <p><a href="https://technet.microsoft.com/en-us/library/hh147307(v=ws.10).aspx" target="_blank">Group Policy for Beginners</a>
                                                            </p>
                                                            <p><a href="https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/working-with-certificates" target="_blank">Working with Certificates</a>
                                                            </p>
                                                            <p><a href="https://support.microsoft.com/en-us/help/816102/how-to-use-group-policy-to-remotely-install-software-in-windows-server" target="_blank">How to use Group Policy to remotely install software in Windows Server 2008 and in Windows Server 2003</a>
                                                            </p>
                                                            <p><a href="https://technet.microsoft.com/en-us/library/cc940895.aspx" target="_blank">Group Policy refresh interval for computers</a>
                                                            </p>
                                                            <p><a href="https://www.microsoft.com/en-us/microsoft-365/blog/2015/11/19/updated-office-365-modern-authentication-public-preview/" target="_blank">Updated Office 365 modern authentication</a>
                                                            </p>
                                                            <p><a href="https://social.technet.microsoft.com/wiki/contents/articles/36101.office-365-enable-modern-authentication.aspx" target="_blank">Office 365: Enable Modern Authentication</a>
                                                            </p>
                                                            <p><a href="https://docs.microsoft.com/en-us/dotnet/framework/tools/certmgr-exe-certificate-manager-tool" target="_blank">Certificate Manager Tool (certmgr.exe)</a>
                                                            </p>
                                                            <p><a href="https://docs.microsoft.com/en-us/sccm/core/understand/introduction" target="_blank">Introduction to System Center Configuration Manager (SCCM)</a>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Right menu Col ***  ****commented out temporarily until redesign for "on this page" implementation, redundant to new left accordion implementation***-->
                                        <!--<div class="is-not-in-mobile">
                <MadCap:menuProxy data-mc-skin="/Project/Skins/okta-right-menu.flskn" mc-linked-toc="/Project/TOCs/okta-TOC.fltoc" style="mc-context-sensitive: True;mc-include-parent: True;mc-include-siblings: False;mc-include-children: True;" />
            </div>-->
                                    </div>
                                    <div class="toolbar-bottom">
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie select-language-button" title="Change language">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button class="button needs-pie previous-topic-button" title="Previous topic" disabled="true">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button class="button needs-pie next-topic-button" title="Next topic" disabled="true">
                                                    <div>
                                                        <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                            <div class="button-icon"> </div>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <!--         <div class="footer2">
            <div>
                <ul>
                    <li><a href="https://fulluat-okta.cs67.force.com/help/s/article/Okta-Community-FAQs">Community FAQ</a>
                    </li>
                    <li><a href="https://support.okta.com/help/s/article/Okta-Community-Terms-and-Conditions">Terms &amp; Conditions</a>
                    </li>
                    <li>Trust</li>
                    <li><a href="https://www.okta.com/contact/">Contact</a>
                    </li>
                    <li>Feedback</li>
                </ul>
            </div>
            <div>
                <p class="try-okta-button"><a role="button" href="https://www.okta.com/free-trial/">Try Okta For Free</a>
                </p>
            </div>
        </div> -->
                                    <div class="footer2">
                                        <div>
                                            <p class="copyright">©  <span class="mc-variable okta-variables.Year variable">2021</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                        <!--             <div>
                <ul>
                    <li><a href="https://twitter.com/okta"><img src="../Images/okta-assets/twitter.png" /></a>
                    </li>
                    <li><a href="https://www.facebook.com/OktaIdentity"><img src="../Images/okta-assets/facebook.png" /></a>
                    </li>
                    <li><a href="https://www.linkedin.com/company/okta-inc-/"><img src="../Images/okta-assets/linkedin.png" /></a>
                    </li>
                    <li><a href="https://www.youtube.com/user/OktaInc"><img src="../Images/okta-assets/youtube.png" /></a>
                    </li>
                    <li><a href="https://www.okta.com"><img src="../Images/okta-assets/okta.png" /></a>
                    </li>
                </ul>
            </div> -->
                                    </div>
                                    <!-- Qualtrics setup to use with script below, replacing getfeedback -->
                                    <div id="ZN_6fGBJ8J3VcIBymN">
                                        <!--DO NOT REMOVE-CONTENTS PLACED HERE-->
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <!--         <script type="text/javascript" src="../Scripts/back-to-top.js">
        </script>
 -->
                                    <script type="text/javascript" src="../../Resources/Scripts/js/vendor/qualtrics.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
