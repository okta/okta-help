<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav_nav_poc" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-toc-path="Device Trust" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Okta Device Trust for Jamf Pro-managed macOS devices prevents unmanaged computers from accessing apps. A Device Registration Task enrolls individual computers." /><title>Enforce Okta Device Trust for Jamf Pro-managed macOS devices | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- Pendo Script (Per Chris Bank) -->
        <!-- End Pendo Script -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/okta-main-new-nav.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../Resources/TableStyles/standard.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-NMZZV4P');
			/* ]]> */
		</script>
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KXMLV58');
			/* ]]> */
		</script>
        <script>
		/* <![CDATA[ */
		(function(apiKey){
			(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
			v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
			o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
			y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
			z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id:              'VISITOR-UNIQUE-ID'
            },
            account: {
                id:           'ACCOUNT-UNIQUE-ID'
            }
        });
		})('a9bd3885-93ae-46ab-700b-dd29e613c19d');
		/* ]]> */
		</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1024px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMZZV4P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXMLV58" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="mc-variable okta-coveo-config.OrgId variable">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="mc-variable okta-coveo-config.PlatformRestUri variable">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchPageUrl variable">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="mc-variable okta-coveo-config.SearchTokenServiceUrl variable">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************** Coveo Search bar ************************************* -->
                                    <!-- set margin and size in /Content/Resources/Scripts/coveo-resources/css/Coveo.Okta.StandaloneSearchbox.min.css to make room for replacing Flare-generated top-nav with HTML code (see below)-->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper" data-mc-conditions="MultiProdPubish.SearchBar">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="replace_top_nav">
                                        <div class="navbar">
                                            <div class="dropdown" data-mc-conditions="MultiProdPubish.DocMenu">
                                                <button class="dropbtn">Documentation <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://help.okta.com/en-us/Content/Topics/ReleaseNotes/okta-relnotes.htm">Release notes</a>
                                                    </div>
                                                    <div><a href="https://help.okta.com/en-us/Content/index.htm">Product documentation</a>
                                                    </div>
                                                    <div><a href="https://developer.okta.com/documentation" target="_blank">Developer documentation<img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown"><a href="https://support.okta.com/help/s/knowledge">Knowledge base</a>
                                            </div>
                                            <div class="dropdown">
                                                <button class="dropbtn">Community <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://support.okta.com/help/s/questions?language=en_US">Questions</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/group/CollaborationGroup/Recent?language=en_US">Discussions</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/events?language=en_US">Webinars</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown">
                                                <button class="dropbtn">Product <i class="fa fa-caret-down"></i></button>
                                                <div class="dropdown-content">
                                                    <div><a href="https://support.okta.com/help/s/ideas" target="_blank">Ideas<img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/productroadmap?language=en_US">Roadmap</a>
                                                    </div>
                                                    <div><a href="https://support.okta.com/help/s/product-hub?language=en_US">Product hub</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown"><a href="https://www.okta.com/services/education-services/" target="_blank">Training<span><img src="../../Resources/Images/okta-assets/external-link-icon.svg" style="margin-left: 8px;" /></span></a>
                                            </div>
                                        </div>
                                        <div class="logo_container"><a class="logo" href="https://support.okta.com/help/s/"><img src="../../Resources/Images/okta-assets/Logo.png" alt="Okta Support" title="Okta Support" /></a>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar_no_expand mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie select-language-button" title="Change language">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Change language">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie previous-topic-button" title="Previous topic" disabled="true">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                        <button class="button needs-pie next-topic-button" title="Next topic" disabled="true">
                                                            <div>
                                                                <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                                    <div class="button-icon"> </div>
                                                                </div>
                                                            </div>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1>Enforce Okta <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> for Jamf Pro managed macOS devices</h1>
                                                    <p> Okta Device Registration Task v1.3.1 was released  to support Python 3. If you require the Python 2.x script, see <a href="https://okta.okta.com/static/devicetrust/MacOktaDeviceRegistrationTaskSetup.1.2.1.py">Device Registration Task v1.2.1</a>.</p>
                                                    <p><span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> for Jamf Pro managed macOS devices allows you to prevent unmanaged macOS&#160;devices from accessing corporate SAML and WS-Fed cloud apps. <span class="mc-variable okta-feature-names.Okta_Device_Trust variable">Okta Device Trust</span> ensures that only known and secured devices can access your Okta-managed applications.</p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-flow.png" data-mc-popup-alt="The image illustrates how Okta Device Trust is enforced for Jamf Pro managed macOS devices."><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1256" data-mc-height="817" src="../../Resources/Images/dt-macos-flow_thumb_220_220.png" alt="The image illustrates how Okta Device Trust is enforced for Jamf Pro managed macOS devices." tabindex="" /></a>
                                                    </p>
                                                    <h2>Prerequisites</h2><a name="Prerequi"></a>
                                                    <p>This solution works with:
                </p>
                                                    <ul>
                                                        <li>Apple computers running <a href="../Miscellaneous/Platforms_Browser_OS_Support.htm" class="MCXref xref">Supported platforms, browsers, and operating systems</a> of macOS.</li>
                                                        <li>Jamf Pro MDM solution</li>
                                                        <li>The following browsers and native apps capable of accessing the Okta Keychain on the managed computer when performing the federated authentication flow to Okta:
						<ul><li>Browsers: Chrome and Safari browsers</li><li>Modern Auth-enabled native apps:
					<ul><li>Box</li><li>Google Drive</li><li>Microsoft Office</li><li>Skype for Business</li><li>Slack</li></ul></li></ul></li>
                                                        <li> The Okta Device Registration Task is a Python script that completes various tasks (for example, enrollment, and registration). Depending on your OS, complete one of the following, to make sure you use the appropriate version of this script:<ul><li> If you have macOS 10.15.xx (Catalina), 11.xx (Big Sur), or 12.xx (Monterey), use registration version 1.3.3 or later, which is based on Python 3.</li><li>If you have  macOS 10.14.xx (Mojave) and are currently using registration script 1.2.1 or earlier, continue to use it as-is, or upgrade to Catalina, Big Sur, or Monterey before using Python 3.</li></ul></li>
                                                    </ul>
                                                    <h2>Before you begin</h2>
                                                    <ul>
                                                        <li>
                                                            <p>Device Trust deployment is not renewed on devices that are not used to access secure applications. For this reason, it is recommended to issue certificates only to the devices that require access to secure resources.</p>
                                                        </li>
                                                        <li>Modern Authentication required for securing Microsoft Office apps: To secure Microsoft Office apps with this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution they must be enabled to support Modern Authentication. For more information, see <a href="https://docs.microsoft.com/en-us/office365/enterprise/modern-auth-for-office-2013-and-2016?redirectSourcePath=%252fen-us%252farticle%252fusing-office-365-modern-authentication-with-office-clients-776c0036-66fd-41cb-8928-5495c0f9168a" rel="noreferrer" target="_blank">this</a> Microsoft article. For information about securing Office 365 clients that use legacy protocols, see <a href="../Security/O365_Client-Access-Policies.htm" rel="noreferrer" target="_blank">Office 365 Client Access Policies</a>.</li>
                                                        <li>
                                                            <p><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> isn't supported with all versions of Microsoft Office thick clients: This <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution has been tested to work with Microsoft Office thick client versions 16.13.1 and 16.15. However, it doesn't work with Microsoft Office thick client version 16.14 (build 180610). </p>
                                                        </li>
                                                        <li>Prevent iCloud from transferring the Okta keychain to other Apple devices: To prevent iCloud from transferring the Okta keychain from DT-secured macOS devices to other Apple devices, Okta strongly recommends that you create a Configuration Profile in Jamf Pro that disables <span class="uicontrol">Allow iCloud Keychain syncing</span>. (Note:&#160;Be aware that disabling syncing blocks all keychain transfers.) See the <a href="#disable-keychain-syncing">Add the modified Okta Device Registration Task to Jamf Pro and distribute it to macOS devices</a>.</li>
                                                        <li>
                                                            <p>Webview must have access to the device keychain: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> for managed macOS computers works with any SAML/WS-Fed-enabled app that supports authentication through a webview. The webview in which authentication is performed must have access to the Okta Keychain on the device. To prevent&#160;end users&#160;from being prompted for consent when the certificate is used in the authentication flow, Okta allows the following apps. See <a href="#PartG">Modify the default allowlist</a>:</p>
                                                            <ul>
                                                                <li>Box</li>
                                                                <li>Chrome</li>
                                                                <li>Safari</li>
                                                                <li>Microsoft Office</li>
                                                                <li>Skype for Business</li>
                                                                <li>Google Drive</li>
                                                                <li>Slack</li>
                                                            </ul>
                                                        </li>
                                                        <li>Per-device unbound certificate limit:  A certificate becomes bound to a given user the first time that user accesses a device trust-secured application from a device trust-secured macOS device. Unused certificates are unbound. Okta can issue up to five unbound certificates to the device, one each time you perform the enrollment procedure. As a security precaution, Okta will not issue more than five unbound certificates to a given device. To avoid reaching the unbound certificate limit, ensure that users use the unbound certificates already on the device before you attempt to obtain more certificates through enrollment. If you reach the enrollment limit, the Syslog indicates an enrollment failure and the error message <span class="uicontrol">Maximum enrollment limit of 5 certificates for a device is reached</span> appears in the JAMF log.</li>
                                                        <li>Per-org enrollment limit: A given macOS device can only be secured by the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration of a single Okta org. Put another way, macOS devices can't be secured by the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration of multiple Okta orgs simultaneously. This is because the client certificate issued to the device is signed by the CA of a particular org. This limit applies to Okta Preview and Production orgs.</li>
                                                        <li>Shared-terminal scenarios are not supported: This <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution doesn't support shared-terminal scenarios in which multiple Okta end users log in to the same account from the same macOS workstation.</li>
                                                        <li>Device Trust enrollment is not supported when Okta is in read-only mode: Devices  cannot be enrolled in <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> if the cell in which your Okta org resides is in <a href="#" class="MCTextPopup popup popupHead">read-only mode<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>A mode during which most administrative operations are disabled and a banner is displayed in the admin (not end-user) Dashboard. During read-only mode, all background jobs such as imports, OMM enrollment, OMM deprovisioning, and JIT provisioning are queued, and all are restarted when read-only mode is disabled.</span></a>.</li>
                                                        <li>End users may need to clear the browser cache: Some browsers (for example, Chrome) cache the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate. After the certificate is renewed automatically (once per year), these browsers may continue to present the expired certificate to Okta instead of the new certificate. In that case, end users are shown the <span class="wintitle">Security requirements</span> message and are denied access to <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps. Okta recommends that you advise affected end users to clear browser cache by quitting and then restarting the browser (not just closing the browser window).</li>
                                                        <li>
                                                            <p>Apps secured by <span style="font-weight: normal;" class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> are shown as locked on the <span style="font-weight: normal;" class="mc-variable okta-feature-names.Okta_End-User_Dashboard variable">Okta End-User Dashboard</span>. A lock icon is shown beside apps secured by <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> under these conditions:</p>
                                                            <ul>
                                                                <li> &#160;The end users accessed the dashboard in a desktop or mobile browser (not in <span class="mc-variable Mobile.Okta_Mobile variable">Okta Mobile</span>). </li>
                                                                <li><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> is enabled for the org.</li>
                                                                <li>The device is not trusted.</li>
                                                                <li>The end user tried to access any <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured app from their dashboard. </li>
                                                            </ul>
                                                        </li>
                                                        <li>
                                                            <p>Apps must support Modern Authentication: To secure Microsoft Office apps with this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution they must be enabled to support Modern Authentication. For more information, see the Microsoft article <a href="https://docs.microsoft.com/en-us/office365/enterprise/modern-auth-for-office-2013-and-2016" target="_blank">How modern authentication works for Office 2013 and Office 2016 client apps</a>. Also see <a href="../Security/O365_Client-Access-Policies.htm">Office 365 Client Access Policies</a>.</p>
                                                        </li>
                                                        <li>
                                                            <p>Make sure that certificates are installed in the keychain on the devices you have targeted for this Device Trust solution. If certificates are not installed and the Trusted setting is enabled in your app sign-on policy, users are denied access to the app and are redirected to a security message advising them to contact their administrator. (You can configure the message to include a <span class="uicontrol">Learn more</span> link to more information. See <a href="#learn-more-link">Step 1 — Enable the global Device Trust setting for your org</a>). </p>
                                                        </li>
                                                        <li>
                                                            <p>Take care when disabling the macOS Device Trust setting: Do not disable the macOS <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting on the <span class="uicontrol">Security</span> &gt; <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> page if you have also configured an app sign-on policy that allows trusted macOS devices. Otherwise, your <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> configuration will be in an inconsistent state. To disable <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> for your org, first remove any app sign on policies that contain a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting, then disable macOS&#160;<span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> in <span class="uicontrol">Security</span> &gt; <span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span>.</p>
                                                        </li>
                                                        <li> Before asking Okta Support to disable <span style="font-weight: bold;" class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>: If you ask Okta Support to disable <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> capability for your org, make sure to first change the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting in the app sign-on policy rules to <span class="uicontrol">Any</span> (<span class="uicontrol">Applications</span> &gt; <span class="uicontrol">app</span> &gt; <span class="uicontrol">Sign On</span>). If you don't make this change and then later have Okta Support re-enable <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> capability for your org, the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting in app sign-on policy rules takes effect immediately, which you may not have expected.
					</li>
                                                        <li>Verify that clients can complete the MTLS handshake: The Mutual TLS certificate exchange (handshake) in this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example). If you implement endpoint protection software, make sure to configure it in a way that does not block your clients from completing the certificate exchange with Okta. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):

					<p><span class="code">*.okta.com</span></p><p><span class="code">*.okta-emea.com</span></p><p><span class="code">*.okta-gov.com</span></p></li>
                                                    </ul>
                                                    <h2>Procedures</h2>
                                                    <h3><span>Step 1. Enable the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting for your org</span>
                                                    </h3><a name="Task1"></a>
                                                    <ol>
                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <span class="uicontrol">Security</span> &gt; <span class="uicontrol"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span>.</li>
                                                        <li value="2">In the macOS <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> section, click <span class="uicontrol">Edit</span>.</li>
                                                        <li value="3">In the wizard that launches, select <span class="uicontrol">Enable macOS <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span>.</li>
                                                        <li value="4"><a name="learn-more-link"></a>Optional. In the <span class="uicontrol">Learn more</span> field, you can enter an externally-accessible redirect URL where end users with untrusted devices can find more information. The security message shown to these end users will include a Learn more link that redirects to your specified URL. 
							
							
						<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/DT_Security_URLspecified_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="386" data-mc-height="265" src="../../Resources/Images/DT_Security_URLspecified_2_thumb_220_220.png" tabindex="" /></a></p><p>If you choose not to specify a URL in this optional field, these end users will be shown the same message but without the <span class="uicontrol">Learn more</span> link. </p><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/DT_Security_noURLspecified_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="373" data-mc-height="198" src="../../Resources/Images/DT_Security_noURLspecified_2_thumb_220_220.png" tabindex="" /></a></p></li>
                                                        <li value="5">In <span class="uicontrol">Trust is established by</span>, select <span class="uicontrol">Jamf Pro</span>.</li>
                                                        <li value="6">Enter information about the Jamf Pro API, such as the Jamf Pro tenant URL (for example, <span class="code">https://example.jamfcloud.com</span>, not the API URL), credentials, and key.                             <p>This information allows Okta to verify that end user devices are managed by Jamf Pro at the time of certificate enrollment. For Jamf Pro, you need at least these READ privileges to access Jamf APIs in order for Okta to verify that the device is managed:</p><ul><li><span class="uicontrol">Computers</span> —&#160;READ</li><li><span class="uicontrol">Jamf Pro User Accounts &amp;&#160;Groups</span> — READ</li><li><span class="uicontrol">Users</span> —&#160;READ</li></ul></li>
                                                        <p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">Okta strongly recommends that you create a separate user for API access that is separate from the user your organization uses to access the Jamf Pro admin interface.</p>
                                                            </div>
                                                        </p>
                                                        <li value="7">Click <span class="uicontrol">Test API credentials</span>. A&#160;success&#160;message&#160;appears&#160;if&#160;a connection is established with your MDM provider's API.</li>
                                                        <li value="8">Click <span class="uicontrol">Next</span>.</li>
                                                        <li value="9">On the Configure MDM&#160;Provider screen, click <span class="uicontrol">Download</span> to obtain a python script. You'll modify the script later in <a href="#Task2">Step 2. Modify the Okta Device Registration Task</a>.</li>
                                                        <li value="10">To copy the  provided <span class="uicontrol">Secret Key Value</span> and  <span class="uicontrol">Org URL</span> to your clipboard, click the copy icon  adjacent to the fields. </li>
                                                        <p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">Make  a note of the provided <span class="uicontrol">Secret Key Value</span> and <span class="uicontrol">Org URL</span>, as this is the only time these will appear in Okta. Also, if you later want to edit your configuration and generate a new <span class="disableGlossary">Secret Key</span> through the <span class="uicontrol">Reset macOS&#160;Secret Key</span> button, you must perform this procedure again.</p>
                                                            </div>
                                                        </p>
                                                        <li value="11">Click <span class="uicontrol">Done</span>.</li>
                                                        <li value="12">Modify the downloaded Okta Device Registration Task as described in <a href="#Task2">Step 2</a>.
                            <p>The <a href="../Settings/Version_Histories/Ver_History_Device_Trust_MacOS.htm" rel="noreferrer" target="_blank">latest version</a> of the Okta Device Registration Task is available from the Okta Admin Console  <span class="uicontrol">Settings</span> &gt; <span class="uicontrol">Downloads</span> page.</p></li>
                                                    </ol>
                                                    <h3><a name="Step"></a>Step 2. Modify the Okta Device Registration Task
        </h3><a name="Task2"></a>
                                                    <div class="noteOkta"><a name="MTLS-handshake"></a>
                                                        <p class="noteContent">The Mutual TLS certificate exchange (handshake) in this Device Trust flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example). If you implement endpoint protection software, make sure to configure it in a way that doesn't block your clients from completing the certificate exchange with Okta. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):</p>
                                                        <p><span class="code">*.okta.com</span>
                                                        </p>
                                                        <p><span class="code">*.okta-emea.com</span>
                                                        </p>
                                                        <p><span class="code">*.okta-gov.com</span>
                                                        </p>
                                                    </div>
                                                    <ol>
                                                        <li value="1">On the Admin's computer, go to the <span class="uicontrol">Downloads</span> folder and open the script you downloaded from Okta.</li>
                                                        <li value="2">Modify the script by pasting in the  <span class="uicontrol">Secret Key Value</span> and <span class="uicontrol">Org URL</span> you generated in <a href="#Task1">Step 1. Enable the global setting for your org</a>. </li>
                                                        <p>When entering the key and the URL, retain the single quotation marks ( ' ) but replace the parentheses and the placeholder text with the actual <span class="uicontrol">Secret Key Value</span> and <span class="uicontrol">Org URL</span>, as shown in the following example:</p>
                                                        <h4>Example of an unmodified script</h4><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-key-url-before.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="523" data-mc-height="81" src="../../Resources/Images/dt-macos-key-url-before_thumb_220_220.png" tabindex="" /></a>
                                                        <h4>Example of a modified script. Retain the single quotation marks but not the parentheses.</h4><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-key-url-after.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="522" data-mc-height="79" src="../../Resources/Images/dt-macos-key-url-after_thumb_220_220.png" tabindex="" /></a>
                                                        <li value="3">Optional. Modify the default app allowlist.</li>
                                                        <p>By default, the Okta Device Registration Task allows some <a href="#" class="MCTextPopup popup popupHead">popular apps<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>Microsoft Office 365, Box, Google Drive, Skype for Business, Slack</span></a> so that end users aren't prompted for the keychain password when accessing them. To modify the default allowlist, see <a href="#PartG">Modify the app allowlist</a>.</p>
                                                        <li value="4">Save the script. </li>
                                                        <li value="5">Proceed to <a href="#Task4">Step 4. Add the modified Okta Device Registration Task to  Jamf Pro and distribute it to macOS devices</a>.</li>
                                                    </ol>
                                                    <h3><span style="font-size: 14pt;">Step 3. Install Python 3 and Device Trust dependencies</span>
                                                    </h3><a name="Task3"></a>
                                                    <ol>
                                                        <li value="1">
                                                            <p>If Python 3 is already installed, go to step 2.</p>
                                                            <p>There are different ways to install Python 3. This step provides installation instructions using the macOS  Xcode command line tool. Okta recommends that you use your preferred method.</p>
                                                            <p>Optional. Run the following script on your macOS machine to update your macOS environment to Python 3:
</p>
                                                            <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                                <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="True"><pre><span class="codeSnippetLineNumbers" style="border-right: #AAA 2px solid;" aria-hidden="true">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</span><code>#!/bin/sh<br />echo "Checking for the existence of the Apple Command Line Developer Tools"<br />/usr/bin/xcode-select -r<br />xcodepath='which xcode-select'<br />echo "xcode path is $xcodepath"<br />$xcodepath -r &amp;&gt; /dev/null<br />$xcodepath -p &amp;&gt; /dev/null<br />if [[ $? -ne 0 ]]; then<br />echo "Apple Command Line Developer Tools not found."<br />touch /tmp/.com.apple.dt.CommandLineTools.installondemand.in-progress;<br />installationPKG=$(/usr/sbin/softwareupdate --list | /usr/bin/grep -B 1 -E 'Command Line Tools' | /usr/bin/tail -2 | /usr/bin/awk -F'*' '/^ \\/ {print $2}' | /usr/bin/sed -e 's/^ *Label: //' -e 's/^ *//' | /usr/bin/tr -d '\n')<br />echo "Installing ${installationPKG}"<br />/usr/sbin/softwareupdate --install "${installationPKG}" --verbose<br />else<br />echo "Apple Command Line Developer Tools are already installed."/usr/bin/xcode-select -s /Library/Developer/CommandLineTools<br />fi<br />exit</code></pre>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li value="2">
                                                            <p>Install the Device Trust Dependencies. The updated macOS Device Registration Task requires “python3“ and “pip3“ alias on the device to point to the correct Python 3 installation.</p>
                                                            <p>Run the following script to install the required Device Trust dependencies:</p>
                                                        </li>
                                                        <li value="3">
                                                            <p>Install the Device Trust Dependencies. The updated macOS Device Registration Task requires “python3“ and “pip3“ alias on the device to point to the correct Python 3 installation.</p>
                                                            <p>Run the following script to install the required Device Trust dependencies:</p>
                                                            <p>
                                                                <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                                    <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="True"><pre><span class="codeSnippetLineNumbers" style="border-right: #AAA 2px solid;" aria-hidden="true">1
2
3
4
5
6
</span><code>#!/bin/sh<br />echo "Running pip3 install --upgrade pip"<br />sudo pip3 install --upgrade pip<br />echo "Running pip3 install pyobjc-framework-SystemConfiguration"<br />sudo pip3 install pyobjc-framework-SystemConfiguration<br />exit</code></pre>
                                                                    </div>
                                                                </div>
                                                            </p>
                                                        </li>
                                                    </ol>
                                                    <h3><span style="font-size: 14pt;">Step 4. Add the modified Okta Device Registration Task to  Jamf Pro and distribute it to macOS devices</span>
                                                    </h3><a name="Task4"></a>
                                                    <p>The Okta Device Registration Task is a script that is distributed by  Jamf Pro to the macOS&#160;devices you have targeted for this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution. When deployed on the device, the Okta Device Registration Task does the following:</p>
                                                    <ul>
                                                        <li>
                                                            <p>Registers with Okta to obtain a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate. Okta checks with Jamf Pro to make sure the device is managed.</p>
                                                        </li>
                                                        <li>
                                                            <p>Configures Chrome and Safari browsers and <a href="#" class="MCTextPopup popup popupHead">tested native apps<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>These Modern Auth-enabled native apps: Microsoft Office 365, Box, Google Drive, Skype for Business, Slack</span></a> on the device to present the certificate automatically during secure app access.</p>
                                                            <li>
                                                                <p>Schedules a lightweight task that runs once a day and whenever users log in to their computer. The task checks whether the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate  is expired and tries to renew the certificate 30 days before expiry. Certificates are valid for 1 year.</p>
                                                            </li>
                                                        </li>
                                                        <li>During renewal, Okta performs  checks similar to those that occur during registration, such as checking whether the device is managed before issuing a new certificate.
										
										
										
										</li>
                                                        <li>After the script runs on the device once, Jamf Pro removes it from the device automatically.</li>
                                                        <li>You can use the following query to determine which version of the Registration Task is installed on the device: <p id="code">python3 ~/Library/Okta/okta_device_trust.py version</p></li>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-flow.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1256" data-mc-height="817" src="../../Resources/Images/dt-macos-flow_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                    </ul>
                                                    <p>Create the workflows that make sense for your organization. Make sure  the script successfully runs at least once to enroll the Okta certificate.</p>
                                                    <ol>
                                                        <li value="1">In Jamf Pro click the gear icon  to go to <span class="uicontrol">All Settings</span>.</li>
                                                        <li value="2">Go to <span class="uicontrol">Computer Management &gt;&#160;Scripts</span>.</li>
                                                        <li value="3">Create a new script and paste into it the Okta Device Registration Task you downloaded from Okta in <a href="#Task1">Step 1. Enable the global Device Trust setting for your org</a> and modified in <a href="#Task2">Step 2. Modify the Okta Device Registration Task</a>.</li>
                                                        <li value="4">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="5">Create a policy to deploy the script to one or more Target Computers and/or Target Users:</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">Go to <span class="uicontrol">Computers</span> &gt;&#160;<span class="uicontrol">Policies</span>.</li>
                                                            <li value="2">Click <span class="uicontrol">+ New</span>.</li>
                                                            <li value="3">Click <span class="uicontrol">General</span> in the left pane.</li>
                                                            <li value="4">Enter a policy a name in the Display Name field.</li>
                                                            <li value="5">&#160;Select the following Trigger events that will initiate the policy:
								<ul><li><span class="uicontrol">Enrollment Complete</span> – the script runs immediately after devices complete the enrollment process.</li><li><span class="uicontrol">Recurring Check-in</span> – the script runs according to the recurring check-in frequency configured in Jamf Pro.</li></ul></li>
                                                            <li value="6">Set the <span class="uicontrol">Execution Frequency</span> to <span class="uicontrol">Once per computer per user</span>.
                                <p>Note:&#160;There are other approaches that you can implement in Jamf Pro to trigger deployment of the script (for example,  Extension Attributes, which allow you to validate that the certificate is on the device and to deploy the certificate if it is missing).</p></li>
                                                            <li value="7">Click <span class="uicontrol">Save</span>.</li>
                                                            <li value="8">Click <span class="uicontrol">Scripts</span> in the left pane, and then click <span class="uicontrol">Configure</span>.</li>
                                                            <li value="9">Locate the script you created for this policy in step 3, and then click <span class="uicontrol">Add</span>.</li>
                                                            <li value="10">Click <span class="uicontrol">Scope</span>.</li>
                                                            <li value="11">In <span class="uicontrol">Target Computers</span> and/or <span class="uicontrol">Target Users</span>, specify the computers and users to whom the policy will apply.</li>
                                                            <li value="12">Click <span class="uicontrol">Save</span>.</li>
                                                        </ol>
                                                        <li value="6"> <a name="disable-keychain-syncing"></a>Recommended. To prevent iCloud from transferring the Okta keychain from <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured macOS devices to other Apple devices, you should create a Configuration Profile in Jamf Pro that disables <span class="uicontrol">Allow iCloud Keychain syncing</span>.  
							
							
							<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/disable-iCloud-keychaing-sync.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="504" data-mc-height="292" src="../../Resources/Images/disable-iCloud-keychaing-sync_thumb_220_220.png" tabindex="" /></a></p></li>
                                                        <li value="7">Check the logs in Jamf Pro to verify that the Okta Device Registration Task ran successfully.
								<ol style="list-style-type: lower-alpha;"><li value="1">Go to <span class="uicontrol">Policies</span> and click&#160;your policy.</li><li value="2">Click <span class="uicontrol">Logs</span> at the bottom of the screen.</li></ol></li>
                                                        <li value="8">Proceed to <a href="#Task5">Step 5. Configure app sign-on policy rules in Okta</a>.</li>
                                                    </ol>
                                                    <h3><span style="font-size: 14pt;">Step 5.</span><span style="font-size: 14pt;"> Configure app sign-on policy rules in Okta</span> </h3><a name="Task5"></a>
                                                    <h4>About app sign-on policy rules</h4>
                                                    <p>By default, all Client options in the App Sign On Rule dialog box are pre-selected. To configure more granular access to the app, create rules  that reflect:</p>
                                                    <ul>
                                                        <li>Who users are, or the groups to which they belong</li>
                                                        <li>Whether they are on or off network, or within a defined network zone</li>
                                                        <li>The type of client running on their device  (<span class="mc-variable Mobile.O365 variable">Office 365</span> apps only)</li>
                                                        <li>The platform of their mobile or desktop device</li>
                                                        <li>Whether or not their devices are Trusted</li>
                                                    </ul>
                                                    <div>
                                                        <h4>Taking an allow-list approach to sign-on policy rules</h4>
                                                        <ul>
                                                            <ol>
                                                                <li value="1">Create one or more Allow rules to support the scenarios that will allow access to the app, then assign those rules the highest priority. </li>
                                                                <li value="2">Create a Deny catch-all rule that will apply to users who don't match the permissive scenarios you created in Step 1. Assign the Deny catch-all rule the lowest priority, just above the default rule. In the allow-list approach described here, the default rule is never reached because it is effectively negated by the Deny catch-all rule.</li>
                                                            </ol>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">For important security information about creating app sign-on policy rules, see <a href="../Security/policies/about-app-signon-policies.htm" class="MCXref xref">About app sign-on policies</a>.</p>
                                                            </div>
                                                        </ul>
                                                    </div>
                                                    <h3><a name="Procedur"></a>Procedure</h3>
                                                    <ol>
                                                        <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <span class="uicontrol">Applications</span> &gt; <span class="uicontrol">Applications</span>, and then click the SAML or WS-enabled app that you want to protect with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</li>
                                                        <li value="2">Click the <span class="uicontrol">Sign On</span> tab.</li>
                                                        <li value="3">Scroll down to the <span class="uicontrol">Sign On Policy</span>, and click <span class="uicontrol">Add Rule</span>.</li>
                                                        <li value="4">Configure one or more rules using the following example as a guide.</li>
                                                    </ol>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">This example shows <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> rules for managing access to Office 365. For other apps, note that the section If the user's client is any of these isn't present.</p>
                                                    </div>
                                                    <h3>Example Allowlist </h3>
                                                    <h4>
            Example Rule 1, Exchange ActiveSync; All&#160;platforms; Any trust; Allow access
        </h4><a name="WL-Rule1"></a>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-1.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="608" data-mc-height="958" src="../../Resources/Images/dt-macOS-rules-2-1_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p><span class="uicontrol">Conditions</span>
                                                    </p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">Under <span class="uicontrol">PEOPLE</span>, specify whether to apply the rule to individuals only or to individuals and groups. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="3">Under <span class="uicontrol">LOCATION</span>, specify the user location to which the rule will apply. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="4">Under <span class="uicontrol">CLIENT</span>, configure the following settings:</li>
                                                        <p> <span class="uicontrol">Web browser</span> unselected.</p>
                                                        <p> <span class="uicontrol">Modern Auth client</span> unselected.</p>
                                                        <p> <span class="uicontrol">Exchange ActiveSync client or Legacy Auth client</span> is selected.</p>
                                                        <p>Mobile									</p>
                                                        <p> <span class="uicontrol">iOS</span> is selected.</p>
                                                        <p> <span class="uicontrol">Android</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other mobile</span> is selected.</p>
                                                        <p>Desktop</p>
                                                        <p> <span class="uicontrol">Windows</span> is selected.</p>
                                                        <p> <span class="uicontrol">macOS</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other desktop</span> is selected.</p>
                                                        <li value="5">Under <span class="uicontrol">DEVICE&#160;TRUST</span>, configure the following:</li>
                                                        <li value="6">
                                                            <div>
                                                                <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="wintitle"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                <ul>
                                                                    <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                    <li>Other mobile (for example, BlackBerry)</li>
                                                                    <li>Other desktop (for example,  Linux)</li>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                        <p> <span class="uicontrol">Any</span>  is selected.</p>
                                                        <p> <span class="uicontrol">Trusted</span>  is unselected.</p>
                                                        <p> <span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p>ACTIONS</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="7">Configure <span class="uicontrol">Access</span>:</li>
                                                        <p><span class="uicontrol">Allowed</span> is selected.</p>
                                                        <p> <span class="uicontrol">Prompt for factor</span> is unselected.</p>
                                                        <li value="8">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="9">Create Rule 2.</li>
                                                    </ol>
                                                    <h4>
           Example Rule 2, Web browser or Modern Auth; macOS; Trusted; Allow access
        </h4><a name="WL-Rule2"></a>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="603" data-mc-height="730" src="../../Resources/Images/dt-macOS-rules-2-2_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p>Conditions</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">
									Under <span class="uicontrol">PEOPLE</span>, select the same People option that you selected in <a href="#WL-Rule1">Rule 1</a>. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="3">Under <span class="uicontrol">LOCATION</span>, select the same Location option that you selected in <a href="#WL-Rule1">Rule 1</a>.  The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="4">Under <span class="uicontrol">CLIENT</span>, configure the following settings:</li>
                                                        <p> <span class="uicontrol">Web browser</span> selected.</p>
                                                        <p> <span class="uicontrol"> Modern Auth client</span> selected.</p>
                                                        <p> <span class="uicontrol">Exchange ActiveSync client</span> is is unselected.</p>
                                                        <p>Mobile									</p>
                                                        <p> <span class="uicontrol">iOS</span> is unselected.</p>
                                                        <p> <span class="uicontrol">Android</span> is unselected.</p>
                                                        <p> Other mobile is unselected.</p>
                                                        <p>Desktop</p>
                                                        <p> <span class="uicontrol">Windows</span> is unselected.</p>
                                                        <p> <span class="uicontrol">macOS</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other desktop</span> is unselected</p>
                                                        <li value="5">Under <span class="uicontrol">DEVICE&#160;TRUST</span>, configure the following:</li>
                                                        <li value="6">
                                                            <div>
                                                                <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="wintitle"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                <ul>
                                                                    <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                    <li>Other mobile (for example, BlackBerry)</li>
                                                                    <li>Other desktop (for example,  Linux)</li>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                        <p> <span class="uicontrol">Any</span>  is unselected.</p>
                                                        <p> <span class="uicontrol">Trusted</span>  is selected.</p>
                                                        <p> <span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p><span class="wintitle">ACTIONS</span>
                                                    </p>
                                                    <ol data-mc-continue="true">
                                                        <li value="7">Configure <span class="uicontrol">Access</span>.</li>
                                                        <p><span class="uicontrol">Allowed</span> is selected.</p>
                                                        <p> <span class="uicontrol">Prompt for factor</span> is unselected.</p>
                                                        <li value="8">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="9">Create Rule 3.</li>
                                                    </ol>
                                                    <h4>
          Example Rule 3, Web browser or Modern Auth; All platforms except macOS; Any Trust; Allow access +&#160;MFA
        </h4><a name="WL-Rule3"></a>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-3.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="610" data-mc-height="1110" src="../../Resources/Images/dt-macOS-rules-2-3_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p><span class="wintitle">Conditions</span>
                                                    </p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">
									Under <span class="wintitle">PEOPLE</span>, select the same People option that you selected in <a href="#WL-Rule1">Rule 1</a>. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="3">Under <span class="wintitle">LOCATION</span>, select the same Location option that you selected in <a href="#WL-Rule1">Rule 1</a>. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="4">Under <span class="wintitle">CLIENT</span>, configure the following settings:</li>
                                                        <p> <span class="uicontrol">Web browser</span> selected.</p>
                                                        <p> <span class="uicontrol"> Modern Auth client</span> selected.</p>
                                                        <p> <span class="uicontrol">Exchange ActiveSync client</span> is is unselected.</p>
                                                        <p>Mobile									</p>
                                                        <p> <span class="uicontrol">iOS</span> is unselected.</p>
                                                        <p> <span class="uicontrol">Android</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other mobile</span> is selected.</p>
                                                        <p>Desktop</p>
                                                        <p> <span class="uicontrol">Windows</span> is selected.</p>
                                                        <p> <span class="uicontrol">macOS</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other desktop</span> is selected.</p>
                                                        <li value="5">Under <span class="wintitle">DEVICE&#160;TRUST</span>, configure the following:</li>
                                                        <li value="6">
                                                            <div>
                                                                <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="wintitle"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                <ul>
                                                                    <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                    <li>Other mobile (for example, BlackBerry)</li>
                                                                    <li>Other desktop (for example,  Linux)</li>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                        <p> <span class="uicontrol">Any</span>  is selected.</p>
                                                        <p> <span class="uicontrol">Trusted</span>  is unselected.</p>
                                                        <p> <span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p><span class="wintitle">ACTIONS</span>
                                                    </p>
                                                    <ol data-mc-continue="true">
                                                        <li value="7">Configure <span class="uicontrol">Access</span>.</li>
                                                        <p><span class="uicontrol">Allowed</span> is selected.</p>
                                                        <p> <span class="uicontrol">Prompt for factor</span> is selected.</p>
                                                        <li value="8">Click <span class="uicontrol">Save</span>.</li>
                                                        <li value="9">Create Rule 4.</li>
                                                    </ol>
                                                    <h4>
            Example Rule 4, Any client type; All platforms; Any Trust; Deny access
        </h4><a name="WL-Rule4"></a>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-2-4.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="611" data-mc-height="842" src="../../Resources/Images/dt-macOS-rules-2-4_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <ol>
                                                        <li value="1">Enter a descriptive name for the rule.</li>
                                                    </ol>
                                                    <p>Conditions</p>
                                                    <ol data-mc-continue="true">
                                                        <li value="2">
									Under <span class="wintitle">PEOPLE</span>, select the same People option that you selected in <a href="#WL-Rule1">Rule 1</a>. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="3">Under <span class="wintitle">LOCATION</span>, select the same Location option that you selected in <a href="#WL-Rule1">Rule 1</a>. The option you select must be the same for all the rules you create for this example.</li>
                                                        <li value="4">Under <span class="wintitle">CLIENT</span>, configure the following settings:</li>
                                                        <p> <span class="uicontrol">Web browser</span> selected.</p>
                                                        <p> <span class="uicontrol"> Modern Auth client</span> selected.</p>
                                                        <p> <span class="uicontrol">Exchange ActiveSync client</span> is selected.</p>
                                                        <p>Mobile									</p>
                                                        <p> <span class="uicontrol">iOS</span> is selected.</p>
                                                        <p> <span class="uicontrol">Android</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other mobile</span> is selected.</p>
                                                        <p>Desktop</p>
                                                        <p> <span class="uicontrol">Windows</span> is selected.</p>
                                                        <p> <span class="uicontrol">macOS</span> is selected.</p>
                                                        <p> <span class="uicontrol">Other desktop</span> is selected.</p>
                                                        <li value="5">Under <span class="wintitle">DEVICE&#160;TRUST</span>, configure the following:</li>
                                                        <li value="6">
                                                            <div>
                                                                <p><span class="uicontrol">Trusted</span> and <span class="uicontrol">Not trusted</span> options in the <span class="wintitle"><span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span></span> section are selectable only when all of the following options in the Client section are not selected:</p>
                                                                <ul>
                                                                    <li>Exchange ActiveSync or Legacy Auth client</li>
                                                                    <li>Other mobile (for example, BlackBerry)</li>
                                                                    <li>Other desktop (for example,  Linux)</li>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                        <p> <span class="uicontrol">Any</span>  is selected.</p>
                                                        <p> <span class="uicontrol">Trusted</span>  is unselected.</p>
                                                        <p> <span class="uicontrol">Not trusted</span> is unselected.</p>
                                                    </ol>
                                                    <p><span class="wintitle">ACTIONS</span>
                                                    </p>
                                                    <ol data-mc-continue="true">
                                                        <li value="7">Configure <span class="uicontrol">Access</span>.</li>
                                                        <p><span class="uicontrol">Denied</span> is selected.</p>
                                                        <li value="8">Click <span class="uicontrol">Save</span>.</li>
                                                    </ol>
                                                    <h4>Example Rule 5, Default sign on rule – Any client, All platforms; Any Trust; Allow access</h4>
                                                    <p>The Default sign on rule is already created and can't be edited. In this example, the Default rule is never reached because it is effectively negated by Rule 4. </p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macOS-rules-default.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="609" data-mc-height="961" src="../../Resources/Images/dt-macOS-rules-default_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <h2><span style="font-size: 14pt;">Revoke and remove <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates</span>
                                                    </h2><a name="Task3"></a>
                                                    <p>You may need to revoke an end user's <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s) from the Okta Certificate Authority. This is recommended if the computer is lost or stolen, or if the end user is deactivated. To re-secure an end user's computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking their <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate(s), you need to remove the revoked certificate from their computer before enrolling a new certificate.</p>
                                                    <div>
                                                        <ul>
                                                            <li>Steps 1 - 4 of this procedure revoke all <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificates from the Okta Certificate Authority that were issued to the end user. Certificate revocation does not remove existing certificates from macOS computers. In order to re-secure a macOS&#160;computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> after revoking certificates, you must first remove any existing Device Trust certificate from the computer and then re-enroll the computer with a new certificate as detailed in <a href="#remove-cert">Step 5</a>. The Device Registration Task will not enroll a new certificate if another certificate (whether revoked or not) is present on the computer.</li>
                                                            <li>When an end user is deactivated Okta also revokes their <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the Okta Certificate Authority automatically (but does not remove the certificate from their computer). To remove the certificate from the computer, use either removal method described in Step 5.</li>
                                                        </ul>
                                                        <ol>
                                                            <li value="1">
                                                                <p>In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <span class="uicontrol">Directory</span> &gt;<span class="uicontrol">People</span>.</p>
                                                            </li>
                                                            <li value="2">
                                                                <p>Click the end user whose <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate you want to revoke.</p>
                                                            </li>
                                                            <li value="3">
							In the <span class="wintitle">More Actions</span> menu, click <span class="uicontrol">Revoke Trust Certificate</span>. 
					
					
					<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/DT_revokeTrustCert_80per.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="818" data-mc-height="634" src="../../Resources/Images/DT_revokeTrustCert_80per_thumb_220_220.png" tabindex="" /></a></p></li>
                                                            <li value="4">
                                                                <p>Read the message that appears, and then click <span class="uicontrol">Revoke Trust Certificate</span>.</p>
                                                            </li>
                                                            <li value="5"><a name="remove-cert"></a>To remove the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate for any reason (such as prior to re-securing a computer with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>), first remove any existing <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate from the computer. You can use a command line or create an uninstall script in Jamf Pro. Both uninstall methods remove all <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> related artifacts from the macOS device.</li>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">If you plan to reuse the script that you downloaded and modified in <a href="#Step" class="MCXref xref">Step 2. Modify the Okta Device Registration Task
        </a>, make sure to first remove the Org Token before using it. Also, the token is not necessary for the uninstall operation.</p>
                                                            </div>
                                                            <ul>
                                                                <li>Remove through a command line: Open a terminal on the target computer and issue the command <span class="code">python &lt;fileName&gt;.py uninstall</span> where <span class="code">&lt;fileName&gt;</span> is the name of Okta Device Registration Task. For example, if the name of the Okta Registration Task is <span class="code">MacOktaDeviceRegistrationTaskSetup.1.0.2.py</span>, you would issue this command:
                                    <p><span class="code">python MacOktaDeviceRegistrationTaskSetup.1.0.2.py uninstall</span></p></li>
                                                                <li>Remove with an uninstall script: Create an uninstall script in Jamf Pro configured to pass the <span class="code">uninstall</span> parameter. For details, see the procedure <a href="http://docs.jamf.com/10.6.0/jamf-pro/administrator-guide/Managing_Scripts.html#src-18787582_id-.ManagingScriptsv10.6.0-AddingaScripttoJamfPro" target="_blank">Adding a Script to Jamf Pro</a> in Jamf Pro documentation.</li>
                                                            </ul>
                                                        </ol>
                                                    </div>
                                                    <h2><a name="PartF"></a><span style="font-size: 14pt;">View certificate enrollment logs</span> </h2>
                                                    <h3><a name="View"></a>View logs in Jamf Pro</h3>
                                                    <p>During deployment, the Okta Device Registration Task publishes logs in Jamf at three log levels (INFO, WARN, ERROR). To diagnose deployment issues, Jamf administrators can view deployment logs on a policy or individual computer basis.&#160;To generate more granular logs, use the <span class="code">verbose</span> option as the Parameter Value in Jamf Pro. </p>
                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-jamf-policy-logs-verbose.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="825" data-mc-height="323" src="../../Resources/Images/dt-macos-jamf-policy-logs-verbose_thumb_220_220.png" tabindex="" /></a>
                                                    </p>
                                                    <p>In addition, end users can view log messages on their local macOS&#160;computers by having the Console app open while the script runs on their computer.</p>
                                                    <h3>View logs on macOS&#160;computers</h3>
                                                    <p>You can watch and monitor Okta-related log messages during certificate enrollment. The method depends on the operating system running on the device.
								</p>
                                                    <h4>If running version 10.11.6 (OS X El Capitan):</h4>
                                                    <ol>
                                                        <li value="1">Open <span class="uicontrol">Utilities</span> &gt; <span class="uicontrol">Console</span>.</li>
                                                        <li value="2">Click <span class="uicontrol">All Messages</span>.</li>
                                                        <li value="3">Type Okta in the search field and press Enter to filter all Okta-related messages.
									</li>
                                                    </ol>
                                                    <h4>If running either of the following operating systems:</h4>
                                                    <ul>
                                                        <li>macOS 10.12.6 (Sierra)</li>
                                                        <li>macOS 10.13.4 (High Sierra)</li>
                                                    </ul>
                                                    <ol>
                                                        <li value="1">Open <span class="uicontrol">Utilities</span> &gt; <span class="uicontrol">Console</span>.</li>
                                                        <li value="2">Click your device under <span class="uicontrol">Devices</span> in the left pane.</li>
                                                        <li value="3">Type Okta in the search field and press Enter to filter all Okta-related messages.</li>
                                                    </ol>
                                                    <h4>To view past logs for all supported operating systems:</h4>
                                                    <ol>
                                                        <li value="1">Open <span class="uicontrol">Utilities</span> &gt; <span class="uicontrol">Console</span>.</li>
                                                        <li value="2">Go to <span class="filepath">/var/log &gt;&#160;asl</span> in the left pane.</li>
                                                        <li value="3">Select the date you want to search on.</li>
                                                        <li value="4">Type Okta in the search field and press Enter to filter all Okta-related messages.</li>
                                                    </ol>
                                                    <h4>To see the system calls executed on the device, run the following command and then execute the Device Registration Task:</h4>
                                                    <p><span class="code">log stream --predicate 'eventMessage contains "okta"'</span>
                                                    </p>
                                                    <h2><span style="font-size: 14pt;">Modify the app allowlist</span>
                                                    </h2><a name="PartG"></a>
                                                    <p>The Okta Device Registration Task allows some popular apps by default  so that end users aren't prompted for the keychain password when trying to access them. You can customize the default allowlist as described in this procedure. </p>
                                                    <p>Keep in mind the following: </p>
                                                    <ul>
                                                        <li>Keep a copy of your preferred allowlist. Your modified allowlist is overwritten whenever you push a new Okta Device Registration Task to your targeted macOS computers, so you'll have to recreate it. </li>
                                                        <li>If you add apps to the original Okta-defined allowlist, you should consider testing your modified allowlist with a subset of users before rolling it out to all users.
                                        </li>
                                                        <li>Unlike TeamIdentifiers for the other allowed apps, the TeamIdentifier for Safari is simply <span class="code">apple:</span> (notice the colon) without a <span class="code">teamid:</span> prefix. </li>
                                                        <li>&#160;You can allow any SAML/WS-Fed-enabled app that supports authentication through a webview. The webview in which authentication is performed must have access to the Okta Keychain on the device. The original Okta-provided allowlist currently includes the following apps:

										<ul><li>Box</li><li>Chrome</li><li>Safari</li><li>Microsoft Office</li><li>Skype for Business</li><li>Google Drive</li><li>Slack</li></ul></li>
                                                    </ul>
                                                    <ol>
                                                        <li value="1">Find the TeamIdentifier for the app(s) you want to allow:</li>
                                                        <ol style="list-style-type: lower-alpha;">
                                                            <li value="1">On a macOS device that has the apps you want to allow, open a command line  and  list the apps in the Applications folder:</li>
                                                            <p><span class="code">ls /Applications</span>
                                                            </p>
                                                            <li value="2">Find an app's TeamIdentifier:</li>
                                                            <p><span class="code">codesign -dv --verbose=4 /Applications/exampleapp.app</span>
                                                            </p>
                                                            <p>where <span class="code">exampleapp</span> is the app you are investigating.
                                        </p>
                                                            <li value="3">Locate the TeamIdentifier value in the output and make a note of it. </li>
                                                            <p>For example, here's how to find the team TeamIdentifier for RingCentral:</p>
                                                            <p><span class="code">codesign -dv --verbose=4/App /Applications/RingCentral\ Meetings.app</span>
                                                            </p>
                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-teamID-ring-central.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="696" data-mc-height="341" src="../../Resources/Images/dt-teamID-ring-central_thumb_220_220.png" tabindex="" /></a>
                                                            </p>
                                                        </ol>
                                                        <li value="2">Modify the allowlist in the Okta Device Registration Task:</li>
                                                        <h4>Example before modification </h4>
                                                        <p>Allowlist includes the original Okta-defined allowlist:</p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-whitelist-before-mod.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1161" data-mc-height="105" src="../../Resources/Images/dt-macos-whitelist-before-mod_thumb_220_220.png" tabindex="" /></a>
                                                        <h4>Example after modification</h4>
                                                        <p> Allowlist with RingCentral added:</p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-whitelist-after-mod.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1162" data-mc-height="106" src="../../Resources/Images/dt-macos-whitelist-after-mod_thumb_220_220.png" tabindex="" /></a>
                                                        <li value="3">Save your changes.</li>
                                                        <li value="4"> When appropriate, push the Okta Device Registration Task as described <a href="#Task4">Step 4 - Add the modified Okta Device Registration Task to Jamf Pro and distribute it to macOS devices</a>.</li>
                                                    </ol>
                                                    <div class="noteOkta">
                                                        <p class="noteContent">Keep a copy of your preferred allowlist. Your modified allowlist is overwritten whenever you push a new Okta Device Registration Task to your targeted macOS computers, so you'll have to recreate it.</p>
                                                    </div>
                                                    <div>
                                                        <h2><a name="Troubleshooting_dt-macOS"></a><span style="font-size: 14pt;">Troubleshooting</span>
                                                        </h2>
                                                        <p>The Okta Device Registration Task is a python script that you obtain from&#160;Okta, modify, and then upload to Jamf Pro for distribution to the macOS devices you have targeted for this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution.</p>
                                                        <h4>About the Okta Device Registration Task</h4>
                                                        <p>When deployed on the device, the Okta Device Registration Task does the following:</p>
                                                        <ul>
                                                            <li>
                                                                <p>Registers with Okta to obtain a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate. Okta checks with Jamf Pro to make sure the device is managed.</p>
                                                            </li>
                                                            <li>
                                                                <p>Configures Chrome and Safari browsers and <a href="#" class="MCTextPopup popup popupHead">tested native apps<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>These Modern Auth-enabled native apps: Microsoft Office 365, Box, Google Drive, Skype for Business, Slack</span></a> on the device to present the certificate automatically during secure app access.</p>
                                                                <li>
                                                                    <p>Schedules a lightweight task that runs once a day and whenever users log in to their computer. The task checks whether the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate  is expired and tries to renew the certificate 30 days before expiry. Certificates are valid for 1 year.</p>
                                                                </li>
                                                            </li>
                                                            <li>During renewal, Okta performs  checks similar to those that occur during registration, such as checking whether the device is managed before issuing a new certificate.
										
										
										
										</li>
                                                            <li>After the script runs on the device once, Jamf Pro removes it from the device automatically.</li>
                                                            <li>You can use the following query to determine which version of the Registration Task is installed on the device: <p id="code">python3 ~/Library/Okta/okta_device_trust.py version</p></li>
                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-flow.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1256" data-mc-height="817" src="../../Resources/Images/dt-macos-flow_thumb_220_220.png" tabindex="" /></a>
                                                            </p>
                                                        </ul>
                                                        <h4>Basic and Advanced troubleshooting</h4>
                                                        <p> The two problems that you are most likely to encounter are:</p>
                                                        <ul>
                                                            <li>Trusted devices are unable to access <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps.</li>
                                                            <li>Untrusted devices are able to access <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured apps.</li>
                                                        </ul>
                                                        <p>If you encounter either problem, try to correct it by performing Basic Troubleshooting. If the problem persists, perform Advanced Troubleshooting.</p>
                                                        <h3><a name="BasicTroubleshooting_dt-macOS"></a>Basic Troubleshooting</h3>
                                                        <p>To perform basic troubleshooting, review the following areas:</p>
                                                        <h4>Enablement</h4>
                                                        <p>Verify the following:</p>
                                                        <ul>
                                                            <li>This device trust feature is included in your org's version of Okta  (your SKU) </li>
                                                            <li>You have <a href="#Task1">enabled the global <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> setting</a> in <span class="uicontrol">Security</span> &gt; <span class="uicontrol">Device Trust</span> &gt;&#160;<span class="uicontrol">Enable macOS&#160;<span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</span></li>
                                                        </ul>
                                                        <h4>Registration task</h4>
                                                        <ul>
                                                            <p>
                                                                <li>
                                                                    <p>Verify that you have correctly configured Jamf Pro to distribute the Device Registration Task to targeted macOS devices as detailed in <a href="#Task4">Part C</a>.</p>
                                                                </li>
                                                            </p>
                                                            <p>You can use the following query to determine which version of the Registration Task is running on the device:
				
				
									<p><span class="code">python ~/Library/Okta/okta_device_trust.py version</span></p><li><p>Verify that you added the TeamID&#160;of the app to the Python 3 script before you deployed the script?</p></li></p>
                                                            <p>If the TeamID of the app is missing from the script, an access prompt displays when attempting to sign on from a third-party app that previously worked with Device Trust in your environment.<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/devices_dt_troubleshoot_TeamID_1.png" data-mc-popup-alt="Access prompt example"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="426" data-mc-height="160" src="../../Resources/Images/devices_dt_troubleshoot_TeamID_1_thumb_220_220.png" alt="Access prompt example" title="An example of an access prompt from a third-party app" tabindex="" /></a></p></p>
                                                            <p>Add the TeamID of the app to the Python 3 script, and then redeploy the policy. This image indicates the section of the script to edit, to specify the apps you want to allowlist:
				<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/devices_dt_troubleshoot_TeamID_2.png" data-mc-popup-alt="Python 3 script section"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1059" data-mc-height="229" src="../../Resources/Images/devices_dt_troubleshoot_TeamID_2_thumb_220_220.png" alt="Python 3 script section" title="Section of the Python 3 script to edit, to specify the apps to whitelist." tabindex="" /></a></p></p>
                                                        </ul>
                                                        <h4>Python 3 dependency packages</h4>
                                                        <p>Are the Python 3 dependency packages installed correctly?</p>
                                                        <p>If  a module not found error (for example, "ModuleNotFoundError: No module named 'Systemconfiguration'") occurs, confirm that the dependencies from [link to 'install the device trust dependencies"] are set up correctly. </p>
                                                        <p>Run the following script from Jamf on the computer:</p>
                                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="True"><pre><span class="codeSnippetLineNumbers" style="border-right: #AAA 2px solid;" aria-hidden="true">1
2
3
4
5
6
7
8
9
</span><code>#!/bin/sh<br />echo "Python location"<br />python3 -c "import sys; print(sys.executable)"<br />echo "Python version"<br />python3 --version<br />echo "Python3 Dependency version"<br />echo "********************"<br />python3 -m pip show pyobjc-framework-SystemConfiguration<br />echo "********************"</code></pre>
                                                            </div>
                                                        </div>
                                                        <h3>Certificate</h3>
                                                        <div>
                                                            <h4>Verify that the certificate is installed</h4>
                                                            <p>Make sure that certificates are installed in the keychain on the devices you have targeted for this Device Trust solution. If certificates are not installed and the Trusted setting is enabled in your app sign-on policy, users are denied access to the app and are redirected to a security message advising them to contact their administrator. (You can configure the message to include a <span class="uicontrol">Learn more</span> link to more information. See <a href="#learn-more-link">Step 1 — Enable the global Device Trust setting for your org</a>). </p>
                                                            <h5>To verify installation from a terminal:</h5>
                                                            <h4>Show keychain info</h4>
                                                            <p><span class="code">security show-keychain-info okta.keychain</span>
                                                            </p>
                                                            <h4>Show the certificate</h4>
                                                            <p><span class="code">security find-certificate -a -c 'Okta MTLS' -Z -p okta.keychain</span>
                                                            </p>
                                                            <h4>Show the password</h4>
                                                            <p><span class="code">security find-generic-password -l device_trust -w</span>
                                                            </p>
                                                            <h4>To verify installation through the GUI on targeted devices:</h4>
                                                            <div>
                                                                <ol>
                                                                    <li value="1">On the macOS&#160;device, search for Keychain Access.</li>
                                                                    <li value="2">Double click to open the Keychain Access app.</li>
                                                                    <li value="3">Verify that the Okta Keychain exists and that it includes the Okta MTLS certificate.</li>
                                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-keychain-troubleshooting.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="877" data-mc-height="357" src="../../Resources/Images/dt-macos-keychain-troubleshooting_thumb_220_220.png" tabindex="" /></a>
                                                                    </p>
                                                                    <p>If the Okta Keychain, the certificate, or the private key are missing, the registration task did not complete successfully. In this case, <a href="#View">view logs in Jamf Pro</a>. </p>
                                                                    <li value="4">In the <span class="uicontrol">login</span> keychain, verify that the device_trust password and identity preferences appear. </li>
                                                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-keychain-pw-troubleshooting.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="984" data-mc-height="762" src="../../Resources/Images/dt-macos-keychain-pw-troubleshooting_thumb_220_220.png" tabindex="" /></a>
                                                                    </p>
                                                                    <p>If the device_trust password is not present then device trust-secured apps can't access the Okta keychain. To remedy this, uninstall the certificate (see <a href="#Task3">Revoke and remove Device Trust certificates</a>) and then re-enroll the device (see <a href="#Task4">Step 4. Add the modified Okta Device Registration Task to Jamf Pro and distribute it to macOS devices</a>).</p>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <h3>Maximum certificate enrollment limit</h3>
                                                            <p> A certificate becomes bound to a given user the first time that user accesses a device trust-secured application from a device trust-secured macOS device. Unused certificates are unbound. Okta can issue up to five unbound certificates to the device, one each time you perform the enrollment procedure. As a security precaution, Okta will not issue more than five unbound certificates to a given device. To avoid reaching the unbound certificate limit, ensure that users use the unbound certificates already on the device before you attempt to obtain more certificates through enrollment. If you reach the enrollment limit, the Syslog indicates an enrollment failure and the error message <span class="uicontrol">Maximum enrollment limit of 5 certificates for a device is reached</span> appears in the JAMF log.</p>
                                                        </div>
                                                        <div>
                                                            <h3><a name="MTLS-handshake"></a>Prevent an auth failure caused by blocked Mutual TLS certificate exchange
</h3>
                                                            <div>
                                                                <p data-mc-conditions="SnippetConditionsForDevices.macOS Only">The Mutual TLS certificate exchange (handshake) in this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow occurs on Okta URLs that are separate from your Okta org URL (indicated by the wildcard character (*) in the following example).  If your org implements endpoint protection software, make sure to configure it in a way that does not block the Mutual TLS certificate exchange (handshake) that occurs during this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> flow. For example, if your organization uses an allowlist to limit outbound traffic, add these exact URLs to the allowlist, including the wildcard character (*):</p>
                                                                <p><span class="code">*.okta.com</span>
                                                                </p>
                                                                <p><span class="code">*.okta-emea.com</span>
                                                                </p>
                                                                <p><span class="code">*.okta-gov.com</span>
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <h5>Sign-on policy</h5>
                                                        <p>Verify that you have configured a sign-on policy that:</p>
                                                        <ul>
                                                            <li>Is applied to the WS-Fed or SAML app(s) that you want to secure with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>.</li>
                                                            <li>Is applied to the correct user(s) and/or groups.</li>
                                                            <li>Includes, at minimum, an Active rule that denies access to untrusted devices.</li>
                                                        </ul>
                                                        <h4><a name="DT_macOS_SysLog"></a>System Log</h4>
                                                        <div>
                                                            <h3>Verify <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> events</h3>
                                                            <p>Review the <a href="../Reports/Reports_SysLog.htm" rel="noreferrer" target="_blank">System Log</a> to verify the following <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> System Log events:
</p>
                                                            <h4>Authentication</h4>
                                                            <ul>
                                                                <li>DisplayMessage: Authentication of device via certificate</li>
                                                                <li>EventType: <span class="code">user.authentication.authenticate</span></li>
                                                            </ul>
                                                            <h4>Enrollment</h4>
                                                            <ul>
                                                                <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate enrollment</li>
                                                                <li>EventType: <span class="code">user.credential.enroll</span></li>
                                                            </ul>
                                                            <h4>Issuance	</h4>
                                                            <ul>
                                                                <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate issuance</li>
                                                                <li>EventType: <span class="code">pki.cert.issue</span></li>
                                                            </ul>
                                                            <h4>Revocation</h4>
                                                            <ul>
                                                                <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate revocation</li>
                                                                <li>EventType: <span class="code">pki.cert.revoke</span></li>
                                                            </ul>
                                                            <h4>Renewal</h4>
                                                            <ul>
                                                                <li>DisplayMessage: <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> certificate renewal</li>
                                                                <li>EventType: <span class="code">pki.cert.renew</span></li>
                                                            </ul>
                                                        </div>
                                                        <div>
                                                            <h3>View unique device IDs in DebugContext</h3>
                                                            <p>DebugData shows the unique ID of the devices associated with <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> events and is useful for debugging purposes. This information can also help you  verify that<span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> is being enforced on devices in your device inventory, which may be useful prior to rolling out the feature to a large group of users.</p>
                                                            <div class="noteOkta">
                                                                <p class="noteContent">The information contained in debugContext.debugData is intended to add context when troubleshooting customer platform issues. Note that key names and values are subject to change without notice and should be used primarily as a debugging aid, not as a data contract.  See <a href="https://developer.okta.com/docs/reference/api/system-log/#debugcontext-object" target="_blank">DebugContext Object</a> in Okta Developer documentation.</p>
                                                            </div>
                                                            <ol>
                                                                <li value="1">In the <span class="mc-variable okta-feature-names.Administrator_dashboard variable">Admin Console</span>, go to <span class="uicontrol">Reports</span> &gt; <span class="uicontrol">System Log</span>.</li>
                                                                <li value="2">Search for the <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> Event (date) that you’re interested in, then navigate to:
                                        <p><span class="uicontrol">Event &gt; AuthenticationContext &gt; System &gt; DebugContext &gt; DebugData</span></p></li>
                                                            </ol>
                                                        </div>
                                                        <p>Verify Jamf Pro setup</p>
                                                        <ul>
                                                            <li>In the Okta Admin Console, are the Secret Key Value and the Org URL correctly populated in the Okta Device Registration Task (see <a href="#Task2">Step 2. Modify the Okta Device Registration Task</a>)?</li>
                                                            <li>Is the Okta Device Registration Task that you modified and added to Jamf Pro the latest version? (See <a href="../Settings/Settings_Downloads.htm#Device" rel="noreferrer" target="_blank">Version History</a>.)</li>
                                                            <li>Do the trigger events in your Jamf Pro policy  include <span class="wintitle">Enrollment Complete</span> and <span class="wintitle">Recurring Check-in</span>? (See <a href="#Task4">Step 4. Add the modified Okta Device Registration Task to Jamf Pro and distribute it to macOS devices</a>.)</li>
                                                            <li>

											Have you viewed deployment logs? (See <a href="#PartF">View certificate enrollment logs</a>.)
										</li>
                                                            <li>Do Jamf Pro Policy Logs show that the script execution status is <span class="wintitle">Completed</span>? </li>
                                                            <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-jamf-policy-logs-troubleshooting.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="664" data-mc-height="347" src="../../Resources/Images/dt-macos-jamf-policy-logs-troubleshooting_thumb_220_220.png" tabindex="" /></a>
                                                            </p>
                                                        </ul>
                                                        <h3><a name="AdvancedTroubleshooting_dt-macOS"></a>Advanced troubleshooting</h3>
                                                        <p>If basic troubleshooting did not resolve the problem you are experiencing, and the certificate is not installed on the macOS&#160;device, check the following:</p>
                                                        <h3>In the Okta Admin app</h3>
                                                        <p>Verify that the end user of the macOS device is present and Activated in <span class="uicontrol">Directory</span> &gt; <span class="uicontrol">People</span>.</p>
                                                        <h3>On the macOS&#160;device</h3>
                                                        <h4>Confirm that auto certificate settings are configured in Chrome:</h4>
                                                        <ol>
                                                            <li value="1">In Chrome, enter chrome://policy in the address bar, and then press Enter.</li>
                                                            <li value="2">Click <span class="uicontrol">Show value</span> and verify that the policy <span class="wintitle">AutoSelectCertificateForUrls</span> displays either of the following values:

					<p><span class="code">{"pattern":"https://[cell]-devicetrust.okta.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority”}}}</span></p><p><span class="code">{"pattern":"https://[cell]-devicetrust.okta-emea.com","filter":{"ISSUER":{"CN":"MTLS Certificate Authority”}}}</span></p></li>
                                                            <p>where <span class="code">[cell]</span> is the cell where your Okta org resides as shown in the footer on your Okta Admin Console.</p>
                                                        </ol>
                                                        <h4>Verify that native apps are allowed in the keychain</h4>
                                                        <p>Issue the following command to verify that <a href="#" class="MCTextPopup popup popupHead">allowed apps<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody" aria-hidden="true"><span class="MCTextPopupArrow"> </span>Microsoft Office 365, Box, Google Drive, Skype for Business, Slack</span></a> can access the certificate (see <a href="#PartG">Modify the app allowlist</a>): </p>
                                                        <p><span class="code">security dump-keychain -a okta.keychain</span>
                                                        </p>
                                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/dt-macos-dump-keychain-troubleshooting.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1084" data-mc-height="217" src="../../Resources/Images/dt-macos-dump-keychain-troubleshooting_thumb_220_220.png" tabindex="" /></a>
                                                        </p>
                                                        <h4>Validate remediation</h4>
                                                        <p>Try to access a <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span>-secured app from a browser or thick client. If an error displays while trying to access the app, <span class="uicontrol">Quit</span> and <span class="uicontrol">Close</span> the browser (Chrome or Safari), relaunch the browser, and then try to access the app again.</p>
                                                    </div>
                                                    <h2>Known issues</h2>
                                                    <ul>
                                                        <li>Security requirements page not shown when accessing O365 native apps: End users with unmanaged macOS devices are not shown the <span class="wintitle">Security requirements</span> page when they try to access Office O365 native apps secured by this <span class="mc-variable okta-feature-names.Device_Trust variable">Device Trust</span> solution. (This problem occurs only with Office Native apps; it doesn't occur when trying to access O365 apps through desktop browsers like Chrome and Safari.) <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/DT_Security_URLspecified_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="386" data-mc-height="265" src="../../Resources/Images/DT_Security_URLspecified_2_thumb_220_220.png" tabindex="" /></a></p></li>
                                                        <li>Problem accessing Google Backup and Sync app: When signing in to the Backup and Sync app (part of Google Drive), the authentication flow stops on the Google Account page instead of progressing to the app. Google is aware of this issue. To complete signing in, click the <span class="uicontrol">Sign in with your browser instead</span> link in the lower portion of the page.</li>
                                                    </ul>
                                                </div>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- div class="toolbar-main">
            <MadCap:topicToolbarProxy data-mc-skin="/Project/Skins/okta-toolbar-no-expand.flskn" style="mc-topic-toolbar-items: ;" />
                </div -->
                                    <!-- *********************** Footer rows ********************************* -->
                                    <div class="footer2">
                                        <div>
                                            <p class="copyright">©  <span class="mc-variable okta-variables.Year variable">2022</span> <span class="mc-variable okta-variables.CompanyName variable">Okta, Inc</span>. All Rights Reserved. Various trademarks held by their respective owners.
	</p>
                                        </div>
                                    </div>
                                    <!-- Qualtrics setup to use with script below, replacing getfeedback -->
                                    <div id="ZN_6fGBJ8J3VcIBymN">
                                        <!--DO NOT REMOVE-CONTENTS PLACED HERE-->
                                    </div>
                                    <!-- ********************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/ignore-dompurify.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/js/vendor/qualtrics.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
