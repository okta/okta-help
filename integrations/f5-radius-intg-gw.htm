<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan"
      MadCap:conditions="MultiProdPublish.Classic+OIE">
   <head>
      <MadCap:changeData>
         <MadCap:RemoveChange MadCap:userName="InfoDev"
                              MadCap:initials="IN"
                              MadCap:id="1"
                              MadCap:timestamp="2021-08-04T12:07:41.7901661-04:00"/>
         <MadCap:AddChange MadCap:userName="InfoDev"
                           MadCap:initials="IN"
                           MadCap:id="2"
                           MadCap:timestamp="2021-08-04T12:07:41.8957964-04:00"/>
         <MadCap:AddChange MadCap:userName="InfoDev"
                           MadCap:initials="IN"
                           MadCap:id="3"
                           MadCap:timestamp="2021-08-04T12:09:28.0648284-04:00"/>
      </MadCap:changeData>
      <link href="../../Resources/TableStyles/standard-no-header.css"
            rel="stylesheet"
            MadCap:stylesheetType="table"/>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Configure the Citrix Netscaler Gateway integration to enable MFA against your Okta RADIUS server agent to provide seamless end-user authentication."/>
   </head>
   <body>
      <h1>Configure F5 BIG IP APM gateway</h1>
      <p>During this task we will use the F5 console to configure F5 BIG IP to integrate with RADIUS. </p>
      <h3>Steps</h3>
      <p>There are twp parts to this configuration:</p>
      <ol>
         <li>
            <MadCap:xref href="#Define">Define a RADIUS <MadCap:change MadCap:changes="1">S</MadCap:change>
               <MadCap:change MadCap:changes="2">s</MadCap:change>erver <MadCap:change MadCap:changes="2">p</MadCap:change>
               <MadCap:change MadCap:changes="1">P</MadCap:change>rofile</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Edit">Edit an Access Policy</MadCap:xref>
            <br/>
         </li>
      </ol>
      <h2>Before you begin</h2>
      <ul>
         <li>Ensure that you have the common UDP port and secret key values available.</li>
      </ul>
      <h2>
         <a name="Define"/>Define a RADIUS <MadCap:change MadCap:changes="2">s</MadCap:change>
         <MadCap:change MadCap:changes="1">S</MadCap:change>erver <MadCap:change MadCap:changes="1">P</MadCap:change>
         <MadCap:change MadCap:changes="2">p</MadCap:change>rofile</h2>
      <ol>
         <li>Sign in to the F5 console with sufficient privileges.</li>
         <li>Navigate to <span class="menucascade">
               <span class="uicontrol">Access</span>
               <span class="uicontrol">Authentication</span>
               <span class="uicontrol">RADIUS</span>
            </span> and then click <span class="uicontrol">Create…</span> to define a new RADIUS server. In older version, navigate to <span class="menucascade">
               <span class="uicontrol">Access Policy</span>
               <span class="uicontrol">AAA Servers</span>
               <span class="uicontrol">RADIUS</span>
            </span>. </li>
         <li>Enter the following values to create a <span class="uicontrol">New RADIUS Server</span>.<table style="mc-table-style: url('../../Resources/TableStyles/standard-no-header.css');"
                   class="TableStyle-srb_no_header"
                   cellspacing="0">
               <col style="width: 257px;" class="TableStyle-srb_no_header-Column-Column1"/>
               <col style="width: 475px;" class="TableStyle-srb_no_header-Column-Column1"/>
               <tr class="TableStyle-srb_no_header-Body-Body1">
                  <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                     <span class="uicontrol">Name</span>
                  </td>
                  <td class="TableStyle-srb_no_header-BodyD-Column1-Body1"> Unique and appropriate name (OktaMFA)</td>
               </tr>
               <tbody>
                  <tr class="TableStyle-srb_no_header-Body-Body1">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                        <span class="uicontrol">Mode</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Authentication</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body2">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                        <span class="uicontrol">Server Connection</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">Direct</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body1">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                        <span class="uicontrol">Server Address</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">IP or Name of Okta RADIUS Server Agent</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body2">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                        <span class="uicontrol">Authentication Service Port</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">Port (1812)</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body1">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                        <span class="uicontrol">Secret</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Secret value defined above.</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body2">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                        <span class="uicontrol">Confirm Secret</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">Secret value defined above</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body1">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                        <span class="uicontrol">NAS IP Address</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Optional: the ip address of the F5</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body2">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body2">
                        <span class="uicontrol">NAS Identifier</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body2">Optional: an identifier of the NAS</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body1">
                     <td class="TableStyle-srb_no_header-BodyF-Column1-Body1">
                        <span class="uicontrol">Timeout</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyD-Column1-Body1">Recommended: <span class="uicontrol">60</span> seconds</td>
                  </tr>
                  <tr class="TableStyle-srb_no_header-Body-Body2">
                     <td class="TableStyle-srb_no_header-BodyC-Column1-Body2">
                        <span class="uicontrol">Retries</span>
                     </td>
                     <td class="TableStyle-srb_no_header-BodyA-Column1-Body2">2</td>
                  </tr>
               </tbody>
            </table>
         </li>
         <li>Click <span class="uicontrol">Finish</span> to save the settings.</li>
      </ol>
      <h2>
         <a name="Edit"/>Edit an <MadCap:change MadCap:changes="2">a</MadCap:change>
         <MadCap:change MadCap:changes="1">A</MadCap:change>ccess <MadCap:change MadCap:changes="3">p</MadCap:change>
         <MadCap:change MadCap:changes="1">P</MadCap:change>olicy</h2>
      <ol>
         <li>
            <p>Navigate to <span class="menucascade">
                  <span class="uicontrol">Access</span>
                  <span class="uicontrol">Profiles / Policies</span>
                  <span class="uicontrol">Access Profiles</span>
               </span>.</p>
         </li>
         <li>
            <p>Identify the Access Profile you wish to change and click the <span class="uicontrol">Edit…</span> link in the <span class="uicontrol">Per-Session Policy</span> column, as shown below.</p>
            <p>
               <img src="../../Resources/Images/f5_3.png"/>
            </p>
         </li>
         <li>The screen shown below opens. Click <span class="uicontrol">Logon Page</span> to edit the logon page.<p>
               <img src="../../Resources/Images/f5_4.png"/>
            </p>
         </li>
         <li>The screen shown below opens. <p>
               <img src="../../Resources/Images/f5_5.png"/>
            </p>
         </li>
         <li> 	Enable a third input with the following selections.			<ul>
               <li>
                  <p>Type: password</p>
               </li>
               <li>
                  <p>Variable: factor</p>
               </li>
               <li>
                  <p>Login page input field: Factor (e.g. &lt;i&gt;push, sms, 123456&lt;/i&gt;)</p>
               </li>
            </ul>
         </li>
         <li>When done, click <span class="uicontrol">Save</span>.</li>
         <li>
            <p>Edit the existing RADIUS Auth or replace an existing Auth sequence with a RADIUS Auth step pointing to the password only RADIUS server created in the previous step, as shown below.</p>
            <p>
               <img src="../../Resources/Images/f5_6.png"/>
            </p>
         </li>
         <li>After the initial authentication insert a new RADIUS Auth step pointing to the Factor only RADIUS server previously created. Change the <span class="uicontrol">Password Source</span> variable to align with the updated logon page input <span class="code">%{session.logon.last.factor}</span>.

					<p>
               <img src="../../Resources/Images/f5_6b.png"/>
            </p>
         </li>
         <li>Click <span class="uicontrol">Save</span> to save the settings.</li>
         <li>
            <p>Click the Apply Access Policy button in the top left hand corner, as shown below.<p>
                  <img src="../../Resources/Images/f5_7.png"/>
               </p>
            </p>
         </li>
      </ol>
      <div>
         <h2>Next steps</h2>
         <p>
            <MadCap:xref href="f5-radius-intg-opt.htm">Configure F5 BIG IP optional settings</MadCap:xref>
         </p>
      </div>
   </body>
</html>
