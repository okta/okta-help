<?xml version="1.0" encoding="utf-8"?>
<html MadCap:onlyLocalStylesheets="False" MadCap:fileTags="Tags/okta-authors.Patrick Calnan" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="MultiProdPublish.Classic+OIE">
    <head><title>[%=Heading.Level1%] | Okta</title>
        <meta name="description" content="Enable MFA for Windows server RDP authentication attempts using Oktaâ€™s Credential Provider for Windows." />
    </head>
    <body>
        <h1>Enable Open ID Connect with existing ADFS installations</h1>
        <p>Enable Open ID Connect with existing ADFS installations.<br />To enable an existing application to use OpenID Connect:</p>
        <ol>
            <li>Navigate to your ADFS application and select the <span class="wintitle">Sign On</span> tab.</li>
            <li>Select <span class="uicontrol">OpenID Connect</span>.<br />Ensure that the <span class="uicontrol">RedirectURI</span> field is set correctly.<br /><img src="../../Resources/Images/hybrid-access/EnableOIDCExistingADFS.1.png" MadCap:conditions="MultiProdPublish.Classic" /><div class="noteOkta"><p class="noteContent">Ensure that the Redirect URI ends with a training forward slash. &#160;For example <span class="code">https://yourdomain.com/</span>. </p></div></li>
            <li>
                <p>Upgrade any existing ADFS plug-ins  to version 1.7.0 or later <br />Note:&#160;Be sure to remove the Okta MFA Provider from the Authentication Policy in ADFS before running any plug-in upgrades.</p>
                <p>
                    <img src="../../Resources/Images/hybrid-access/EnableOIDCExistingADFS.2.png" />
                </p>
            </li>
            <li>After the upgrade completes, ensure that your application still functions normally.<ol><li>Using a text editor <span class="code">open C:\Program Files\Okta\Okta MFA Provider\config\okta_adfs_adapter.json</span>.<p>Note: By default the <span class="code">okta_adfs_adapter.json</span> file can be found in <span class="filepath">c:\Program Files\Okta\Okta MFA Provider\config\okta_adfs_adapter.json</span>.</p>See <MadCap:xref href="adfs-okta-int-config.htm">MFA for Active Directory Federation Services (ADFS)&#160;Configuration</MadCap:xref> for more information. </li><li>Search for and modify the <span class="code">useOIDC</span> property, setting its value to <span class="code">true</span>. <br />for example: <span class="code">useOIDC:true</span>.<br /><img src="../../Resources/Images/hybrid-access/EnableOIDCExistingADFS.4.png" /></li></ol></li>
            <li>
                <MadCap:snippetBlock src="../../Resources/Snippets/integrations/ApplyConfigSettingChange-PS.flsnp" />
            </li>
            <li>As administrator open a Microsoft PowerShell and execute the script <span class="code">ApplyConfigurationSettingChanges.ps1</span>.</li>
            <li>Verify that the user can authenticate.</li>
        </ol>
        <p>You have successfully upgraded your application plug in to use OpenID Connect. </p>
        <div>
            <h2>Next steps</h2>
            <p>
                <MadCap:xref href="adfs-okta-int-ts.htm">Troubleshooting</MadCap:xref>
            </p>
        </div>
    </body>
</html>