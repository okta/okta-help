<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan"
      MadCap:conditions="MultiProdPublish.Classic+OIE">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Configure the Citrix Netscaler Gateway integration to enable MFA against your Okta RADIUS server agent to provide seamless end-user authentication."/>
   </head>
   <body>
      <h1>Configure the Citrix Gateway</h1>
      <h2>Before you begin</h2>
      <ul>
         <li>Ensure that you have the common UDP port and secret key values available.</li>
         <li>Ensure that you've configured a Gateway VIP in accordance with its respective documentation. </li>
      </ul>
      <h2>Configure the Citrix Gateway</h2>
      <div>
         <ol>
            <li>Log in to the Citrix Gateway admin interface with admin rights.</li>
            <li>Select the <span class="wintitle">Configuration</span> tab.</li>
            <li>Select
               <span class="menucascade">
                  <span class="uicontrol">Citrix Gateway</span>
                  <span class="uicontrol">Policies</span>
                  <span class="uicontrol">Authentication</span>
                  <span class="uicontrol">RADIUS</span>
               </span>.</li>
            <li>Select the <span class="uicontrol">Servers</span> tab.</li>
            <li>Click <span class="uicontrol">Add</span>.</li>
            <li>Complete all sections in the <span class="wintitle">Create Authentication RADIUS Server</span> dialog. Select <span class="uicontrol">Server Name</span> or <span class="uicontrol">Server IP</span> to define the server running the Okta RADIUS agent. You can verify the port number and secret key in the Okta RADIUS agent admin tool.</li>
            <li>Expand the <span class="uicontrol">More</span> (or <span class="uicontrol">Details</span>) option. Set <span class="uicontrol">Password Encoding</span> to <span class="userinput">pap</span>. You can use the available group settings and attributes for Citrix permissions, as necessary.</li>
            <li>Click <span class="uicontrol">OK</span> to save the server definition.</li>
            <li>From the RADIUS section, select the <span class="wintitle">Policies</span> tab.</li>
            <li>Click <span class="menucascade">
                  <span class="uicontrol">Policies</span>
                  <span class="uicontrol">Add</span>
               </span>.</li>
            <li>Enter a name for the policy.</li>
            <li>Select the new server definition from the <span class="uicontrol">Server</span> dropdown list.</li>
            <li>Enter <span class="userinput">ns_true</span> as the <span class="uicontrol">Expression</span>. This makes the policy active whenever it's bound to a VIP. If required, you can create more restrictive expressions to control when to apply the policy.</li>
            <li>Select <span class="uicontrol">Virtual Servers</span> under <span class="uicontrol">Citrix Gateway</span> (<span class="uicontrol">Netscaler Gateway</span>).</li>
            <li>Select the virtual server where you want to bind your policy.</li>
            <li>Click <span class="uicontrol">Edit</span>.</li>
            <li>In the <span class="wintitle">Authentication</span> section, unbind any existing policies.</li>
            <li>Go to the <span class="wintitle">Authentication</span> section of the <span class="wintitle">VPN Virtual Server</span> page. Click <span class="uicontrol">+</span>.</li>
            <li>Choose <span class="userinput">RADIUS</span> from the <span class="uicontrol">Choose Policy</span> dropdown list.</li>
            <li>Choose <span class="userinput">Primary</span> from the <span class="uicontrol">Choose Type</span> dropdown list.</li>
            <li>Click <span class="uicontrol">Continue</span>.</li>
            <li>Choose your policy from the <span class="uicontrol">Select Policy</span> dropdown list. Click <span class="uicontrol">OK</span>.</li>
            <li>Set <span class="uicontrol">Priority</span> to <span class="userinput">10</span>. Click <span class="uicontrol">Bind</span>.</li>
            <li>Click <span class="uicontrol">Done</span>.</li>
         </ol>
      </div>
      <div>
         <h2>Next steps</h2>
         <p>
            <MadCap:xref href="citrix-netscaler-radius-configure-optional.htm">Configure optional settings</MadCap:xref>
         </p>
      </div>
   </body>
</html>
