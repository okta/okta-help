<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan"
      MadCap:conditions="MultiProdPublish.Classic">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Configure MFA for Oracle Access Manager to use OAM as an IdP to provide users with SSO and MFA."/>
   </head>
   <body>
      <h1>Configure Module, Scheme and Policy </h1>
      <p>During this task we will configure module, scheme and policy to protect the OAM resources.</p>
      <ol>
         <li>Login to the Oracle Access Manager Console. </li>
         <li>Create an <span class="wintitle">Authentication Module</span>.</li>
         <ol style="list-style-type: lower-alpha;">
            <li>Click <span class="menucascade">
                  <span class="uicontrol">Authentication Module</span>
                  <span class="uicontrol">Create</span>
               </span>.
            </li>
            <li>On the <span class="uicontrol">General</span> tab enter an appropriate <span class="uicontrol">Name</span> and <span class="uicontrol">Description</span> and click <span class="uicontrol">Create</span>.
					<br/>
               <img src="../../Resources/Images/hybrid-access/oamp-okta-int.08.png"
                    style="mc-thumbnail: popup;mc-thumbnail-max-width: 250px;mc-thumbnail-max-height: auto;border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;"/>
            </li>
            <li>For the new authentication module select the <span class="uicontrol">Steps</span> tab.</li>
            <li>Create a new step which references the plugin and configure the step details as shown.
					 <br/>
               <img src="../../Resources/Images/hybrid-access/oamp-okta-int.09.png"
                    style="mc-thumbnail: popup;mc-thumbnail-max-width: 250px;mc-thumbnail-max-height: auto;border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;"/>
            </li>
            <li>Select the <span class="uicontrol">Steps Orchestration</span> tab</li>
            <li>Select the previously created step as the Initial Step as shown.<br/>Note: Configure state <span class="uicontrol">success</span> as <span class="uicontrol">On Success</span> and <span class="uicontrol">failure</span> for both  <span class="uicontrol">On Failure</span> and <span class="uicontrol">On Error</span>.
					<br/>
               <img src="../../Resources/Images/hybrid-access/oamp-okta-int.10.png"
                    style="mc-thumbnail: popup;mc-thumbnail-max-width: 250px;mc-thumbnail-max-height: auto;border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;"/>
            </li>
            <li>Click <span class="uicontrol">Apply</span> when complete. </li>
         </ol>
         <li>Create an <span class="wintitle">Authentication Scheme</span>.
         </li>
         <ol style="list-style-type: lower-alpha;">
            <li>Click <span class="menucascade">
                  <span class="uicontrol">Authentication Scheme</span>
                  <span class="uicontrol">Create</span>
               </span>.
            </li>
            <li>Configure the scheme as shown:
					<br/>Note:<span class="uicontrol">Authentication Module</span> field should be set to the module created in the previous step.<br/>
               <img src="../../Resources/Images/hybrid-access/oamp-okta-int.11.png"
                    style="mc-thumbnail: popup;mc-thumbnail-max-width: 250px;mc-thumbnail-max-height: auto;border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;"/>
            </li>
            <li>Click <span class="uicontrol">Apply</span> when complete.. </li>
         </ol>
         <li>Ensure services are enabled.</li>
         <ol style="list-style-type: lower-alpha;">
            <li>Navigate to <span class="menucascade">
                  <span class="uicontrol">Configuration</span>
                  <span class="uicontrol">Available Services</span>
               </span>.
            </li>
            <li>Ensure <span class="uicontrol">Access Manager</span> and <span class="uicontrol">Adaptive Authentication Service</span> are both enabled.
					<br/>
               <img src="../../Resources/Images/hybrid-access/oamp-okta-int.12.png"
                    style="mc-thumbnail: popup;mc-thumbnail-max-width: 250px;mc-thumbnail-max-height: auto;border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;"/>
            </li>
         </ol>
         <li> Create Authentication Policy which references the new Authentication Scheme</li>
         <ol style="list-style-type: lower-alpha;">
            <li>Navigate to <span class="menucascade">
                  <span class="uicontrol">Application Domain</span>
                  <span class="uicontrol">WebGateTest</span>
                  <span class="uicontrol">Authentication Policies</span>
                  <span class="uicontrol">Protected Resource Policy</span>
                  <span class="uicontrol">Advanced Rules</span>
               </span>.
               <br/>
            </li>
            <li>Under <span class="uicontrol">Advanced Rules</span> select the <span class="uicontrol">Post-Authentication</span> tab.</li>
            <li>Click <span class="uicontrol">Add</span> and add a rule as shown below. Note: All fields should be as shown, however <span class="uicontrol">Switch Authentication Scheme</span>must be set to the name of the scheme created<br/>
               <img src="../../Resources/Images/hybrid-access/oamp-okta-int.14.png"
                    style="mc-thumbnail: popup;mc-thumbnail-max-width: 250px;mc-thumbnail-max-height: auto;border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;"/>
            </li>
            <li>Click <span class="uicontrol">Apply</span> when complete. </li>
         </ol>
      </ol>
      <div>
         <h2>Next steps</h2>
         <p>[Optionally] <MadCap:xref href="oamp-okta-config-ssl.htm">Enable SSL on OAM servers </MadCap:xref>
         </p>
      </div>
   </body>
</html>
