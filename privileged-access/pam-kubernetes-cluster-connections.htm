<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h1>Kubernetes cluster connections</h1>
        <p>The <MadCap:variable name="okta-feature-names.Okta Privileged Access" /> client allows users to synchronize a list of accessible clusters to their local device. The list of clusters may change depending on a specific user's group membership and configured Cluster Groups.</p>
        <h2>Sync cluster information</h2>
        <p>During the initial launch, the <MadCap:variable name="okta-feature-names.Okta Privileged Access" /> client is used only for cluster discovery and token management, and users exclusively interact with clusters using <span class="code">kubectl</span>. Whenever the user authenticates the client with an Okta account, the client retrieves available cluster information from Advanced Server Access and stores it in the local <span class="filepath">kubeconfig</span> file.</p>
        <div class="noteOkta">
            <p class="noteContent">Cluster changes aren't reflected locally until the users authenticates the client.</p>
        </div>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" style="width: auto;" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <thead>
                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Task</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Description</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">
                        <p>Options</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1"><span class="code">sft K8s</span>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Lists the available K8s subcommands.</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <p>- </p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p><span class="code">sft K8s list-clusters</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Lists the clusters available in the current team</td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                        <p><span class="code">--account</span>: Uses the specified account.</p>
                        <p><span class="code">--columns</span>: Displays the specified column names in the output. Column names should be lowercase and collected in a comma-delimited list.</p>
                        <p><span class="code">--config-file</span>: Uses the specified configuration file.</p>
                        <p><span class="code">--output</span>: Formats result in the specified format. Available options include: <span class="code">default</span>, <span class="code">json</span>, or <span class="code">describe</span>.</p>
                        <p><span class="code">--team</span>: Uses the specified team.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p><span class="code">sft K8s kubeconfig</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                        <p>Returns a YAML formatted <span class="filepath">kubeconfig</span> file for any available clusters, user, and contexts.</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">
                        <p><span class="code">--account</span>: Uses the specified account.</p>
                        <p><span class="code">--config-file</span>: Uses the specified configuration file.</p>
                        <p><span class="code">--team</span>: Uses the specified team.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p><span class="code">sft K8s kubeconfig update</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                        <p>Updates the default <span class="filepath">kubeconfig</span> file  <span class="filepath">$HOME/.kube/config</span> with any available clusters, user, or contexts.</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">
                        <p><span class="code">--account</span>: Uses the specified account.</p>
                        <p><span class="code">--config-file</span>: Uses the specified configuration file.</p>
                        <p><span class="code">--filename=fileName</span>: Update the specified file.</p>
                        <p><span class="code">--team</span>: Uses the specified team.</p>
                    </td>
                </tr>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                        <p><span class="code">sft K8s kubeconfig remove</span>
                        </p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                        <p>Removes all clusters, users, and contexts for the associated team from the default <span class="filepath">kubeconfig</span>&#160;file  <span class="filepath">$HOME/.kube/config</span>.</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                        <p><span class="code">--account</span>: Uses the specified account.</p>
                        <p><span class="code">--config-file</span>: Uses the specified configuration file.</p>
                        <p><span class="code">--filename=fileName</span>: Remove data from the specified file</p>
                        <p><span class="code">--team</span>: Uses the specified team.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Connect to a K8s cluster</h2>
        <p>After this list is synchronized, group members can use the <span MadCap:createDate="2023-04-06T10:12:18.2758540-06:00" MadCap:creator="Mark Cowan" MadCap:initials="MEC" MadCap:comment="Different than kubect1 mentioned earlier(second graph)? Code? or filepath?" MadCap:editor="Mark Cowan" MadCap:editDate="2023-04-06T10:12:20.4761801-06:00" class="code">kubectl</span> command-line tool to interact with clusters. See the <a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands" target="_blank">Kubernetes</a> documentation.</p>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" style="width: auto;" />
            <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
            <thead>
                <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
                    <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">Command</th>
                    <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                    <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body1">
                        <p>Kubernetes cluster not visible in <MadCap:variable name="okta-feature-names.Okta Privileged Access"></MadCap:variable> user interface.</p>
                    </td>
                    <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body1">
                        <ul>
                            <li>
                                <p>Verify that the correct <MadCap:variable name="okta-feature-names.Okta Privileged Access"></MadCap:variable> team name was used in the Terraform provider configuration.</p>
                            </li>
                            <li>
                                <p>Verify that the <span class="code">terraform plan terraform apply</span> command executed successfully.</p>
                            </li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Related topics</h2>
        <ul>
            <li>
                <p>
                    <MadCap:xref href="pam-kubernetes.htm">Kubernetes access management</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="pam-configure-kubernetes-access-management.htm">Configure Kubernetes Access Management</MadCap:xref>
                </p>
            </li>
        </ul>
    </body>
</html>