<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:fileTags="Tags/okta-authors.Nikita Apraj">
   <head>
    </head>
   <body>
      <h1>Customize your telephony service provider</h1>
      <p>By default, Okta routes telephony work flows to a pre'determined service provider. However, you can customize the telephony service provider for your organization by using a telephony inline hook.</p>
      <p> If you configure a telephony inline hook, you can use a telephony service provider of your choice for all work flows that send SMS text messages or voice calls except Okta Verify enrollment. For example, you can create a telephony inline hook to connect to the telecommunication provider you want to use when end users or customers request a One-Time Passcode (OTP) to be sent as an SMS text message.</p>
      <div class="noteOkta" MadCap:conditions="MultiProdPublish.Classic">
         <p class="noteContent">Your organization must have Okta Identity Engine to use telephony inline hooks.</p>
      </div>
      <h2>Connect to an external service </h2>
      <p>
With a telephony inline hook, you can set up an external web service to connect to your telephony service provider for enrollment, authentication, and recovery work flows that involve the phone as an authenticator. For example, if a user requests a One-Time Passcode as part of multifactor authentication, Okta uses the  external web service to connect to your service provider to make the request on the user's behalf. The service provider delivers the OTP to the requester's device and the external web service responds to Okta with messages that indicate whether the delivery of the OTP succeeded or failed.
</p>
      <p>
Each organization can only have one active telephony inline hook at any given time. However, logic in the  external web service can direct requests to different telephony providers based on conditions you specify. For example, you might send the request to different telephony providers based on the country where the request originates. Similarly, your custom code might include error handling to send requests to a secondary telephony provider if your primary telephony provider fails to deliver messages.</p>
      <p>Before you add the inline hook, you must create the external web service that defines the JSON objects for the request and the response from the telephony provider of your choice. You can find the reference documentation for creating the request and response JSON objects web in <a href="https://developer.okta.com/docs/reference/telephony-hook/">Telephony Inline Hook Reference</a>.

After you prepare the external web service request and response JSON objects for the telephony provider you want to use, you can add and manage the Telephony Inline Hook through the Admin Console. </p>
      <p>

For a general introduction to Okta inline hooks, see <MadCap:xref href="../automation-hooks/inline-hooks-main.htm">Inline hooks</MadCap:xref>.

For information about the API for registering external service endpoints with Okta, see <a href="https://developer.okta.com/docs/reference/api/inline-hooks/">Inline Hooks Management API</a>.
</p>
      <h2>Add a Telephony Inline Hook
</h2>
      <MadCap:snippetBlock src="../identity-engine/authenticators/snippets/add-telephony-inline-hook.flsnp"/>
      <h2>Preview the request and response</h2>
      <MadCap:snippetBlock src="../identity-engine/authenticators/snippets/test-telephony-hook.flsnp"/>
      <h2>View metrics for your telephony provider</h2>
      <p>	Okta provides basic metrics to help you monitor how well your telephone service provider is performing. The metrics track the total number of times a hook is executed for a 30-day period, and indicate the number of successful executions, the number of unsuccessful executions, and the average execution time for successful executions.</p>
      <p>To view metrics for you telephony service provider:</p>
      <ol>
         <li>
            <p>In the Admin Console, go to <span class="menucascade">
                  <span class="uicontrol">Workflow</span>
                  <span class="uicontrol">Inline Hooks</span>
               </span>.
</p>
         </li>
         <li>
            <p>Identify the telephony inline hook that is currently <span class="uicontrol">Active</span>.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Actions</span>, then select <span class="uicontrol">Metrics</span>.</p>
         </li>
      </ol>
      <h2>Deactivate a telephony provider</h2>
      <p>You can only have one active telephony service provider for an organization. However, you can configure multiple inline hooks for different telephony providers, then change between them by deactivating one and activating another. For example, if you have two providers available but the currently active provider is experiencing service delays, you might switch to your secondary provider.</p>
      <p>To deactivate a telephony service provider:</p>
      <ol>
         <li>
            <p>In the Admin Console, go to <span class="menucascade">
                  <span class="uicontrol">Workflow</span>
                  <span class="uicontrol">Inline Hooks</span>
               </span>.
</p>
         </li>
         <li>
            <p>Identify the telephony inline hook that is currently <span class="uicontrol">Active</span>.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Actions</span>, then select <span class="uicontrol">Deactivate</span>.</p>
         </li>
         <li>
            <p>Identify the telephony inline hook that is currently <span class="uicontrol">Inactive</span>.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Actions</span>, then select <span class="uicontrol">Activate</span>.</p>
         </li>
      </ol>
      <h2>Related topics </h2>
      <p>
         <MadCap:xref href="about-telephony.htm">Telephony</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="telephony-how-to-tasks.htm">Configure and use telephony</MadCap:xref>
      </p>
      <p>
         <a href="telephony-how-to-tasks.htm">
            <MadCap:xref href="telephony-compliance.htm">Regulatory compliance</MadCap:xref>
         </a>
      </p>
      <p>
         <MadCap:xref href="telephony-mitigate-tf.htm">How to mitigate toll fraud for an Okta organization</MadCap:xref>
      </p>
   </body>
</html>
