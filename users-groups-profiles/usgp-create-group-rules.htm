<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
       MadCap:onlyLocalStylesheets="False"
       MadCap:searchable="True"
       MadCap:fileTags="Tags/okta-authors.Patrick Calnan"
       MadCap:conditions="MultiProdPublish.Classic+OIE">
   <head>
      <link href="../../Resources/TableStyles/standard.css"
             rel="stylesheet"
             MadCap:stylesheetType="table"/>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
      <meta name="description"
             content="Create a group rule to apply a rule to all members of a group."/>
   </head>
   <body>
      <h1>
         <a name="Using"/>Create group rules</h1>
      <p>You can create a group rule to assign a user to groups or exclude them from a group. You can use basic conditions or the <MadCap:variable name="okta-variables.ProductName"/> Expression Language to create rules.</p>
      <p>If you're evaluating attributes from Workday, Active Directory, or other sources, you first need to map them to <MadCap:variable name="okta-variables.ProductName"/> user profile attributes.</p>
      <h2>Create a group rule</h2>
      <div>
         <ol>
            <li>
                    In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol"> Groups</span>
               </span>.           </li>
            <li>Select the <span class="uicontrol">Rules</span> tab, and then click <span class="uicontrol">Add Rule</span>.
</li>
            <li>Enter a name for the rule.       </li>
            <li>For the <span class="uicontrol">IF</span> condition, select one of these options:</li>
            <ul>
               <li>
                  <span class="uicontrol">Use basic condition</span>: Select options from the drop-down lists to create a rule using string attributes only. Use this method  to create simple rules. For example, those from a single attribute or from one or more groups only.</li>
               <li>
                  <p>
                     <span class="uicontrol">Use </span>
                     <MadCap:variable name="okta-variables.ProductName"/>
                     <span class="uicontrol">  Expression Language (advanced)</span>: Select this option to create complex rules with  custom expressions.</p>
                  <p> You can create rules using the following:</p>
                  <ul>
                     <li>
                        <span class="uicontrol">One or more</span> attributes</li>
                     <li>
                        <span class="uicontrol">One or more</span> groups</li>
                     <li>
                        <span class="uicontrol">Combinations</span> of attributes and groups</li>
                  </ul>
                  <p>See <MadCap:xref href="#About">About [%=okta-variables.ProductName%] Expression Language</MadCap:xref>.</p>
               </li>
            </ul>
         </ol>
         <ol start="4">
            <li>
               <p>In <span class="uicontrol">Then Assign to</span>, enter a single group or multiple groups to which the user should be assigned if the rule condition is met. </p>
               <p>
                  IMPORTANT: You can assign a user to maximum 100 groups.</p>
            </li>
            <li>
               <p>In <span class="uicontrol">Except The following users</span>, enter the names of any users you want to exclude from the rule.</p>
               <p>
                  IMPORTANT: </p>
               <ul>
                  <li>You can exclude maximum 100 users from a rule.</li>
                  <li>If you manually remove a rule-managed user  from a group, that user automatically gets added to <span class="uicontrol">Except The following users</span> for that rule.</li>
               </ul>
            </li>
            <li>
                    Click <span class="uicontrol">Save</span>.
</li>
         </ol>
      </div>
      <p>After you create and save a rule, it’s <span class="uicontrol">inactive</span> by default. Once you activate it, the rule gets applied to your entire org. The new rule then runs on a user as their profile gets updated through import, direct updating, or other changes. The rule doesn't move users in a <span class="uicontrol">Pending</span> or <span class="uicontrol">Inactive</span> state.</p>
      <h2>
         <a name="About"/>About <MadCap:variable name="okta-variables.ProductName"/> Expression Language</h2>
      <p>You can use <MadCap:variable name="okta-variables.ProductName"/> Expression Language to add a custom expression to a group rule. Custom expressions allow you to refine your conditions, by referencing one or more attributes. See <a href="https://developer.okta.com/docs/reference/okta-expression-language/">
            <MadCap:variable name="okta-variables.ProductName"/> Expression Language</a>.</p>
      <h3>Constraints</h3>
      <p>Group rule conditions have the following constraints:</p>
      <ul>
         <li>Expressions must use <MadCap:variable name="okta-variables.ProductName"/> Expression Language.</li>
         <li>Expressions must have a valid syntax and use logical operators.</li>
         <li>Expressions must evaluate to Boolean.</li>
         <li>Expressions can't contain an assignment <span class="code">=</span> operator.</li>
         <li>User attributes used in expressions can only refer to available <MadCap:variable name="okta-variables.ProductName"/> user attributes.</li>
         <li>Only <span class="term">group</span> and <span class="term">user</span> attributes are supported.</li>
         <li>
            <span class="term">Application</span> attributes aren’t supported.</li>
      </ul>
      <h3>Supported functions</h3>
      <p>The <MadCap:variable name="okta-variables.ProductName"/> Expression Language supports most functions, such as:</p>
      <ul>
         <li>Boolean operators: <span class="code">AND</span>, <span class="code">OR</span>, <span class="code">!</span> (<span class="code">NOT</span>)</li>
         <li>Arithmetic operators: <span class="code">&lt;</span>, <span class="code">&gt;</span>, <span class="code">&lt;=</span>, <span class="code">&gt;=</span>
         </li>
         <li>Equality checks:  <span class="code">==</span>
         </li>
      </ul>
      <h3>Examples of valid condition expressions</h3>
      <p> Assume that the user has the following attributes with types:<ul>
            <li>
               <span class="code">firstName</span> (String)</li>
            <li>
               <span class="code">lastName</span> (String)</li>
            <li>
               <span class="code">city</span> (String)</li>
            <li>
               <span class="code">salary</span> (Integer)</li>
            <li>
               <span class="code">isContractor</span> (Boolean)</li>
            <div>
               <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/standard.css');margin-left: 0;margin-right: auto;"
                       class="TableStyle-standard"
                       cellspacing="0">
                  <col class="TableStyle-standard-Column-Column1"/>
                  <col class="TableStyle-standard-Column-Column1"/>
                  <col class="TableStyle-standard-Column-Column1"/>
                  <thead>
                     <tr class="TableStyle-standard-Head-Header1">
                        <th class="TableStyle-standard-HeadF-Column1-Header1">
                           <p>If (implicit)</p>
                        </th>
                        <th class="TableStyle-standard-HeadF-Column1-Header1">
                           <p>Condition Expression</p>
                        </th>
                        <th class="TableStyle-standard-HeadD-Column1-Header1">
                           <p>Assign to Group (or any action)</p>
                        </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr class="TableStyle-standard-Body-Body1">
                        <td class="TableStyle-standard-BodyF-Column1-Body1">If</td>
                        <td class="TableStyle-standard-BodyF-Column1-Body1">
                           <span class="code">String.stringContains(user.firstName, "dummy")</span>
                        </td>
                        <td class="TableStyle-standard-BodyD-Column1-Body1">dummyUsers</td>
                     </tr>
                     <tr class="TableStyle-standard-Body-Body2">
                        <td class="TableStyle-standard-BodyF-Column1-Body2">If</td>
                        <td class="TableStyle-standard-BodyF-Column1-Body2">
                           <span class="code">user.city == "San Francisco"</span>
                        </td>
                        <td class="TableStyle-standard-BodyD-Column1-Body2">sfo
</td>
                     </tr>
                     <tr class="TableStyle-standard-Body-Body1">
                        <td class="TableStyle-standard-BodyF-Column1-Body1">If</td>
                        <td class="TableStyle-standard-BodyF-Column1-Body1">
                           <span class="code">user.salary &gt; 1000000</span>
                        </td>
                        <td class="TableStyle-standard-BodyD-Column1-Body1">expensiveEmployee
</td>
                     </tr>
                     <tr class="TableStyle-standard-Body-Body2">
                        <td class="TableStyle-standard-BodyF-Column1-Body2">If</td>
                        <td class="TableStyle-standard-BodyF-Column1-Body2">
                           <span class="code">! user.isContractor</span>
                        </td>
                        <td class="TableStyle-standard-BodyD-Column1-Body2">fullTimeEmployees
</td>
                     </tr>
                     <tr class="TableStyle-standard-Body-Body1">
                        <td class="TableStyle-standard-BodyC-Column1-Body1">If</td>
                        <td class="TableStyle-standard-BodyC-Column1-Body1">
                           <span class="code">user.salary &gt; 1000000 AND !user.isContractor</span>
                        </td>
                        <td class="TableStyle-standard-BodyA-Column1-Body1">expensiveFullTimeEmployee</td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </ul>
      </p>
   </body>
</html>
