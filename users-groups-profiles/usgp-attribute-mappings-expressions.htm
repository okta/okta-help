<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan"
      MadCap:conditions="MultiProdPublish.Classic+OIE">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
      <meta name="description"
            content="Use expressions within mappings to modify attributes before they are stored in Okta or sent to apps."/>
   </head>
   <body>
      <h1>Modify attributes with expressions</h1>
      <div>Expressions within mappings let you modify attributes before they are stored in <MadCap:variable name="okta-variables.ProductName"/> or sent to apps.
		</div>
      <p>Expressions allow you to concatenate attributes, manipulate strings, convert data types, and more. <MadCap:variable name="okta-variables.ProductName"/> supports a subset of the Spring Expression Language (SpEL) functions. For a comprehensive list of the supported functions, see <a href="http://developer.okta.com/docs/getting_started/okta_expression_lang.html"
            target="_self">Okta Expression Language</a>. <span class="s2">All functions work in UD</span> mappings.</p>
      <p>While some functions (namely <code>string</code>) work in other areas of the product (SAML 2.0 Template attributes and custom username formats for example), not all do.</p>
      <p>Expressions are useful for maintaining data integrity and formats across apps. For example, you might want to use an email prefix as an username, bulk replace an email suffix, or populate attributes based on a combination of existing ones (for example, <span class="code">displayName=lastName,firstName</span>). </p>
      <ol>
         <li>
                In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
               <span class="uicontrol">Directory</span>
               <span class="uicontrol">Profile Editor</span>
            </span>.</li>
         <li>
                Optional. Select <span class="uicontrol">Okta</span>, <span class="uicontrol">Apps</span>, <span class="uicontrol">Directories</span>, or <span class="uicontrol">Identity Providers</span> in the <span class="uicontrol">Filters</span> list to filter the list of apps.</li>
         <li>Click <span class="uicontrol">Mappings</span> for the application, directory, or identity provider and select <span class="uicontrol">Configure User mappings</span> if a list appears.</li>
         <li>Select one of the following tabs in the <span class="uicontrol">User Profile Mappings</span> dialog box:<ul>
               <li>
                  <span class="uicontrol">App to Okta User</span>: Select this tab to modify  attributes from the app to <MadCap:variable name="okta-variables.ProductName"/>. The app contains the source attributes and <MadCap:variable name="okta-variables.ProductName"/> is the target.</li>
               <li>
                  <span class="uicontrol">Okta User to App</span>: Select this tab to modify attributes from <MadCap:variable name="okta-variables.ProductName"/> to the app. <MadCap:variable name="okta-variables.ProductName"/> contains the source attributes and the app  is the target.</li>
            </ul>
         </li>
         <li>Enter an expression in the <span class="uicontrol">Choose an attribute or enter an expression</span> field.</li>
         <li>Preface the variable name(s) with the corresponding object or profile:</li>
      </ol>
      <p>a. <span class="uicontrol">source</span> refers to the object on the left:</p>
      <ul>
         <li>Can be used in either <MadCap:variable name="okta-variables.ProductName"/> to App or App to <MadCap:variable name="okta-variables.ProductName"/> mappings.</li>
         <li>
            <span class="uicontrol">Example</span>: <span class="userinput">source.firstName</span>
         </li>
      </ul>
      <p>b. <span class="uicontrol">user</span> refers to the <MadCap:variable name="okta-variables.ProductName"/> user profile:</p>
      <ul>
         <li>Can only be used in the <MadCap:variable name="okta-variables.ProductName"/> to App mapping.</li>
         <li>
            <span class="uicontrol">Example</span>: <span class="userinput">user.firstName</span>
         </li>
      </ul>
      <p>c. <span class="uicontrol">appUser</span> (implicit reference) refers to the in-context app (not <MadCap:variable name="okta-variables.ProductName"/> user profile):</p>
      <ul>
         <li>Can only be used in the App to <MadCap:variable name="okta-variables.ProductName"/> mapping.</li>
         <li>
            <span class="uicontrol">Example</span>: <span class="userinput">appUser.firstName</span>
         </li>
      </ul>
      <p>d. <span class="uicontrol">appUserName</span> (explicit reference) refers to a specific app by name:</p>
      <ul>
         <li>Can be used in either <MadCap:variable name="okta-variables.ProductName"/> to App or App to <MadCap:variable name="okta-variables.ProductName"/> mappings.</li>
         <li>Is used to reference an app outside the mappings.</li>
         <li>
            <span class="uicontrol">Example:</span>
            <span class="userinput">google.nameGivenName</span>
         </li>
         <li>If multiple instances of an app are configured, additional app user profiles that follow the first instance are appended with an underscore and a random string.</li>
         <li>
            <span class="uicontrol">Example:</span>
            <span class="userinput">google, google_&lt;random string 1&gt;, google_&lt;random string 2&gt;</span>
         </li>
      </ul>
      <ol start="7">
         <li>To find instance and variable names use the profile editor:</li>
      </ol>
      <p>a. In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
            <span class="uicontrol">Directory</span>
            <span class="uicontrol">Profile Editor</span>
         </span>.</p>
      <p>b. Select <span class="uicontrol">Profile</span> for the app, directory, or IdP and note the instance and variable name.</p>
      <ol start="6" MadCap:continue="true">
         <li>Click <span class="uicontrol">Save Mappings</span> and <span class="uicontrol">Apply updates now</span>.</li>
      </ol>
      <div class="noteOkta">
         <p class="noteContent">Attributes are not updated or reapplied when the user's group membership changes. </p>
      </div>
   </body>
</html>
