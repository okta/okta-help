<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Kimli Welsh">
    <head>
        <link href="../../../Resources/TableStyles/standard-horizonal-borders-only.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Configure Okta as a CA with dynamic SCEP challenge for macOS using <MadCap:variable name="3rd Party Integrations.Jamf Pro" /></h1>
        <p>Configure a Certificate Authority (CA), so you can issue client certificates to your targeted macOS devices. This procedure describes how to generate a Simple Certificate Enrollment Protocol (SCEP) URL in Okta and create a dynamic Simple Certificate Enrollment Protocol (SCEP) profile using <MadCap:variable name="3rd Party Integrations.Jamf Pro" />.</p>
        <h2>Before you begin</h2>
        <p>Make sure you have access to the following:</p>
        <ul>
            <li>Certificates deployed for digital signature, but not for other purposes (for example, encryption)</li>
            <li><MadCap:variable name="okta-variables.ProductName" /> <MadCap:variable name="okta-feature-names.Administrator dashboard" /></li>
            <li><MadCap:variable name="3rd Party Integrations.Jamf Pro" /> dashboard</li>
        </ul>
        <div class="noteOkta">
            <p class="noteContent">If you're using AirWatch, use static SCEP. AirWatch has known issues with dynamic SCEP.</p>
        </div>
        <h2>Start this procedure</h2>
        <ul>
            <li>
                <MadCap:xref href="#Task1">Task 1: Configure management attestation and generate a SCEP URL</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Task2">Task 2: Create a dynamic SCEP profile</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Task3">Task 3: Configure targets for deploying the SCEP profile in [%=3rd Party Integrations.Jamf Pro%]</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="#Task4">Task 4: Verify that the Okta CA was installed on your devices</MadCap:xref>
            </li>
        </ul>
        <h3><a name="Task1"></a>Task 1: Generate a SCEP URL</h3>
        <ol>
            <li>In the Admin Console, go to <span class="menucascade"><span class="uicontrol">Security</span> <span class="uicontrol">Device integrations</span></span>.</li>
            <li>On the <span class="wintitle">Endpoint management</span> tab, click <span class="uicontrol">Add platform</span>.</li>
            <li>Select <span class="uicontrol">Desktop (Windows and macOS only)</span>, then click <span class="uicontrol">Next</span>.</li>
            <li>On the <span class="uicontrol">Add device management platform</span> page, select the following options:
         <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/standard-horizonal-borders-only.css');margin-left: 0;margin-right: auto;" class="TableStyle-standard-horizonal-borders-only" cellspacing="14"><col style="width: 378px;" class="TableStyle-standard-horizonal-borders-only-Column-Column1" /><col class="TableStyle-standard-horizonal-borders-only-Column-Column1" /><thead><tr class="TableStyle-standard-horizonal-borders-only-Head-Header1"><th class="TableStyle-standard-horizonal-borders-only-HeadE-Column1-Header1">For this</th><th class="TableStyle-standard-horizonal-borders-only-HeadD-Column1-Header1">Select</th></tr></thead><tbody><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Certificate Authority</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1"><span class="uicontrol">Use Okta as Certificate Authority</span>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyB-Column1-Body1"><span class="wintitle">SCEP URL challenge type</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyA-Column1-Body1"><span class="uicontrol">Dynamic SCEP URL</span> and verify that <span class="uicontrol">Generic</span> is selected.</td></tr></tbody></table></li>
            <li>Click <span class="uicontrol">Generate</span>.</li>
            <li>Copy and save the following values:
         <ul><li>SCEP URL</li><li>Challenge URL</li><li>Username</li><li>Password</li></ul><p>To reveal the password, click <span class="uicontrol">Show password</span> <img src="../../../Resources/Images/device-mgmt-icon-reveal-pw.png" alt="Show password icon " style="width: 38px;height: 32px;" />. Save the <span class="uicontrol">Password</span> in a safe place. This is the only time that it appears in the Admin Console. These values are required in <MadCap:variable name="3rd Party Integrations.Jamf Pro" />.</p></li>
            <li>Click <span class="uicontrol">Save</span>.</li>
        </ol>
        <h3><a name="Task2"></a>Task 2: Create a dynamic SCEP profile in <MadCap:variable name="3rd Party Integrations.Jamf Pro" /></h3>
        <p>The SCEP profile specifies settings that allow a device to get certificates from a Certificate Authority (CA) using the Simple Certificate Enrollment Protocol (SCEP). You can use any device management solution that supports SCEP to configure the profile. Because Okta has tested the deployment of SCEP&#160;profiles using <MadCap:variable name="3rd Party Integrations.Jamf Pro" />, the following steps illustrate how to create the profile using <MadCap:variable name="3rd Party Integrations.Jamf Pro" />.</p>
        <div class="noteOkta">
            <p class="noteContent">Okta as a CA doesn't support <a href="https://www.rfc-editor.org/rfc/rfc8894.html#name-certificate-enrolment-renew" target="_blank">renewal requests</a>. Instead, redistribute the profile before the certificate expires to replace the expired certificate. All MDM SCEP policies should be configured to allow for profile redistribution.</p>
        </div>
        <p>To create the SCEP profile in <MadCap:variable name="3rd Party Integrations.Jamf Pro" />.	</p>
        <ol>
            <li>In <MadCap:variable name="3rd Party Integrations.Jamf Pro" />, go to <span class="menucascade"><span class="uicontrol">Computers</span> <span class="uicontrol">Configuration Profiles</span></span>.</li>
            <li>Click <span class="uicontrol">New</span>.</li>
            <li>On the  <span class="uicontrol">General</span> page, enter the following information:<table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/standard-horizonal-borders-only.css');margin-left: 0;margin-right: auto;" class="TableStyle-standard-horizonal-borders-only" cellspacing="14"><col style="width: 414px;" class="TableStyle-standard-horizonal-borders-only-Column-Column1" /><col class="TableStyle-standard-horizonal-borders-only-Column-Column1" /><thead><tr class="TableStyle-standard-horizonal-borders-only-Head-Header1"><th class="TableStyle-standard-horizonal-borders-only-HeadE-Column1-Header1">For this</th><th class="TableStyle-standard-horizonal-borders-only-HeadD-Column1-Header1">Do this</th></tr></thead><tbody><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Name</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Enter a name for the profile.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Description</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Optional. Enter a description of the profile.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyB-Column1-Body1"><span class="wintitle">Level</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyA-Column1-Body1">Select the appropriate level for the certificate. Okta Verify uses this certificate to identify managed devices and managed users. To ensure that all users of the device are managed, you should select <span class="uicontrol">Computer Level</span>.<p>If you only want specific users of a device to be identified as managed, you should select <span class="uicontrol">User Level</span>.</p></td></tr></tbody></table></li>
            <li>Click <span class="uicontrol">SCEP</span>, and then click <span class="uicontrol">Configure</span>.</li>
            <li>For the <span class="uicontrol">SCEP profile</span>, enter the following information:
                <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/standard-horizonal-borders-only.css');margin-left: 0;margin-right: auto;" class="TableStyle-standard-horizonal-borders-only" cellspacing="14"><col style="width: 414px;" class="TableStyle-standard-horizonal-borders-only-Column-Column1" /><col class="TableStyle-standard-horizonal-borders-only-Column-Column1" /><thead><tr class="TableStyle-standard-horizonal-borders-only-Head-Header1"><th class="TableStyle-standard-horizonal-borders-only-HeadE-Column1-Header1">For this</th><th class="TableStyle-standard-horizonal-borders-only-HeadD-Column1-Header1">Do this</th></tr></thead><tbody><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">URL</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Paste the SCEP URL that you saved in <a href="#Task1">Task 1</a>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Name</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Enter a name for the SCEP profile.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Redistribute Profile</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Choose a time frame for the profile to be redistributed when its SCEP-issused certificate is the specified number of days from expiring.<p>Okta doesn't support automatic certificate renewal. The profile must be redistributed to replace the expired certificate.</p></td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Subject</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Enter an appropriate subject name. For example, if you selected <span class="uicontrol">Computer Level</span>, set the subject to indicate the device name: <span class="userinput">CN=$COMPUTERNAME managementAttestation $UDID</span><p>If you selected <span class="uicontrol">User Level</span>, set the subject name to indicate a user: <span class="userinput">CN=$EMAIL managementAttestation $UDID</span></p><p>Okta does not require the subject name to be in any particular format. Choose a name that indicates that the certificate is used as the  device management signal to Okta. As a best practice, you can also include profile variables provided by <MadCap:variable name="3rd Party Integrations.Jamf Pro" /> to include the device ID (UDID) and user identifier. For a list of supported variables, see <MadCap:variable name="3rd Party Integrations.Jamf Pro" /> document <a href="https://docs.jamf.com/10.21.0/jamf-pro/administrator-guide/Computer_Configuration_Profiles.html" target="_blank">Payload Variables for Computer Configuration Profiles</a>.</p></td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Challenge Type</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Select <span class="uicontrol">Dynamic-Microsoft CA</span>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">URL To SCEP Admin</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Enter the challenge URL that you saved in <a href="#Task1">Task 1</a>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Username</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Enter the username that you saved in <a href="#Task1">Task 1</a>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Password</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Enter the password that you saved in <a href="#Task1">Task 1</a>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Verify Password</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Re-enter the password that you saved in <a href="#Task1">Task 1</a>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Key Size</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Select <span class="uicontrol">2048</span>.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Use as digital signature</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Select this option.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyE-Column1-Body1"><span class="wintitle">Allow export from keychain</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyD-Column1-Body1">Clear this option.  It is good security practice to mark the certificate as non-exportable.</td></tr><tr class="TableStyle-standard-horizonal-borders-only-Body-Body1"><td class="TableStyle-standard-horizonal-borders-only-BodyB-Column1-Body1"><span class="wintitle">Allow all apps access</span></td><td class="TableStyle-standard-horizonal-borders-only-BodyA-Column1-Body1">Select this option.</td></tr></tbody></table></li>
            <li>Click <span class="uicontrol">Save</span>.</li>
        </ol>
        <h3><a name="Task3"></a>Task 3: Configure targets for the SCEP profile in <MadCap:variable name="3rd Party Integrations.Jamf Pro" /></h3>
        <p>If you are using <MadCap:variable name="3rd Party Integrations.Jamf Pro" /> to manage the device, the next step is to configure the targets that the profile will be deployed to.</p>
        <p>To configure targets in <MadCap:variable name="3rd Party Integrations.Jamf Pro" />.	</p>
        <ol>
            <li>In <MadCap:variable name="3rd Party Integrations.Jamf Pro" />, go to <span class="menucascade"><span class="uicontrol">Computers</span> <span class="uicontrol">Configuration Profiles</span></span>.</li>
            <li>Select the SCEP configuration profile name that you created in <MadCap:xref href="#Task2">Task 2: Create a dynamic SCEP profile in [%=3rd Party Integrations.Jamf Pro%]</MadCap:xref>.</li>
            <li>Click <span class="uicontrol">Scope</span>.</li>
            <li>Click <span class="uicontrol">Edit</span>.</li>
            <li>Click <span class="uicontrol">Add</span>.</li>
            <li>Select a deployment target, and then click <span class="uicontrol">Add</span>. Repeat this step for all required targets.</li>
            <li>Click <span class="uicontrol">Save</span>.</li>
        </ol>
        <h3><a name="Task4"></a>Task 4: Verify that the Okta CA was installed on your devices</h3>
        <ol>
            <li>On a macOS device that is managed by <MadCap:variable name="3rd Party Integrations.Jamf Pro" />, go to <span class="menucascade"><span class="uicontrol">System Preference</span> <span class="uicontrol">Profiles</span></span>.</li>
            <li>Open <span class="menucascade"><span class="uicontrol">Keychain</span> <span class="uicontrol">Login</span></span>.</li>
            <li>Verify that a client certificate and associated private key exists.</li>
        </ol>
        <h2>Next steps</h2>
        <p>
            <MadCap:xref href="add-app-signon-policy-desktop.htm">Add an [%=okta-feature-names.app sign-on policy%] rule for desktop</MadCap:xref>
        </p>
    </body>
</html>