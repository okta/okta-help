<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:fileTags="Tags/okta-authors.Patrick Calnan">
   <head>
      <link href="../../../../Resources/TableStyles/standard-shaded-rows.css"
            rel="stylesheet"
            MadCap:stylesheetType="table"/>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>Full authentication policy deployment</h1>
      <p>This is a more advanced authentication policy. In this scenario, the organization has a more sophisticated approach with three different levels of security requirements for their apps: Low, Medium and High. </p>
      <p>This strategy relies on Device Context (see <MadCap:xref href="../devices/devcontext-main.htm">Device Context deployment guide</MadCap:xref>) in addition to the authentication method requirements. The following table summarizes the authentication and Device Context settings that satisfy each security level requirement.</p>
      <p>Note: In this use case, <MadCap:variable name="okta-feature-names.Okta FastPass"/> is enabled.</p>
      <table style="mc-table-style: url('../../../../Resources/TableStyles/standard-shaded-rows.css');"
             class="TableStyle-srb_header_alt_shade"
             cellspacing="0">
         <col class="TableStyle-srb_header_alt_shade-Column-Column1"/>
         <col class="TableStyle-srb_header_alt_shade-Column-Column1"/>
         <col class="TableStyle-srb_header_alt_shade-Column-Column1"/>
         <col class="TableStyle-srb_header_alt_shade-Column-Column1"/>
         <thead>
            <tr class="TableStyle-srb_header_alt_shade-Head-Header1">
               <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                    </th>
               <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                  <p>Low assurance apps</p>
               </th>
               <th class="TableStyle-srb_header_alt_shade-HeadF-Column1-Header1">
                  <p>Medium assurance apps</p>
               </th>
               <th class="TableStyle-srb_header_alt_shade-HeadD-Column1-Header1">
                  <p>High assurance apps</p>
               </th>
            </tr>
         </thead>
         <tbody>
            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                  <span class="uicontrol">Authentication requirements</span>
               </td>
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Any 1 Factor Type</td>
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Any 2 Factor Types</td>
               <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">Any 2 Factor Types + Hardware Protected</td>
            </tr>
            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">
                  <span class="uicontrol">Device Context</span>
               </td>
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Any</td>
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2">Registered devices</td>
               <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2">Registered and Managed devices</td>
            </tr>
            <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">
                  <span class="uicontrol">Okta FastPass option</span>
               </td>
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Silent auth</td>
               <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1">Prompt</td>
               <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1">Prompt</td>
            </tr>
            <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
               <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">
                  <span class="uicontrol">Re-authentication frequency</span>
               </td>
               <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">Never if session active</td>
               <td class="TableStyle-srb_header_alt_shade-BodyC-Column1-Body2">Every 2 hours</td>
               <td class="TableStyle-srb_header_alt_shade-BodyA-Column1-Body2">Every sign-in attempt</td>
            </tr>
         </tbody>
      </table>
      <p>For more information about <MadCap:variable name="okta-feature-names.Okta FastPass"/>, see <MadCap:xref href="../pwa/pwa-main.htm">Passwordless authentication deployment guide</MadCap:xref>.</p>
      <h2>Prerequisites</h2>
      <h3>Activate Okta FastPass</h3>
      <ol>
         <li>
            <MadCap:snippetBlock src="../../../../Resources/Snippets/task steps/Security_Authenticators.flsnp"/>
         </li>
         <li>In the Okta Verify row, click <span class="menucascade">
               <span class="uicontrol">Actions</span>
               <span class="uicontrol">Edit</span>
            </span>.</li>
         <li>Ensure that <span class="uicontrol">Okta FastPass (All platforms)</span> is selected.</li>
      </ol>
      <h3>Ensure the global session policy in use does not require MFA</h3>
      <ol>
         <li>
            <MadCap:snippetBlock src="../../../../Resources/Snippets/task steps/Security_Global_Session_Policy.flsnp"/>
         </li>
         <li>Select the policy in use.</li>
         <li>Click the icon to the right of the appropriate rule.</li>
         <li>Ensure that <span class="uicontrol">Multifactor authentication</span> is not selected.</li>
         <li>Repeat the steps above for additional policies and rules as needed.</li>
      </ol>
      <h2>Setup and configuration</h2>
      <ol>
         <li>
            <MadCap:snippetBlock src="../../../../Resources/Snippets/task steps/Security_Authentication_Policy.flsnp"/>
         </li>
         <li>Click <span class="uicontrol">Add a policy</span>.</li>
         <li>Enter a policy <span class="uicontrol">Name</span> and <span class="uicontrol">Description</span>.</li>
         <li>Click <span class="uicontrol">Save</span>.</li>
         <li>On the <span class="wintitle">Rules</span> tab, click <span class="uicontrol">Add rule</span>.</li>
         <li>In the <span class="uicontrol">Rule name</span> field, enter a name for the rule. The name should be descriptive (for example, Salesforce Low Security). This is helpful when consulting system logs to troubleshoot access issues.</li>
         <li>Apply settings for the desired assurance level (as detailed in the previous table). Refer to the configured conditions in the following sections. </li>
      </ol>
      <h2>Low assurance apps</h2>
      <ol>
         <li>In the <span class="uicontrol">IF</span> section, set <span class="uicontrol">AND</span>
            <span class="uicontrol">Device state is</span>to <span class="uicontrol">Any.</span>
         </li>
         <li>In the <span class="uicontrol">THEN</span> section:</li>
         <ol style="list-style-type: lower-alpha;">
            <li>Set <span class="code">THEN</span>
               <span class="uicontrol">Access is</span> to <span class="uicontrol">Allowed after successful authentication</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">User must authenticate with</span> to <span class="uicontrol">Any 1 factor type</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Access with Okta FastPass is granted</span> to <span class="uicontrol">Without the user approving a prompt in Okta Verify or providing biometrics</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Re-authentication frequency is</span> to <span class="uicontrol">Never re-authenticate if the session is active</span>.</li>
         </ol>
         <li>Click <span class="uicontrol">Save</span>.</li>
         <li>On the <span class="wintitle">Applications</span> tab, click <span class="uicontrol">Add app</span>.</li>
         <li>Search for the apps you want to add to this policy, and then click <span class="uicontrol">Add</span>.</li>
      </ol>
      <h2>Medium assurance apps</h2>
      <ol>
         <li>In the <span class="uicontrol">IF</span> section, set <span class="code">AND</span>
            <span class="uicontrol">Device state</span> to <span class="uicontrol">Registered</span>.</li>
         <li>In the <span class="uicontrol">THEN</span> section:</li>
         <ol style="list-style-type: lower-alpha;">
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Device management is</span> to <span class="uicontrol">Not managed</span>.</li>
            <li>Set <span class="code">THEN</span>
               <span class="uicontrol">Access is</span> to <span class="uicontrol">Allowed after successful authentication</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">User must authenticate with</span> to <span class="uicontrol">Any 2 factor types</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Access with Okta FastPass is granted</span> to <span class="uicontrol">Without the user approving a prompt in Okta Verify or providing biometrics</span>.</li>
            <li>Set <span class="uicontrol">
                  <span class="code">AND</span> Re-authentication frequency is</span> to <span class="uicontrol">Re-authenticate after</span> and set the period to <span class="uicontrol">2 hours</span>.</li>
         </ol>
         <li>Click <span class="uicontrol">Save</span>.</li>
         <li>On the Applications tab, click <span class="uicontrol">Add app</span>.</li>
         <li>Search for the apps you want to add to this policy, and then click <span class="uicontrol">Add</span>.</li>
      </ol>
      <h2>High assurance apps</h2>
      <ol>
         <li>In the <span class="uicontrol">IF</span> section, set <span class="code">AND</span>
            <span class="uicontrol">Device state</span> to <span class="uicontrol">Registered</span>.</li>
         <li>In the <span class="uicontrol">THEN</span> section:</li>
         <ol style="list-style-type: lower-alpha;">
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Device management is</span> to <span class="uicontrol">Managed</span>.</li>
            <li>Set <span class="code">THEN</span>
               <span class="uicontrol">Access is</span> to <span class="uicontrol">Allowed after successful authentication</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">User must authenticate with</span> to <span class="uicontrol">Any 2 factor types</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Possession factor constraints are to Hardware protected</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Access with Okta FastPass is granted</span> to <span class="uicontrol">If the user approves a prompt in Okta Verify or provides biometrics (meets NIST AAL2 requirements)</span>.</li>
            <li>Set <span class="code">AND</span>
               <span class="uicontrol">Re-authentication frequency is</span> to <span class="uicontrol">Every sign-in attempt</span>.</li>
         </ol>
         <li>Click <span class="uicontrol">Save</span>.</li>
         <li>On the Applications tab, click <span class="uicontrol">Add app</span>.</li>
         <li>Search for the apps you want to add to this policy, and then click <span class="uicontrol">Add</span>.</li>
      </ol>
      <p>In this scenario, medium and high assurance levels are expected to deny access from devices that are not registered or managed, respectively. To accomplish this, the catch-all rule for the app policy must not be changed from its default state, which denies access. This rule will be applied to devices that do not meet the IF conditions set in the above rules.   </p>
      <p MadCap:conditions="Primary.do-not-publish">To configure the catch-all rule:</p>
      <ol>
         <li MadCap:conditions="Primary.do-not-publish">In the Admin Console, go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li MadCap:conditions="Primary.do-not-publish">Click the app that needs the <MadCap:variable name="okta-feature-names.app sign-on policy"/> applied.</li>
         <li MadCap:conditions="Primary.do-not-publish">Click the <span class="uicontrol">Sign On</span> tab.</li>
         <li MadCap:conditions="Primary.do-not-publish">In the <span class="uicontrol">Catch-all Rule</span> field, click the icon and select <span class="uicontrol">Edit</span>.</li>
         <li MadCap:conditions="Primary.do-not-publish">In the THEN section, set <span class="uicontrol">Access is</span> to <span class="uicontrol">Denied</span>.</li>
      </ol>
      <h2>User sign-in experience</h2>
      <p>When a user attempts to launch an app governed by an <MadCap:variable name="okta-feature-names.app sign-on policy"/>, their experience will be determined by the security levels applied to the policy. The same user may have different experiences when launching different apps, based upon their policies.</p>
      <p>After configuring apps using the settings above, try one of the following approaches.</p>
      <h3>Low assurance app</h3>
      <p>When a user launches the app from any device, only one authentication method must be satisfied before access is granted. Entering a password satisfies this requirement.</p>
      <h3>Medium assurance app</h3>
      <ul>
         <li>When a user launches the app from an <span class="uicontrol">Unregistered</span> device they will not be able to proceed until Okta Verify is installed and launched on the device, as shown in the following image.</li>
         <li>When a user launches the app from a <span class="uicontrol">Registered</span> device they must satisfy two factor types before they can proceed to the app. For example, they may enter a password (Knowledge factor) and respond to an Okta Verify push (Possession factor).</li>
         <li>If users close and relaunch the app two afters after they first launched the application, they will be prompted to authenticate.</li>
      </ul>
      <h3>High assurance app</h3>
      <p>This is similar to the medium assurance app experience, except:</p>
      <ul>
         <li>When a user launches the app from an <span class="uicontrol">Unregistered,</span> a <span class="uicontrol">Registered - Not Managed</span> device, or a device that is not hardware protected, they will not be able to proceed until both requirements are met.</li>
         <li>Users will need to respond to both factor prompts each time they launch the protected app.</li>
      </ul>
   </body>
</html>
