<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Graham Smith">
   <head>
      <link href="../../../Resources/TableStyles/standard.css"
            rel="stylesheet"
            MadCap:stylesheetType="table"/>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>Add a global session policy rule</h1>
      <p>Rules describe the conditions of policy behavior, like requests from a geographical location or whether the user is on or off a trusted network.</p>
      <p>When a user attempts to sign in, they're evaluated by each rule in <span class="uicontrol">Priority</span> order until one matches. Be sure that the rules are arranged in an order that restricts access to users with high-risk conditions. Don't prioritize a rule that applies to everyone over one that applies to only users out of zone, because the policy evaluation will stop when it reaches the everyone rule.</p>
      <p>There's no limit to the number of rules that a global session policy can have, but it must have at least one.</p>
      <div class="noteOkta">
         <p class="noteContent">If you're adding rules to a new policy, start this task at step 4.</p>
      </div>
      <ol>
         <li>In the <MadCap:variable name="okta-feature-names.Administrator dashboard"/>, go to <span class="menucascade">
               <span class="uicontrol">Security</span>
               <span class="uicontrol">
                  <MadCap:variable name="okta-feature-names.Okta Sign-On Policy"/>
              </span>
            </span>.</li>
         <li>
                Select the policy that you want to add rules to.
            </li>
         <li>
                Click <span class="uicontrol">Add rule</span>.
            </li>
         <li>
                In the <span class="uicontrol">Rule name</span> field, add a descriptive name for the rule you want to create.
            </li>
         <li>
                Optional. In the <span class="uicontrol">Exclude users</span> field, indicate which individual users of a group you want to exclude from the rule.
            </li>
         <li>
                Indicate your conditions.
                <dl>
               <dt>
                  <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/standard.css');"
                         class="TableStyle-standard"
                         cellspacing="0">
                     <col class="TableStyle-standard-Column-Column1" style="width: 37%;"/>
                     <col class="TableStyle-standard-Column-Column1"/>
                     <tbody>
                        <tr class="TableStyle-standard-Body-Body1">
                           <td class="TableStyle-standard-BodyF-Column1-Body1">
                              <span class="uicontrol">
                                 <span class="code">IF</span> User's IP is</span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body1">
                              <p>Use the dropdown menu to assign location parameters.</p>
                              <ul>
                                 <li>Specify whether <span class="uicontrol">Anywhere</span>, <span class="uicontrol">In zone</span>, or <span class="uicontrol">Not in zone</span> will prompt authentication. </li>
                                 <li>For <span class="uicontrol">In zone</span> or <span class="uicontrol">Not in zone</span>, you can choose All Zones or specify individual zones. Click <span class="uicontrol">Manage Configurations for Network</span> to see your current gateway settings. To add new ones see <MadCap:xref href="../../Security/network/configure-network-zones.htm">Configure a network zone</MadCap:xref>.</li>
                              </ul>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body2">
                              <span class="uicontrol">
                                 <span class="code">AND</span> Identity provider is</span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body2">
                              <p>Use this dropdown menu to specify an identity provider.</p>
                              <ul>
                                 <li>
                                    <span class="uicontrol">Any</span>: Select this option to use either <span class="uicontrol">
                                       <MadCap:variable name="okta-variables.ProductName"/>
                                   </span>  or <span class="uicontrol">Specific IdP</span> as the identity provider.</li>
                                 <li>
                                    <span class="uicontrol">
                                       <MadCap:variable name="okta-variables.ProductName"/>
                                   </span> : Select this option to use only <span class="uicontrol">
                                       <MadCap:variable name="okta-variables.ProductName"/>
                                   </span>  as the identity provider.</li>
                                 <li>
                                    <span class="uicontrol">Specific IdP</span>: Select this option to use an identity provider that you specify. Click the second field to select an identity provider. If the one you want isn't listed, see <MadCap:xref href="../../Security/idp-social.htm">Add a social login (IdP)</MadCap:xref>.</li>
                              </ul>
                              <p>Note: This is an Early Access feature. To enable it, contact <a href="https://support.okta.com/help/s/">Okta Support</a>.</p>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body1">
                              <span class="uicontrol">
                                 <span class="code">AND</span> Authenticates via</span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body1">Use this dropdown menu to specify the required means of authentication.</td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body2">
                              <span class="uicontrol">
                                 <span class="code">AND</span> Behavior is</span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body2">
                              <p>Enter a behavior type or a named behavior. For high-risk behaviors, be sure to set your MFA requirement to <span class="uicontrol">At every sign in</span>. Don't combine a behavior condition with a <span class="uicontrol">per device</span> or <span class="uicontrol">per session</span> MFA requirement.</p>
                              <p>See <MadCap:xref href="../../Security/behavior-detection/type-behavior-detection.htm">Security Behavior Detection types</MadCap:xref>.</p>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body1">
                              <span class="uicontrol">
                                 <span class="code">AND</span> Risk is</span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body1">
                              <p>Select a risk level of <span class="uicontrol">Low</span>, <span class="uicontrol">Medium</span>, or <span class="uicontrol">High</span>. If you select <span class="uicontrol">High</span>, be sure to set your MFA requirement to <span class="uicontrol">At every sign in</span>. Don't combine a high-risk level with a <span class="uicontrol">device</span> or <span class="uicontrol">session</span> MFA requirement.</p>
                              <p>See <MadCap:xref href="../../Security/Security_Risk_Scoring.htm">Risk Scoring</MadCap:xref>. </p>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                           <td class="TableStyle-standard-BodyF-Column1-Body2">
                              <span class="uicontrol">
                                 <span class="code">THEN</span> Access is</span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body2">Based on the authentication form of the previous dropdown list, use this one to establish whether the condition allows or denies access.</td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1">
                           <td class="TableStyle-standard-BodyF-Column1-Body1">
                              <span class="menucascade">
                                 <span class="uicontrol">
                                    <span class="code">AND</span> </span>
                                 <span class="uicontrol">Establish the user session with</span>
                             </span>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body1">
                              <p>Select <span class="uicontrol">A password</span> or <span class="uicontrol">Any factor used to meet the Authentication Policy requirements</span>. </p>
                              <p>See <MadCap:xref href="../password-optional/password-optional-disabled.htm">Set up passwordless sign-in experience</MadCap:xref>.</p>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2">
                           <td class="TableStyle-standard-BodyF-Column1-Body2">
                              <p>
                                 <span class="uicontrol">Multifactor authentication (MFA) is</span>
                              </p>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body2">
                              <p>Indicate whether multifactor authentication is required. Note the following conditions:</p>
                              <ul>
                                 <li>If you selected <span class="uicontrol">Any factor used to meet the Authentication Policy requirements</span> and that policy requires a password, it is considered the primary factor. Your secondary factor can't be <span class="uicontrol">A password</span>.</li>
                                 <li>If you want your secondary factor to be a security question, your primary factor must be <span class="uicontrol">A password</span>. This combination  works for MFA/SSO flows only. Okta recommends not using security questions in authentication flows.</li>
                              </ul>
                              <p MadCap:conditions="Primary.do-not-publish"> Condition to Do Not Publish:</p>
                              <p MadCap:conditions="Primary.do-not-publish">Indicate whether a secondary factor is required. If it's required, specify how frequently users are prompted to re-authenticate:</p>
                              <ul>
                                 <li>
                                    <p MadCap:conditions="Primary.do-not-publish">
                                       <span class="uicontrol">Per device</span>: This option reduces MFA for a group of users. Because it allows users to bypass MFA if they appear to be signing in from the same device (based on a browser cookie), it's only appropriate for low-risk, low-assurance use cases. It shouldn't be used with behavior conditions.</p>
                                 </li>
                                 <li>
                                    <p MadCap:conditions="Primary.do-not-publish">
                                       <span class="uicontrol">Every time</span>: This option prevents users from controlling their own MFA prompts. This option is suitable for use with behavior conditions, which detect high-risk sign-in events. See <MadCap:xref href="../../Security/policies/configure-signon-policies.htm?cshid=ext-Security-Policies-eu-control#EndUserControlMFAPrompts">End User Control of MFA Prompts</MadCap:xref>.</p>
                                 </li>
                                 <li>
                                    <p MadCap:conditions="Primary.do-not-publish">
                                       <span class="uicontrol">Per session</span>: This option means that users aren't challenged again for MFA for the duration of their session unless an app's authentication policy requires it. You can set both a factor lifetime and a session expiration, but be aware that <span class="uicontrol">Factor lifetime</span> is only enforced when a new session is created or if the user changes devices. <span class="uicontrol">Per session</span> is only appropriate for low-risk, low-assurance use cases and shouldn't be used with behavior conditions or risk conditions.</p>
                                 </li>
                              </ul>
                              <p MadCap:conditions="Primary.do-not-publish">If a secondary factor isn't required, refer to <MadCap:xref href="../password-optional/password-optional-disabled.htm">Set up passwordless sign-in experience</MadCap:xref>.</p>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body1">
                              <p>
                                 <span class="uicontrol">Users will be prompted for MFA</span>
                              </p>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body1">
                              <p>This option appears when you select <span class="uicontrol">Required</span> for the <span class="uicontrol">Multifactor authentication (MFA) is</span> option. If users are required to use multifactor authentication, indicate when they are prompted to use it:</p>
                              <ul>
                                 <li>
                                    <span class="uicontrol">At every sign in</span>: Users are challenged for multifactor authentication every time they sign in to Okta. This option is suitable for use with behavior conditions, which detect high-risk sign-in events. </li>
                                 <li>
                                    <span class="uicontrol">When signing in with a new device cookie</span>: Users are challenged for multifactor authentication whenever they attempt to sign in with a new device, or if the cookie has been removed from their existing device. Because it allows users to bypass MFA if they appear to be signing in from the same device (based on a browser cookie), it's only appropriate for low-risk, low-assurance use cases. It shouldn't be used with behavior conditions.</li>
                                 <li>
                                    <span class="uicontrol">After MFA lifetime expires for the device cookie</span>: Users are challenged for multifactor authentication when they attempt to sign in after the MFA lifetime period has expired. You can set both MFA lifetime and a session lifetime, but be aware that <span class="uicontrol">MFA lifetime</span> is only enforced when a new session is created or if the user changes devices.</li>
                                 <ul>
                                    <li>
                                       <span class="uicontrol">MFA lifetime</span>: This option appears when you select <span class="uicontrol">After MFA lifetime expires for the device cookie</span>. Type a numerical value in the field on the right, then select a value from the dropdown list (<span class="uicontrol">Days</span>, <span class="uicontrol">Hours</span>, <span class="uicontrol">Minutes</span>). </li>
                                 </ul>
                              </ul>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body2">
                              <p>
                                 <span class="uicontrol">Max Okta session lifetime</span>
                              </p>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body2">
                              <p>Configure an Okta session lifetime:</p>
                              <ul>
                                 <li>
                                    <p>
                                       <span class="uicontrol">No time limit</span>: If you select this option, there is no time limit applied to Okta sessions, but user sessions will still expire when the idle time is reached.</p>
                                 </li>
                                 <li>
                                    <p>
                                       <span class="uicontrol">Set time limit</span>: Set a time limit to Okta session lifetimes. Type a numerical value in the field on the right, then select a value from the dropdown list (<span class="uicontrol">Days</span>, <span class="uicontrol">Hours</span>, <span class="uicontrol">Minutes</span>).</p>
                                 </li>
                              </ul>
                              <p>
                                 <span class="uicontrol">Max Okta session lifetime</span> is only appropriate for low-risk, low-assurance use cases and shouldn't be used with behavior conditions or risk conditions.</p>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyF-Column1-Body1">
                              <p>
                                 <span class="uicontrol">Expire session after user has been idle on Okta for</span>
                              </p>
                           </td>
                           <td class="TableStyle-standard-BodyD-Column1-Body1">
                              <p>Configure the amount of idle time that passes before Okta sessions are automatically expired, regardless of the maximum Okta session lifetime:</p>
                              <ul>
                                 <li>
                                    <p>Type a numerical value in the field on the right, then select a value from the dropdown list (<span class="uicontrol">Days</span>, <span class="uicontrol">Hours</span>, <span class="uicontrol">Minutes</span>). </p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                           <td class="TableStyle-standard-BodyC-Column1-Body2">
                              <p>
                                 <span class="uicontrol">Persist session cookies across browser sessions</span>
                              </p>
                           </td>
                           <td class="TableStyle-standard-BodyA-Column1-Body2">
                              <p>This option appears if you set the <code>usePersistentCookie</code> option in the <MadCap:variable name="okta-variables.ProductName"/> API. See <a href="https://developer.okta.com/docs/guides/shared-sso-android-ios/ios/session-and-persistent-sso/">Session and persistent Single Sign-On</a>.</p>
                              <p>Enable or disable the persistence of session cookies across browser sessions. Select an option from the dropdown list:</p>
                              <ul>
                                 <li>
                                    <p>
                                       <span class="uicontrol">Enable</span>: Allow session cookies to persist across browser sessions if users wish to do so. Users must select <span class="uicontrol">Keep me signed in</span> on the <span class="wintitle">Sign-In Widget</span> to enable this functionality.</p>
                                 </li>
                                 <li>
                                    <p>
                                       <span class="uicontrol">Disable</span>: Don't allow session cookies to persist across browser sessions.</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </dt>
            </dl>
         </li>
         <li>
                Click <span class="uicontrol">Create Rule</span>.
            </li>
      </ol>
      <h2>
         <a name="Keepmesignedin"/>Keep me <MadCap:annotation MadCap:createDate="2021-06-23T11:54:37.6384071-06:00"
                            MadCap:creator="Mark Cowan"
                            MadCap:initials="MEC"
                            MadCap:comment="remove live-only content and review-only condition for Tuscany release."
                            MadCap:editor="Mark Cowan"
                            MadCap:editDate="2021-06-23T11:55:09.4368480-06:00">signed</MadCap:annotation> in</h2>
      <p>
         <MadCap:variable name="okta-variables.ProductName"/> allows admins to create global session policies that can minimize login friction for the user. </p>
      <p>Admins can allow the use of Persistent Cookies, which maintains the user's <MadCap:variable name="okta-variables.ProductName"/> session cookie on the device even after the browser session is quit. Admins can also specify how often a user is prompted for a second factor when signing in to <MadCap:variable name="okta-variables.ProductName"/>. End users can opt in to this functionality by selecting <span class="uicontrol">Keep me signed in</span> on the sign-in widget; this check box retains the end user's identifier and authenticator verification information on their device for the amount of time designated by the global session policy. </p>
      <p>Authenticator verifications are cleared for end users when they sign out or when their session expires.  Users who select the <span class="uicontrol">Keep me signed in</span> check box are still required to pass MFA at least once on their current device.</p>
      <p MadCap:conditions="Primary.do-not-publish">OKTA-355862 - OIE</p>
      <h3>About persistent cookies</h3>
      <p>When a persistent cookie is set for a global session policy rule, the <span class="uicontrol">Keep me signed in</span> functionality persists the session cookie in the browser so the user stays signed in after the browser closes.</p>
      <div class="noteOkta">
         <img src="../../../Resources/Images/assets/Icons/Notes/Help.png"
              class="noteImgFloat"
              title="Note"
              alt="Note"/>
         <p class="noteContent">
            <MadCap:variable name="okta-feature-names.Okta sign-on policy"/> persistent cookies can only be configured by setting the <code>usePersistentCookie</code> option in the <MadCap:variable name="okta-variables.ProductName"/> API. See <a href="https://developer.okta.com/docs/guides/shared-sso-android-ios/ios/session-and-persistent-sso/">Session and persistent Single Sign-On</a>.</p>
      </div>
      <p>When the <code>usePersistentCookie</code> is configured:</p>
      <ul>
         <li>
                The API sets a cookie that lasts across browser sessions. If a user quits their browser and reopens the browser, the browser session is persisted unless the user has signed out.
            </li>
      </ul>
      <ul>
         <li>
                The persistent cookie is valid until the session expires according to settings in the global session policy.
            </li>
         <li>
                Persistent cookies are never set for <MadCap:variable name="okta-variables.ProductName"/> admins.
            </li>
      </ul>
      <h2>Notes about global session policy rules</h2>
      <ul>
         <li>
                The global session policy controls how long an overall session is valid, but re-authentication frequency is controlled by <MadCap:variable name="okta-feature-names.app sign-on policy"/> rules.
            </li>
         <li>
                An end user's session expires according to the  setting in the global session policy. At this point, end users must re-authenticate, regardless of whether they selected the <span class="uicontrol">Keep me signed in</span> option when signing in.
            </li>
         <li>When the <span class="uicontrol">AND Authenticates via</span> condition is set to <span class="uicontrol">LDAP</span>, the <code>AND</code> <span class="uicontrol">Establish user session with</span> selection has no effect.  LDAP interface bind requests may still require a username and password with MFA information. See <MadCap:xref href="../../Directory/LDAP-interface-MFA.htm">Use multifactor authentication with the LDAP Interface</MadCap:xref>.</li>
      </ul>
      <h2>Related topics</h2>
      <p>
         <MadCap:xref href="about-okta-sign-on-policies.htm">[%=okta-feature-names.Okta sign-on policies%]</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="about-app-sign-on-policies.htm">[%=okta-feature-names.App sign-on policies%]</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="about-profile-enrollment-policies.htm">Profile Enrollment policy</MadCap:xref>
      </p>
   </body>
</html>
