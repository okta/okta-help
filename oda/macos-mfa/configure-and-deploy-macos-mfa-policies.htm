<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Kimli Welsh">
    <head>
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Configure and deploy <MadCap:variable name="okta-feature-names.Desktop MFA" /> policies for macOS</h1>
        <MadCap:snippetBlock src="../../../Resources/Snippets/lea-banner.flsnp" />
        <p>Set up <MadCap:variable name="okta-feature-names.Desktop MFA" /> for macOS and create managed profiles to enable the MFA workflow on your macOS computers. Use any device management solution that supports deploying macOS installer packages and configuration profiles. These instructions assume the use of <MadCap:variable name="3rd Party Integrations.Jamf Pro" /> for device management.</p>
        <p>When deploying the <MadCap:variable name="okta-feature-names.Desktop MFA" /> MDM profiles, ensure they've been successfully pushed to devices before deploying the macOS <MadCap:variable name="okta-feature-names.Okta Verify" /> package. If the MDM profile doesn't exist on the user's device when the package installer runs, <MadCap:variable name="okta-feature-names.Desktop MFA" /> isn't installed.</p>
        <h2>Tasks</h2>
        <ul>
            <li>
                <p>
                    <MadCap:xref href="#macMFAtask1">Upload the [%=okta-feature-names. Desktop MFA%] for macOS package to your MDM</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="#macMFAtask2">Configure the [%=okta-feature-names.Desktop MFA%] for macOS installation process</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="#macMFAtask3">Add [%=okta-feature-names.Desktop MFA%] policies by plist</MadCap:xref>
                </p>
            </li>
        </ul>
        <h2><a name="macMFAtask1"></a>Upload the <MadCap:variable name="okta-feature-names.Okta Verify" />for macOS package to your MDM</h2>
        <p>Upload the <MadCap:variable name="okta-feature-names.Okta Verify" /> for macOS package you downloaded from the <MadCap:variable name="okta-variables.ProductName" /> <MadCap:variable name="okta-feature-names.Administrator dashboard" /> to your MDM. In <MadCap:variable name="3rd Party Integrations.Jamf Pro" />, go to <span class="menucascade"><span class="uicontrol">Settings</span> <span class="uicontrol">Computer management</span> <span class="uicontrol">Packages</span></span>. Click <span class="uicontrol">+&#160;New</span> to configure the package details. </p>
        <h2><a name="macMFAtask2"></a>Configure the <MadCap:variable name="okta-feature-names.Desktop MFA" /> for macOS installation process</h2>
        <ol>
            <li>
                <p>In Jamf, click <span class="menucascade"><span class="uicontrol">Computers</span> <span class="uicontrol">Policies</span></span> and click <span class="uicontrol">+&#160;New</span>.</p>
            </li>
            <li>
                <p>Add a <span class="wintitle">Display&#160;Name</span> and select <span class="uicontrol">Login</span> for the policy <span class="wintitle">Trigger</span>.</p>
            </li>
            <li>
                <p>Next, click <span class="uicontrol">Packages</span>, and then click <span class="uicontrol">Configure</span>. Locate the <MadCap:variable name="okta-feature-names.Okta Verify" /> package that you uploaded in the previous step and click the <span class="uicontrol">Add</span> button next to the package.</p>
            </li>
            <li>
                <p>Configure the&#160;<span class="uicontrol">Distribution point</span>.</p>
            </li>
            <li>
                <p>Using the dropdown, select <span class="uicontrol">Install</span> as the <span class="uicontrol">Action</span>.</p>
            </li>
            <li>
                <MadCap:snippetBlock src="../../../Resources/Snippets/task steps/Click_Save.flsnp" />
            </li>
        </ol>
        <p>Ensure that the MDM profile has been successfully deployed to end user devices before deploying the macOS&#160;<MadCap:variable name="okta-feature-names.Okta Verify" /> package.</p>
        <h2><a name="macMFAtask3"></a>Add <MadCap:variable name="okta-feature-names.Desktop MFA" /> policies by plist</h2>
        <ol>
            <li>
                <p>In Jamf, click <span class="uicontrol">Configuration Profiles</span> and then click <span class="uicontrol">+&#160;New</span>.</p>
            </li>
            <li>
                <p>Enter a name for the profile.</p>
            </li>
            <li>
                <p>Click <span class="uicontrol">Application &amp; Custom&#160;Settings</span> to configure the payload.&#160;Click <span class="uicontrol">Upload</span>.</p>
            </li>
            <li>
                <p>Click <span class="uicontrol">+&#160;Add</span>.</p>
            </li>
            <li>
                <p>Enter <span class="code">com.okta.deviceaccess.servicedaemon</span> as the&#160;Preference Domain.</p>
            </li>
            <li>
                <p>Add the values for your organization in a <span class="code">plist</span> format. Use the table below the <span class="code">plist</span> example to determine the appropriate parameters for your org. </p>
            </li>
        </ol>
        <MadCap:codeSnippet>
            <MadCap:codeSnippetCopyButton />
            <MadCap:codeSnippetBody MadCap:useLineNumbers="True" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
&lt;key&gt;DMFAClientID&lt;/key&gt;
&lt;string&gt;add-your-client-ID-here&lt;/string&gt;
&lt;key&gt;DMFAClientSecret&lt;/key&gt;
&lt;string&gt;add-your-client-secret-here&lt;/string&gt;
&lt;key&gt;DMFAOrgURL&lt;/key&gt;
&lt;string&gt;add-your-org-URL-here&lt;/string&gt;
&lt;key&gt;LoginPeriodWithOfflineFactor&lt;/key&gt;
&lt;real&gt;24&lt;/real&gt;
&lt;key&gt;LoginPeriodWithoutEnrolledFactor&lt;/key&gt;
&lt;real&gt;48&lt;/real&gt;
&lt;key&gt;AdminEmail&lt;/key&gt;
&lt;string&gt;admin@yourorg.com&lt;/string&gt;
&lt;key&gt;AdminPhone&lt;/key&gt;
&lt;string&gt;111-222-3333&lt;/string&gt;
&lt;key&gt;MFARequiredList&lt;/key&gt;
	&lt;array&gt;
	&lt;string&gt;*&lt;/string&gt;
	&lt;/array&gt;
&lt;/dict&gt;
&lt;/plist&gt;</MadCap:codeSnippetBody>
        </MadCap:codeSnippet>
        <table style="width: 100%;border-left-style: solid;border-left-width: 1px;border-left-color: #c0c0c0;border-right-style: solid;border-right-width: 1px;border-right-color: #c0c0c0;border-top-style: solid;border-top-width: 1px;border-top-color: #c0c0c0;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #c0c0c0;margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/TableStyles/standard.css');" class="TableStyle-standard" cellspacing="0">
            <col class="TableStyle-standard-Column-Column1" />
            <col class="TableStyle-standard-Column-Column1" />
            <col class="TableStyle-standard-Column-Column1" style="width: -15px;" />
            <tbody>
                <tr class="TableStyle-standard-Body-Body1">
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Value name</td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Description</td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">Default value</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">LoginPeriodWithoutEnrolledFactor</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">Sets a grace period, in hours, that a user can sign in with only a password and without enrolling any factors.
Once this grace period has passed, the user must link their account and enroll an offline authentication factor to access the computer.</td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2">48 hours</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">LoginPeriodWithOfflineFactor</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">If this is set to 0, a user can’t log in with offline factors. 

If <span class="code">LoginPeriodWithoutEnrolledFactor</span> is greater than 0, users are required to sign in with an online factor every <span class="code">X</span> hours. </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">24 hours</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">MFANotRequiredList</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">Users listed in <span class="code">MFANotRequiredList</span> won't have <MadCap:variable name="okta-feature-names.Desktop MFA" /> enforced. This list takes priority over <span class="code">MFARequiredList</span>. Accounts listed here are case sensitive.</td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2">Empty</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">MFARequiredList</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Some users who have <MadCap:variable name="okta-feature-names.Desktop MFA" /> installed may not be required to use MFA. For example, if local user “john-smith” is named in <span class="code">MFARequiredList</span>, they must use MFA. 

If a user isn't on this list and <MadCap:variable name="okta-feature-names.Desktop MFA" /> is installed, the user is only prompted for a password.

If a user is on this list and <MadCap:variable name="okta-feature-names.Desktop MFA" /> is installed, the user is prompted to use MFA. Accounts listed here are case sensitive.</td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1"><span class="code">*</span> 

MFA applies to all users</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">AdminEmail</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">Enter an email address for end users to get support. </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2">Empty</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyC-Column1-Body1"><span class="code">AdminPhone</span>
                    </td>
                    <td class="TableStyle-standard-BodyC-Column1-Body1">Add a phone number for end users to get immediate support.</td>
                    <td class="TableStyle-standard-BodyA-Column1-Body1">Empty</td>
                </tr>
            </tbody>
        </table>
        <h3>Next steps</h3>
        <p>
            <MadCap:xref href="troubleshoot-macos-mfa.htm">Troubleshoot [%=okta-feature-names.Desktop MFA%] for macOS</MadCap:xref>
        </p>
        <p>Users: <a href="https://help.okta.com/okta_help.htm?type=eu&amp;id=csh-oda-mac-mfa" target="_blank">Set up a device access code for macOS</a></p>
        <p>&#160;</p>
    </body>
</html>