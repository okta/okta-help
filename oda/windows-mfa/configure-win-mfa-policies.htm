<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Kimli Welsh">
    <head>
        <link href="../../../Resources/TableStyles/standard.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1><a name="mfa-task-3"></a>Configure <MadCap:variable name="okta-feature-names.Desktop MFA" /> policies</h1>
        <p>Policies that define how <MadCap:variable name="okta-feature-names.Desktop MFA" /> works are configured on the Windows endpoint registry keys. </p>
        <p style="font-weight: normal;">Create a PowerShell script and use your MDM solution to deploy the registry keys to your endpoints. For details see <a href="https://learn.microsoft.com/en-us/mem/intune/apps/intune-management-extension" target="_blank">Use PowerShell scripts on Windows 10/11 devices in Intune</a> in the Microsoft documentation. </p>
        <p style="font-weight: normal;">The registry key is stored at <span class="filepath">HKLM\Software\Policies\Okta\Okta Device Access</span>.</p>
        <table style="width: 100%;border-left-style: solid;border-left-width: 1px;border-left-color: #c0c0c0;border-right-style: solid;border-right-width: 1px;border-right-color: #c0c0c0;border-top-style: solid;border-top-width: 1px;border-top-color: #c0c0c0;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #c0c0c0;mc-table-style: url('../../../Resources/TableStyles/standard.css');margin-left: 0;margin-right: auto;" class="TableStyle-standard" cellspacing="0">
            <col class="TableStyle-standard-Column-Column1" />
            <col class="TableStyle-standard-Column-Column1" />
            <col class="TableStyle-standard-Column-Column1" />
            <col class="TableStyle-standard-Column-Column1" style="width: -15px;" />
            <tbody>
                <tr class="TableStyle-standard-Body-Body1">
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Value name</td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Description</td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Values</td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">Default value</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">MfaRequiredList</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">List of users or Active Directory groups that must authenticate with MFA in addition to a password. Users who aren't in this list (including local users) don't have to authenticate with MFA. If the list is empty, users don't have to use MFA to sign in to Windows.<p>The username format to specify individual users is <span class="userinput">username@domain.com</span>. For groups, specify only the group name. </p><p>Users must sign in to Windows at least one time when the computer is online and connected to the organization's network (directly or by VPN). This enables users' Active Directory group membership to be resolved.</p></td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">REG_MULTI_SZ</span>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2"><span class="code">*</span> MFA applies to all users</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1">
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">MaxLoginsWithoutEnrolledFactors</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Defines how many times  users can sign in to Windows without an MFA method. This policy allows new users to postpone setting up MFA methods for the set number of times.<p>If a user exceeds the sign-in attempts limit, access is denied.</p></td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">REG_DWORD</span>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">50</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">MaxLoginsWithOfflineFactor</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">Defines how many times users can sign in to Windows with offline MFA methods (without internet access). This policy also applies when computers are online and the user authenticates with offline MFA methods.<p>If a user exceeds the sign-in attempts limit, access is denied. The user is prompted to connect to the internet to authenticate with an online sign-in method instead.</p></td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">REG_DWORD</span>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2">50</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">MFAGracePeriodInMinutes</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">Defines the length of a grace period (in minutes)&#160;that a user has without needing to use MFA after locking the computer. If <span class="code">MFAGracePeriodInMinutes</span> is set to <span class="code">0</span>, the user is prompted to verify their identity using&#160;MFA at every log in.<p>The grace period is only applicable when locking the computer. Switching user accounts or restarting the computer prompts the user to verify their identity using MFA.</p></td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">
                        <p><span class="code">REG_DWORD</span>
                        </p>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">60 </td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">AdminContactInfo</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">Configurable string to allow end users to contact admins if they're locked out of their computer. This string has no default value.<p>Example: <span class="code">Contact your Help Desk at help@org.com or call 1-800-xxx-xxxx</span>.</p></td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">REG_SZ</span>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2">Empty</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">ExcludePasswordCredProvider</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">The standard Windows password credential provider is disabled by default. To show the Windows credential provider, set this value to <span class="code">0</span>. The Windows password credential provider is restored for end users.</td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">REG_DWORD</span>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">Empty</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="">
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">CredProvidersToExclude</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2">Any custom credential provider can be filtered out by specifying the provider GUID, for example, <span class="code">{60b78e88-ead8-445c-9cfd-0b87f74ea6cd}</span>. The credential provider is hidden from end users when filtered out by this key.<p>Note that the Okta<MadCap:variable name="okta-feature-names.Desktop MFA" /> credential provider can't be hidden with this key.</p></td>
                    <td class="TableStyle-standard-BodyF-Column1-Body2"><span class="code">REG_MULTI_SZ</span>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body2">Empty</td>
                </tr>
                <tr class="TableStyle-standard-Body-Body1" MadCap:conditions="Primary.do-not-publish">
                    <td class="TableStyle-standard-BodyF-Column1-Body1"><span class="code">DontDisplayLastUsername</span>
                    </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">If this is enabled, then the full name of the last user to successfully sign in isn't displayed. </td>
                    <td class="TableStyle-standard-BodyF-Column1-Body1">
                        <p><span class="code">REG_DWORD</span>
                        </p>
                    </td>
                    <td class="TableStyle-standard-BodyD-Column1-Body1">
                        <p>Empty</p>
                    </td>
                </tr>
                <tr class="TableStyle-standard-Body-Body2" MadCap:conditions="Primary.do-not-publish">
                    <td class="TableStyle-standard-BodyC-Column1-Body2">
                        <p><span class="code">Stuck_User_Threshold</span>
                        </p>
                    </td>
                    <td class="TableStyle-standard-BodyC-Column1-Body2">
                        <p>Defines the number of times that a user can fail an authentication attempt before the <span class="code">LockOutMessage </span>is displayed. </p>
                    </td>
                    <td class="TableStyle-standard-BodyC-Column1-Body2"><span class="code">REG_DWORD</span>
                    </td>
                    <td class="TableStyle-standard-BodyA-Column1-Body2">
                        <p>3</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="noteOkta">
            <p class="noteContent">Running the Okta Verify installer a second time with command-line parameters doesn't change the registry key parameters. To change Okta Verify parameters, use PowerShell to update key values.
			</p>
        </div>
        <h3>Related topics</h3>
        <p>
            <MadCap:xref href="troubleshoot-win-mfa.htm">Troubleshoot Desktop MFA for Windows </MadCap:xref>
        </p>
    </body>
</html>