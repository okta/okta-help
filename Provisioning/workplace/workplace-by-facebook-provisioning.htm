<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Jeanette Smith">
   <head>
      <link href="../../../Resources/TableStyles/standard.css"
            rel="stylesheet"
            MadCap:stylesheetType="table"/>
      <title>Workplace by Facebook | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>
         <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/>
      </h1>
      <p>This guide provides the steps required to configure provisioning for <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/>.</p>
      <h2>
         <a name="features"/>Features</h2>
      <ul>
         <li>Import new users</li>
         <li>Import profile updates</li>
         <li>Import user schema</li>
         <li>Push new users</li>
         <li>Push profile updates</li>
         <li>Push password updates</li>
         <li>Push user deactivation</li>
         <li>Push group</li>
      </ul>
      <h2>
         <a name="REQUIREM"/>Requirements</h2>
      <p>To enable provisioning features, you need to first obtain an Organization ID from Facebook.</p>
      <p>After you receive your Organization ID, you can create and configure a <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/> application.</p>
      <h2>
         <a name="steps"/>Configuration</h2>
      <ol>
         <li>
            <MadCap:snippetText src="../../../Resources/Snippets/task steps/Applications_Applications.flsnp"/>
         </li>
         <li>Click <span class="uicontrol">Add Application</span>.</li>
         <li>Search for <span class="userinput">
               <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/>
            </span>, and then click <span class="uicontrol">Add</span>.</li>
         <li>Under <span class="uicontrol">General Settings</span>, enter an <span class="uicontrol">Application label</span>, your <span class="uicontrol">SubDomain</span>, and <span class="uicontrol">Organization ID</span> (see <MadCap:xref href="#REQUIREM">Requirements</MadCap:xref>) values, then click <span class="uicontrol">Done</span>.		</li>
         <li>Go to the <span class="uicontrol">Provisioning</span> tab, then click <span class="uicontrol">Configure API Integration</span>.			</li>
         <li>Check <span class="uicontrol">Enable API integration</span>, then click <span class="uicontrol">Authenticate with Workplace by Facebook</span>.		</li>
         <li>A new window with your Workplace organization opens. You may be required to enter your Facebook administrator credentials to allow <MadCap:variable name="okta-variables.ProductName"/> to use the API on your behalf. To do this, click <span class="uicontrol">Add to Workplace</span>. Select <span class="uicontrol">All groups</span> for the <span class="uicontrol">Add Okta Identity to groups</span> option.			</li>
         <li>After a series of redirects, your new application is configured. Click <span class="uicontrol">Save</span> and close this window with your Facebook org settings.
			</li>
         <li>When a message appears stating that the <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/> was verified successfully, click <span class="uicontrol">Save</span>.			</li>
         <li>Select <span class="uicontrol">To App</span> in the left panel, then select the provisioning features you want to enable, then click <span class="uicontrol">Save</span>:
			</li>
      </ol>
      <h2>
         <a name="schema"/>Schema discovery</h2>
      <p>
         <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/> supports User's Schema Discovery, so that you can add extra attributes to a user's profile. To do that in <MadCap:variable name="okta-variables.ProductName"/>:</p>
      <ol>
         <li>
            <MadCap:snippetBlock src="../../../Resources/Snippets/task steps/Directory_ProfileEditor.flsnp"/>
         </li>
         <li>Select the <span class="uicontrol">Apps</span> section in the left pane, then find your app in the list.</li>
         <li>Check the list of the attributes. If you don't find what you need, click <span class="uicontrol">Add Attribute</span> to display a list of extended attributes.</li>
         <li>Select the attributes that you want to add, and then click <span class="uicontrol">Save</span>.</li>
         <li>You're now able to import and push user attribute values from or to Facebook.</li>
      </ol>
      <p>Location attribute:
        </p>
      <p>By default, when creating or updating a Facebook user, <MadCap:variable name="okta-variables.ProductName"/> populates the user <span class="uicontrol">Location</span> with comma-separated address properties (street, city, state, and so on). If this behavior doesn't fit your needs, you can add a <span class="uicontrol">Location</span> field to AppUser through Schema Discovery and map it, similar to the following example:</p>
      <ol>
         <li>Click <span class="uicontrol">Refresh Attribute List</span>.</li>
         <li>Find the <span class="uicontrol">Location</span> field in the list of attributes.</li>
         <li>Add it to the AppUser profile.</li>
         <li>Set up mapping for the Location field from <MadCap:variable name="okta-variables.ProductName"/> to <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/>.<p>For example: <span class="varname">user.city &gt; location</span></p>
         </li>
      </ol>
      <h2>
         <a name="limitations"/>Limitations</h2>
      <p>The Workplace Facebook connector pulls the manager/employee relationship from a single AD domain. If you use provisioning with <MadCap:variable name="okta-variables.ProductName"/> into Facebook and pull user data from multiple AD domains, <MadCap:variable name="okta-variables.ProductName"/> can't provision users since these relationships can't be pulled across multiple domains. </p>
      <h2>
         <a name="trouble"/>Troubleshooting</h2>
      <h3>Set the manager attribute</h3>
      <p>Configure mapping for the manager attribute according to the following table (See <a href="https://developer.okta.com/docs/reference/okta-expression-language/">Okta Expression Language</a> for more details):</p>
      <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/standard.css');"
             class="TableStyle-standard"
             cellspacing="0">
         <col class="TableStyle-standard-Column-Column1" style="width: 713px;"/>
         <col class="TableStyle-standard-Column-Column1"/>
         <thead>
            <tr class="TableStyle-standard-Head-Header1">
               <th class="TableStyle-standard-HeadF-Column1-Header1">Scenario</th>
               <th class="TableStyle-standard-HeadD-Column1-Header1">Manager attribute mapping</th>
            </tr>
         </thead>
         <tbody>
            <tr class="TableStyle-standard-Body-Body1">
               <td class="TableStyle-standard-BodyF-Column1-Body1">Don't push the manager to <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/>
               </td>
               <td class="TableStyle-standard-BodyD-Column1-Body1">empty</td>
            </tr>
            <tr class="TableStyle-standard-Body-Body2">
               <td class="TableStyle-standard-BodyF-Column1-Body2">Push the manager only for users from <MadCap:variable name="okta-variables.ProductName"/>
               </td>
               <td class="TableStyle-standard-BodyD-Column1-Body2">user.manager</td>
            </tr>
            <tr class="TableStyle-standard-Body-Body1">
               <td class="TableStyle-standard-BodyF-Column1-Body1">Push the manager for users imported from AD</td>
               <td class="TableStyle-standard-BodyD-Column1-Body1">getManagerAppUser("active_directory", "facebook_at_work").userName</td>
            </tr>
            <tr class="TableStyle-standard-Body-Body2">
               <td class="TableStyle-standard-BodyC-Column1-Body2">Push the manager for user from <MadCap:variable name="okta-variables.ProductName"/> and from AD</td>
               <td class="TableStyle-standard-BodyA-Column1-Body2">hasDirectoryUser() ? getManagerAppUser("active_directory", "facebook_at_work").userName : user.manager</td>
            </tr>
         </tbody>
      </table>
      <h3>Adding a confirmed member leads to push group error</h3>
      <p>Error: The user isn't a member of the parent group.</p>
      <p>
         <img src="../../../Resources/Images/facebook11.png" class="thumbnail"/>
      </p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Admin panel</span>
               <span class="uicontrol">People</span>
            </span> in your <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/> account.</li>
         <li>Check the Account Status for users in the group. No users should be in a Deactivated state.</li>
      </ol>
      <h3>Group created but no members listed in the admin panel</h3>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Admin panel</span>
               <span class="uicontrol">People</span>
            </span> in your <MadCap:variable name="3rd Party Integrations.WorkplaceByFacebook"/> account.</li>
         <li>
            <p>Locate your group and click <span class="uicontrol">Join as Admin</span>.</p>
            <p>
               <img src="../../../Resources/Images/facebook12.png" class="thumbnail"/>
            </p>
         </li>
      </ol>
   </body>
</html>
