<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="Primary.do-not-publish"
      MadCap:fileTags="Tags/okta-authors.Nikita Apraj">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Walk through the Okta provisioning guide to manage the user lifecycle between Okta and existing SSO-enabled Okta-managed applications."/>
   </head>
   <body>
      <h1>Provision an existing SSO-enabled app</h1>
      <p>To ensure your understanding of  Okta Provisioning, exercises are provided to guide you through the Okta Provisioning workflow for Salesforce – SSO, based on common, best-practice procedures. It starts with creating a duplicate instance of Salesforce—Salesforce – PROV. Next, is configuring Salesforce – PROV for provisioning and then giving users access to it using the groups from Salesforce – SSO. The workflow also includes specifying the auto-update of attributes and auto-deactivation of users in Salesforce – PROV.</p>
      <h2>
         <a name="Before"/>Before you begin</h2>
      <h3>
         <a name="Ensure"/>Ensure Salesforce supports provisioning</h3>
      <p>Salesforce being a popular CRM app, it's already one of about 200 apps in the Okta Integration Network (OIN) having provisioning capabilities. But as an exercise, let's go through the quick process to see if Salesforce is OIN supported.</p>
      <p>Complete <MadCap:xref href="proc-give-it-try.htm#Ensure2">Ensure Salesforce is OIN supported</MadCap:xref>.</p>
      <h3>
         <a name="Ensure2"/>Ensure the SSO-app users are in Okta</h3>
      <p>
         <span class="uicontrol">About</span>
      </p>
      <p>Having at least one user in Okta is necessary to perform the exercises in this guide. If you do not have a user in Okta, this procedure provides a way to add users.</p>
      <p>
         <span class="uicontrol">Procedure</span>
      </p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Locate Salesforce – PROV and then click it.</li>
         <li>Click the <span class="uicontrol">Provisioning</span> tab.</li>
         <li>
            <p>Click <span class="uicontrol">To Okta</span>.</p>
            <p>This is the option to import users into Okta.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Edit</span>.</p>
            <p>For the <span class="uicontrol">Schedule Imports</span> field, you can specify when imports are done. But for this exercise, accept the <span class="uicontrol">never</span> value for a one-time import.</p>
         </li>
         <li>
            <p>If the email address is not what you want as the Okta username, select <span class="uicontrol">Custom</span> in the <span class="uicontrol">Okta username format</span> drop-down to specify something different.</p>
         </li>
         <li>
            <p>From the <span class="uicontrol">Imported user is an exact match to Okta user if</span> radio buttons and <span class="uicontrol">Allow partial matches</span> check box, specify any desired matching rules.</p>
            <p>These match rules determine how Okta performs a match between an imported user and one that already exists in Okta.</p>
         </li>
         <li>
            <p>From the <span class="uicontrol">Confirm match users</span> and <span class="uicontrol">Confirm new users</span> areas, specify any desired auto-confirm rules.</p>
         </li>
         <li>
            <p>Click the <span class="uicontrol">Import</span> tab.</p>
         </li>
      </ol>
      <h2>
         <a name="Create"/>1. Create and set up a duplicate instance of Salesforce</h2>
      <p>
         <span class="uicontrol">About</span>
      </p>
      <p>An SSO-enabled app can be enabled for Okta Provisioning without breaking the SSO functionality. However, if you would rather not make any changes to your SSO-enabled app, you can create another instance of the app where Okta Provisioning is enabled. The SSO-enabled app and the provision-enabled app are "linked" through the use of common user folders. This affords provisioning functions to the SSO-enabled app.</p>
      <p>In this procedure, Salesforce – SSO represents the SSO-enabled app and Salesforce – PROV represents the duplicated instance of Salesforce </p>
      <p>Salesforce – PROV needs to adopt the settings from Salesforce – SSO. Specifically, it's important that Salesforce – PROV is connected to the same Salesforce.com tenant as Salesforce – SSO, and that the username mappings are identical.</p>
      <p>
         <span class="uicontrol">Procedure</span>
      </p>
      <ol>
         <li>Go to  <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Locate Salesforce – SSO.</li>
      </ol>
      <p>Create the Salesforce – PROV instance</p>
      <ol MadCap:continue="true">
         <li>It helps to split the screen so you see Salesforce – SSO on the left side of the screen and the new instance of Salesforce on the right side.</li>
         <li>On the right side of the screen, go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Click <span class="uicontrol">Add Applications</span>.</li>
         <li>Locate Salesforce.com (having Okta verified, SAML, and Provisioning) and then click <span class="uicontrol">Add</span>.</li>
         <li>To view the configuration settings from Salesforce – SSO, click the <span class="uicontrol">General</span> tab on the left.</li>
         <li>In the <span class="uicontrol">Application label</span> field, type "Salesforce – PROV".</li>
      </ol>
      <p>Hide the Salesforce – PROV app</p>
      <ol MadCap:continue="true">
         <li>
            <p>Click the following to hide the Salesforce – PROV app in the user's org:</p>
            <ul style="list-style-type: square;">
               <li>Do not display app icon to user</li>
               <li>Do not display app icon in Okta Mobile App</li>
            </ul>
         </li>
         <li>Deselect <span class="uicontrol">Automatically log in when user lands on login page</span> and then click <span class="uicontrol">Next</span>.</li>
      </ol>
      <p>Specify sign-on options in Salesforce – PROV</p>
      <ol MadCap:continue="true">
         <li>Click the <span class="uicontrol">Sign On</span> tab for the Salesforce – SSO app in order to view the options needed for the Salesforce – PROV app.</li>
         <li>For Salesforce – PROV, ensure that “Okta username” is specified in the <span class="uicontrol">Application username format</span> field, as it is for Salesforce – SSO.</li>
         <li>Click <span class="uicontrol">Done</span>.</li>
      </ol>
      <h2>
         <a name="2."/>2. Configure provisioning for Salesforce – PROV</h2>
      <p>Provisioning Salesforce – PROV enables you to manage the user lifecycle between Okta and Salesforce. This process involves specifying the app integration, provisioning options, and mapping user attributes in Okta to those of the integrated, third-party app.</p>
      <p>Complete <MadCap:xref href="proc-give-it-try.htm#2.">2. Configure provisioning for Salesforce</MadCap:xref> for Salesforce – PROV.</p>
      <h2>
         <a name="3."/>3. Assign groups in Salesforce – SSO to Salesforce – PROV</h2>
      <p>
         <span class="uicontrol">About</span>
      </p>
      <p>When Salesforce – PROV shares the same user group used by Salesforce – SSO, the two apps are then "linked". This affords provisioning functions to the SSO-enabled app.</p>
      <p>
         <span class="uicontrol">Procedure</span>
      </p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Locate Salesforce – PROV and then click it.</li>
         <li>
            <p>From the <span class="uicontrol">Assignments</span> tab, click <span class="menucascade">
                  <span class="uicontrol">Assign</span>
                  <span class="uicontrol">Assign to Groups</span>
               </span>.</p>
            <p>
               <img src="../../../Resources/Images/LCM-Prov/menu_assign_groups.png"/>
            </p>
         </li>
         <li>From the <span class="uicontrol">Assign Salesforce – PROV to Groups</span> dialog, locate the working group or groups associated with Salesforce – SSO.</li>
         <li>
            <p>For the group, click <span class="uicontrol">Assign</span>.</p>
         </li>
         <li>
            <p>From the <span class="uicontrol">Assign Salesforce - PROV to Groups</span> dialog, make the appropriate selection from the <span class="uicontrol">Profile</span> drop-down for each working group.</p>
            <p>
               <img src="../../../Resources/Images/LCM-Prov/drop-down-profile2.png"/>
            </p>
            <p>For other apps, you may not have to specify a profile.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Save and go back</span>.</p>
            <p>Okta returns you to the first <span class="uicontrol">Assign Salesforce.com to Groups</span> dialog where the group is listed with a disabled <span class="uicontrol">Assigned</span> button. This indicates that Salesforce – PROV is now assigned to the group.</p>
            <p>
               <img src="../../../Resources/Images/LCM-Prov/dialog-assign-groups.png"
                    style="width: 628px;height: 538px;"/>
            </p>
         </li>
         <li>For any remaining working groups, repeat steps 5 and 6.</li>
         <li>Click <span class="uicontrol">Done</span>.</li>
      </ol>
      <h2>
         <a name="4."/>4. Assign a user to Salesforce – PROV using a group</h2>
      <p>
         <span class="uicontrol">About</span>
      </p>
      <p>In the case where a single user is added to Okta, it may be best to convert this individual user assignment to a group assignment. This is done by assigning the user to Salesforce – PROV using a group from Salesforce – SSO. </p>
      <p>
         <span class="uicontrol">Prerequisite</span>
      </p>
      <ul style="list-style-type: square;">
         <li>
            <p>Assign a group to Salesforce – PROV.</p>
            <p>See <MadCap:xref href="#3.">3. Assign groups in Salesforce - SSO to Salesforce – PROV</MadCap:xref>.</p>
         </li>
      </ul>
      <p>
         <span class="uicontrol">Procedure</span>
      </p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Locate Salesforce – PROV and then click it.</li>
         <li>
            <p>From the <span class="uicontrol">Assignments</span> tab, click <span class="uicontrol">People</span> under <span class="uicontrol">Filters</span>.</p>
            <p>
               <img src="../../../Resources/Images/LCM-Prov/menu-filters-people.png"
                    style="width: 256px;height: 182px;"/>
            </p>
         </li>
         <li>Click <span class="uicontrol">Convert Assignments</span>.</li>
         <li>Select the individual user and then click <span class="uicontrol">Convert Selected</span>.</li>
         <li>
            <p>From the <span class="uicontrol">Convert Selected Users</span> dialog, click <span class="uicontrol">Convert Assignments</span>.</p>
            <p>In the <span class="uicontrol">Assignments</span> tab, the individual user is now part of a group.</p>
         </li>
      </ol>
      <h2>
         <a name="5."/>5. Configure Okta to automatically update attributes in Salesforce – PROV</h2>
      <p>
         <span class="uicontrol">About</span>
      </p>
      <p>Okta updates a user's attributes in Salesforce.com when the app is assigned. Future attribute changes made to the Okta user profile will automatically overwrite the corresponding attribute value in Salesforce.com. </p>
      <p>
         <span class="uicontrol">Procedure</span>
      </p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Locate Salesforce – PROV and click it.</li>
         <li>Click the <span class="uicontrol">Provisioning</span> tab.</li>
         <li>

                Ensure <span class="uicontrol">To App</span> is selected in order to push user information down to Salesforce.</li>
         <li>To specify provisioning options, click <span class="uicontrol">Edit</span>.</li>
         <li>For the <span class="uicontrol">Update User Attributes</span> option, click <span class="uicontrol">Enable</span> and then <span class="uicontrol">Save</span>.</li>
      </ol>
      <h2>
         <a name="6."/>6. Configure Okta to automatically deactivate users in Salesforce – PROV</h2>
      <p>
         <span class="uicontrol">About</span>
      </p>
      <p>Automatic user deactivation deactivates a user's Salesforce.com account when it is unassigned in Okta or the Okta account is deactivated. Accounts can be reactivated if the app is reassigned to a user in Okta.</p>
      <p>
         <span class="uicontrol">Procedure</span>
      </p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Applications</span>
               <span class="uicontrol">Applications</span>
            </span>.</li>
         <li>Locate Salesforce – PROV and click it.</li>
         <li>Click the <span class="uicontrol">Provisioning</span> tab.</li>
         <li>

                Ensure <span class="uicontrol">To App</span> is selected in order to push user information down to Salesforce.</li>
         <li>To specify provisioning options, click <span class="uicontrol">Edit</span>.</li>
         <li>For the <span class="uicontrol">Deactivate User</span> option, click <span class="uicontrol">Enable</span> and then <span class="uicontrol">Save</span>.</li>
      </ol>
   </body>
</html>
