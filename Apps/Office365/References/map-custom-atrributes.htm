<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:conditions="MultiProdPublish.Classic+OIE"
      MadCap:fileTags="Tags/okta-authors.Mark Cowan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <meta name="description"
            content="Map custom attributes to Office 365 from Okta to create rich end-user profiles for the Okta-managed Office 365 app."/>
   </head>
   <body>
      <h1>Map custom attributes</h1>
      <p>You can map custom attributes that are not included in the default profile. Using the <span class="code">proxyAddresses</span> attribute as an example, the following instructions explain how to map custom attributes.</p>
      <h2>Start this procedure</h2>
      <p>To map custom attributes, you need to:</p>
      <p>
         <MadCap:xref href="#1.">1. Add a custom attribute to your Okta Active Directory profile</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="#2.">2. Add the Attribute to your Office 365 App Profile</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="#3.">3. Map from Okta to Office 365</MadCap:xref>
      </p>
      <h3>
         <a name="1."/>1. Add a custom attribute to your Okta Active Directory profile</h3>
      <ol>
         <li>
            <p>In the <span class="uicontrol">Admin Console</span>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Profile Editor</span>
                  <span class="uicontrol">Directories</span>
               </span> and select the desired AD profile. </p>
            <p>
               <img src="../../../../Resources/Images/Office365/map-cust-attr-1.png"
                    id="img_new"
                    style="max-width: 50%;"/>
            </p>
         </li>
         <li>In the <span class="wintitle">Profile Editor</span>, click the <span class="uicontrol">Add Attribute</span> button.
			<p>The <span class="wintitle">Pick Schema Attributes</span> screen opens.</p>
         </li>
      </ol>
      <ol MadCap:continue="true">
         <li>
            <p>Search for, then select the <span class="code">proxyAddresses</span> attribute.</p>
            <p>
               <img src="../../../../Resources/Images/Office365/map-cust-attr-2.png"
                    id="img_new"
                    style="max-width: 50%;"/>
            </p>
         </li>
         <li>Click <span class="uicontrol">Save.</span>
         </li>
      </ol>
      <h3>
         <a name="2."/>2. Add the Attribute to your Office 365 App Profile</h3>
      <ol>
         <li>
            <p>In the <span class="wintitle">Admin Console</span>, go to <span class="menucascade">
                  <span class="uicontrol">Directory</span>
                  <span class="uicontrol">Profile Editor</span>
                  <span class="uicontrol">Apps</span>
               </span> and select the Office 365 profile.</p>
            <p>
               <img src="../../../../Resources/Images/Office365/map-cust-attr-3.png"
                    id="img_new"/>
            </p>
         </li>
         <li>In the <span class="wintitle">Profile Editor</span>, click the <span class="uicontrol">Add Attribute</span> button.
			<p>The <span class="wintitle">Pick Schema Attributes</span> screen opens.</p>
         </li>
      </ol>
      <ol MadCap:continue="true">
         <li>Search for, then select the <span class="code">ProxyAddresses</span> attribute.</li>
         <li>Click <span class="uicontrol">Save</span>.</li>
      </ol>
      <h3>
         <a name="3."/>3. Map from Okta to Office 365</h3>
      <ol>
         <li>​In the <span class="wintitle">Microsoft Office 365 Profile Editor</span>, click <span class="uicontrol">Mappings</span>.

				<p>The Microsoft Office 365 <span class="wintitle">User Profile Mappings</span> screen opens.</p>
         </li>
      </ol>
      <ol MadCap:continue="true">
         <li>Select the <span class="uicontrol">Okta to Microsoft Office 365</span> tab.</li>
         <li>Scroll down and enter the following expression for the <span class="code">proxyAddresses</span> attribute:
				<span class="userinput">&gt;hasDirectoryUser()?findDirectoryUser().proxyAddresses:null</span>
            <p>
               <img src="../../../../Resources/Images/Office365/map-cust-attr-4.png"
                    id="img_new"/>
            </p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Save Mappings</span>.</p>
         </li>
         <li>Select <span class="uicontrol">Apply updates now</span> so that the new mappings apply to all users with this profile.</li>
      </ol>
      <h2>Related topics</h2>
      <ul>
         <li>
            <p>
               <MadCap:xref href="../../../Directory/ad-agent-configure-user-profiles-attributes.htm">Work with Active Directory attributes</MadCap:xref>
            </p>
         </li>
         <li>
            <p>
               <MadCap:xref href="O365_Supported_User_Attributes.htm">Supported user profile attributes for Office 365 provisioning</MadCap:xref>
            </p>
         </li>
         <li>
            <p>
               <MadCap:xref href="provisioning-types.htm">Provisioning options for Office 365</MadCap:xref>
            </p>
         </li>
      </ul>
   </body>
</html>
