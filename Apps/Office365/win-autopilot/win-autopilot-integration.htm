<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:conditions="MultiProdPublish.OIE"
      MadCap:fileTags="Tags/okta-authors.Mark Cowan">
   <head>
      <title>[%=Heading.Level1%] | Okta</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>Integrate Okta with Windows Autopilot</h1>
      <p>This topic explains how to integrate Okta with Windows Autopilot.
</p>
      <h2>Before you begin</h2>
      <ul>
         <li>Set up Windows Autopilot. See <a href="https://docs.microsoft.com/en-us/windows/deployment/windows-autopilot/demonstrate-deployment-on-vm">Demonstrate Autopilot deployment</a> (Microsoft docs).</li>
         <li>Federate your Office 365 tenant with Okta. See<MadCap:xref href="../../Office365-Deployment/deploy-main.htm"> Typical workflow for deploying Microsoft Office 365 in Okta</MadCap:xref>. </li>
         <li>Set up MFA in Okta. See <MadCap:xref href="../../../identity-engine/authenticators/about-authenticators.htm">Multifactor Authentication</MadCap:xref>.</li>
         <li>Review <MadCap:xref href="../References/o365-sign-on-rule-options.htm">Office 365 sign-on rules options</MadCap:xref> and <MadCap:xref href="../../../identity-engine/policies/add-app-sign-on-policy-rule.htm">Add an app sign-on policy rule</MadCap:xref>.</li>
         <li>Ensure your end users are activated in both Okta and Azure AD and their Windows devices are registered.</li>
      </ul>
      <h2>Best security practices</h2>
      <p>Using Windows Autopilot with Okta may allow a device to bypass Okta Device Trust. We recommend the following best practices to minimize this possibility:</p>
      <ol>
         <li>Enable Windows Autopilot sign-on policy only for new users. You can create a separate group for new users and apply the policy to this group only.</li>
         <li>Once the new users have set up their device with Okta Device Trust, remove them from this group.</li>
      </ol>
      <h2>Start this procedure</h2>
      <p>This procedure involves the following tasks:</p>
      <ol>
         <li>
            <p>
               <MadCap:xref href="#Add">Add Okta MFA to Windows Autopilot</MadCap:xref>
            </p>
         </li>
         <li>
            <p>
               <MadCap:xref href="#Optional">Optional: Set up Windows Autopilot to work along Okta Device Trust or [%=okta-feature-names.Okta FastPass%]</MadCap:xref>
            </p>
         </li>
      </ol>
      <h3>
         <a name="Add"/>Add Okta MFA to Windows Autopilot</h3>
      <p>In the <span class="menucascade">
            <span class="uicontrol">Okta Admin Console</span>
            <span class="uicontrol">Office 365 app</span>
            <span class="uicontrol">Sign On</span>
         </span> tab, add an Autopilot sign-on policy rule.</p>
      <ol>
         <li>Go to <span class="menucascade">
               <span class="uicontrol">Sign On Policy</span>
               <span class="uicontrol">Add Rule</span>
            </span>. The <span class="wintitle">App Sign On Rule</span> window opens.</li>
         <li>In the <span class="wintitle">App Sign On Rule</span> window, name the rule. For example, "Check for Windows Autopilot."</li>
         <li>Set the appropriate <span class="uicontrol">IF</span> conditions for users and devices.</li>
         <li>
            <p>For the <span class="uicontrol">Client</span> condition, select <span class="uicontrol">One of the following clients</span> from the dropdown and then select <span class="uicontrol">Windows Autopilot</span> in the field below the dropdown.</p>
            <p>
               <p>
                  <img src="../../../../Resources/Images/Office365/OIE/wap-if-conditions.png"
                       class="thumbnail"/>
               </p>
            </p>
         </li>
         <li>For the <span class="uicontrol">Then</span> conditions, select <span class="uicontrol">Access is Allowed after successful authentication</span>.</li>
         <li>For user authentication requirements, select <span class="uicontrol">any of the 2 factor types</span> options from the dropdown.</li>
         <li>Set the appropriate factor conditions and re-authentication frequency.</li>
         <li>Save the rule.</li>
         <li>
            <p>Back in the <span class="uicontrol">Sign-on Policy</span> section, adjust the priority level for this Autopilot sign-on policy rule depending on when you want it to be executed.</p>
            <p>
               <p>
                  <img src="../../../../Resources/Images/Office365/OIE/wap-rule.png"
                       class="thumbnail"/>
               </p>
            </p>
         </li>
      </ol>
      <p>You’ve now added Okta MFA to Windows Autopilot.</p>
      <h3>
         <a name="Optional"/>Optional: Set up Windows Autopilot to work along Okta Device Trust or <MadCap:variable name="okta-feature-names.Okta FastPass"/>
      </h3>
      <p style="font-weight: bold;">If you are not using Okta Device Trust or <MadCap:variable name="okta-feature-names.Okta FastPass"/>
      </p>
      <p>You need not take any action in Okta if your org doesn't use Okta Device Trust. Windows Autopilot works out of the box with Okta as an Identity Provider. You only need to:</p>
      <ul>
         <li>Set up Windows Autopilot in your Microsoft environment, and</li>
         <li>Configure a sign-on rule for the Office 365 app in Okta to allow web browser clients on the Windows platform.</li>
      </ul>
      <p style="font-weight: bold;">If you are using Okta Device Trust or <MadCap:variable name="okta-feature-names.Okta FastPass"/>
      </p>
      <p>If you are using Okta Device Trust or <MadCap:variable name="okta-feature-names.Okta FastPass"/>, you need to create a new sign-on rule in the Office 365 app to check for Windows Autopilot with device state <span class="uicontrol">Any</span>. See Task 1 of this procedure.</p>
      <p>The Autopilot rule allows end users to securely enroll their Not Trusted devices. It checks if Windows Autopilot is available for device enrollment. If it is available, the sign-on policy uses Windows Autopilot to enroll the device and doesn't use Okta Device Trust or <MadCap:variable name="okta-feature-names.Okta FastPass"/>. If Windows Autopilot is not available for the device, it applies the Okta Device Trust or <MadCap:variable name="okta-feature-names.Okta FastPass"/> sign-on policy.</p>
      <h2>Related topics</h2>
      <p>
         <MadCap:xref href="../../../identity-engine/devices/fp/fp-main.htm">[%=okta-feature-names.Okta FastPass%]</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="../../../Provisioning/azure/azure-integration-main.htm">Azure Active Directory</MadCap:xref>
      </p>
      <p>
         <MadCap:xref href="../o365-main.htm">Office 365</MadCap:xref>
      </p>
   </body>
</html>
