<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"
      MadCap:onlyLocalStylesheets="False"
      MadCap:searchable="True"
      MadCap:fileTags="Tags/okta-authors.Nikita Apraj"
      MadCap:conditions="MultiProdPublish.Classic+OIE">
   <head>
      <title>[%=Heading.Level1%]</title>
      <link href="" rel="stylesheet" type="text/css"/>
   </head>
   <body>
      <h1>Manage secrets and keys for OIDC apps</h1>
      <p>Secrets and keys management for OIDC apps allows you to safely and efficiently manage client authentication methods. With these settings, you can do the following:</p>
      <ul>
         <li>Choose between client secret and public key / private key pair, and quickly generate them directly from the Admin Console. This eliminates the need to use APIs or third-party websites to generate public and private keys.</li>
         <li>Specify URI for public keys in the Admin Console so Okta can automatically fetch the updated public key. This eliminates the need to manually update the public key in the Admin Console when you’re rotating the key pair.</li>
         <li>Generate two client secrets simultaneously to safely rotate them without any application downtime. You can generate up to two client secrets for an app. They are listed under the Client Secrets section. From this section, you can view, copy, deactivate and delete a client secret.</li>
         <li>Switch between client secret and public key / private key authentication methods.</li>
      </ul>
      <p>You can also do these tasks using the Okta API. See <a href="https://developer.okta.com/docs/guides/client-secret-rotation-key/">Client Secret Rotation</a>.</p>
      <h2>Before you begin </h2>
      <p>Review other settings for configuring an OIDC app. See <MadCap:xref href="Apps_App_Integration_Wizard_OIDC.htm">Create OIDC app integrations using AIW</MadCap:xref>.</p>
      <h2>Start this procedure</h2>
      <p>With OAuth secrets and keys management, you can do the following tasks:</p>
      <ul>
         <li>
            <MadCap:xref href="#Generate">Generate public key / private key pair from the Admin Console</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Add">Add your public key from the Admin Console</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Add2">Add a second key pair from the Admin Console</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Automati">Automatically update public key by specifying URI</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Rotate">Rotate a client secret by creating second client secret</MadCap:xref>
         </li>
         <li>
            <MadCap:xref href="#Change">Change client authentication methods</MadCap:xref>
         </li>
      </ul>
      <h3>
         <a name="Generate"/>Generate public key / private key pair from the Admin Console</h3>
      <ol>
         <li>
            <p>Go to the <span class="menucascade">
                  <span class="uicontrol">OIDC app</span>
                  <span class="uicontrol">General tab</span>
                  <span class="uicontrol">Client Credentials</span>
                  <span class="uicontrol">Edit</span>
               </span>.</p>
         </li>
         <li>
            <p>In <span class="uicontrol">Client Authentication</span>, select <span class="uicontrol">Public Key / Private Key</span>. The <span class="uicontrol">Add Key</span> button appears.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Add Key</span>. The <span class="uicontrol">Add a Public Key</span> pop-up window opens.</p>
         </li>
         <li>
            <p>In this window, click <span class="uicontrol">Generate New Key</span>. This generates a public key and a private key.</p>
         </li>
         <li>
            <p>Copy the private key to a secure location for future reference. You can copy the private key in either JSON or PEM format. Private key is only displayed once at the time of generation. Okta doesn’t store the private key.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Done</span>. You are redirected back to the <span class="uicontrol">General</span> tab.</p>
         </li>
         <li>
            <p>On the tab, click <span class="uicontrol">Save</span>.</p>
         </li>
      </ol>
      <p>Your public key is listed on the <span class="uicontrol">General</span> tab. You can click the key to see it in the JSON format.</p>
      <h3>
         <a name="Add"/>Add your public key from the Admin Console</h3>
      <ol>
         <li>
            <p>Go to the <span class="menucascade">
                  <span class="uicontrol">OIDC app</span>
                  <span class="uicontrol">General tab</span>
                  <span class="uicontrol">Client Credentials</span>
                  <span class="uicontrol">Edit</span>
               </span>.</p>
         </li>
         <li>
            <p>In <span class="uicontrol">Client Authentication</span>, select <span class="uicontrol">Public Key / Private Key</span>. The <span class="uicontrol">Add Key</span> button appears.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Add Key</span>. The <span class="uicontrol">Add a Public Key</span> pop-up window opens.</p>
         </li>
         <li>
            <p>In this window, paste your public key in the JSON format.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Done</span>. You are redirected back to the <span class="uicontrol">General</span> tab.</p>
         </li>
         <li>
            <p>On the tab, click <span class="uicontrol">Save</span>.</p>
         </li>
      </ol>
      <p>Your public key is listed on the <span class="uicontrol">General</span> tab. You can click the key to see it in the JSON format.</p>
      <h3>
         <a name="Add2"/>Add a second key pair from the Admin Console</h3>
      <ol>
         <li>
            <p>Go to the <span class="menucascade">
                  <span class="uicontrol">OIDC app</span>
                  <span class="uicontrol">General tab</span>
                  <span class="uicontrol">Public Keys</span>
                  <span class="uicontrol">Add</span>
               </span>. The <span class="uicontrol">Add a Public Key</span> pop-up window opens.</p>
         </li>
         <li>
            <p>In this window, paste your public key in the JSON format. Or, click <span class="uicontrol">Generate New Key</span> to generate a new pair of public key and a private key. Copy the private key to a secure location for future reference. Private key is only displayed once at the time of generation. Okta doesn’t store the private key.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Save</span>.</p>
         </li>
      </ol>
      <p>A new public key is listed on the <span class="uicontrol">General</span> tab. You can click the key to see it in the JSON format.</p>
      <div>
         <h3>
            <a name="Automati"/>Automatically update public key by specifying URI</h3>
         <p>You can configure <span class="code">private_key_jwt</span> client authentication for OIDC apps by specifying the URI where you store your public keys in the Admin Console. This eliminates the need to manually update the public key in Okta every time you rotate the key pairs. Using the URI specified in the Admin Console, Okta dynamically fetches the latest public key for the app.</p>
         <ol>
            <li>
               <p>Go to the <span class="menucascade">
                     <span class="uicontrol">OIDC app</span>
                     <span class="uicontrol">General tab</span>
                     <span class="uicontrol">Client Credentials</span>
                     <span class="uicontrol">Edit</span>
                  </span>.</p>
            </li>
            <li>
               <p>In <span class="uicontrol">Client Authentication</span>, select <span class="uicontrol">Public Key / Private Key</span>.</p>
            </li>
            <li>
               <p>In <span class="menucascade">
                     <span class="uicontrol">Public Keys</span>
                     <span class="uicontrol">Configuration</span>
                  </span>, select <span class="uicontrol">Use a URL to fetch keys dynamically</span>.</p>
            </li>
            <li>
               <p>Provide the URI where your public key is stored.</p>
            </li>
            <li>
               <p>Click <span class="uicontrol">Save</span>.</p>
            </li>
         </ol>
      </div>
      <h3>
         <a name="Rotate"/>Rotate a client secret by creating second client secret</h3>
      <p>If you’re using a client secret for authentication, you can generate a second secret to use for rotation.</p>
      <ol>
         <li>
            <p>Go to the <span class="menucascade">
                  <span class="uicontrol">OIDC app</span>
                  <span class="uicontrol">General tab</span>
                  <span class="uicontrol">Client Credentials</span>
                  <span class="uicontrol">Edit</span>
               </span>.</p>
         </li>
         <li>
            <p>In <span class="uicontrol">Client Secrets</span>, click the <span class="uicontrol">Generate new secret</span> button. A new secret is generated and appears under the <span class="uicontrol">Client Secret</span> list. Both secrets are active by default.</p>
         </li>
         <li>
            <p>Click <span class="uicontrol">Save</span>.</p>
         </li>
         <li>
            <p>Use the newly generated secret to update the servers.</p>
         </li>
         <li>
            <p>Back in the <span class="uicontrol">Admin Console</span>, set the status for the old secret to <span class="uicontrol">Inactive</span>. You can also delete an inactive secret.</p>
         </li>
      </ol>
      <h3>
         <a name="Change"/>Change client authentication methods</h3>
      <p>You can switch between client secret and public key / private key.</p>
      <ul>
         <li>If you switch from public key / private key to client secret, the key pairs for the app are deleted.</li>
         <li>If you switch from client secret to public key / private key, all client secrets for the app are deleted.</li>
         <li>If you switch from saving public keys at Okta to fetching them from a URL, the public keys stored in Okta are deleted.</li>
      </ul>
   </body>
</html>
