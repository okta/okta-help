<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:onlyLocalStylesheets="False" MadCap:searchable="True" MadCap:fileTags="Tags/okta-authors.Tim Howie">
    <head><title>[%=Heading.Level1%] | Okta</title>
        <link href="" rel="stylesheet" type="text/css" />
        <meta name="description" content="Explains how admins can configure SAML and OIDC to handle SLO for their Okta integrations." />
    </head>
    <body>
        <h1>Configure Single Logout in app integrations</h1>
        <p>Single Logout (SLO) is a feature in federated authentication that allows end users to sign out of both their Okta session and a configured app with a single action.</p>
        <p>Okta supports this sign out process only when initiated by a Service Provider (SP). The SP sends the SLO request to Okta to end the Okta session.</p>
        <div class="noteOkta">
            <ul>
                <li>SWA&#160;applications don't support SLO.</li>
                <li>Not all app integrations support SLO. If the SP&#160;supports SLO in their downstream app, it's noted as a supported feature in their app configuration guide. Contact your SP&#160;directly to request that they add support for SLO.</li>
            </ul>
        </div>
        <h2>Enable SLO for SAML integrations</h2>
        <p class="earlyaccess" MadCap:conditions="MultiProdPublish.OIE">If you've enabled Early Access front-channel SLO, this configuration is different. Go to <MadCap:xref href="#front-channel-sso-saml">Enable SLO for SAML integrations (with front-channel option)</MadCap:xref>.</p>
        <p>For SAML applications, the SP must be able to send an SLO request to Okta and it must be signed.</p>
        <p>You can use the SAML Application Integration Wizard to configure SLO:</p>
        <ol>
            <li>
                <MadCap:snippetText src="../../Resources/Snippets/task steps/Applications_Applications.flsnp" />
            </li>
            <li>Click the SAML application where you want to add SLO.</li>
            <li style="font-weight: normal;">In the <span class="uicontrol">General</span> settings tab, on the <span class="uicontrol">SAML Settings</span> panel, click <span class="uicontrol">Edit</span>.</li>
            <li style="font-weight: normal;">In the SAML configuration wizard, click <span class="uicontrol">Next</span>.</li>
            <li style="font-weight: normal;">On the <span class="uicontrol">Configure SAML</span> page, click <span class="uicontrol">Show Advanced Settings</span>.</li>
            <li style="font-weight: normal;">Select <span class="uicontrol">Allow application to initiate Single Logout</span>.</li>
            <li><span class="uicontrol">Single Logout URL</span> — the URL for the SLO return. This is a URL on the service provider where Okta sends its sign out response (as a POST operation). If the SP doesn't have a specific SLO URL, the main SP URL can be used.</li>
            <li><span class="uicontrol">SP Issuer</span> — the identifier for the application. This can be an ACS URL or the SP Entity ID. This value is also included in the metadata sent in the SLO request from the SP application.</li>
            <li><span class="uicontrol">Signature Certificate</span> — Okta requires a digital signature for the SLO request. You need to upload a copy of the signature certificate or CA that the SP is using to sign the SLO request.</li>
            <li>Click <span class="uicontrol">Next</span>.</li>
            <li>Click <span class="uicontrol">Finish</span>.
</li>
        </ol>
        <p>Finally, you need to retrieve the SLO details needed by your SP application:</p>
        <ol>
            <li>In the <span class="uicontrol">Sign On</span> settings tab, click <span class="uicontrol">View SAML setup instructions</span>.</li>
            <li>The page that appears shows the <span class="uicontrol">Identity Provider Single Logout URL</span>. Copy this URL and add it into the configuration settings back in your SP application.</li>
            <li>To test your SLO flow, sign in to your SP application using the Okta integration and then use the appropriate sign out method from within the SP&#160;application. The browser should sign you out of both your SP application and Okta.</li>
        </ol>
        <h2 MadCap:conditions="MultiProdPublish.OIE"><a name="front-channel-sso-saml"></a>Enable SLO for SAML integrations (with front-channel option)</h2>
        <MadCap:snippetBlock src="../../Resources/Snippets/ea-featmgr.flsnp" MadCap:conditions="MultiProdPublish.OIE" />
        <p MadCap:conditions="MultiProdPublish.OIE">The SAML SLO configuration provides two options:</p>
        <ul>
            <li>
                <p MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">SLO initiation</span>, which allows an SP application to log out of Okta and any other open apps that support SLO</p>
            </li>
            <li>
                <p MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">SLO participation</span>, which allows the SP&#160;application to be logged out automatically when other open applications initiate SLO, using front-channel HTTP requests</p>
                <div class="noteOkta">
                    <p class="noteContent" MadCap:conditions="MultiProdPublish.OIE">Too many apps involved in a front-channel SLO transaction can exceed response header limits set by server software such as NGINX. In this case, you may need to update the default server limits or reduce the number of apps configured for front-channel SLO. See <a href="https://support.okta.com/help/s/article/Enhanced-Content-Security-Policy-CSP-Headers-and-Issues-with-AWS-API-Gateway?language=en_US">Okta Knowledge Base</a>.</p>
                </div>
            </li>
            <p MadCap:conditions="MultiProdPublish.OIE">For more information, see <a href="https://developer.okta.com/docs/guides/single-logout/main/">Configure Single Logout</a>.</p>
        </ul>
        <p MadCap:conditions="MultiProdPublish.OIE">You can choose either or both options in the SAML Application Integration Wizard.</p>
        <ol>
            <li MadCap:conditions="MultiProdPublish.OIE">
                <MadCap:snippetText src="../../Resources/Snippets/task steps/Applications_Applications.flsnp" />
            </li>
            <li MadCap:conditions="MultiProdPublish.OIE">Click the SAML application where you want to add SLO.</li>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">In the <span class="uicontrol">General</span> settings tab, on the <span class="uicontrol">SAML Settings</span> panel, click <span class="uicontrol">Edit</span>.</li>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">In the SAML configuration wizard, click <span class="uicontrol">Next</span>.</li>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">If a <span class="uicontrol">Signature Certificate</span> isn't already present, click <span class="uicontrol">Browse files</span> to upload a certificate. </li>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">In the <span class="wintitle">Logout</span> section, select the checkboxes for either <span class="uicontrol">SLO initiation</span> or <span class="uicontrol">SLO participation</span>, or both. <ul><li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">For <span class="uicontrol">SLO&#160;initiation</span> enter the following information:<ul><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">Response URL</span> — the URL for the SLO return. This is a URL on the service provider where Okta sends its sign out response (as a POST operation). If the SP doesn't have a specific SLO URL, the main SP URL can be used.</li><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">SP Issuer</span> — the identifier for the application. This can be an ACS URL or the SP Entity ID. This value is also included in the metadata sent in the SLO request from the SP application.</li></ul></li><li MadCap:conditions="MultiProdPublish.OIE">For SLO participation enter the following information:<ul><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">Request URL</span> — The location where Okta sends the logout request for this app.</li><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">Request binding</span> — Post or Redirect.</li><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">User session details</span> — Optional. Allows you to restrict the SLO to specific users, based on session information. </li></ul></li></ul></li>
            <li MadCap:conditions="MultiProdPublish.OIE">Click <span class="uicontrol">Next</span>.</li>
            <li MadCap:conditions="MultiProdPublish.OIE">Click <span class="uicontrol">Finish</span>.
</li>
        </ol>
        <p MadCap:conditions="MultiProdPublish.OIE">Finally, you need to retrieve the SLO IdP details needed by your SP app. In the <span class="uicontrol">Sign On</span> settings tab, click <span class="uicontrol">View SAML setup instructions</span>.</p>
        <ul>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">If you configured <span class="uicontrol">SLO&#160;initiation</span>, copy the <span class="uicontrol">Identity Provider Single Logout URL</span>.</li>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">If you configured <span class="uicontrol">SLO&#160;participation</span>, copy the <span class="uicontrol">Identity Provider Single Logout Callback URL</span>.</li>
        </ul>
        <p MadCap:conditions="MultiProdPublish.OIE">You can verify the URLs in your  app configuration on the <span class="uicontrol">Sign On</span> tab under <span class="uicontrol">More details</span> in the SAML 2.0 section.</p>
        <h2><a name="SLO-for-OIDC"></a>Enable SLO for OIDC&#160;integrations</h2>
        <p>For OpenID&#160;Connect (OIDC)&#160;integrations, the SP&#160;application must be configured to send an SLO&#160;request to Okta as a GET request. The application should redirect to this Okta endpoint:</p><span class="code">GET&#160;https://{baseUrl}/logout?id_token_hint=${id_token}&amp;post_logout_redirect_uri=${post_logout_redirect_uri}&amp;state=${state}</span>
        <p>Where:</p>
        <ul>
            <li><span class="varname">baseURL</span>&#160;is the URL&#160;for your Okta org.</li>
            <li><span class="varname">id_token</span> is the OIDC token issued by Okta during sign on.</li>
            <li>Optional. The <span class="varname">post_logout_redirect_uri</span> is the <span class="uicontrol">Logout redirect URI</span> where Okta redirects the user after the SLO operation. This URI must be  listed in the <span class="uicontrol">Logout redirect URIs</span> configuration in the <span class="uicontrol">General Settings</span> for your Okta integration.</li>
            <li>Optional. The <span class="varname">state</span> is any string to be added as parameter upon redirect to the SLO URI.
            </li>
        </ul>
        <p>After this request is processed, the <span class="varname">id_token</span> is invalidated and the user is signed out from Okta.</p>
        <p>For more details on the GET request to the API, see the <a href="https://developer.okta.com/docs/reference/api/oidc/" target="_blank">OpenID Connect &amp; OAuth 2.0</a> API reference.</p>
        <p>For application developers, language-specific instructions are also available in our <a href="https://developer.okta.com/docs/guides/sign-users-out/android/before-you-begin/" target="_blank">Sign users out</a> developer guide.</p>
        <p>Finally, you need to add the Logout redirect URIs to your Okta integration:</p>
        <ol>
            <li>
                <MadCap:snippetText src="../../Resources/Snippets/task steps/Applications_Applications.flsnp" />
            </li>
            <li>Click the OIDC application where you want to add SLO.</li>
            <li style="font-weight: normal;">In the <span class="uicontrol">General</span> settings tab, click <span class="uicontrol">Edit</span>.</li>
            <li style="font-weight: normal;">Beside the <span class="uicontrol">Logout redirect URIs</span>, click <span class="uicontrol">+ Add URI</span> and enter the <span class="url">post_logout_redirect_uri</span>. </li>
            <li style="font-weight: normal;" MadCap:conditions="MultiProdPublish.OIE">Optional. In the <span class="wintitle">Logout</span> section, select <span class="uicontrol">Allow the app to participate in single logout</span>.<MadCap:snippetBlock src="../../Resources/Snippets/ea-featmgr.flsnp" MadCap:conditions="MultiProdPublish.OIE" /><p MadCap:conditions="MultiProdPublish.OIE">This feature is not supported for native apps. For more information, see <a href="https://developer.okta.com/docs/guides/single-logout/main/">Configure Single Logout</a>.</p><div class="noteOkta"><p class="noteContent" MadCap:conditions="MultiProdPublish.OIE">Too many apps involved in a front-channel SLO transaction can exceed response header limits set by server software such as NGINX. In this case, you may need to update the default server limits if possible or reduce the number of apps configured for front-channel SLO. See <a href="https://support.okta.com/help/s/article/Enhanced-Content-Security-Policy-CSP-Headers-and-Issues-with-AWS-API-Gateway?language=en_US">Okta Knowledge Base</a>.</p></div><p MadCap:conditions="MultiProdPublish.OIE">Enter the following information:</p><ul><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">Request URL</span> — The location where Okta sends the logout request for this app.</li><li MadCap:conditions="MultiProdPublish.OIE"><span class="uicontrol">User session details</span> — Optional. Allows you to restrict the SLO to specific users, based on session information. </li></ul></li>
            <li style="font-weight: normal;">Click <span class="uicontrol">Save</span>.</li>
            <li>To test your SLO flow, sign in to your SP application using the Okta integration, and then use the appropriate sign out method from within the SP application. The browser should sign you out of both your SP application and Okta.</li>
        </ol>
        <h2><a name="Enable_front_channel"></a>
        </h2>
    </body>
</html>